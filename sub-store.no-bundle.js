(()=>{var t$=Object.create;var wA=Object.defineProperty;var r$=Object.getOwnPropertyDescriptor;var n$=Object.getOwnPropertyNames;var i$=Object.getPrototypeOf,s$=Object.prototype.hasOwnProperty;var ko=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var ce=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var a$=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of n$(t))!s$.call(e,i)&&i!==r&&wA(e,i,{get:()=>t[i],enumerable:!(n=r$(t,i))||n.enumerable});return e};var Yr=(e,t,r)=>(r=e!=null?t$(i$(e)):{},a$(t||!e||!e.__esModule?wA(r,"default",{value:e,enumerable:!0}):r,e));var AA=ce(EA=>{"use strict";(function(e){function t(){}function r(){}var n=String.fromCharCode,i={}.toString,a=i.call(e.SharedArrayBuffer),s=i(),u=e.Uint8Array,c=u||Array,f=u?ArrayBuffer:c,h=f.isView||function(w){return w&&"length"in w},g=i.call(f.prototype);f=r.prototype;var p=e.TextEncoder,d=new(u?Uint16Array:c)(32);t.prototype.decode=function(w){if(!h(w)){var v=i.call(w);if(v!==g&&v!==a&&v!==s)throw TypeError("Failed to execute 'decode' on 'TextDecoder': The provided value is not of type '(ArrayBuffer or ArrayBufferView)'");w=u?new c(w):w||[]}for(var b=v="",m=0,y=w.length|0,D=y-32|0,C,F,U=0,k=0,S,B=0,T=-1;m<y;){for(C=m<=D?32:y-m|0;B<C;m=m+1|0,B=B+1|0){switch(F=w[m]&255,F>>4){case 15:if(S=w[m=m+1|0]&255,S>>6!==2||247<F){m=m-1|0;break}U=(F&7)<<6|S&63,k=5,F=256;case 14:S=w[m=m+1|0]&255,U<<=6,U|=(F&15)<<6|S&63,k=S>>6===2?k+4|0:24,F=F+256&768;case 13:case 12:S=w[m=m+1|0]&255,U<<=6,U|=(F&31)<<6|S&63,k=k+7|0,m<y&&S>>6===2&&U>>k&&1114112>U?(F=U,U=U-65536|0,0<=U&&(T=(U>>10)+55296|0,F=(U&1023)+56320|0,31>B?(d[B]=T,B=B+1|0,T=-1):(S=T,T=F,F=S))):(F>>=8,m=m-F-1|0,F=65533),U=k=0,C=m<=D?32:y-m|0;default:d[B]=F;continue;case 11:case 10:case 9:case 8:}d[B]=65533}if(b+=n(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],d[8],d[9],d[10],d[11],d[12],d[13],d[14],d[15],d[16],d[17],d[18],d[19],d[20],d[21],d[22],d[23],d[24],d[25],d[26],d[27],d[28],d[29],d[30],d[31]),32>B&&(b=b.slice(0,B-32|0)),m<y){if(d[0]=T,B=~T>>>31,T=-1,b.length<v.length)continue}else T!==-1&&(b+=n(T));v+=b,b=""}return v},f.encode=function(w){w=w===void 0?"":""+w;var v=w.length|0,b=new c((v<<1)+8|0),m,y=0,D=!u;for(m=0;m<v;m=m+1|0,y=y+1|0){var C=w.charCodeAt(m)|0;if(127>=C)b[y]=C;else{if(2047>=C)b[y]=192|C>>6;else{e:{if(55296<=C)if(56319>=C){var F=w.charCodeAt(m=m+1|0)|0;if(56320<=F&&57343>=F){if(C=(C<<10)+F-56613888|0,65535<C){b[y]=240|C>>18,b[y=y+1|0]=128|C>>12&63,b[y=y+1|0]=128|C>>6&63,b[y=y+1|0]=128|C&63;continue}break e}C=65533}else 57343>=C&&(C=65533);!D&&m<<1<y&&m<<1<(y-7|0)&&(D=!0,F=new c(3*v),F.set(b),b=F)}b[y]=224|C>>12,b[y=y+1|0]=128|C>>6&63}b[y=y+1|0]=128|C&63}}return u?b.subarray(0,y):b.slice(0,y)},p||(e.TextDecoder=t,e.TextEncoder=r)})(typeof global>"u"?typeof self>"u"?EA:self:global)});var Sf=ce((zc,Ff)=>{(function(){var e,t="4.17.21",r=200,n="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",i="Expected a function",a="Invalid `variable` option passed into `_.template`",s="__lodash_hash_undefined__",u=500,c="__lodash_placeholder__",f=1,h=2,g=4,p=1,d=2,w=1,v=2,b=4,m=8,y=16,D=32,C=64,F=128,U=256,k=512,S=30,B="...",T=800,P=16,j=1,Y=2,M=3,z=1/0,W=9007199254740991,ie=17976931348623157e292,Ce=NaN,Fe=4294967295,xe=Fe-1,it=Fe>>>1,nt=[["ary",F],["bind",w],["bindKey",v],["curry",m],["curryRight",y],["flip",k],["partial",D],["partialRight",C],["rearg",U]],dt="[object Arguments]",pt="[object Array]",wn="[object AsyncFunction]",hr="[object Boolean]",St="[object Date]",Br="[object DOMException]",gr="[object Error]",vt="[object Function]",tr="[object GeneratorFunction]",st="[object Map]",Ge="[object Number]",mr="[object Null]",qe="[object Object]",Ht="[object Promise]",En="[object Proxy]",cr="[object RegExp]",rr="[object Set]",yt="[object String]",Vr="[object Symbol]",ki="[object Undefined]",An="[object WeakMap]",$t="[object WeakSet]",He="[object ArrayBuffer]",De="[object DataView]",$r="[object Float32Array]",yn="[object Float64Array]",at="[object Int8Array]",Na="[object Int16Array]",bn="[object Int32Array]",ge="[object Uint8Array]",Ks="[object Uint8ClampedArray]",Nt="[object Uint16Array]",on="[object Uint32Array]",Fs=/\b__p \+= '';/g,Bu=/\b(__p \+=) '' \+/g,zs=/(__e\(.*?\)|\b__t\)) \+\n'';/g,$u=/&(?:amp|lt|gt|quot|#39);/g,Gs=/[&<>"']/g,Ss=RegExp($u.source),Mt=RegExp(Gs.source),pi=/<%-([\s\S]+?)%>/g,Ru=/<%([\s\S]+?)%>/g,xu=/<%=([\s\S]+?)%>/g,Pu=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ys=/^\w*$/,vo=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ws=/[\\^$.*+?()[\]{}|]/g,wo=RegExp(Ws.source),ka=/^\s+/,re=/\s/,fe=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ue=/\{\n\/\* \[wrapped with (.+)\] \*/,Oe=/,? & /,ze=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ut=/[()=,{}\[\]\/\s]/,gt=/\\(\\)?/g,Ur=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Yt=/\w*$/,gi=/^[-+]0x[0-9a-f]+$/i,ss=/^0b[01]+$/i,_n=/^\[object .+?Constructor\]$/,Nn=/^0o[0-7]+$/i,Rr=/^(?:0|[1-9]\d*)$/,Cn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,en=/($^)/,Eo=/['\n\r\u2028\u2029\\]/g,Xs="\\ud800-\\udfff",Jn="\\u0300-\\u036f",Ut="\\ufe20-\\ufe2f",xr="\\u20d0-\\u20ff",et=Jn+Ut+xr,vr="\\u2700-\\u27bf",cn="a-z\\xdf-\\xf6\\xf8-\\xff",wr="\\xac\\xb1\\xd7\\xf7",Wt="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Zn="\\u2000-\\u206f",mi=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",vi="A-Z\\xc0-\\xd6\\xd8-\\xde",Qn="\\ufe0e\\ufe0f",Kr=wr+Wt+Zn+mi,yr="['\u2019]",ef="["+Xs+"]",Ao="["+Kr+"]",ln="["+et+"]",yo="\\d+",Ac="["+vr+"]",yc="["+cn+"]",bo="[^"+Xs+Kr+yo+vr+cn+vi+"]",Js="\\ud83c[\\udffb-\\udfff]",_o="(?:"+ln+"|"+Js+")",bc="[^"+Xs+"]",Co="(?:\\ud83c[\\udde6-\\uddff]){2}",Do="[\\ud800-\\udbff][\\udc00-\\udfff]",ei="["+vi+"]",O="\\u200d",L="(?:"+yc+"|"+bo+")",K="(?:"+ei+"|"+bo+")",Q="(?:"+yr+"(?:d|ll|m|re|s|t|ve))?",ve="(?:"+yr+"(?:D|LL|M|RE|S|T|VE))?",Ae=_o+"?",Ie="["+Qn+"]?",Pe="(?:"+O+"(?:"+[bc,Co,Do].join("|")+")"+Ie+Ae+")*",nr="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Pr="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Dn=Ie+Ae+Pe,Fn="(?:"+[Ac,Co,Do].join("|")+")"+Dn,Li="(?:"+[bc+ln+"?",ln,Co,Do,ef].join("|")+")",Ou=RegExp(yr,"g"),ti=RegExp(ln,"g"),Sn=RegExp(Js+"(?="+Js+")|"+Li+Dn,"g"),Tu=RegExp([ei+"?"+yc+"+"+Q+"(?="+[Ao,ei,"$"].join("|")+")",K+"+"+ve+"(?="+[Ao,ei+L,"$"].join("|")+")",ei+"?"+L+"+"+Q,ei+"+"+ve,Pr,nr,yo,Fn].join("|"),"g"),as=RegExp("["+O+Xs+et+Qn+"]"),Fo=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Zp=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Qp=-1,lr={};lr[$r]=lr[yn]=lr[at]=lr[Na]=lr[bn]=lr[ge]=lr[Ks]=lr[Nt]=lr[on]=!0,lr[dt]=lr[pt]=lr[He]=lr[hr]=lr[De]=lr[St]=lr[gr]=lr[vt]=lr[st]=lr[Ge]=lr[qe]=lr[cr]=lr[rr]=lr[yt]=lr[An]=!1;var ar={};ar[dt]=ar[pt]=ar[He]=ar[De]=ar[hr]=ar[St]=ar[$r]=ar[yn]=ar[at]=ar[Na]=ar[bn]=ar[st]=ar[Ge]=ar[qe]=ar[cr]=ar[rr]=ar[yt]=ar[Vr]=ar[ge]=ar[Ks]=ar[Nt]=ar[on]=!0,ar[gr]=ar[vt]=ar[An]=!1;var e1={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},t1={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},r1={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},n1={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},i1=parseFloat,s1=parseInt,zh=typeof global=="object"&&global&&global.Object===Object&&global,a1=typeof self=="object"&&self&&self.Object===Object&&self,zr=zh||a1||Function("return this")(),tf=typeof zc=="object"&&zc&&!zc.nodeType&&zc,La=tf&&typeof Ff=="object"&&Ff&&!Ff.nodeType&&Ff,Gh=La&&La.exports===tf,rf=Gh&&zh.process,wi=function(){try{var ne=La&&La.require&&La.require("util").types;return ne||rf&&rf.binding&&rf.binding("util")}catch{}}(),Yh=wi&&wi.isArrayBuffer,Wh=wi&&wi.isDate,Xh=wi&&wi.isMap,Jh=wi&&wi.isRegExp,Zh=wi&&wi.isSet,Qh=wi&&wi.isTypedArray;function ri(ne,he,oe){switch(oe.length){case 0:return ne.call(he);case 1:return ne.call(he,oe[0]);case 2:return ne.call(he,oe[0],oe[1]);case 3:return ne.call(he,oe[0],oe[1],oe[2])}return ne.apply(he,oe)}function u1(ne,he,oe,Ne){for(var tt=-1,Rt=ne==null?0:ne.length;++tt<Rt;){var Dr=ne[tt];he(Ne,Dr,oe(Dr),ne)}return Ne}function Ei(ne,he){for(var oe=-1,Ne=ne==null?0:ne.length;++oe<Ne&&he(ne[oe],oe,ne)!==!1;);return ne}function x(ne,he){for(var oe=ne==null?0:ne.length;oe--&&he(ne[oe],oe,ne)!==!1;);return ne}function ot(ne,he){for(var oe=-1,Ne=ne==null?0:ne.length;++oe<Ne;)if(!he(ne[oe],oe,ne))return!1;return!0}function Ui(ne,he){for(var oe=-1,Ne=ne==null?0:ne.length,tt=0,Rt=[];++oe<Ne;){var Dr=ne[oe];he(Dr,oe,ne)&&(Rt[tt++]=Dr)}return Rt}function ni(ne,he){var oe=ne==null?0:ne.length;return!!oe&&Nu(ne,he,0)>-1}function So(ne,he,oe){for(var Ne=-1,tt=ne==null?0:ne.length;++Ne<tt;)if(oe(he,ne[Ne]))return!0;return!1}function te(ne,he){for(var oe=-1,Ne=ne==null?0:ne.length,tt=Array(Ne);++oe<Ne;)tt[oe]=he(ne[oe],oe,ne);return tt}function ji(ne,he){for(var oe=-1,Ne=he.length,tt=ne.length;++oe<Ne;)ne[tt+oe]=he[oe];return ne}function nf(ne,he,oe,Ne){var tt=-1,Rt=ne==null?0:ne.length;for(Ne&&Rt&&(oe=ne[++tt]);++tt<Rt;)oe=he(oe,ne[tt],tt,ne);return oe}function Pw(ne,he,oe,Ne){var tt=ne==null?0:ne.length;for(Ne&&tt&&(oe=ne[--tt]);tt--;)oe=he(oe,ne[tt],tt,ne);return oe}function ed(ne,he){for(var oe=-1,Ne=ne==null?0:ne.length;++oe<Ne;)if(he(ne[oe],oe,ne))return!0;return!1}var Cr=Ua("length");function Ow(ne){return ne.split("")}function sf(ne){return ne.match(ze)||[]}function Ye(ne,he,oe){var Ne;return oe(ne,function(tt,Rt,Dr){if(he(tt,Rt,Dr))return Ne=Rt,!1}),Ne}function Gr(ne,he,oe,Ne){for(var tt=ne.length,Rt=oe+(Ne?1:-1);Ne?Rt--:++Rt<tt;)if(he(ne[Rt],Rt,ne))return Rt;return-1}function Nu(ne,he,oe){return he===he?ud(ne,he,oe):Gr(ne,us,oe)}function o1(ne,he,oe,Ne){for(var tt=oe-1,Rt=ne.length;++tt<Rt;)if(Ne(ne[tt],he))return tt;return-1}function us(ne){return ne!==ne}function af(ne,he){var oe=ne==null?0:ne.length;return oe?_c(ne,he)/oe:Ce}function Ua(ne){return function(he){return he==null?e:he[ne]}}function me(ne){return function(he){return ne==null?e:ne[he]}}function td(ne,he,oe,Ne,tt){return tt(ne,function(Rt,Dr,ir){oe=Ne?(Ne=!1,Rt):he(oe,Rt,Dr,ir)}),oe}function rd(ne,he){var oe=ne.length;for(ne.sort(he);oe--;)ne[oe]=ne[oe].value;return ne}function _c(ne,he){for(var oe,Ne=-1,tt=ne.length;++Ne<tt;){var Rt=he(ne[Ne]);Rt!==e&&(oe=oe===e?Rt:oe+Rt)}return oe}function uf(ne,he){for(var oe=-1,Ne=Array(ne);++oe<ne;)Ne[oe]=he(oe);return Ne}function c1(ne,he){return te(he,function(oe){return[oe,ne[oe]]})}function of(ne){return ne&&ne.slice(0,Fc(ne)+1).replace(ka,"")}function kn(ne){return function(he){return ne(he)}}function Io(ne,he){return te(he,function(oe){return ne[oe]})}function Bo(ne,he){return ne.has(he)}function Cc(ne,he){for(var oe=-1,Ne=ne.length;++oe<Ne&&Nu(he,ne[oe],0)>-1;);return oe}function nd(ne,he){for(var oe=ne.length;oe--&&Nu(he,ne[oe],0)>-1;);return oe}function sd(ne,he){for(var oe=ne.length,Ne=0;oe--;)ne[oe]===he&&++Ne;return Ne}var cf=me(e1),l1=me(t1);function ad(ne){return"\\"+n1[ne]}function f1(ne,he){return ne==null?e:ne[he]}function ja(ne){return as.test(ne)}function h1(ne){return Fo.test(ne)}function d1(ne){for(var he,oe=[];!(he=ne.next()).done;)oe.push(he.value);return oe}function lf(ne){var he=-1,oe=Array(ne.size);return ne.forEach(function(Ne,tt){oe[++he]=[tt,Ne]}),oe}function In(ne,he){return function(oe){return ne(he(oe))}}function Hi(ne,he){for(var oe=-1,Ne=ne.length,tt=0,Rt=[];++oe<Ne;){var Dr=ne[oe];(Dr===he||Dr===c)&&(ne[oe]=c,Rt[tt++]=oe)}return Rt}function Mi(ne){var he=-1,oe=Array(ne.size);return ne.forEach(function(Ne){oe[++he]=Ne}),oe}function Dc(ne){var he=-1,oe=Array(ne.size);return ne.forEach(function(Ne){oe[++he]=[Ne,Ne]}),oe}function ud(ne,he,oe){for(var Ne=oe-1,tt=ne.length;++Ne<tt;)if(ne[Ne]===he)return Ne;return-1}function p1(ne,he,oe){for(var Ne=oe+1;Ne--;)if(ne[Ne]===he)return Ne;return Ne}function Ha(ne){return ja(ne)?cd(ne):Cr(ne)}function Ai(ne){return ja(ne)?g1(ne):Ow(ne)}function Fc(ne){for(var he=ne.length;he--&&re.test(ne.charAt(he)););return he}var od=me(r1);function cd(ne){for(var he=Sn.lastIndex=0;Sn.test(ne);)++he;return he}function g1(ne){return ne.match(Sn)||[]}function m1(ne){return ne.match(Tu)||[]}var v1=function ne(he){he=he==null?zr:os.defaults(zr.Object(),he,os.pick(zr,Zp));var oe=he.Array,Ne=he.Date,tt=he.Error,Rt=he.Function,Dr=he.Math,ir=he.Object,Sc=he.RegExp,w1=he.String,yi=he.TypeError,Ic=oe.prototype,ld=Rt.prototype,Ma=ir.prototype,Is=he["__core-js_shared__"],Bc=ld.toString,kt=Ma.hasOwnProperty,E1=0,$c=function(){var o=/[^.]+$/.exec(Is&&Is.keys&&Is.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}(),Rc=Ma.toString,A1=Bc.call(ir),y1=zr._,b1=Sc("^"+Bc.call(kt).replace(Ws,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),xc=Gh?he.Buffer:e,Zs=he.Symbol,Pc=he.Uint8Array,fd=xc?xc.allocUnsafe:e,Oc=In(ir.getPrototypeOf,ir),hd=ir.create,dd=Ma.propertyIsEnumerable,Vt=Ic.splice,pd=Zs?Zs.isConcatSpreadable:e,qa=Zs?Zs.iterator:e,Va=Zs?Zs.toStringTag:e,Tc=function(){try{var o=Oo(ir,"defineProperty");return o({},"",{}),o}catch{}}(),_=he.clearTimeout!==zr.clearTimeout&&he.clearTimeout,H=Ne&&Ne.now!==zr.Date.now&&Ne.now,J=he.setTimeout!==zr.setTimeout&&he.setTimeout,G=Dr.ceil,ae=Dr.floor,le=ir.getOwnPropertySymbols,sr=xc?xc.isBuffer:e,Or=he.isFinite,iS=Ic.join,sS=In(ir.keys,ir),tn=Dr.max,Ln=Dr.min,aS=Ne.now,uS=he.parseInt,Tw=Dr.random,oS=Ic.reverse,_1=Oo(he,"DataView"),ff=Oo(he,"Map"),C1=Oo(he,"Promise"),Nc=Oo(he,"Set"),hf=Oo(he,"WeakMap"),df=Oo(ir,"create"),gd=hf&&new hf,kc={},cS=To(_1),lS=To(ff),fS=To(C1),hS=To(Nc),dS=To(hf),md=Zs?Zs.prototype:e,pf=md?md.valueOf:e,Nw=md?md.toString:e;function q(o){if(Tr(o)&&!lt(o)&&!(o instanceof It)){if(o instanceof cs)return o;if(kt.call(o,"__wrapped__"))return kE(o)}return new cs(o)}var Lc=function(){function o(){}return function(l){if(!Fr(l))return{};if(hd)return hd(l);o.prototype=l;var A=new o;return o.prototype=e,A}}();function vd(){}function cs(o,l){this.__wrapped__=o,this.__actions__=[],this.__chain__=!!l,this.__index__=0,this.__values__=e}q.templateSettings={escape:pi,evaluate:Ru,interpolate:xu,variable:"",imports:{_:q}},q.prototype=vd.prototype,q.prototype.constructor=q,cs.prototype=Lc(vd.prototype),cs.prototype.constructor=cs;function It(o){this.__wrapped__=o,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Fe,this.__views__=[]}function pS(){var o=new It(this.__wrapped__);return o.__actions__=bi(this.__actions__),o.__dir__=this.__dir__,o.__filtered__=this.__filtered__,o.__iteratees__=bi(this.__iteratees__),o.__takeCount__=this.__takeCount__,o.__views__=bi(this.__views__),o}function gS(){if(this.__filtered__){var o=new It(this);o.__dir__=-1,o.__filtered__=!0}else o=this.clone(),o.__dir__*=-1;return o}function mS(){var o=this.__wrapped__.value(),l=this.__dir__,A=lt(o),I=l<0,N=A?o.length:0,V=I5(0,N,this.__views__),X=V.start,Z=V.end,se=Z-X,we=I?Z:X-1,Ee=this.__iteratees__,ye=Ee.length,Be=0,Me=Ln(se,this.__takeCount__);if(!A||!I&&N==se&&Me==se)return aE(o,this.__actions__);var Ze=[];e:for(;se--&&Be<Me;){we+=l;for(var Et=-1,Qe=o[we];++Et<ye;){var Dt=Ee[Et],xt=Dt.iteratee,Ki=Dt.type,ai=xt(Qe);if(Ki==Y)Qe=ai;else if(!ai){if(Ki==j)continue e;break e}}Ze[Be++]=Qe}return Ze}It.prototype=Lc(vd.prototype),It.prototype.constructor=It;function $o(o){var l=-1,A=o==null?0:o.length;for(this.clear();++l<A;){var I=o[l];this.set(I[0],I[1])}}function vS(){this.__data__=df?df(null):{},this.size=0}function wS(o){var l=this.has(o)&&delete this.__data__[o];return this.size-=l?1:0,l}function ES(o){var l=this.__data__;if(df){var A=l[o];return A===s?e:A}return kt.call(l,o)?l[o]:e}function AS(o){var l=this.__data__;return df?l[o]!==e:kt.call(l,o)}function yS(o,l){var A=this.__data__;return this.size+=this.has(o)?0:1,A[o]=df&&l===e?s:l,this}$o.prototype.clear=vS,$o.prototype.delete=wS,$o.prototype.get=ES,$o.prototype.has=AS,$o.prototype.set=yS;function Ka(o){var l=-1,A=o==null?0:o.length;for(this.clear();++l<A;){var I=o[l];this.set(I[0],I[1])}}function bS(){this.__data__=[],this.size=0}function _S(o){var l=this.__data__,A=wd(l,o);if(A<0)return!1;var I=l.length-1;return A==I?l.pop():Vt.call(l,A,1),--this.size,!0}function CS(o){var l=this.__data__,A=wd(l,o);return A<0?e:l[A][1]}function DS(o){return wd(this.__data__,o)>-1}function FS(o,l){var A=this.__data__,I=wd(A,o);return I<0?(++this.size,A.push([o,l])):A[I][1]=l,this}Ka.prototype.clear=bS,Ka.prototype.delete=_S,Ka.prototype.get=CS,Ka.prototype.has=DS,Ka.prototype.set=FS;function za(o){var l=-1,A=o==null?0:o.length;for(this.clear();++l<A;){var I=o[l];this.set(I[0],I[1])}}function SS(){this.size=0,this.__data__={hash:new $o,map:new(ff||Ka),string:new $o}}function IS(o){var l=$d(this,o).delete(o);return this.size-=l?1:0,l}function BS(o){return $d(this,o).get(o)}function $S(o){return $d(this,o).has(o)}function RS(o,l){var A=$d(this,o),I=A.size;return A.set(o,l),this.size+=A.size==I?0:1,this}za.prototype.clear=SS,za.prototype.delete=IS,za.prototype.get=BS,za.prototype.has=$S,za.prototype.set=RS;function Ro(o){var l=-1,A=o==null?0:o.length;for(this.__data__=new za;++l<A;)this.add(o[l])}function xS(o){return this.__data__.set(o,s),this}function PS(o){return this.__data__.has(o)}Ro.prototype.add=Ro.prototype.push=xS,Ro.prototype.has=PS;function Bs(o){var l=this.__data__=new Ka(o);this.size=l.size}function OS(){this.__data__=new Ka,this.size=0}function TS(o){var l=this.__data__,A=l.delete(o);return this.size=l.size,A}function NS(o){return this.__data__.get(o)}function kS(o){return this.__data__.has(o)}function LS(o,l){var A=this.__data__;if(A instanceof Ka){var I=A.__data__;if(!ff||I.length<r-1)return I.push([o,l]),this.size=++A.size,this;A=this.__data__=new za(I)}return A.set(o,l),this.size=A.size,this}Bs.prototype.clear=OS,Bs.prototype.delete=TS,Bs.prototype.get=NS,Bs.prototype.has=kS,Bs.prototype.set=LS;function kw(o,l){var A=lt(o),I=!A&&No(o),N=!A&&!I&&Hu(o),V=!A&&!I&&!N&&Mc(o),X=A||I||N||V,Z=X?uf(o.length,w1):[],se=Z.length;for(var we in o)(l||kt.call(o,we))&&!(X&&(we=="length"||N&&(we=="offset"||we=="parent")||V&&(we=="buffer"||we=="byteLength"||we=="byteOffset")||Xa(we,se)))&&Z.push(we);return Z}function Lw(o){var l=o.length;return l?o[T1(0,l-1)]:e}function US(o,l){return Rd(bi(o),xo(l,0,o.length))}function jS(o){return Rd(bi(o))}function D1(o,l,A){(A!==e&&!$s(o[l],A)||A===e&&!(l in o))&&Ga(o,l,A)}function gf(o,l,A){var I=o[l];(!(kt.call(o,l)&&$s(I,A))||A===e&&!(l in o))&&Ga(o,l,A)}function wd(o,l){for(var A=o.length;A--;)if($s(o[A][0],l))return A;return-1}function HS(o,l,A,I){return ku(o,function(N,V,X){l(I,N,A(N),X)}),I}function Uw(o,l){return o&&ea(l,fn(l),o)}function MS(o,l){return o&&ea(l,Ci(l),o)}function Ga(o,l,A){l=="__proto__"&&Tc?Tc(o,l,{configurable:!0,enumerable:!0,value:A,writable:!0}):o[l]=A}function F1(o,l){for(var A=-1,I=l.length,N=oe(I),V=o==null;++A<I;)N[A]=V?e:ag(o,l[A]);return N}function xo(o,l,A){return o===o&&(A!==e&&(o=o<=A?o:A),l!==e&&(o=o>=l?o:l)),o}function ls(o,l,A,I,N,V){var X,Z=l&f,se=l&h,we=l&g;if(A&&(X=N?A(o,I,N,V):A(o)),X!==e)return X;if(!Fr(o))return o;var Ee=lt(o);if(Ee){if(X=$5(o),!Z)return bi(o,X)}else{var ye=Un(o),Be=ye==vt||ye==tr;if(Hu(o))return cE(o,Z);if(ye==qe||ye==dt||Be&&!N){if(X=se||Be?{}:IE(o),!Z)return se?E5(o,MS(X,o)):w5(o,Uw(X,o))}else{if(!ar[ye])return N?o:{};X=R5(o,ye,Z)}}V||(V=new Bs);var Me=V.get(o);if(Me)return Me;V.set(o,X),nA(o)?o.forEach(function(Qe){X.add(ls(Qe,l,A,Qe,o,V))}):tA(o)&&o.forEach(function(Qe,Dt){X.set(Dt,ls(Qe,l,A,Dt,o,V))});var Ze=we?se?z1:K1:se?Ci:fn,Et=Ee?e:Ze(o);return Ei(Et||o,function(Qe,Dt){Et&&(Dt=Qe,Qe=o[Dt]),gf(X,Dt,ls(Qe,l,A,Dt,o,V))}),X}function qS(o){var l=fn(o);return function(A){return jw(A,o,l)}}function jw(o,l,A){var I=A.length;if(o==null)return!I;for(o=ir(o);I--;){var N=A[I],V=l[N],X=o[N];if(X===e&&!(N in o)||!V(X))return!1}return!0}function Hw(o,l,A){if(typeof o!="function")throw new yi(i);return bf(function(){o.apply(e,A)},l)}function mf(o,l,A,I){var N=-1,V=ni,X=!0,Z=o.length,se=[],we=l.length;if(!Z)return se;A&&(l=te(l,kn(A))),I?(V=So,X=!1):l.length>=r&&(V=Bo,X=!1,l=new Ro(l));e:for(;++N<Z;){var Ee=o[N],ye=A==null?Ee:A(Ee);if(Ee=I||Ee!==0?Ee:0,X&&ye===ye){for(var Be=we;Be--;)if(l[Be]===ye)continue e;se.push(Ee)}else V(l,ye,I)||se.push(Ee)}return se}var ku=pE(Qs),Mw=pE(I1,!0);function VS(o,l){var A=!0;return ku(o,function(I,N,V){return A=!!l(I,N,V),A}),A}function Ed(o,l,A){for(var I=-1,N=o.length;++I<N;){var V=o[I],X=l(V);if(X!=null&&(Z===e?X===X&&!Vi(X):A(X,Z)))var Z=X,se=V}return se}function KS(o,l,A,I){var N=o.length;for(A=wt(A),A<0&&(A=-A>N?0:N+A),I=I===e||I>N?N:wt(I),I<0&&(I+=N),I=A>I?0:sA(I);A<I;)o[A++]=l;return o}function qw(o,l){var A=[];return ku(o,function(I,N,V){l(I,N,V)&&A.push(I)}),A}function Bn(o,l,A,I,N){var V=-1,X=o.length;for(A||(A=P5),N||(N=[]);++V<X;){var Z=o[V];l>0&&A(Z)?l>1?Bn(Z,l-1,A,I,N):ji(N,Z):I||(N[N.length]=Z)}return N}var S1=gE(),Vw=gE(!0);function Qs(o,l){return o&&S1(o,l,fn)}function I1(o,l){return o&&Vw(o,l,fn)}function Ad(o,l){return Ui(l,function(A){return Ja(o[A])})}function Po(o,l){l=Uu(l,o);for(var A=0,I=l.length;o!=null&&A<I;)o=o[ta(l[A++])];return A&&A==I?o:e}function Kw(o,l,A){var I=l(o);return lt(o)?I:ji(I,A(o))}function ii(o){return o==null?o===e?ki:mr:Va&&Va in ir(o)?S5(o):j5(o)}function B1(o,l){return o>l}function zS(o,l){return o!=null&&kt.call(o,l)}function GS(o,l){return o!=null&&l in ir(o)}function YS(o,l,A){return o>=Ln(l,A)&&o<tn(l,A)}function $1(o,l,A){for(var I=A?So:ni,N=o[0].length,V=o.length,X=V,Z=oe(V),se=1/0,we=[];X--;){var Ee=o[X];X&&l&&(Ee=te(Ee,kn(l))),se=Ln(Ee.length,se),Z[X]=!A&&(l||N>=120&&Ee.length>=120)?new Ro(X&&Ee):e}Ee=o[0];var ye=-1,Be=Z[0];e:for(;++ye<N&&we.length<se;){var Me=Ee[ye],Ze=l?l(Me):Me;if(Me=A||Me!==0?Me:0,!(Be?Bo(Be,Ze):I(we,Ze,A))){for(X=V;--X;){var Et=Z[X];if(!(Et?Bo(Et,Ze):I(o[X],Ze,A)))continue e}Be&&Be.push(Ze),we.push(Me)}}return we}function WS(o,l,A,I){return Qs(o,function(N,V,X){l(I,A(N),V,X)}),I}function vf(o,l,A){l=Uu(l,o),o=xE(o,l);var I=o==null?o:o[ta(ds(l))];return I==null?e:ri(I,o,A)}function zw(o){return Tr(o)&&ii(o)==dt}function XS(o){return Tr(o)&&ii(o)==He}function JS(o){return Tr(o)&&ii(o)==St}function wf(o,l,A,I,N){return o===l?!0:o==null||l==null||!Tr(o)&&!Tr(l)?o!==o&&l!==l:ZS(o,l,A,I,wf,N)}function ZS(o,l,A,I,N,V){var X=lt(o),Z=lt(l),se=X?pt:Un(o),we=Z?pt:Un(l);se=se==dt?qe:se,we=we==dt?qe:we;var Ee=se==qe,ye=we==qe,Be=se==we;if(Be&&Hu(o)){if(!Hu(l))return!1;X=!0,Ee=!1}if(Be&&!Ee)return V||(V=new Bs),X||Mc(o)?DE(o,l,A,I,N,V):D5(o,l,se,A,I,N,V);if(!(A&p)){var Me=Ee&&kt.call(o,"__wrapped__"),Ze=ye&&kt.call(l,"__wrapped__");if(Me||Ze){var Et=Me?o.value():o,Qe=Ze?l.value():l;return V||(V=new Bs),N(Et,Qe,A,I,V)}}return Be?(V||(V=new Bs),F5(o,l,A,I,N,V)):!1}function QS(o){return Tr(o)&&Un(o)==st}function R1(o,l,A,I){var N=A.length,V=N,X=!I;if(o==null)return!V;for(o=ir(o);N--;){var Z=A[N];if(X&&Z[2]?Z[1]!==o[Z[0]]:!(Z[0]in o))return!1}for(;++N<V;){Z=A[N];var se=Z[0],we=o[se],Ee=Z[1];if(X&&Z[2]){if(we===e&&!(se in o))return!1}else{var ye=new Bs;if(I)var Be=I(we,Ee,se,o,l,ye);if(!(Be===e?wf(Ee,we,p|d,I,ye):Be))return!1}}return!0}function Gw(o){if(!Fr(o)||T5(o))return!1;var l=Ja(o)?b1:_n;return l.test(To(o))}function e5(o){return Tr(o)&&ii(o)==cr}function t5(o){return Tr(o)&&Un(o)==rr}function r5(o){return Tr(o)&&kd(o.length)&&!!lr[ii(o)]}function Yw(o){return typeof o=="function"?o:o==null?Di:typeof o=="object"?lt(o)?Jw(o[0],o[1]):Xw(o):mA(o)}function x1(o){if(!yf(o))return sS(o);var l=[];for(var A in ir(o))kt.call(o,A)&&A!="constructor"&&l.push(A);return l}function n5(o){if(!Fr(o))return U5(o);var l=yf(o),A=[];for(var I in o)I=="constructor"&&(l||!kt.call(o,I))||A.push(I);return A}function P1(o,l){return o<l}function Ww(o,l){var A=-1,I=_i(o)?oe(o.length):[];return ku(o,function(N,V,X){I[++A]=l(N,V,X)}),I}function Xw(o){var l=Y1(o);return l.length==1&&l[0][2]?$E(l[0][0],l[0][1]):function(A){return A===o||R1(A,o,l)}}function Jw(o,l){return X1(o)&&BE(l)?$E(ta(o),l):function(A){var I=ag(A,o);return I===e&&I===l?ug(A,o):wf(l,I,p|d)}}function yd(o,l,A,I,N){o!==l&&S1(l,function(V,X){if(N||(N=new Bs),Fr(V))i5(o,l,X,A,yd,I,N);else{var Z=I?I(Z1(o,X),V,X+"",o,l,N):e;Z===e&&(Z=V),D1(o,X,Z)}},Ci)}function i5(o,l,A,I,N,V,X){var Z=Z1(o,A),se=Z1(l,A),we=X.get(se);if(we){D1(o,A,we);return}var Ee=V?V(Z,se,A+"",o,l,X):e,ye=Ee===e;if(ye){var Be=lt(se),Me=!Be&&Hu(se),Ze=!Be&&!Me&&Mc(se);Ee=se,Be||Me||Ze?lt(Z)?Ee=Z:jr(Z)?Ee=bi(Z):Me?(ye=!1,Ee=cE(se,!0)):Ze?(ye=!1,Ee=lE(se,!0)):Ee=[]:_f(se)||No(se)?(Ee=Z,No(Z)?Ee=aA(Z):(!Fr(Z)||Ja(Z))&&(Ee=IE(se))):ye=!1}ye&&(X.set(se,Ee),N(Ee,se,I,V,X),X.delete(se)),D1(o,A,Ee)}function Zw(o,l){var A=o.length;if(A)return l+=l<0?A:0,Xa(l,A)?o[l]:e}function Qw(o,l,A){l.length?l=te(l,function(V){return lt(V)?function(X){return Po(X,V.length===1?V[0]:V)}:V}):l=[Di];var I=-1;l=te(l,kn(Xe()));var N=Ww(o,function(V,X,Z){var se=te(l,function(we){return we(V)});return{criteria:se,index:++I,value:V}});return rd(N,function(V,X){return v5(V,X,A)})}function s5(o,l){return eE(o,l,function(A,I){return ug(o,I)})}function eE(o,l,A){for(var I=-1,N=l.length,V={};++I<N;){var X=l[I],Z=Po(o,X);A(Z,X)&&Ef(V,Uu(X,o),Z)}return V}function a5(o){return function(l){return Po(l,o)}}function O1(o,l,A,I){var N=I?o1:Nu,V=-1,X=l.length,Z=o;for(o===l&&(l=bi(l)),A&&(Z=te(o,kn(A)));++V<X;)for(var se=0,we=l[V],Ee=A?A(we):we;(se=N(Z,Ee,se,I))>-1;)Z!==o&&Vt.call(Z,se,1),Vt.call(o,se,1);return o}function tE(o,l){for(var A=o?l.length:0,I=A-1;A--;){var N=l[A];if(A==I||N!==V){var V=N;Xa(N)?Vt.call(o,N,1):L1(o,N)}}return o}function T1(o,l){return o+ae(Tw()*(l-o+1))}function u5(o,l,A,I){for(var N=-1,V=tn(G((l-o)/(A||1)),0),X=oe(V);V--;)X[I?V:++N]=o,o+=A;return X}function N1(o,l){var A="";if(!o||l<1||l>W)return A;do l%2&&(A+=o),l=ae(l/2),l&&(o+=o);while(l);return A}function bt(o,l){return Q1(RE(o,l,Di),o+"")}function o5(o){return Lw(qc(o))}function c5(o,l){var A=qc(o);return Rd(A,xo(l,0,A.length))}function Ef(o,l,A,I){if(!Fr(o))return o;l=Uu(l,o);for(var N=-1,V=l.length,X=V-1,Z=o;Z!=null&&++N<V;){var se=ta(l[N]),we=A;if(se==="__proto__"||se==="constructor"||se==="prototype")return o;if(N!=X){var Ee=Z[se];we=I?I(Ee,se,Z):e,we===e&&(we=Fr(Ee)?Ee:Xa(l[N+1])?[]:{})}gf(Z,se,we),Z=Z[se]}return o}var rE=gd?function(o,l){return gd.set(o,l),o}:Di,l5=Tc?function(o,l){return Tc(o,"toString",{configurable:!0,enumerable:!1,value:cg(l),writable:!0})}:Di;function f5(o){return Rd(qc(o))}function hs(o,l,A){var I=-1,N=o.length;l<0&&(l=-l>N?0:N+l),A=A>N?N:A,A<0&&(A+=N),N=l>A?0:A-l>>>0,l>>>=0;for(var V=oe(N);++I<N;)V[I]=o[I+l];return V}function h5(o,l){var A;return ku(o,function(I,N,V){return A=l(I,N,V),!A}),!!A}function bd(o,l,A){var I=0,N=o==null?I:o.length;if(typeof l=="number"&&l===l&&N<=it){for(;I<N;){var V=I+N>>>1,X=o[V];X!==null&&!Vi(X)&&(A?X<=l:X<l)?I=V+1:N=V}return N}return k1(o,l,Di,A)}function k1(o,l,A,I){var N=0,V=o==null?0:o.length;if(V===0)return 0;l=A(l);for(var X=l!==l,Z=l===null,se=Vi(l),we=l===e;N<V;){var Ee=ae((N+V)/2),ye=A(o[Ee]),Be=ye!==e,Me=ye===null,Ze=ye===ye,Et=Vi(ye);if(X)var Qe=I||Ze;else we?Qe=Ze&&(I||Be):Z?Qe=Ze&&Be&&(I||!Me):se?Qe=Ze&&Be&&!Me&&(I||!Et):Me||Et?Qe=!1:Qe=I?ye<=l:ye<l;Qe?N=Ee+1:V=Ee}return Ln(V,xe)}function nE(o,l){for(var A=-1,I=o.length,N=0,V=[];++A<I;){var X=o[A],Z=l?l(X):X;if(!A||!$s(Z,se)){var se=Z;V[N++]=X===0?0:X}}return V}function iE(o){return typeof o=="number"?o:Vi(o)?Ce:+o}function qi(o){if(typeof o=="string")return o;if(lt(o))return te(o,qi)+"";if(Vi(o))return Nw?Nw.call(o):"";var l=o+"";return l=="0"&&1/o==-z?"-0":l}function Lu(o,l,A){var I=-1,N=ni,V=o.length,X=!0,Z=[],se=Z;if(A)X=!1,N=So;else if(V>=r){var we=l?null:_5(o);if(we)return Mi(we);X=!1,N=Bo,se=new Ro}else se=l?[]:Z;e:for(;++I<V;){var Ee=o[I],ye=l?l(Ee):Ee;if(Ee=A||Ee!==0?Ee:0,X&&ye===ye){for(var Be=se.length;Be--;)if(se[Be]===ye)continue e;l&&se.push(ye),Z.push(Ee)}else N(se,ye,A)||(se!==Z&&se.push(ye),Z.push(Ee))}return Z}function L1(o,l){return l=Uu(l,o),o=xE(o,l),o==null||delete o[ta(ds(l))]}function sE(o,l,A,I){return Ef(o,l,A(Po(o,l)),I)}function _d(o,l,A,I){for(var N=o.length,V=I?N:-1;(I?V--:++V<N)&&l(o[V],V,o););return A?hs(o,I?0:V,I?V+1:N):hs(o,I?V+1:0,I?N:V)}function aE(o,l){var A=o;return A instanceof It&&(A=A.value()),nf(l,function(I,N){return N.func.apply(N.thisArg,ji([I],N.args))},A)}function U1(o,l,A){var I=o.length;if(I<2)return I?Lu(o[0]):[];for(var N=-1,V=oe(I);++N<I;)for(var X=o[N],Z=-1;++Z<I;)Z!=N&&(V[N]=mf(V[N]||X,o[Z],l,A));return Lu(Bn(V,1),l,A)}function uE(o,l,A){for(var I=-1,N=o.length,V=l.length,X={};++I<N;){var Z=I<V?l[I]:e;A(X,o[I],Z)}return X}function j1(o){return jr(o)?o:[]}function H1(o){return typeof o=="function"?o:Di}function Uu(o,l){return lt(o)?o:X1(o,l)?[o]:NE(Xt(o))}var d5=bt;function ju(o,l,A){var I=o.length;return A=A===e?I:A,!l&&A>=I?o:hs(o,l,A)}var oE=_||function(o){return zr.clearTimeout(o)};function cE(o,l){if(l)return o.slice();var A=o.length,I=fd?fd(A):new o.constructor(A);return o.copy(I),I}function M1(o){var l=new o.constructor(o.byteLength);return new Pc(l).set(new Pc(o)),l}function p5(o,l){var A=l?M1(o.buffer):o.buffer;return new o.constructor(A,o.byteOffset,o.byteLength)}function g5(o){var l=new o.constructor(o.source,Yt.exec(o));return l.lastIndex=o.lastIndex,l}function m5(o){return pf?ir(pf.call(o)):{}}function lE(o,l){var A=l?M1(o.buffer):o.buffer;return new o.constructor(A,o.byteOffset,o.length)}function fE(o,l){if(o!==l){var A=o!==e,I=o===null,N=o===o,V=Vi(o),X=l!==e,Z=l===null,se=l===l,we=Vi(l);if(!Z&&!we&&!V&&o>l||V&&X&&se&&!Z&&!we||I&&X&&se||!A&&se||!N)return 1;if(!I&&!V&&!we&&o<l||we&&A&&N&&!I&&!V||Z&&A&&N||!X&&N||!se)return-1}return 0}function v5(o,l,A){for(var I=-1,N=o.criteria,V=l.criteria,X=N.length,Z=A.length;++I<X;){var se=fE(N[I],V[I]);if(se){if(I>=Z)return se;var we=A[I];return se*(we=="desc"?-1:1)}}return o.index-l.index}function hE(o,l,A,I){for(var N=-1,V=o.length,X=A.length,Z=-1,se=l.length,we=tn(V-X,0),Ee=oe(se+we),ye=!I;++Z<se;)Ee[Z]=l[Z];for(;++N<X;)(ye||N<V)&&(Ee[A[N]]=o[N]);for(;we--;)Ee[Z++]=o[N++];return Ee}function dE(o,l,A,I){for(var N=-1,V=o.length,X=-1,Z=A.length,se=-1,we=l.length,Ee=tn(V-Z,0),ye=oe(Ee+we),Be=!I;++N<Ee;)ye[N]=o[N];for(var Me=N;++se<we;)ye[Me+se]=l[se];for(;++X<Z;)(Be||N<V)&&(ye[Me+A[X]]=o[N++]);return ye}function bi(o,l){var A=-1,I=o.length;for(l||(l=oe(I));++A<I;)l[A]=o[A];return l}function ea(o,l,A,I){var N=!A;A||(A={});for(var V=-1,X=l.length;++V<X;){var Z=l[V],se=I?I(A[Z],o[Z],Z,A,o):e;se===e&&(se=o[Z]),N?Ga(A,Z,se):gf(A,Z,se)}return A}function w5(o,l){return ea(o,W1(o),l)}function E5(o,l){return ea(o,FE(o),l)}function Cd(o,l){return function(A,I){var N=lt(A)?u1:HS,V=l?l():{};return N(A,o,Xe(I,2),V)}}function Uc(o){return bt(function(l,A){var I=-1,N=A.length,V=N>1?A[N-1]:e,X=N>2?A[2]:e;for(V=o.length>3&&typeof V=="function"?(N--,V):e,X&&si(A[0],A[1],X)&&(V=N<3?e:V,N=1),l=ir(l);++I<N;){var Z=A[I];Z&&o(l,Z,I,V)}return l})}function pE(o,l){return function(A,I){if(A==null)return A;if(!_i(A))return o(A,I);for(var N=A.length,V=l?N:-1,X=ir(A);(l?V--:++V<N)&&I(X[V],V,X)!==!1;);return A}}function gE(o){return function(l,A,I){for(var N=-1,V=ir(l),X=I(l),Z=X.length;Z--;){var se=X[o?Z:++N];if(A(V[se],se,V)===!1)break}return l}}function A5(o,l,A){var I=l&w,N=Af(o);function V(){var X=this&&this!==zr&&this instanceof V?N:o;return X.apply(I?A:this,arguments)}return V}function mE(o){return function(l){l=Xt(l);var A=ja(l)?Ai(l):e,I=A?A[0]:l.charAt(0),N=A?ju(A,1).join(""):l.slice(1);return I[o]()+N}}function jc(o){return function(l){return nf(pA(dA(l).replace(Ou,"")),o,"")}}function Af(o){return function(){var l=arguments;switch(l.length){case 0:return new o;case 1:return new o(l[0]);case 2:return new o(l[0],l[1]);case 3:return new o(l[0],l[1],l[2]);case 4:return new o(l[0],l[1],l[2],l[3]);case 5:return new o(l[0],l[1],l[2],l[3],l[4]);case 6:return new o(l[0],l[1],l[2],l[3],l[4],l[5]);case 7:return new o(l[0],l[1],l[2],l[3],l[4],l[5],l[6])}var A=Lc(o.prototype),I=o.apply(A,l);return Fr(I)?I:A}}function y5(o,l,A){var I=Af(o);function N(){for(var V=arguments.length,X=oe(V),Z=V,se=Hc(N);Z--;)X[Z]=arguments[Z];var we=V<3&&X[0]!==se&&X[V-1]!==se?[]:Hi(X,se);if(V-=we.length,V<A)return yE(o,l,Dd,N.placeholder,e,X,we,e,e,A-V);var Ee=this&&this!==zr&&this instanceof N?I:o;return ri(Ee,this,X)}return N}function vE(o){return function(l,A,I){var N=ir(l);if(!_i(l)){var V=Xe(A,3);l=fn(l),A=function(Z){return V(N[Z],Z,N)}}var X=o(l,A,I);return X>-1?N[V?l[X]:X]:e}}function wE(o){return Wa(function(l){var A=l.length,I=A,N=cs.prototype.thru;for(o&&l.reverse();I--;){var V=l[I];if(typeof V!="function")throw new yi(i);if(N&&!X&&Bd(V)=="wrapper")var X=new cs([],!0)}for(I=X?I:A;++I<A;){V=l[I];var Z=Bd(V),se=Z=="wrapper"?G1(V):e;se&&J1(se[0])&&se[1]==(F|m|D|U)&&!se[4].length&&se[9]==1?X=X[Bd(se[0])].apply(X,se[3]):X=V.length==1&&J1(V)?X[Z]():X.thru(V)}return function(){var we=arguments,Ee=we[0];if(X&&we.length==1&&lt(Ee))return X.plant(Ee).value();for(var ye=0,Be=A?l[ye].apply(this,we):Ee;++ye<A;)Be=l[ye].call(this,Be);return Be}})}function Dd(o,l,A,I,N,V,X,Z,se,we){var Ee=l&F,ye=l&w,Be=l&v,Me=l&(m|y),Ze=l&k,Et=Be?e:Af(o);function Qe(){for(var Dt=arguments.length,xt=oe(Dt),Ki=Dt;Ki--;)xt[Ki]=arguments[Ki];if(Me)var ai=Hc(Qe),zi=sd(xt,ai);if(I&&(xt=hE(xt,I,N,Me)),V&&(xt=dE(xt,V,X,Me)),Dt-=zi,Me&&Dt<we){var Hr=Hi(xt,ai);return yE(o,l,Dd,Qe.placeholder,A,xt,Hr,Z,se,we-Dt)}var Rs=ye?A:this,Qa=Be?Rs[o]:o;return Dt=xt.length,Z?xt=H5(xt,Z):Ze&&Dt>1&&xt.reverse(),Ee&&se<Dt&&(xt.length=se),this&&this!==zr&&this instanceof Qe&&(Qa=Et||Af(Qa)),Qa.apply(Rs,xt)}return Qe}function EE(o,l){return function(A,I){return WS(A,o,l(I),{})}}function Fd(o,l){return function(A,I){var N;if(A===e&&I===e)return l;if(A!==e&&(N=A),I!==e){if(N===e)return I;typeof A=="string"||typeof I=="string"?(A=qi(A),I=qi(I)):(A=iE(A),I=iE(I)),N=o(A,I)}return N}}function q1(o){return Wa(function(l){return l=te(l,kn(Xe())),bt(function(A){var I=this;return o(l,function(N){return ri(N,I,A)})})})}function Sd(o,l){l=l===e?" ":qi(l);var A=l.length;if(A<2)return A?N1(l,o):l;var I=N1(l,G(o/Ha(l)));return ja(l)?ju(Ai(I),0,o).join(""):I.slice(0,o)}function b5(o,l,A,I){var N=l&w,V=Af(o);function X(){for(var Z=-1,se=arguments.length,we=-1,Ee=I.length,ye=oe(Ee+se),Be=this&&this!==zr&&this instanceof X?V:o;++we<Ee;)ye[we]=I[we];for(;se--;)ye[we++]=arguments[++Z];return ri(Be,N?A:this,ye)}return X}function AE(o){return function(l,A,I){return I&&typeof I!="number"&&si(l,A,I)&&(A=I=e),l=Za(l),A===e?(A=l,l=0):A=Za(A),I=I===e?l<A?1:-1:Za(I),u5(l,A,I,o)}}function Id(o){return function(l,A){return typeof l=="string"&&typeof A=="string"||(l=ps(l),A=ps(A)),o(l,A)}}function yE(o,l,A,I,N,V,X,Z,se,we){var Ee=l&m,ye=Ee?X:e,Be=Ee?e:X,Me=Ee?V:e,Ze=Ee?e:V;l|=Ee?D:C,l&=~(Ee?C:D),l&b||(l&=~(w|v));var Et=[o,l,N,Me,ye,Ze,Be,Z,se,we],Qe=A.apply(e,Et);return J1(o)&&PE(Qe,Et),Qe.placeholder=I,OE(Qe,o,l)}function V1(o){var l=Dr[o];return function(A,I){if(A=ps(A),I=I==null?0:Ln(wt(I),292),I&&Or(A)){var N=(Xt(A)+"e").split("e"),V=l(N[0]+"e"+(+N[1]+I));return N=(Xt(V)+"e").split("e"),+(N[0]+"e"+(+N[1]-I))}return l(A)}}var _5=Nc&&1/Mi(new Nc([,-0]))[1]==z?function(o){return new Nc(o)}:hg;function bE(o){return function(l){var A=Un(l);return A==st?lf(l):A==rr?Dc(l):c1(l,o(l))}}function Ya(o,l,A,I,N,V,X,Z){var se=l&v;if(!se&&typeof o!="function")throw new yi(i);var we=I?I.length:0;if(we||(l&=~(D|C),I=N=e),X=X===e?X:tn(wt(X),0),Z=Z===e?Z:wt(Z),we-=N?N.length:0,l&C){var Ee=I,ye=N;I=N=e}var Be=se?e:G1(o),Me=[o,l,A,I,N,Ee,ye,V,X,Z];if(Be&&L5(Me,Be),o=Me[0],l=Me[1],A=Me[2],I=Me[3],N=Me[4],Z=Me[9]=Me[9]===e?se?0:o.length:tn(Me[9]-we,0),!Z&&l&(m|y)&&(l&=~(m|y)),!l||l==w)var Ze=A5(o,l,A);else l==m||l==y?Ze=y5(o,l,Z):(l==D||l==(w|D))&&!N.length?Ze=b5(o,l,A,I):Ze=Dd.apply(e,Me);var Et=Be?rE:PE;return OE(Et(Ze,Me),o,l)}function _E(o,l,A,I){return o===e||$s(o,Ma[A])&&!kt.call(I,A)?l:o}function CE(o,l,A,I,N,V){return Fr(o)&&Fr(l)&&(V.set(l,o),yd(o,l,e,CE,V),V.delete(l)),o}function C5(o){return _f(o)?e:o}function DE(o,l,A,I,N,V){var X=A&p,Z=o.length,se=l.length;if(Z!=se&&!(X&&se>Z))return!1;var we=V.get(o),Ee=V.get(l);if(we&&Ee)return we==l&&Ee==o;var ye=-1,Be=!0,Me=A&d?new Ro:e;for(V.set(o,l),V.set(l,o);++ye<Z;){var Ze=o[ye],Et=l[ye];if(I)var Qe=X?I(Et,Ze,ye,l,o,V):I(Ze,Et,ye,o,l,V);if(Qe!==e){if(Qe)continue;Be=!1;break}if(Me){if(!ed(l,function(Dt,xt){if(!Bo(Me,xt)&&(Ze===Dt||N(Ze,Dt,A,I,V)))return Me.push(xt)})){Be=!1;break}}else if(!(Ze===Et||N(Ze,Et,A,I,V))){Be=!1;break}}return V.delete(o),V.delete(l),Be}function D5(o,l,A,I,N,V,X){switch(A){case De:if(o.byteLength!=l.byteLength||o.byteOffset!=l.byteOffset)return!1;o=o.buffer,l=l.buffer;case He:return!(o.byteLength!=l.byteLength||!V(new Pc(o),new Pc(l)));case hr:case St:case Ge:return $s(+o,+l);case gr:return o.name==l.name&&o.message==l.message;case cr:case yt:return o==l+"";case st:var Z=lf;case rr:var se=I&p;if(Z||(Z=Mi),o.size!=l.size&&!se)return!1;var we=X.get(o);if(we)return we==l;I|=d,X.set(o,l);var Ee=DE(Z(o),Z(l),I,N,V,X);return X.delete(o),Ee;case Vr:if(pf)return pf.call(o)==pf.call(l)}return!1}function F5(o,l,A,I,N,V){var X=A&p,Z=K1(o),se=Z.length,we=K1(l),Ee=we.length;if(se!=Ee&&!X)return!1;for(var ye=se;ye--;){var Be=Z[ye];if(!(X?Be in l:kt.call(l,Be)))return!1}var Me=V.get(o),Ze=V.get(l);if(Me&&Ze)return Me==l&&Ze==o;var Et=!0;V.set(o,l),V.set(l,o);for(var Qe=X;++ye<se;){Be=Z[ye];var Dt=o[Be],xt=l[Be];if(I)var Ki=X?I(xt,Dt,Be,l,o,V):I(Dt,xt,Be,o,l,V);if(!(Ki===e?Dt===xt||N(Dt,xt,A,I,V):Ki)){Et=!1;break}Qe||(Qe=Be=="constructor")}if(Et&&!Qe){var ai=o.constructor,zi=l.constructor;ai!=zi&&"constructor"in o&&"constructor"in l&&!(typeof ai=="function"&&ai instanceof ai&&typeof zi=="function"&&zi instanceof zi)&&(Et=!1)}return V.delete(o),V.delete(l),Et}function Wa(o){return Q1(RE(o,e,jE),o+"")}function K1(o){return Kw(o,fn,W1)}function z1(o){return Kw(o,Ci,FE)}var G1=gd?function(o){return gd.get(o)}:hg;function Bd(o){for(var l=o.name+"",A=kc[l],I=kt.call(kc,l)?A.length:0;I--;){var N=A[I],V=N.func;if(V==null||V==o)return N.name}return l}function Hc(o){var l=kt.call(q,"placeholder")?q:o;return l.placeholder}function Xe(){var o=q.iteratee||lg;return o=o===lg?Yw:o,arguments.length?o(arguments[0],arguments[1]):o}function $d(o,l){var A=o.__data__;return O5(l)?A[typeof l=="string"?"string":"hash"]:A.map}function Y1(o){for(var l=fn(o),A=l.length;A--;){var I=l[A],N=o[I];l[A]=[I,N,BE(N)]}return l}function Oo(o,l){var A=f1(o,l);return Gw(A)?A:e}function S5(o){var l=kt.call(o,Va),A=o[Va];try{o[Va]=e;var I=!0}catch{}var N=Rc.call(o);return I&&(l?o[Va]=A:delete o[Va]),N}var W1=le?function(o){return o==null?[]:(o=ir(o),Ui(le(o),function(l){return dd.call(o,l)}))}:dg,FE=le?function(o){for(var l=[];o;)ji(l,W1(o)),o=Oc(o);return l}:dg,Un=ii;(_1&&Un(new _1(new ArrayBuffer(1)))!=De||ff&&Un(new ff)!=st||C1&&Un(C1.resolve())!=Ht||Nc&&Un(new Nc)!=rr||hf&&Un(new hf)!=An)&&(Un=function(o){var l=ii(o),A=l==qe?o.constructor:e,I=A?To(A):"";if(I)switch(I){case cS:return De;case lS:return st;case fS:return Ht;case hS:return rr;case dS:return An}return l});function I5(o,l,A){for(var I=-1,N=A.length;++I<N;){var V=A[I],X=V.size;switch(V.type){case"drop":o+=X;break;case"dropRight":l-=X;break;case"take":l=Ln(l,o+X);break;case"takeRight":o=tn(o,l-X);break}}return{start:o,end:l}}function B5(o){var l=o.match(Ue);return l?l[1].split(Oe):[]}function SE(o,l,A){l=Uu(l,o);for(var I=-1,N=l.length,V=!1;++I<N;){var X=ta(l[I]);if(!(V=o!=null&&A(o,X)))break;o=o[X]}return V||++I!=N?V:(N=o==null?0:o.length,!!N&&kd(N)&&Xa(X,N)&&(lt(o)||No(o)))}function $5(o){var l=o.length,A=new o.constructor(l);return l&&typeof o[0]=="string"&&kt.call(o,"index")&&(A.index=o.index,A.input=o.input),A}function IE(o){return typeof o.constructor=="function"&&!yf(o)?Lc(Oc(o)):{}}function R5(o,l,A){var I=o.constructor;switch(l){case He:return M1(o);case hr:case St:return new I(+o);case De:return p5(o,A);case $r:case yn:case at:case Na:case bn:case ge:case Ks:case Nt:case on:return lE(o,A);case st:return new I;case Ge:case yt:return new I(o);case cr:return g5(o);case rr:return new I;case Vr:return m5(o)}}function x5(o,l){var A=l.length;if(!A)return o;var I=A-1;return l[I]=(A>1?"& ":"")+l[I],l=l.join(A>2?", ":" "),o.replace(fe,`{
/* [wrapped with `+l+`] */
`)}function P5(o){return lt(o)||No(o)||!!(pd&&o&&o[pd])}function Xa(o,l){var A=typeof o;return l=l??W,!!l&&(A=="number"||A!="symbol"&&Rr.test(o))&&o>-1&&o%1==0&&o<l}function si(o,l,A){if(!Fr(A))return!1;var I=typeof l;return(I=="number"?_i(A)&&Xa(l,A.length):I=="string"&&l in A)?$s(A[l],o):!1}function X1(o,l){if(lt(o))return!1;var A=typeof o;return A=="number"||A=="symbol"||A=="boolean"||o==null||Vi(o)?!0:Ys.test(o)||!Pu.test(o)||l!=null&&o in ir(l)}function O5(o){var l=typeof o;return l=="string"||l=="number"||l=="symbol"||l=="boolean"?o!=="__proto__":o===null}function J1(o){var l=Bd(o),A=q[l];if(typeof A!="function"||!(l in It.prototype))return!1;if(o===A)return!0;var I=G1(A);return!!I&&o===I[0]}function T5(o){return!!$c&&$c in o}var N5=Is?Ja:pg;function yf(o){var l=o&&o.constructor,A=typeof l=="function"&&l.prototype||Ma;return o===A}function BE(o){return o===o&&!Fr(o)}function $E(o,l){return function(A){return A==null?!1:A[o]===l&&(l!==e||o in ir(A))}}function k5(o){var l=Td(o,function(I){return A.size===u&&A.clear(),I}),A=l.cache;return l}function L5(o,l){var A=o[1],I=l[1],N=A|I,V=N<(w|v|F),X=I==F&&A==m||I==F&&A==U&&o[7].length<=l[8]||I==(F|U)&&l[7].length<=l[8]&&A==m;if(!(V||X))return o;I&w&&(o[2]=l[2],N|=A&w?0:b);var Z=l[3];if(Z){var se=o[3];o[3]=se?hE(se,Z,l[4]):Z,o[4]=se?Hi(o[3],c):l[4]}return Z=l[5],Z&&(se=o[5],o[5]=se?dE(se,Z,l[6]):Z,o[6]=se?Hi(o[5],c):l[6]),Z=l[7],Z&&(o[7]=Z),I&F&&(o[8]=o[8]==null?l[8]:Ln(o[8],l[8])),o[9]==null&&(o[9]=l[9]),o[0]=l[0],o[1]=N,o}function U5(o){var l=[];if(o!=null)for(var A in ir(o))l.push(A);return l}function j5(o){return Rc.call(o)}function RE(o,l,A){return l=tn(l===e?o.length-1:l,0),function(){for(var I=arguments,N=-1,V=tn(I.length-l,0),X=oe(V);++N<V;)X[N]=I[l+N];N=-1;for(var Z=oe(l+1);++N<l;)Z[N]=I[N];return Z[l]=A(X),ri(o,this,Z)}}function xE(o,l){return l.length<2?o:Po(o,hs(l,0,-1))}function H5(o,l){for(var A=o.length,I=Ln(l.length,A),N=bi(o);I--;){var V=l[I];o[I]=Xa(V,A)?N[V]:e}return o}function Z1(o,l){if(!(l==="constructor"&&typeof o[l]=="function")&&l!="__proto__")return o[l]}var PE=TE(rE),bf=J||function(o,l){return zr.setTimeout(o,l)},Q1=TE(l5);function OE(o,l,A){var I=l+"";return Q1(o,x5(I,M5(B5(I),A)))}function TE(o){var l=0,A=0;return function(){var I=aS(),N=P-(I-A);if(A=I,N>0){if(++l>=T)return arguments[0]}else l=0;return o.apply(e,arguments)}}function Rd(o,l){var A=-1,I=o.length,N=I-1;for(l=l===e?I:l;++A<l;){var V=T1(A,N),X=o[V];o[V]=o[A],o[A]=X}return o.length=l,o}var NE=k5(function(o){var l=[];return o.charCodeAt(0)===46&&l.push(""),o.replace(vo,function(A,I,N,V){l.push(N?V.replace(gt,"$1"):I||A)}),l});function ta(o){if(typeof o=="string"||Vi(o))return o;var l=o+"";return l=="0"&&1/o==-z?"-0":l}function To(o){if(o!=null){try{return Bc.call(o)}catch{}try{return o+""}catch{}}return""}function M5(o,l){return Ei(nt,function(A){var I="_."+A[0];l&A[1]&&!ni(o,I)&&o.push(I)}),o.sort()}function kE(o){if(o instanceof It)return o.clone();var l=new cs(o.__wrapped__,o.__chain__);return l.__actions__=bi(o.__actions__),l.__index__=o.__index__,l.__values__=o.__values__,l}function q5(o,l,A){(A?si(o,l,A):l===e)?l=1:l=tn(wt(l),0);var I=o==null?0:o.length;if(!I||l<1)return[];for(var N=0,V=0,X=oe(G(I/l));N<I;)X[V++]=hs(o,N,N+=l);return X}function V5(o){for(var l=-1,A=o==null?0:o.length,I=0,N=[];++l<A;){var V=o[l];V&&(N[I++]=V)}return N}function K5(){var o=arguments.length;if(!o)return[];for(var l=oe(o-1),A=arguments[0],I=o;I--;)l[I-1]=arguments[I];return ji(lt(A)?bi(A):[A],Bn(l,1))}var z5=bt(function(o,l){return jr(o)?mf(o,Bn(l,1,jr,!0)):[]}),G5=bt(function(o,l){var A=ds(l);return jr(A)&&(A=e),jr(o)?mf(o,Bn(l,1,jr,!0),Xe(A,2)):[]}),Y5=bt(function(o,l){var A=ds(l);return jr(A)&&(A=e),jr(o)?mf(o,Bn(l,1,jr,!0),e,A):[]});function W5(o,l,A){var I=o==null?0:o.length;return I?(l=A||l===e?1:wt(l),hs(o,l<0?0:l,I)):[]}function X5(o,l,A){var I=o==null?0:o.length;return I?(l=A||l===e?1:wt(l),l=I-l,hs(o,0,l<0?0:l)):[]}function J5(o,l){return o&&o.length?_d(o,Xe(l,3),!0,!0):[]}function Z5(o,l){return o&&o.length?_d(o,Xe(l,3),!0):[]}function Q5(o,l,A,I){var N=o==null?0:o.length;return N?(A&&typeof A!="number"&&si(o,l,A)&&(A=0,I=N),KS(o,l,A,I)):[]}function LE(o,l,A){var I=o==null?0:o.length;if(!I)return-1;var N=A==null?0:wt(A);return N<0&&(N=tn(I+N,0)),Gr(o,Xe(l,3),N)}function UE(o,l,A){var I=o==null?0:o.length;if(!I)return-1;var N=I-1;return A!==e&&(N=wt(A),N=A<0?tn(I+N,0):Ln(N,I-1)),Gr(o,Xe(l,3),N,!0)}function jE(o){var l=o==null?0:o.length;return l?Bn(o,1):[]}function e8(o){var l=o==null?0:o.length;return l?Bn(o,z):[]}function t8(o,l){var A=o==null?0:o.length;return A?(l=l===e?1:wt(l),Bn(o,l)):[]}function r8(o){for(var l=-1,A=o==null?0:o.length,I={};++l<A;){var N=o[l];I[N[0]]=N[1]}return I}function HE(o){return o&&o.length?o[0]:e}function n8(o,l,A){var I=o==null?0:o.length;if(!I)return-1;var N=A==null?0:wt(A);return N<0&&(N=tn(I+N,0)),Nu(o,l,N)}function i8(o){var l=o==null?0:o.length;return l?hs(o,0,-1):[]}var s8=bt(function(o){var l=te(o,j1);return l.length&&l[0]===o[0]?$1(l):[]}),a8=bt(function(o){var l=ds(o),A=te(o,j1);return l===ds(A)?l=e:A.pop(),A.length&&A[0]===o[0]?$1(A,Xe(l,2)):[]}),u8=bt(function(o){var l=ds(o),A=te(o,j1);return l=typeof l=="function"?l:e,l&&A.pop(),A.length&&A[0]===o[0]?$1(A,e,l):[]});function o8(o,l){return o==null?"":iS.call(o,l)}function ds(o){var l=o==null?0:o.length;return l?o[l-1]:e}function c8(o,l,A){var I=o==null?0:o.length;if(!I)return-1;var N=I;return A!==e&&(N=wt(A),N=N<0?tn(I+N,0):Ln(N,I-1)),l===l?p1(o,l,N):Gr(o,us,N,!0)}function l8(o,l){return o&&o.length?Zw(o,wt(l)):e}var f8=bt(ME);function ME(o,l){return o&&o.length&&l&&l.length?O1(o,l):o}function h8(o,l,A){return o&&o.length&&l&&l.length?O1(o,l,Xe(A,2)):o}function d8(o,l,A){return o&&o.length&&l&&l.length?O1(o,l,e,A):o}var p8=Wa(function(o,l){var A=o==null?0:o.length,I=F1(o,l);return tE(o,te(l,function(N){return Xa(N,A)?+N:N}).sort(fE)),I});function g8(o,l){var A=[];if(!(o&&o.length))return A;var I=-1,N=[],V=o.length;for(l=Xe(l,3);++I<V;){var X=o[I];l(X,I,o)&&(A.push(X),N.push(I))}return tE(o,N),A}function eg(o){return o==null?o:oS.call(o)}function m8(o,l,A){var I=o==null?0:o.length;return I?(A&&typeof A!="number"&&si(o,l,A)?(l=0,A=I):(l=l==null?0:wt(l),A=A===e?I:wt(A)),hs(o,l,A)):[]}function v8(o,l){return bd(o,l)}function w8(o,l,A){return k1(o,l,Xe(A,2))}function E8(o,l){var A=o==null?0:o.length;if(A){var I=bd(o,l);if(I<A&&$s(o[I],l))return I}return-1}function A8(o,l){return bd(o,l,!0)}function y8(o,l,A){return k1(o,l,Xe(A,2),!0)}function b8(o,l){var A=o==null?0:o.length;if(A){var I=bd(o,l,!0)-1;if($s(o[I],l))return I}return-1}function _8(o){return o&&o.length?nE(o):[]}function C8(o,l){return o&&o.length?nE(o,Xe(l,2)):[]}function D8(o){var l=o==null?0:o.length;return l?hs(o,1,l):[]}function F8(o,l,A){return o&&o.length?(l=A||l===e?1:wt(l),hs(o,0,l<0?0:l)):[]}function S8(o,l,A){var I=o==null?0:o.length;return I?(l=A||l===e?1:wt(l),l=I-l,hs(o,l<0?0:l,I)):[]}function I8(o,l){return o&&o.length?_d(o,Xe(l,3),!1,!0):[]}function B8(o,l){return o&&o.length?_d(o,Xe(l,3)):[]}var $8=bt(function(o){return Lu(Bn(o,1,jr,!0))}),R8=bt(function(o){var l=ds(o);return jr(l)&&(l=e),Lu(Bn(o,1,jr,!0),Xe(l,2))}),x8=bt(function(o){var l=ds(o);return l=typeof l=="function"?l:e,Lu(Bn(o,1,jr,!0),e,l)});function P8(o){return o&&o.length?Lu(o):[]}function O8(o,l){return o&&o.length?Lu(o,Xe(l,2)):[]}function T8(o,l){return l=typeof l=="function"?l:e,o&&o.length?Lu(o,e,l):[]}function tg(o){if(!(o&&o.length))return[];var l=0;return o=Ui(o,function(A){if(jr(A))return l=tn(A.length,l),!0}),uf(l,function(A){return te(o,Ua(A))})}function qE(o,l){if(!(o&&o.length))return[];var A=tg(o);return l==null?A:te(A,function(I){return ri(l,e,I)})}var N8=bt(function(o,l){return jr(o)?mf(o,l):[]}),k8=bt(function(o){return U1(Ui(o,jr))}),L8=bt(function(o){var l=ds(o);return jr(l)&&(l=e),U1(Ui(o,jr),Xe(l,2))}),U8=bt(function(o){var l=ds(o);return l=typeof l=="function"?l:e,U1(Ui(o,jr),e,l)}),j8=bt(tg);function H8(o,l){return uE(o||[],l||[],gf)}function M8(o,l){return uE(o||[],l||[],Ef)}var q8=bt(function(o){var l=o.length,A=l>1?o[l-1]:e;return A=typeof A=="function"?(o.pop(),A):e,qE(o,A)});function VE(o){var l=q(o);return l.__chain__=!0,l}function V8(o,l){return l(o),o}function xd(o,l){return l(o)}var K8=Wa(function(o){var l=o.length,A=l?o[0]:0,I=this.__wrapped__,N=function(V){return F1(V,o)};return l>1||this.__actions__.length||!(I instanceof It)||!Xa(A)?this.thru(N):(I=I.slice(A,+A+(l?1:0)),I.__actions__.push({func:xd,args:[N],thisArg:e}),new cs(I,this.__chain__).thru(function(V){return l&&!V.length&&V.push(e),V}))});function z8(){return VE(this)}function G8(){return new cs(this.value(),this.__chain__)}function Y8(){this.__values__===e&&(this.__values__=iA(this.value()));var o=this.__index__>=this.__values__.length,l=o?e:this.__values__[this.__index__++];return{done:o,value:l}}function W8(){return this}function X8(o){for(var l,A=this;A instanceof vd;){var I=kE(A);I.__index__=0,I.__values__=e,l?N.__wrapped__=I:l=I;var N=I;A=A.__wrapped__}return N.__wrapped__=o,l}function J8(){var o=this.__wrapped__;if(o instanceof It){var l=o;return this.__actions__.length&&(l=new It(this)),l=l.reverse(),l.__actions__.push({func:xd,args:[eg],thisArg:e}),new cs(l,this.__chain__)}return this.thru(eg)}function Z8(){return aE(this.__wrapped__,this.__actions__)}var Q8=Cd(function(o,l,A){kt.call(o,A)?++o[A]:Ga(o,A,1)});function eI(o,l,A){var I=lt(o)?ot:VS;return A&&si(o,l,A)&&(l=e),I(o,Xe(l,3))}function tI(o,l){var A=lt(o)?Ui:qw;return A(o,Xe(l,3))}var rI=vE(LE),nI=vE(UE);function iI(o,l){return Bn(Pd(o,l),1)}function sI(o,l){return Bn(Pd(o,l),z)}function aI(o,l,A){return A=A===e?1:wt(A),Bn(Pd(o,l),A)}function KE(o,l){var A=lt(o)?Ei:ku;return A(o,Xe(l,3))}function zE(o,l){var A=lt(o)?x:Mw;return A(o,Xe(l,3))}var uI=Cd(function(o,l,A){kt.call(o,A)?o[A].push(l):Ga(o,A,[l])});function oI(o,l,A,I){o=_i(o)?o:qc(o),A=A&&!I?wt(A):0;var N=o.length;return A<0&&(A=tn(N+A,0)),Ld(o)?A<=N&&o.indexOf(l,A)>-1:!!N&&Nu(o,l,A)>-1}var cI=bt(function(o,l,A){var I=-1,N=typeof l=="function",V=_i(o)?oe(o.length):[];return ku(o,function(X){V[++I]=N?ri(l,X,A):vf(X,l,A)}),V}),lI=Cd(function(o,l,A){Ga(o,A,l)});function Pd(o,l){var A=lt(o)?te:Ww;return A(o,Xe(l,3))}function fI(o,l,A,I){return o==null?[]:(lt(l)||(l=l==null?[]:[l]),A=I?e:A,lt(A)||(A=A==null?[]:[A]),Qw(o,l,A))}var hI=Cd(function(o,l,A){o[A?0:1].push(l)},function(){return[[],[]]});function dI(o,l,A){var I=lt(o)?nf:td,N=arguments.length<3;return I(o,Xe(l,4),A,N,ku)}function pI(o,l,A){var I=lt(o)?Pw:td,N=arguments.length<3;return I(o,Xe(l,4),A,N,Mw)}function gI(o,l){var A=lt(o)?Ui:qw;return A(o,Nd(Xe(l,3)))}function mI(o){var l=lt(o)?Lw:o5;return l(o)}function vI(o,l,A){(A?si(o,l,A):l===e)?l=1:l=wt(l);var I=lt(o)?US:c5;return I(o,l)}function wI(o){var l=lt(o)?jS:f5;return l(o)}function EI(o){if(o==null)return 0;if(_i(o))return Ld(o)?Ha(o):o.length;var l=Un(o);return l==st||l==rr?o.size:x1(o).length}function AI(o,l,A){var I=lt(o)?ed:h5;return A&&si(o,l,A)&&(l=e),I(o,Xe(l,3))}var yI=bt(function(o,l){if(o==null)return[];var A=l.length;return A>1&&si(o,l[0],l[1])?l=[]:A>2&&si(l[0],l[1],l[2])&&(l=[l[0]]),Qw(o,Bn(l,1),[])}),Od=H||function(){return zr.Date.now()};function bI(o,l){if(typeof l!="function")throw new yi(i);return o=wt(o),function(){if(--o<1)return l.apply(this,arguments)}}function GE(o,l,A){return l=A?e:l,l=o&&l==null?o.length:l,Ya(o,F,e,e,e,e,l)}function YE(o,l){var A;if(typeof l!="function")throw new yi(i);return o=wt(o),function(){return--o>0&&(A=l.apply(this,arguments)),o<=1&&(l=e),A}}var rg=bt(function(o,l,A){var I=w;if(A.length){var N=Hi(A,Hc(rg));I|=D}return Ya(o,I,l,A,N)}),WE=bt(function(o,l,A){var I=w|v;if(A.length){var N=Hi(A,Hc(WE));I|=D}return Ya(l,I,o,A,N)});function XE(o,l,A){l=A?e:l;var I=Ya(o,m,e,e,e,e,e,l);return I.placeholder=XE.placeholder,I}function JE(o,l,A){l=A?e:l;var I=Ya(o,y,e,e,e,e,e,l);return I.placeholder=JE.placeholder,I}function ZE(o,l,A){var I,N,V,X,Z,se,we=0,Ee=!1,ye=!1,Be=!0;if(typeof o!="function")throw new yi(i);l=ps(l)||0,Fr(A)&&(Ee=!!A.leading,ye="maxWait"in A,V=ye?tn(ps(A.maxWait)||0,l):V,Be="trailing"in A?!!A.trailing:Be);function Me(Hr){var Rs=I,Qa=N;return I=N=e,we=Hr,X=o.apply(Qa,Rs),X}function Ze(Hr){return we=Hr,Z=bf(Dt,l),Ee?Me(Hr):X}function Et(Hr){var Rs=Hr-se,Qa=Hr-we,vA=l-Rs;return ye?Ln(vA,V-Qa):vA}function Qe(Hr){var Rs=Hr-se,Qa=Hr-we;return se===e||Rs>=l||Rs<0||ye&&Qa>=V}function Dt(){var Hr=Od();if(Qe(Hr))return xt(Hr);Z=bf(Dt,Et(Hr))}function xt(Hr){return Z=e,Be&&I?Me(Hr):(I=N=e,X)}function Ki(){Z!==e&&oE(Z),we=0,I=se=N=Z=e}function ai(){return Z===e?X:xt(Od())}function zi(){var Hr=Od(),Rs=Qe(Hr);if(I=arguments,N=this,se=Hr,Rs){if(Z===e)return Ze(se);if(ye)return oE(Z),Z=bf(Dt,l),Me(se)}return Z===e&&(Z=bf(Dt,l)),X}return zi.cancel=Ki,zi.flush=ai,zi}var _I=bt(function(o,l){return Hw(o,1,l)}),CI=bt(function(o,l,A){return Hw(o,ps(l)||0,A)});function DI(o){return Ya(o,k)}function Td(o,l){if(typeof o!="function"||l!=null&&typeof l!="function")throw new yi(i);var A=function(){var I=arguments,N=l?l.apply(this,I):I[0],V=A.cache;if(V.has(N))return V.get(N);var X=o.apply(this,I);return A.cache=V.set(N,X)||V,X};return A.cache=new(Td.Cache||za),A}Td.Cache=za;function Nd(o){if(typeof o!="function")throw new yi(i);return function(){var l=arguments;switch(l.length){case 0:return!o.call(this);case 1:return!o.call(this,l[0]);case 2:return!o.call(this,l[0],l[1]);case 3:return!o.call(this,l[0],l[1],l[2])}return!o.apply(this,l)}}function FI(o){return YE(2,o)}var SI=d5(function(o,l){l=l.length==1&&lt(l[0])?te(l[0],kn(Xe())):te(Bn(l,1),kn(Xe()));var A=l.length;return bt(function(I){for(var N=-1,V=Ln(I.length,A);++N<V;)I[N]=l[N].call(this,I[N]);return ri(o,this,I)})}),ng=bt(function(o,l){var A=Hi(l,Hc(ng));return Ya(o,D,e,l,A)}),QE=bt(function(o,l){var A=Hi(l,Hc(QE));return Ya(o,C,e,l,A)}),II=Wa(function(o,l){return Ya(o,U,e,e,e,l)});function BI(o,l){if(typeof o!="function")throw new yi(i);return l=l===e?l:wt(l),bt(o,l)}function $I(o,l){if(typeof o!="function")throw new yi(i);return l=l==null?0:tn(wt(l),0),bt(function(A){var I=A[l],N=ju(A,0,l);return I&&ji(N,I),ri(o,this,N)})}function RI(o,l,A){var I=!0,N=!0;if(typeof o!="function")throw new yi(i);return Fr(A)&&(I="leading"in A?!!A.leading:I,N="trailing"in A?!!A.trailing:N),ZE(o,l,{leading:I,maxWait:l,trailing:N})}function xI(o){return GE(o,1)}function PI(o,l){return ng(H1(l),o)}function OI(){if(!arguments.length)return[];var o=arguments[0];return lt(o)?o:[o]}function TI(o){return ls(o,g)}function NI(o,l){return l=typeof l=="function"?l:e,ls(o,g,l)}function kI(o){return ls(o,f|g)}function LI(o,l){return l=typeof l=="function"?l:e,ls(o,f|g,l)}function UI(o,l){return l==null||jw(o,l,fn(l))}function $s(o,l){return o===l||o!==o&&l!==l}var jI=Id(B1),HI=Id(function(o,l){return o>=l}),No=zw(function(){return arguments}())?zw:function(o){return Tr(o)&&kt.call(o,"callee")&&!dd.call(o,"callee")},lt=oe.isArray,MI=Yh?kn(Yh):XS;function _i(o){return o!=null&&kd(o.length)&&!Ja(o)}function jr(o){return Tr(o)&&_i(o)}function qI(o){return o===!0||o===!1||Tr(o)&&ii(o)==hr}var Hu=sr||pg,VI=Wh?kn(Wh):JS;function KI(o){return Tr(o)&&o.nodeType===1&&!_f(o)}function zI(o){if(o==null)return!0;if(_i(o)&&(lt(o)||typeof o=="string"||typeof o.splice=="function"||Hu(o)||Mc(o)||No(o)))return!o.length;var l=Un(o);if(l==st||l==rr)return!o.size;if(yf(o))return!x1(o).length;for(var A in o)if(kt.call(o,A))return!1;return!0}function GI(o,l){return wf(o,l)}function YI(o,l,A){A=typeof A=="function"?A:e;var I=A?A(o,l):e;return I===e?wf(o,l,e,A):!!I}function ig(o){if(!Tr(o))return!1;var l=ii(o);return l==gr||l==Br||typeof o.message=="string"&&typeof o.name=="string"&&!_f(o)}function WI(o){return typeof o=="number"&&Or(o)}function Ja(o){if(!Fr(o))return!1;var l=ii(o);return l==vt||l==tr||l==wn||l==En}function eA(o){return typeof o=="number"&&o==wt(o)}function kd(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=W}function Fr(o){var l=typeof o;return o!=null&&(l=="object"||l=="function")}function Tr(o){return o!=null&&typeof o=="object"}var tA=Xh?kn(Xh):QS;function XI(o,l){return o===l||R1(o,l,Y1(l))}function JI(o,l,A){return A=typeof A=="function"?A:e,R1(o,l,Y1(l),A)}function ZI(o){return rA(o)&&o!=+o}function QI(o){if(N5(o))throw new tt(n);return Gw(o)}function eB(o){return o===null}function tB(o){return o==null}function rA(o){return typeof o=="number"||Tr(o)&&ii(o)==Ge}function _f(o){if(!Tr(o)||ii(o)!=qe)return!1;var l=Oc(o);if(l===null)return!0;var A=kt.call(l,"constructor")&&l.constructor;return typeof A=="function"&&A instanceof A&&Bc.call(A)==A1}var sg=Jh?kn(Jh):e5;function rB(o){return eA(o)&&o>=-W&&o<=W}var nA=Zh?kn(Zh):t5;function Ld(o){return typeof o=="string"||!lt(o)&&Tr(o)&&ii(o)==yt}function Vi(o){return typeof o=="symbol"||Tr(o)&&ii(o)==Vr}var Mc=Qh?kn(Qh):r5;function nB(o){return o===e}function iB(o){return Tr(o)&&Un(o)==An}function sB(o){return Tr(o)&&ii(o)==$t}var aB=Id(P1),uB=Id(function(o,l){return o<=l});function iA(o){if(!o)return[];if(_i(o))return Ld(o)?Ai(o):bi(o);if(qa&&o[qa])return d1(o[qa]());var l=Un(o),A=l==st?lf:l==rr?Mi:qc;return A(o)}function Za(o){if(!o)return o===0?o:0;if(o=ps(o),o===z||o===-z){var l=o<0?-1:1;return l*ie}return o===o?o:0}function wt(o){var l=Za(o),A=l%1;return l===l?A?l-A:l:0}function sA(o){return o?xo(wt(o),0,Fe):0}function ps(o){if(typeof o=="number")return o;if(Vi(o))return Ce;if(Fr(o)){var l=typeof o.valueOf=="function"?o.valueOf():o;o=Fr(l)?l+"":l}if(typeof o!="string")return o===0?o:+o;o=of(o);var A=ss.test(o);return A||Nn.test(o)?s1(o.slice(2),A?2:8):gi.test(o)?Ce:+o}function aA(o){return ea(o,Ci(o))}function oB(o){return o?xo(wt(o),-W,W):o===0?o:0}function Xt(o){return o==null?"":qi(o)}var cB=Uc(function(o,l){if(yf(l)||_i(l)){ea(l,fn(l),o);return}for(var A in l)kt.call(l,A)&&gf(o,A,l[A])}),uA=Uc(function(o,l){ea(l,Ci(l),o)}),Ud=Uc(function(o,l,A,I){ea(l,Ci(l),o,I)}),lB=Uc(function(o,l,A,I){ea(l,fn(l),o,I)}),fB=Wa(F1);function hB(o,l){var A=Lc(o);return l==null?A:Uw(A,l)}var dB=bt(function(o,l){o=ir(o);var A=-1,I=l.length,N=I>2?l[2]:e;for(N&&si(l[0],l[1],N)&&(I=1);++A<I;)for(var V=l[A],X=Ci(V),Z=-1,se=X.length;++Z<se;){var we=X[Z],Ee=o[we];(Ee===e||$s(Ee,Ma[we])&&!kt.call(o,we))&&(o[we]=V[we])}return o}),pB=bt(function(o){return o.push(e,CE),ri(oA,e,o)});function gB(o,l){return Ye(o,Xe(l,3),Qs)}function mB(o,l){return Ye(o,Xe(l,3),I1)}function vB(o,l){return o==null?o:S1(o,Xe(l,3),Ci)}function wB(o,l){return o==null?o:Vw(o,Xe(l,3),Ci)}function EB(o,l){return o&&Qs(o,Xe(l,3))}function AB(o,l){return o&&I1(o,Xe(l,3))}function yB(o){return o==null?[]:Ad(o,fn(o))}function bB(o){return o==null?[]:Ad(o,Ci(o))}function ag(o,l,A){var I=o==null?e:Po(o,l);return I===e?A:I}function _B(o,l){return o!=null&&SE(o,l,zS)}function ug(o,l){return o!=null&&SE(o,l,GS)}var CB=EE(function(o,l,A){l!=null&&typeof l.toString!="function"&&(l=Rc.call(l)),o[l]=A},cg(Di)),DB=EE(function(o,l,A){l!=null&&typeof l.toString!="function"&&(l=Rc.call(l)),kt.call(o,l)?o[l].push(A):o[l]=[A]},Xe),FB=bt(vf);function fn(o){return _i(o)?kw(o):x1(o)}function Ci(o){return _i(o)?kw(o,!0):n5(o)}function SB(o,l){var A={};return l=Xe(l,3),Qs(o,function(I,N,V){Ga(A,l(I,N,V),I)}),A}function IB(o,l){var A={};return l=Xe(l,3),Qs(o,function(I,N,V){Ga(A,N,l(I,N,V))}),A}var BB=Uc(function(o,l,A){yd(o,l,A)}),oA=Uc(function(o,l,A,I){yd(o,l,A,I)}),$B=Wa(function(o,l){var A={};if(o==null)return A;var I=!1;l=te(l,function(V){return V=Uu(V,o),I||(I=V.length>1),V}),ea(o,z1(o),A),I&&(A=ls(A,f|h|g,C5));for(var N=l.length;N--;)L1(A,l[N]);return A});function RB(o,l){return cA(o,Nd(Xe(l)))}var xB=Wa(function(o,l){return o==null?{}:s5(o,l)});function cA(o,l){if(o==null)return{};var A=te(z1(o),function(I){return[I]});return l=Xe(l),eE(o,A,function(I,N){return l(I,N[0])})}function PB(o,l,A){l=Uu(l,o);var I=-1,N=l.length;for(N||(N=1,o=e);++I<N;){var V=o==null?e:o[ta(l[I])];V===e&&(I=N,V=A),o=Ja(V)?V.call(o):V}return o}function OB(o,l,A){return o==null?o:Ef(o,l,A)}function TB(o,l,A,I){return I=typeof I=="function"?I:e,o==null?o:Ef(o,l,A,I)}var lA=bE(fn),fA=bE(Ci);function NB(o,l,A){var I=lt(o),N=I||Hu(o)||Mc(o);if(l=Xe(l,4),A==null){var V=o&&o.constructor;N?A=I?new V:[]:Fr(o)?A=Ja(V)?Lc(Oc(o)):{}:A={}}return(N?Ei:Qs)(o,function(X,Z,se){return l(A,X,Z,se)}),A}function kB(o,l){return o==null?!0:L1(o,l)}function LB(o,l,A){return o==null?o:sE(o,l,H1(A))}function UB(o,l,A,I){return I=typeof I=="function"?I:e,o==null?o:sE(o,l,H1(A),I)}function qc(o){return o==null?[]:Io(o,fn(o))}function jB(o){return o==null?[]:Io(o,Ci(o))}function HB(o,l,A){return A===e&&(A=l,l=e),A!==e&&(A=ps(A),A=A===A?A:0),l!==e&&(l=ps(l),l=l===l?l:0),xo(ps(o),l,A)}function MB(o,l,A){return l=Za(l),A===e?(A=l,l=0):A=Za(A),o=ps(o),YS(o,l,A)}function qB(o,l,A){if(A&&typeof A!="boolean"&&si(o,l,A)&&(l=A=e),A===e&&(typeof l=="boolean"?(A=l,l=e):typeof o=="boolean"&&(A=o,o=e)),o===e&&l===e?(o=0,l=1):(o=Za(o),l===e?(l=o,o=0):l=Za(l)),o>l){var I=o;o=l,l=I}if(A||o%1||l%1){var N=Tw();return Ln(o+N*(l-o+i1("1e-"+((N+"").length-1))),l)}return T1(o,l)}var VB=jc(function(o,l,A){return l=l.toLowerCase(),o+(A?hA(l):l)});function hA(o){return og(Xt(o).toLowerCase())}function dA(o){return o=Xt(o),o&&o.replace(Cn,cf).replace(ti,"")}function KB(o,l,A){o=Xt(o),l=qi(l);var I=o.length;A=A===e?I:xo(wt(A),0,I);var N=A;return A-=l.length,A>=0&&o.slice(A,N)==l}function zB(o){return o=Xt(o),o&&Mt.test(o)?o.replace(Gs,l1):o}function GB(o){return o=Xt(o),o&&wo.test(o)?o.replace(Ws,"\\$&"):o}var YB=jc(function(o,l,A){return o+(A?"-":"")+l.toLowerCase()}),WB=jc(function(o,l,A){return o+(A?" ":"")+l.toLowerCase()}),XB=mE("toLowerCase");function JB(o,l,A){o=Xt(o),l=wt(l);var I=l?Ha(o):0;if(!l||I>=l)return o;var N=(l-I)/2;return Sd(ae(N),A)+o+Sd(G(N),A)}function ZB(o,l,A){o=Xt(o),l=wt(l);var I=l?Ha(o):0;return l&&I<l?o+Sd(l-I,A):o}function QB(o,l,A){o=Xt(o),l=wt(l);var I=l?Ha(o):0;return l&&I<l?Sd(l-I,A)+o:o}function e9(o,l,A){return A||l==null?l=0:l&&(l=+l),uS(Xt(o).replace(ka,""),l||0)}function t9(o,l,A){return(A?si(o,l,A):l===e)?l=1:l=wt(l),N1(Xt(o),l)}function r9(){var o=arguments,l=Xt(o[0]);return o.length<3?l:l.replace(o[1],o[2])}var n9=jc(function(o,l,A){return o+(A?"_":"")+l.toLowerCase()});function i9(o,l,A){return A&&typeof A!="number"&&si(o,l,A)&&(l=A=e),A=A===e?Fe:A>>>0,A?(o=Xt(o),o&&(typeof l=="string"||l!=null&&!sg(l))&&(l=qi(l),!l&&ja(o))?ju(Ai(o),0,A):o.split(l,A)):[]}var s9=jc(function(o,l,A){return o+(A?" ":"")+og(l)});function a9(o,l,A){return o=Xt(o),A=A==null?0:xo(wt(A),0,o.length),l=qi(l),o.slice(A,A+l.length)==l}function u9(o,l,A){var I=q.templateSettings;A&&si(o,l,A)&&(l=e),o=Xt(o),l=Ud({},l,I,_E);var N=Ud({},l.imports,I.imports,_E),V=fn(N),X=Io(N,V),Z,se,we=0,Ee=l.interpolate||en,ye="__p += '",Be=Sc((l.escape||en).source+"|"+Ee.source+"|"+(Ee===xu?Ur:en).source+"|"+(l.evaluate||en).source+"|$","g"),Me="//# sourceURL="+(kt.call(l,"sourceURL")?(l.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Qp+"]")+`
`;o.replace(Be,function(Qe,Dt,xt,Ki,ai,zi){return xt||(xt=Ki),ye+=o.slice(we,zi).replace(Eo,ad),Dt&&(Z=!0,ye+=`' +
__e(`+Dt+`) +
'`),ai&&(se=!0,ye+=`';
`+ai+`;
__p += '`),xt&&(ye+=`' +
((__t = (`+xt+`)) == null ? '' : __t) +
'`),we=zi+Qe.length,Qe}),ye+=`';
`;var Ze=kt.call(l,"variable")&&l.variable;if(!Ze)ye=`with (obj) {
`+ye+`
}
`;else if(ut.test(Ze))throw new tt(a);ye=(se?ye.replace(Fs,""):ye).replace(Bu,"$1").replace(zs,"$1;"),ye="function("+(Ze||"obj")+`) {
`+(Ze?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Z?", __e = _.escape":"")+(se?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ye+`return __p
}`;var Et=gA(function(){return Rt(V,Me+"return "+ye).apply(e,X)});if(Et.source=ye,ig(Et))throw Et;return Et}function o9(o){return Xt(o).toLowerCase()}function c9(o){return Xt(o).toUpperCase()}function l9(o,l,A){if(o=Xt(o),o&&(A||l===e))return of(o);if(!o||!(l=qi(l)))return o;var I=Ai(o),N=Ai(l),V=Cc(I,N),X=nd(I,N)+1;return ju(I,V,X).join("")}function f9(o,l,A){if(o=Xt(o),o&&(A||l===e))return o.slice(0,Fc(o)+1);if(!o||!(l=qi(l)))return o;var I=Ai(o),N=nd(I,Ai(l))+1;return ju(I,0,N).join("")}function h9(o,l,A){if(o=Xt(o),o&&(A||l===e))return o.replace(ka,"");if(!o||!(l=qi(l)))return o;var I=Ai(o),N=Cc(I,Ai(l));return ju(I,N).join("")}function d9(o,l){var A=S,I=B;if(Fr(l)){var N="separator"in l?l.separator:N;A="length"in l?wt(l.length):A,I="omission"in l?qi(l.omission):I}o=Xt(o);var V=o.length;if(ja(o)){var X=Ai(o);V=X.length}if(A>=V)return o;var Z=A-Ha(I);if(Z<1)return I;var se=X?ju(X,0,Z).join(""):o.slice(0,Z);if(N===e)return se+I;if(X&&(Z+=se.length-Z),sg(N)){if(o.slice(Z).search(N)){var we,Ee=se;for(N.global||(N=Sc(N.source,Xt(Yt.exec(N))+"g")),N.lastIndex=0;we=N.exec(Ee);)var ye=we.index;se=se.slice(0,ye===e?Z:ye)}}else if(o.indexOf(qi(N),Z)!=Z){var Be=se.lastIndexOf(N);Be>-1&&(se=se.slice(0,Be))}return se+I}function p9(o){return o=Xt(o),o&&Ss.test(o)?o.replace($u,od):o}var g9=jc(function(o,l,A){return o+(A?" ":"")+l.toUpperCase()}),og=mE("toUpperCase");function pA(o,l,A){return o=Xt(o),l=A?e:l,l===e?h1(o)?m1(o):sf(o):o.match(l)||[]}var gA=bt(function(o,l){try{return ri(o,e,l)}catch(A){return ig(A)?A:new tt(A)}}),m9=Wa(function(o,l){return Ei(l,function(A){A=ta(A),Ga(o,A,rg(o[A],o))}),o});function v9(o){var l=o==null?0:o.length,A=Xe();return o=l?te(o,function(I){if(typeof I[1]!="function")throw new yi(i);return[A(I[0]),I[1]]}):[],bt(function(I){for(var N=-1;++N<l;){var V=o[N];if(ri(V[0],this,I))return ri(V[1],this,I)}})}function w9(o){return qS(ls(o,f))}function cg(o){return function(){return o}}function E9(o,l){return o==null||o!==o?l:o}var A9=wE(),y9=wE(!0);function Di(o){return o}function lg(o){return Yw(typeof o=="function"?o:ls(o,f))}function b9(o){return Xw(ls(o,f))}function _9(o,l){return Jw(o,ls(l,f))}var C9=bt(function(o,l){return function(A){return vf(A,o,l)}}),D9=bt(function(o,l){return function(A){return vf(o,A,l)}});function fg(o,l,A){var I=fn(l),N=Ad(l,I);A==null&&!(Fr(l)&&(N.length||!I.length))&&(A=l,l=o,o=this,N=Ad(l,fn(l)));var V=!(Fr(A)&&"chain"in A)||!!A.chain,X=Ja(o);return Ei(N,function(Z){var se=l[Z];o[Z]=se,X&&(o.prototype[Z]=function(){var we=this.__chain__;if(V||we){var Ee=o(this.__wrapped__),ye=Ee.__actions__=bi(this.__actions__);return ye.push({func:se,args:arguments,thisArg:o}),Ee.__chain__=we,Ee}return se.apply(o,ji([this.value()],arguments))})}),o}function F9(){return zr._===this&&(zr._=y1),this}function hg(){}function S9(o){return o=wt(o),bt(function(l){return Zw(l,o)})}var I9=q1(te),B9=q1(ot),$9=q1(ed);function mA(o){return X1(o)?Ua(ta(o)):a5(o)}function R9(o){return function(l){return o==null?e:Po(o,l)}}var x9=AE(),P9=AE(!0);function dg(){return[]}function pg(){return!1}function O9(){return{}}function T9(){return""}function N9(){return!0}function k9(o,l){if(o=wt(o),o<1||o>W)return[];var A=Fe,I=Ln(o,Fe);l=Xe(l),o-=Fe;for(var N=uf(I,l);++A<o;)l(A);return N}function L9(o){return lt(o)?te(o,ta):Vi(o)?[o]:bi(NE(Xt(o)))}function U9(o){var l=++E1;return Xt(o)+l}var j9=Fd(function(o,l){return o+l},0),H9=V1("ceil"),M9=Fd(function(o,l){return o/l},1),q9=V1("floor");function V9(o){return o&&o.length?Ed(o,Di,B1):e}function K9(o,l){return o&&o.length?Ed(o,Xe(l,2),B1):e}function z9(o){return af(o,Di)}function G9(o,l){return af(o,Xe(l,2))}function Y9(o){return o&&o.length?Ed(o,Di,P1):e}function W9(o,l){return o&&o.length?Ed(o,Xe(l,2),P1):e}var X9=Fd(function(o,l){return o*l},1),J9=V1("round"),Z9=Fd(function(o,l){return o-l},0);function Q9(o){return o&&o.length?_c(o,Di):0}function e$(o,l){return o&&o.length?_c(o,Xe(l,2)):0}return q.after=bI,q.ary=GE,q.assign=cB,q.assignIn=uA,q.assignInWith=Ud,q.assignWith=lB,q.at=fB,q.before=YE,q.bind=rg,q.bindAll=m9,q.bindKey=WE,q.castArray=OI,q.chain=VE,q.chunk=q5,q.compact=V5,q.concat=K5,q.cond=v9,q.conforms=w9,q.constant=cg,q.countBy=Q8,q.create=hB,q.curry=XE,q.curryRight=JE,q.debounce=ZE,q.defaults=dB,q.defaultsDeep=pB,q.defer=_I,q.delay=CI,q.difference=z5,q.differenceBy=G5,q.differenceWith=Y5,q.drop=W5,q.dropRight=X5,q.dropRightWhile=J5,q.dropWhile=Z5,q.fill=Q5,q.filter=tI,q.flatMap=iI,q.flatMapDeep=sI,q.flatMapDepth=aI,q.flatten=jE,q.flattenDeep=e8,q.flattenDepth=t8,q.flip=DI,q.flow=A9,q.flowRight=y9,q.fromPairs=r8,q.functions=yB,q.functionsIn=bB,q.groupBy=uI,q.initial=i8,q.intersection=s8,q.intersectionBy=a8,q.intersectionWith=u8,q.invert=CB,q.invertBy=DB,q.invokeMap=cI,q.iteratee=lg,q.keyBy=lI,q.keys=fn,q.keysIn=Ci,q.map=Pd,q.mapKeys=SB,q.mapValues=IB,q.matches=b9,q.matchesProperty=_9,q.memoize=Td,q.merge=BB,q.mergeWith=oA,q.method=C9,q.methodOf=D9,q.mixin=fg,q.negate=Nd,q.nthArg=S9,q.omit=$B,q.omitBy=RB,q.once=FI,q.orderBy=fI,q.over=I9,q.overArgs=SI,q.overEvery=B9,q.overSome=$9,q.partial=ng,q.partialRight=QE,q.partition=hI,q.pick=xB,q.pickBy=cA,q.property=mA,q.propertyOf=R9,q.pull=f8,q.pullAll=ME,q.pullAllBy=h8,q.pullAllWith=d8,q.pullAt=p8,q.range=x9,q.rangeRight=P9,q.rearg=II,q.reject=gI,q.remove=g8,q.rest=BI,q.reverse=eg,q.sampleSize=vI,q.set=OB,q.setWith=TB,q.shuffle=wI,q.slice=m8,q.sortBy=yI,q.sortedUniq=_8,q.sortedUniqBy=C8,q.split=i9,q.spread=$I,q.tail=D8,q.take=F8,q.takeRight=S8,q.takeRightWhile=I8,q.takeWhile=B8,q.tap=V8,q.throttle=RI,q.thru=xd,q.toArray=iA,q.toPairs=lA,q.toPairsIn=fA,q.toPath=L9,q.toPlainObject=aA,q.transform=NB,q.unary=xI,q.union=$8,q.unionBy=R8,q.unionWith=x8,q.uniq=P8,q.uniqBy=O8,q.uniqWith=T8,q.unset=kB,q.unzip=tg,q.unzipWith=qE,q.update=LB,q.updateWith=UB,q.values=qc,q.valuesIn=jB,q.without=N8,q.words=pA,q.wrap=PI,q.xor=k8,q.xorBy=L8,q.xorWith=U8,q.zip=j8,q.zipObject=H8,q.zipObjectDeep=M8,q.zipWith=q8,q.entries=lA,q.entriesIn=fA,q.extend=uA,q.extendWith=Ud,fg(q,q),q.add=j9,q.attempt=gA,q.camelCase=VB,q.capitalize=hA,q.ceil=H9,q.clamp=HB,q.clone=TI,q.cloneDeep=kI,q.cloneDeepWith=LI,q.cloneWith=NI,q.conformsTo=UI,q.deburr=dA,q.defaultTo=E9,q.divide=M9,q.endsWith=KB,q.eq=$s,q.escape=zB,q.escapeRegExp=GB,q.every=eI,q.find=rI,q.findIndex=LE,q.findKey=gB,q.findLast=nI,q.findLastIndex=UE,q.findLastKey=mB,q.floor=q9,q.forEach=KE,q.forEachRight=zE,q.forIn=vB,q.forInRight=wB,q.forOwn=EB,q.forOwnRight=AB,q.get=ag,q.gt=jI,q.gte=HI,q.has=_B,q.hasIn=ug,q.head=HE,q.identity=Di,q.includes=oI,q.indexOf=n8,q.inRange=MB,q.invoke=FB,q.isArguments=No,q.isArray=lt,q.isArrayBuffer=MI,q.isArrayLike=_i,q.isArrayLikeObject=jr,q.isBoolean=qI,q.isBuffer=Hu,q.isDate=VI,q.isElement=KI,q.isEmpty=zI,q.isEqual=GI,q.isEqualWith=YI,q.isError=ig,q.isFinite=WI,q.isFunction=Ja,q.isInteger=eA,q.isLength=kd,q.isMap=tA,q.isMatch=XI,q.isMatchWith=JI,q.isNaN=ZI,q.isNative=QI,q.isNil=tB,q.isNull=eB,q.isNumber=rA,q.isObject=Fr,q.isObjectLike=Tr,q.isPlainObject=_f,q.isRegExp=sg,q.isSafeInteger=rB,q.isSet=nA,q.isString=Ld,q.isSymbol=Vi,q.isTypedArray=Mc,q.isUndefined=nB,q.isWeakMap=iB,q.isWeakSet=sB,q.join=o8,q.kebabCase=YB,q.last=ds,q.lastIndexOf=c8,q.lowerCase=WB,q.lowerFirst=XB,q.lt=aB,q.lte=uB,q.max=V9,q.maxBy=K9,q.mean=z9,q.meanBy=G9,q.min=Y9,q.minBy=W9,q.stubArray=dg,q.stubFalse=pg,q.stubObject=O9,q.stubString=T9,q.stubTrue=N9,q.multiply=X9,q.nth=l8,q.noConflict=F9,q.noop=hg,q.now=Od,q.pad=JB,q.padEnd=ZB,q.padStart=QB,q.parseInt=e9,q.random=qB,q.reduce=dI,q.reduceRight=pI,q.repeat=t9,q.replace=r9,q.result=PB,q.round=J9,q.runInContext=ne,q.sample=mI,q.size=EI,q.snakeCase=n9,q.some=AI,q.sortedIndex=v8,q.sortedIndexBy=w8,q.sortedIndexOf=E8,q.sortedLastIndex=A8,q.sortedLastIndexBy=y8,q.sortedLastIndexOf=b8,q.startCase=s9,q.startsWith=a9,q.subtract=Z9,q.sum=Q9,q.sumBy=e$,q.template=u9,q.times=k9,q.toFinite=Za,q.toInteger=wt,q.toLength=sA,q.toLower=o9,q.toNumber=ps,q.toSafeInteger=oB,q.toString=Xt,q.toUpper=c9,q.trim=l9,q.trimEnd=f9,q.trimStart=h9,q.truncate=d9,q.unescape=p9,q.uniqueId=U9,q.upperCase=g9,q.upperFirst=og,q.each=KE,q.eachRight=zE,q.first=HE,fg(q,function(){var o={};return Qs(q,function(l,A){kt.call(q.prototype,A)||(o[A]=l)}),o}(),{chain:!1}),q.VERSION=t,Ei(["bind","bindKey","curry","curryRight","partial","partialRight"],function(o){q[o].placeholder=q}),Ei(["drop","take"],function(o,l){It.prototype[o]=function(A){A=A===e?1:tn(wt(A),0);var I=this.__filtered__&&!l?new It(this):this.clone();return I.__filtered__?I.__takeCount__=Ln(A,I.__takeCount__):I.__views__.push({size:Ln(A,Fe),type:o+(I.__dir__<0?"Right":"")}),I},It.prototype[o+"Right"]=function(A){return this.reverse()[o](A).reverse()}}),Ei(["filter","map","takeWhile"],function(o,l){var A=l+1,I=A==j||A==M;It.prototype[o]=function(N){var V=this.clone();return V.__iteratees__.push({iteratee:Xe(N,3),type:A}),V.__filtered__=V.__filtered__||I,V}}),Ei(["head","last"],function(o,l){var A="take"+(l?"Right":"");It.prototype[o]=function(){return this[A](1).value()[0]}}),Ei(["initial","tail"],function(o,l){var A="drop"+(l?"":"Right");It.prototype[o]=function(){return this.__filtered__?new It(this):this[A](1)}}),It.prototype.compact=function(){return this.filter(Di)},It.prototype.find=function(o){return this.filter(o).head()},It.prototype.findLast=function(o){return this.reverse().find(o)},It.prototype.invokeMap=bt(function(o,l){return typeof o=="function"?new It(this):this.map(function(A){return vf(A,o,l)})}),It.prototype.reject=function(o){return this.filter(Nd(Xe(o)))},It.prototype.slice=function(o,l){o=wt(o);var A=this;return A.__filtered__&&(o>0||l<0)?new It(A):(o<0?A=A.takeRight(-o):o&&(A=A.drop(o)),l!==e&&(l=wt(l),A=l<0?A.dropRight(-l):A.take(l-o)),A)},It.prototype.takeRightWhile=function(o){return this.reverse().takeWhile(o).reverse()},It.prototype.toArray=function(){return this.take(Fe)},Qs(It.prototype,function(o,l){var A=/^(?:filter|find|map|reject)|While$/.test(l),I=/^(?:head|last)$/.test(l),N=q[I?"take"+(l=="last"?"Right":""):l],V=I||/^find/.test(l);N&&(q.prototype[l]=function(){var X=this.__wrapped__,Z=I?[1]:arguments,se=X instanceof It,we=Z[0],Ee=se||lt(X),ye=function(Dt){var xt=N.apply(q,ji([Dt],Z));return I&&Be?xt[0]:xt};Ee&&A&&typeof we=="function"&&we.length!=1&&(se=Ee=!1);var Be=this.__chain__,Me=!!this.__actions__.length,Ze=V&&!Be,Et=se&&!Me;if(!V&&Ee){X=Et?X:new It(this);var Qe=o.apply(X,Z);return Qe.__actions__.push({func:xd,args:[ye],thisArg:e}),new cs(Qe,Be)}return Ze&&Et?o.apply(this,Z):(Qe=this.thru(ye),Ze?I?Qe.value()[0]:Qe.value():Qe)})}),Ei(["pop","push","shift","sort","splice","unshift"],function(o){var l=Ic[o],A=/^(?:push|sort|unshift)$/.test(o)?"tap":"thru",I=/^(?:pop|shift)$/.test(o);q.prototype[o]=function(){var N=arguments;if(I&&!this.__chain__){var V=this.value();return l.apply(lt(V)?V:[],N)}return this[A](function(X){return l.apply(lt(X)?X:[],N)})}}),Qs(It.prototype,function(o,l){var A=q[l];if(A){var I=A.name+"";kt.call(kc,I)||(kc[I]=[]),kc[I].push({name:l,func:A})}}),kc[Dd(e,v).name]=[{name:"wrapper",func:e}],It.prototype.clone=pS,It.prototype.reverse=gS,It.prototype.value=mS,q.prototype.at=K8,q.prototype.chain=z8,q.prototype.commit=G8,q.prototype.next=Y8,q.prototype.plant=X8,q.prototype.reverse=J8,q.prototype.toJSON=q.prototype.valueOf=q.prototype.value=Z8,q.prototype.first=q.prototype.head,qa&&(q.prototype[qa]=W8),q},os=v1();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(zr._=os,define(function(){return os})):La?((La.exports=os)._=os,tf._=os):zr._=os}).call(zc)});var bg=ce(Gc=>{"use strict";Object.defineProperty(Gc,"__esModule",{value:!0});Gc.isCorrect=Gc.isInSubnet=void 0;function O$(e){return this.subnetMask<e.subnetMask?!1:this.mask(e.subnetMask)===e.mask()}Gc.isInSubnet=O$;function T$(e){return function(){return this.addressMinusSuffix!==this.correctForm()?!1:this.subnetMask===e&&!this.parsedSubnet?!0:this.parsedSubnet===String(this.subnetMask)}}Gc.isCorrect=T$});var _g=ce(na=>{"use strict";Object.defineProperty(na,"__esModule",{value:!0});na.RE_SUBNET_STRING=na.RE_ADDRESS=na.GROUPS=na.BITS=void 0;na.BITS=32;na.GROUPS=4;na.RE_ADDRESS=/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/g;na.RE_SUBNET_STRING=/\/\d{1,2}$/});var Xd=ce(Wd=>{"use strict";Object.defineProperty(Wd,"__esModule",{value:!0});Wd.AddressError=void 0;var Cg=class extends Error{constructor(t,r){super(t),this.name="AddressError",r!==null&&(this.parseMessage=r)}};Wd.AddressError=Cg});var Dg=ce((Jd,qA)=>{(function(){var e,t=0xdeadbeefcafe,r=(t&16777215)==15715070;function n(O,L,K){O!=null&&(typeof O=="number"?this.fromNumber(O,L,K):L==null&&typeof O!="string"?this.fromString(O,256):this.fromString(O,L))}function i(){return new n(null)}function a(O,L,K,Q,ve,Ae){for(;--Ae>=0;){var Ie=L*this[O++]+K[Q]+ve;ve=Math.floor(Ie/67108864),K[Q++]=Ie&67108863}return ve}function s(O,L,K,Q,ve,Ae){for(var Ie=L&32767,Pe=L>>15;--Ae>=0;){var nr=this[O]&32767,Pr=this[O++]>>15,Dn=Pe*nr+Pr*Ie;nr=Ie*nr+((Dn&32767)<<15)+K[Q]+(ve&1073741823),ve=(nr>>>30)+(Dn>>>15)+Pe*Pr+(ve>>>30),K[Q++]=nr&1073741823}return ve}function u(O,L,K,Q,ve,Ae){for(var Ie=L&16383,Pe=L>>14;--Ae>=0;){var nr=this[O]&16383,Pr=this[O++]>>14,Dn=Pe*nr+Pr*Ie;nr=Ie*nr+((Dn&16383)<<14)+K[Q]+ve,ve=(nr>>28)+(Dn>>14)+Pe*Pr,K[Q++]=nr&268435455}return ve}var c=typeof navigator<"u";c&&r&&navigator.appName=="Microsoft Internet Explorer"?(n.prototype.am=s,e=30):c&&r&&navigator.appName!="Netscape"?(n.prototype.am=a,e=26):(n.prototype.am=u,e=28),n.prototype.DB=e,n.prototype.DM=(1<<e)-1,n.prototype.DV=1<<e;var f=52;n.prototype.FV=Math.pow(2,f),n.prototype.F1=f-e,n.prototype.F2=2*e-f;var h="0123456789abcdefghijklmnopqrstuvwxyz",g=new Array,p,d;for(p=48,d=0;d<=9;++d)g[p++]=d;for(p=97,d=10;d<36;++d)g[p++]=d;for(p=65,d=10;d<36;++d)g[p++]=d;function w(O){return h.charAt(O)}function v(O,L){var K=g[O.charCodeAt(L)];return K??-1}function b(O){for(var L=this.t-1;L>=0;--L)O[L]=this[L];O.t=this.t,O.s=this.s}function m(O){this.t=1,this.s=O<0?-1:0,O>0?this[0]=O:O<-1?this[0]=O+this.DV:this.t=0}function y(O){var L=i();return L.fromInt(O),L}function D(O,L){var K;if(L==16)K=4;else if(L==8)K=3;else if(L==256)K=8;else if(L==2)K=1;else if(L==32)K=5;else if(L==4)K=2;else{this.fromRadix(O,L);return}this.t=0,this.s=0;for(var Q=O.length,ve=!1,Ae=0;--Q>=0;){var Ie=K==8?O[Q]&255:v(O,Q);if(Ie<0){O.charAt(Q)=="-"&&(ve=!0);continue}ve=!1,Ae==0?this[this.t++]=Ie:Ae+K>this.DB?(this[this.t-1]|=(Ie&(1<<this.DB-Ae)-1)<<Ae,this[this.t++]=Ie>>this.DB-Ae):this[this.t-1]|=Ie<<Ae,Ae+=K,Ae>=this.DB&&(Ae-=this.DB)}K==8&&O[0]&128&&(this.s=-1,Ae>0&&(this[this.t-1]|=(1<<this.DB-Ae)-1<<Ae)),this.clamp(),ve&&n.ZERO.subTo(this,this)}function C(){for(var O=this.s&this.DM;this.t>0&&this[this.t-1]==O;)--this.t}function F(O){if(this.s<0)return"-"+this.negate().toString(O);var L;if(O==16)L=4;else if(O==8)L=3;else if(O==2)L=1;else if(O==32)L=5;else if(O==4)L=2;else return this.toRadix(O);var K=(1<<L)-1,Q,ve=!1,Ae="",Ie=this.t,Pe=this.DB-Ie*this.DB%L;if(Ie-- >0)for(Pe<this.DB&&(Q=this[Ie]>>Pe)>0&&(ve=!0,Ae=w(Q));Ie>=0;)Pe<L?(Q=(this[Ie]&(1<<Pe)-1)<<L-Pe,Q|=this[--Ie]>>(Pe+=this.DB-L)):(Q=this[Ie]>>(Pe-=L)&K,Pe<=0&&(Pe+=this.DB,--Ie)),Q>0&&(ve=!0),ve&&(Ae+=w(Q));return ve?Ae:"0"}function U(){var O=i();return n.ZERO.subTo(this,O),O}function k(){return this.s<0?this.negate():this}function S(O){var L=this.s-O.s;if(L!=0)return L;var K=this.t;if(L=K-O.t,L!=0)return this.s<0?-L:L;for(;--K>=0;)if((L=this[K]-O[K])!=0)return L;return 0}function B(O){var L=1,K;return(K=O>>>16)!=0&&(O=K,L+=16),(K=O>>8)!=0&&(O=K,L+=8),(K=O>>4)!=0&&(O=K,L+=4),(K=O>>2)!=0&&(O=K,L+=2),(K=O>>1)!=0&&(O=K,L+=1),L}function T(){return this.t<=0?0:this.DB*(this.t-1)+B(this[this.t-1]^this.s&this.DM)}function P(O,L){var K;for(K=this.t-1;K>=0;--K)L[K+O]=this[K];for(K=O-1;K>=0;--K)L[K]=0;L.t=this.t+O,L.s=this.s}function j(O,L){for(var K=O;K<this.t;++K)L[K-O]=this[K];L.t=Math.max(this.t-O,0),L.s=this.s}function Y(O,L){var K=O%this.DB,Q=this.DB-K,ve=(1<<Q)-1,Ae=Math.floor(O/this.DB),Ie=this.s<<K&this.DM,Pe;for(Pe=this.t-1;Pe>=0;--Pe)L[Pe+Ae+1]=this[Pe]>>Q|Ie,Ie=(this[Pe]&ve)<<K;for(Pe=Ae-1;Pe>=0;--Pe)L[Pe]=0;L[Ae]=Ie,L.t=this.t+Ae+1,L.s=this.s,L.clamp()}function M(O,L){L.s=this.s;var K=Math.floor(O/this.DB);if(K>=this.t){L.t=0;return}var Q=O%this.DB,ve=this.DB-Q,Ae=(1<<Q)-1;L[0]=this[K]>>Q;for(var Ie=K+1;Ie<this.t;++Ie)L[Ie-K-1]|=(this[Ie]&Ae)<<ve,L[Ie-K]=this[Ie]>>Q;Q>0&&(L[this.t-K-1]|=(this.s&Ae)<<ve),L.t=this.t-K,L.clamp()}function z(O,L){for(var K=0,Q=0,ve=Math.min(O.t,this.t);K<ve;)Q+=this[K]-O[K],L[K++]=Q&this.DM,Q>>=this.DB;if(O.t<this.t){for(Q-=O.s;K<this.t;)Q+=this[K],L[K++]=Q&this.DM,Q>>=this.DB;Q+=this.s}else{for(Q+=this.s;K<O.t;)Q-=O[K],L[K++]=Q&this.DM,Q>>=this.DB;Q-=O.s}L.s=Q<0?-1:0,Q<-1?L[K++]=this.DV+Q:Q>0&&(L[K++]=Q),L.t=K,L.clamp()}function W(O,L){var K=this.abs(),Q=O.abs(),ve=K.t;for(L.t=ve+Q.t;--ve>=0;)L[ve]=0;for(ve=0;ve<Q.t;++ve)L[ve+K.t]=K.am(0,Q[ve],L,ve,0,K.t);L.s=0,L.clamp(),this.s!=O.s&&n.ZERO.subTo(L,L)}function ie(O){for(var L=this.abs(),K=O.t=2*L.t;--K>=0;)O[K]=0;for(K=0;K<L.t-1;++K){var Q=L.am(K,L[K],O,2*K,0,1);(O[K+L.t]+=L.am(K+1,2*L[K],O,2*K+1,Q,L.t-K-1))>=L.DV&&(O[K+L.t]-=L.DV,O[K+L.t+1]=1)}O.t>0&&(O[O.t-1]+=L.am(K,L[K],O,2*K,0,1)),O.s=0,O.clamp()}function Ce(O,L,K){var Q=O.abs();if(!(Q.t<=0)){var ve=this.abs();if(ve.t<Q.t){L?.fromInt(0),K!=null&&this.copyTo(K);return}K==null&&(K=i());var Ae=i(),Ie=this.s,Pe=O.s,nr=this.DB-B(Q[Q.t-1]);nr>0?(Q.lShiftTo(nr,Ae),ve.lShiftTo(nr,K)):(Q.copyTo(Ae),ve.copyTo(K));var Pr=Ae.t,Dn=Ae[Pr-1];if(Dn!=0){var Fn=Dn*(1<<this.F1)+(Pr>1?Ae[Pr-2]>>this.F2:0),Li=this.FV/Fn,Ou=(1<<this.F1)/Fn,ti=1<<this.F2,Sn=K.t,Tu=Sn-Pr,as=L??i();for(Ae.dlShiftTo(Tu,as),K.compareTo(as)>=0&&(K[K.t++]=1,K.subTo(as,K)),n.ONE.dlShiftTo(Pr,as),as.subTo(Ae,Ae);Ae.t<Pr;)Ae[Ae.t++]=0;for(;--Tu>=0;){var Fo=K[--Sn]==Dn?this.DM:Math.floor(K[Sn]*Li+(K[Sn-1]+ti)*Ou);if((K[Sn]+=Ae.am(0,Fo,K,Tu,0,Pr))<Fo)for(Ae.dlShiftTo(Tu,as),K.subTo(as,K);K[Sn]<--Fo;)K.subTo(as,K)}L!=null&&(K.drShiftTo(Pr,L),Ie!=Pe&&n.ZERO.subTo(L,L)),K.t=Pr,K.clamp(),nr>0&&K.rShiftTo(nr,K),Ie<0&&n.ZERO.subTo(K,K)}}}function Fe(O){var L=i();return this.abs().divRemTo(O,null,L),this.s<0&&L.compareTo(n.ZERO)>0&&O.subTo(L,L),L}function xe(O){this.m=O}function it(O){return O.s<0||O.compareTo(this.m)>=0?O.mod(this.m):O}function nt(O){return O}function dt(O){O.divRemTo(this.m,null,O)}function pt(O,L,K){O.multiplyTo(L,K),this.reduce(K)}function wn(O,L){O.squareTo(L),this.reduce(L)}xe.prototype.convert=it,xe.prototype.revert=nt,xe.prototype.reduce=dt,xe.prototype.mulTo=pt,xe.prototype.sqrTo=wn;function hr(){if(this.t<1)return 0;var O=this[0];if(!(O&1))return 0;var L=O&3;return L=L*(2-(O&15)*L)&15,L=L*(2-(O&255)*L)&255,L=L*(2-((O&65535)*L&65535))&65535,L=L*(2-O*L%this.DV)%this.DV,L>0?this.DV-L:-L}function St(O){this.m=O,this.mp=O.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<O.DB-15)-1,this.mt2=2*O.t}function Br(O){var L=i();return O.abs().dlShiftTo(this.m.t,L),L.divRemTo(this.m,null,L),O.s<0&&L.compareTo(n.ZERO)>0&&this.m.subTo(L,L),L}function gr(O){var L=i();return O.copyTo(L),this.reduce(L),L}function vt(O){for(;O.t<=this.mt2;)O[O.t++]=0;for(var L=0;L<this.m.t;++L){var K=O[L]&32767,Q=K*this.mpl+((K*this.mph+(O[L]>>15)*this.mpl&this.um)<<15)&O.DM;for(K=L+this.m.t,O[K]+=this.m.am(0,Q,O,L,0,this.m.t);O[K]>=O.DV;)O[K]-=O.DV,O[++K]++}O.clamp(),O.drShiftTo(this.m.t,O),O.compareTo(this.m)>=0&&O.subTo(this.m,O)}function tr(O,L){O.squareTo(L),this.reduce(L)}function st(O,L,K){O.multiplyTo(L,K),this.reduce(K)}St.prototype.convert=Br,St.prototype.revert=gr,St.prototype.reduce=vt,St.prototype.mulTo=st,St.prototype.sqrTo=tr;function Ge(){return(this.t>0?this[0]&1:this.s)==0}function mr(O,L){if(O>4294967295||O<1)return n.ONE;var K=i(),Q=i(),ve=L.convert(this),Ae=B(O)-1;for(ve.copyTo(K);--Ae>=0;)if(L.sqrTo(K,Q),(O&1<<Ae)>0)L.mulTo(Q,ve,K);else{var Ie=K;K=Q,Q=Ie}return L.revert(K)}function qe(O,L){var K;return O<256||L.isEven()?K=new xe(L):K=new St(L),this.exp(O,K)}n.prototype.copyTo=b,n.prototype.fromInt=m,n.prototype.fromString=D,n.prototype.clamp=C,n.prototype.dlShiftTo=P,n.prototype.drShiftTo=j,n.prototype.lShiftTo=Y,n.prototype.rShiftTo=M,n.prototype.subTo=z,n.prototype.multiplyTo=W,n.prototype.squareTo=ie,n.prototype.divRemTo=Ce,n.prototype.invDigit=hr,n.prototype.isEven=Ge,n.prototype.exp=mr,n.prototype.toString=F,n.prototype.negate=U,n.prototype.abs=k,n.prototype.compareTo=S,n.prototype.bitLength=T,n.prototype.mod=Fe,n.prototype.modPowInt=qe,n.ZERO=y(0),n.ONE=y(1);function Ht(){var O=i();return this.copyTo(O),O}function En(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function cr(){return this.t==0?this.s:this[0]<<24>>24}function rr(){return this.t==0?this.s:this[0]<<16>>16}function yt(O){return Math.floor(Math.LN2*this.DB/Math.log(O))}function Vr(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1}function ki(O){if(O==null&&(O=10),this.signum()==0||O<2||O>36)return"0";var L=this.chunkSize(O),K=Math.pow(O,L),Q=y(K),ve=i(),Ae=i(),Ie="";for(this.divRemTo(Q,ve,Ae);ve.signum()>0;)Ie=(K+Ae.intValue()).toString(O).substr(1)+Ie,ve.divRemTo(Q,ve,Ae);return Ae.intValue().toString(O)+Ie}function An(O,L){this.fromInt(0),L==null&&(L=10);for(var K=this.chunkSize(L),Q=Math.pow(L,K),ve=!1,Ae=0,Ie=0,Pe=0;Pe<O.length;++Pe){var nr=v(O,Pe);if(nr<0){O.charAt(Pe)=="-"&&this.signum()==0&&(ve=!0);continue}Ie=L*Ie+nr,++Ae>=K&&(this.dMultiply(Q),this.dAddOffset(Ie,0),Ae=0,Ie=0)}Ae>0&&(this.dMultiply(Math.pow(L,Ae)),this.dAddOffset(Ie,0)),ve&&n.ZERO.subTo(this,this)}function $t(O,L,K){if(typeof L=="number")if(O<2)this.fromInt(1);else for(this.fromNumber(O,K),this.testBit(O-1)||this.bitwiseTo(n.ONE.shiftLeft(O-1),ge,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(L);)this.dAddOffset(2,0),this.bitLength()>O&&this.subTo(n.ONE.shiftLeft(O-1),this);else{var Q=new Array,ve=O&7;Q.length=(O>>3)+1,L.nextBytes(Q),ve>0?Q[0]&=(1<<ve)-1:Q[0]=0,this.fromString(Q,256)}}function He(){var O=this.t,L=new Array;L[0]=this.s;var K=this.DB-O*this.DB%8,Q,ve=0;if(O-- >0)for(K<this.DB&&(Q=this[O]>>K)!=(this.s&this.DM)>>K&&(L[ve++]=Q|this.s<<this.DB-K);O>=0;)K<8?(Q=(this[O]&(1<<K)-1)<<8-K,Q|=this[--O]>>(K+=this.DB-8)):(Q=this[O]>>(K-=8)&255,K<=0&&(K+=this.DB,--O)),Q&128&&(Q|=-256),ve==0&&(this.s&128)!=(Q&128)&&++ve,(ve>0||Q!=this.s)&&(L[ve++]=Q);return L}function De(O){return this.compareTo(O)==0}function $r(O){return this.compareTo(O)<0?this:O}function yn(O){return this.compareTo(O)>0?this:O}function at(O,L,K){var Q,ve,Ae=Math.min(O.t,this.t);for(Q=0;Q<Ae;++Q)K[Q]=L(this[Q],O[Q]);if(O.t<this.t){for(ve=O.s&this.DM,Q=Ae;Q<this.t;++Q)K[Q]=L(this[Q],ve);K.t=this.t}else{for(ve=this.s&this.DM,Q=Ae;Q<O.t;++Q)K[Q]=L(ve,O[Q]);K.t=O.t}K.s=L(this.s,O.s),K.clamp()}function Na(O,L){return O&L}function bn(O){var L=i();return this.bitwiseTo(O,Na,L),L}function ge(O,L){return O|L}function Ks(O){var L=i();return this.bitwiseTo(O,ge,L),L}function Nt(O,L){return O^L}function on(O){var L=i();return this.bitwiseTo(O,Nt,L),L}function Fs(O,L){return O&~L}function Bu(O){var L=i();return this.bitwiseTo(O,Fs,L),L}function zs(){for(var O=i(),L=0;L<this.t;++L)O[L]=this.DM&~this[L];return O.t=this.t,O.s=~this.s,O}function $u(O){var L=i();return O<0?this.rShiftTo(-O,L):this.lShiftTo(O,L),L}function Gs(O){var L=i();return O<0?this.lShiftTo(-O,L):this.rShiftTo(O,L),L}function Ss(O){if(O==0)return-1;var L=0;return O&65535||(O>>=16,L+=16),O&255||(O>>=8,L+=8),O&15||(O>>=4,L+=4),O&3||(O>>=2,L+=2),O&1||++L,L}function Mt(){for(var O=0;O<this.t;++O)if(this[O]!=0)return O*this.DB+Ss(this[O]);return this.s<0?this.t*this.DB:-1}function pi(O){for(var L=0;O!=0;)O&=O-1,++L;return L}function Ru(){for(var O=0,L=this.s&this.DM,K=0;K<this.t;++K)O+=pi(this[K]^L);return O}function xu(O){var L=Math.floor(O/this.DB);return L>=this.t?this.s!=0:(this[L]&1<<O%this.DB)!=0}function Pu(O,L){var K=n.ONE.shiftLeft(O);return this.bitwiseTo(K,L,K),K}function Ys(O){return this.changeBit(O,ge)}function vo(O){return this.changeBit(O,Fs)}function Ws(O){return this.changeBit(O,Nt)}function wo(O,L){for(var K=0,Q=0,ve=Math.min(O.t,this.t);K<ve;)Q+=this[K]+O[K],L[K++]=Q&this.DM,Q>>=this.DB;if(O.t<this.t){for(Q+=O.s;K<this.t;)Q+=this[K],L[K++]=Q&this.DM,Q>>=this.DB;Q+=this.s}else{for(Q+=this.s;K<O.t;)Q+=O[K],L[K++]=Q&this.DM,Q>>=this.DB;Q+=O.s}L.s=Q<0?-1:0,Q>0?L[K++]=Q:Q<-1&&(L[K++]=this.DV+Q),L.t=K,L.clamp()}function ka(O){var L=i();return this.addTo(O,L),L}function re(O){var L=i();return this.subTo(O,L),L}function fe(O){var L=i();return this.multiplyTo(O,L),L}function Ue(){var O=i();return this.squareTo(O),O}function Oe(O){var L=i();return this.divRemTo(O,L,null),L}function ze(O){var L=i();return this.divRemTo(O,null,L),L}function ut(O){var L=i(),K=i();return this.divRemTo(O,L,K),new Array(L,K)}function gt(O){this[this.t]=this.am(0,O-1,this,0,0,this.t),++this.t,this.clamp()}function Ur(O,L){if(O!=0){for(;this.t<=L;)this[this.t++]=0;for(this[L]+=O;this[L]>=this.DV;)this[L]-=this.DV,++L>=this.t&&(this[this.t++]=0),++this[L]}}function Yt(){}function gi(O){return O}function ss(O,L,K){O.multiplyTo(L,K)}function _n(O,L){O.squareTo(L)}Yt.prototype.convert=gi,Yt.prototype.revert=gi,Yt.prototype.mulTo=ss,Yt.prototype.sqrTo=_n;function Nn(O){return this.exp(O,new Yt)}function Rr(O,L,K){var Q=Math.min(this.t+O.t,L);for(K.s=0,K.t=Q;Q>0;)K[--Q]=0;var ve;for(ve=K.t-this.t;Q<ve;++Q)K[Q+this.t]=this.am(0,O[Q],K,Q,0,this.t);for(ve=Math.min(O.t,L);Q<ve;++Q)this.am(0,O[Q],K,Q,0,L-Q);K.clamp()}function Cn(O,L,K){--L;var Q=K.t=this.t+O.t-L;for(K.s=0;--Q>=0;)K[Q]=0;for(Q=Math.max(L-this.t,0);Q<O.t;++Q)K[this.t+Q-L]=this.am(L-Q,O[Q],K,0,0,this.t+Q-L);K.clamp(),K.drShiftTo(1,K)}function en(O){this.r2=i(),this.q3=i(),n.ONE.dlShiftTo(2*O.t,this.r2),this.mu=this.r2.divide(O),this.m=O}function Eo(O){if(O.s<0||O.t>2*this.m.t)return O.mod(this.m);if(O.compareTo(this.m)<0)return O;var L=i();return O.copyTo(L),this.reduce(L),L}function Xs(O){return O}function Jn(O){for(O.drShiftTo(this.m.t-1,this.r2),O.t>this.m.t+1&&(O.t=this.m.t+1,O.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);O.compareTo(this.r2)<0;)O.dAddOffset(1,this.m.t+1);for(O.subTo(this.r2,O);O.compareTo(this.m)>=0;)O.subTo(this.m,O)}function Ut(O,L){O.squareTo(L),this.reduce(L)}function xr(O,L,K){O.multiplyTo(L,K),this.reduce(K)}en.prototype.convert=Eo,en.prototype.revert=Xs,en.prototype.reduce=Jn,en.prototype.mulTo=xr,en.prototype.sqrTo=Ut;function et(O,L){var K=O.bitLength(),Q,ve=y(1),Ae;if(K<=0)return ve;K<18?Q=1:K<48?Q=3:K<144?Q=4:K<768?Q=5:Q=6,K<8?Ae=new xe(L):L.isEven()?Ae=new en(L):Ae=new St(L);var Ie=new Array,Pe=3,nr=Q-1,Pr=(1<<Q)-1;if(Ie[1]=Ae.convert(this),Q>1){var Dn=i();for(Ae.sqrTo(Ie[1],Dn);Pe<=Pr;)Ie[Pe]=i(),Ae.mulTo(Dn,Ie[Pe-2],Ie[Pe]),Pe+=2}var Fn=O.t-1,Li,Ou=!0,ti=i(),Sn;for(K=B(O[Fn])-1;Fn>=0;){for(K>=nr?Li=O[Fn]>>K-nr&Pr:(Li=(O[Fn]&(1<<K+1)-1)<<nr-K,Fn>0&&(Li|=O[Fn-1]>>this.DB+K-nr)),Pe=Q;!(Li&1);)Li>>=1,--Pe;if((K-=Pe)<0&&(K+=this.DB,--Fn),Ou)Ie[Li].copyTo(ve),Ou=!1;else{for(;Pe>1;)Ae.sqrTo(ve,ti),Ae.sqrTo(ti,ve),Pe-=2;Pe>0?Ae.sqrTo(ve,ti):(Sn=ve,ve=ti,ti=Sn),Ae.mulTo(ti,Ie[Li],ve)}for(;Fn>=0&&!(O[Fn]&1<<K);)Ae.sqrTo(ve,ti),Sn=ve,ve=ti,ti=Sn,--K<0&&(K=this.DB-1,--Fn)}return Ae.revert(ve)}function vr(O){var L=this.s<0?this.negate():this.clone(),K=O.s<0?O.negate():O.clone();if(L.compareTo(K)<0){var Q=L;L=K,K=Q}var ve=L.getLowestSetBit(),Ae=K.getLowestSetBit();if(Ae<0)return L;for(ve<Ae&&(Ae=ve),Ae>0&&(L.rShiftTo(Ae,L),K.rShiftTo(Ae,K));L.signum()>0;)(ve=L.getLowestSetBit())>0&&L.rShiftTo(ve,L),(ve=K.getLowestSetBit())>0&&K.rShiftTo(ve,K),L.compareTo(K)>=0?(L.subTo(K,L),L.rShiftTo(1,L)):(K.subTo(L,K),K.rShiftTo(1,K));return Ae>0&&K.lShiftTo(Ae,K),K}function cn(O){if(O<=0)return 0;var L=this.DV%O,K=this.s<0?O-1:0;if(this.t>0)if(L==0)K=this[0]%O;else for(var Q=this.t-1;Q>=0;--Q)K=(L*K+this[Q])%O;return K}function wr(O){var L=O.isEven();if(this.isEven()&&L||O.signum()==0)return n.ZERO;for(var K=O.clone(),Q=this.clone(),ve=y(1),Ae=y(0),Ie=y(0),Pe=y(1);K.signum()!=0;){for(;K.isEven();)K.rShiftTo(1,K),L?((!ve.isEven()||!Ae.isEven())&&(ve.addTo(this,ve),Ae.subTo(O,Ae)),ve.rShiftTo(1,ve)):Ae.isEven()||Ae.subTo(O,Ae),Ae.rShiftTo(1,Ae);for(;Q.isEven();)Q.rShiftTo(1,Q),L?((!Ie.isEven()||!Pe.isEven())&&(Ie.addTo(this,Ie),Pe.subTo(O,Pe)),Ie.rShiftTo(1,Ie)):Pe.isEven()||Pe.subTo(O,Pe),Pe.rShiftTo(1,Pe);K.compareTo(Q)>=0?(K.subTo(Q,K),L&&ve.subTo(Ie,ve),Ae.subTo(Pe,Ae)):(Q.subTo(K,Q),L&&Ie.subTo(ve,Ie),Pe.subTo(Ae,Pe))}if(Q.compareTo(n.ONE)!=0)return n.ZERO;if(Pe.compareTo(O)>=0)return Pe.subtract(O);if(Pe.signum()<0)Pe.addTo(O,Pe);else return Pe;return Pe.signum()<0?Pe.add(O):Pe}var Wt=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],Zn=(1<<26)/Wt[Wt.length-1];function mi(O){var L,K=this.abs();if(K.t==1&&K[0]<=Wt[Wt.length-1]){for(L=0;L<Wt.length;++L)if(K[0]==Wt[L])return!0;return!1}if(K.isEven())return!1;for(L=1;L<Wt.length;){for(var Q=Wt[L],ve=L+1;ve<Wt.length&&Q<Zn;)Q*=Wt[ve++];for(Q=K.modInt(Q);L<ve;)if(Q%Wt[L++]==0)return!1}return K.millerRabin(O)}function vi(O){var L=this.subtract(n.ONE),K=L.getLowestSetBit();if(K<=0)return!1;var Q=L.shiftRight(K);O=O+1>>1,O>Wt.length&&(O=Wt.length);for(var ve=i(),Ae=0;Ae<O;++Ae){ve.fromInt(Wt[Math.floor(Math.random()*Wt.length)]);var Ie=ve.modPow(Q,this);if(Ie.compareTo(n.ONE)!=0&&Ie.compareTo(L)!=0){for(var Pe=1;Pe++<K&&Ie.compareTo(L)!=0;)if(Ie=Ie.modPowInt(2,this),Ie.compareTo(n.ONE)==0)return!1;if(Ie.compareTo(L)!=0)return!1}}return!0}n.prototype.chunkSize=yt,n.prototype.toRadix=ki,n.prototype.fromRadix=An,n.prototype.fromNumber=$t,n.prototype.bitwiseTo=at,n.prototype.changeBit=Pu,n.prototype.addTo=wo,n.prototype.dMultiply=gt,n.prototype.dAddOffset=Ur,n.prototype.multiplyLowerTo=Rr,n.prototype.multiplyUpperTo=Cn,n.prototype.modInt=cn,n.prototype.millerRabin=vi,n.prototype.clone=Ht,n.prototype.intValue=En,n.prototype.byteValue=cr,n.prototype.shortValue=rr,n.prototype.signum=Vr,n.prototype.toByteArray=He,n.prototype.equals=De,n.prototype.min=$r,n.prototype.max=yn,n.prototype.and=bn,n.prototype.or=Ks,n.prototype.xor=on,n.prototype.andNot=Bu,n.prototype.not=zs,n.prototype.shiftLeft=$u,n.prototype.shiftRight=Gs,n.prototype.getLowestSetBit=Mt,n.prototype.bitCount=Ru,n.prototype.testBit=xu,n.prototype.setBit=Ys,n.prototype.clearBit=vo,n.prototype.flipBit=Ws,n.prototype.add=ka,n.prototype.subtract=re,n.prototype.multiply=fe,n.prototype.divide=Oe,n.prototype.remainder=ze,n.prototype.divideAndRemainder=ut,n.prototype.modPow=et,n.prototype.modInverse=wr,n.prototype.pow=Nn,n.prototype.gcd=vr,n.prototype.isProbablePrime=mi,n.prototype.square=Ue,n.prototype.Barrett=en;var Qn,Kr,yr;function ef(O){Kr[yr++]^=O&255,Kr[yr++]^=O>>8&255,Kr[yr++]^=O>>16&255,Kr[yr++]^=O>>24&255,yr>=ei&&(yr-=ei)}function Ao(){ef(new Date().getTime())}if(Kr==null){Kr=new Array,yr=0;var ln;if(typeof window<"u"&&window.crypto){if(window.crypto.getRandomValues){var yo=new Uint8Array(32);for(window.crypto.getRandomValues(yo),ln=0;ln<32;++ln)Kr[yr++]=yo[ln]}else if(navigator.appName=="Netscape"&&navigator.appVersion<"5"){var Ac=window.crypto.random(32);for(ln=0;ln<Ac.length;++ln)Kr[yr++]=Ac.charCodeAt(ln)&255}}for(;yr<ei;)ln=Math.floor(65536*Math.random()),Kr[yr++]=ln>>>8,Kr[yr++]=ln&255;yr=0,Ao()}function yc(){if(Qn==null){for(Ao(),Qn=Do(),Qn.init(Kr),yr=0;yr<Kr.length;++yr)Kr[yr]=0;yr=0}return Qn.next()}function bo(O){var L;for(L=0;L<O.length;++L)O[L]=yc()}function Js(){}Js.prototype.nextBytes=bo;function _o(){this.i=0,this.j=0,this.S=new Array}function bc(O){var L,K,Q;for(L=0;L<256;++L)this.S[L]=L;for(K=0,L=0;L<256;++L)K=K+this.S[L]+O[L%O.length]&255,Q=this.S[L],this.S[L]=this.S[K],this.S[K]=Q;this.i=0,this.j=0}function Co(){var O;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,O=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=O,this.S[O+this.S[this.i]&255]}_o.prototype.init=bc,_o.prototype.next=Co;function Do(){return new _o}var ei=256;typeof Jd<"u"?Jd=qA.exports={default:n,BigInteger:n,SecureRandom:Js}:this.jsbn={BigInteger:n,SecureRandom:Js}}).call(Jd)});var If=ce(Zd=>{(function(){"use strict";var e={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function t(s){return n(a(s),arguments)}function r(s,u){return t.apply(null,[s].concat(u||[]))}function n(s,u){var c=1,f=s.length,h,g="",p,d,w,v,b,m,y,D;for(p=0;p<f;p++)if(typeof s[p]=="string")g+=s[p];else if(typeof s[p]=="object"){if(w=s[p],w.keys)for(h=u[c],d=0;d<w.keys.length;d++){if(h==null)throw new Error(t('[sprintf] Cannot access property "%s" of undefined value "%s"',w.keys[d],w.keys[d-1]));h=h[w.keys[d]]}else w.param_no?h=u[w.param_no]:h=u[c++];if(e.not_type.test(w.type)&&e.not_primitive.test(w.type)&&h instanceof Function&&(h=h()),e.numeric_arg.test(w.type)&&typeof h!="number"&&isNaN(h))throw new TypeError(t("[sprintf] expecting number but found %T",h));switch(e.number.test(w.type)&&(y=h>=0),w.type){case"b":h=parseInt(h,10).toString(2);break;case"c":h=String.fromCharCode(parseInt(h,10));break;case"d":case"i":h=parseInt(h,10);break;case"j":h=JSON.stringify(h,null,w.width?parseInt(w.width):0);break;case"e":h=w.precision?parseFloat(h).toExponential(w.precision):parseFloat(h).toExponential();break;case"f":h=w.precision?parseFloat(h).toFixed(w.precision):parseFloat(h);break;case"g":h=w.precision?String(Number(h.toPrecision(w.precision))):parseFloat(h);break;case"o":h=(parseInt(h,10)>>>0).toString(8);break;case"s":h=String(h),h=w.precision?h.substring(0,w.precision):h;break;case"t":h=String(!!h),h=w.precision?h.substring(0,w.precision):h;break;case"T":h=Object.prototype.toString.call(h).slice(8,-1).toLowerCase(),h=w.precision?h.substring(0,w.precision):h;break;case"u":h=parseInt(h,10)>>>0;break;case"v":h=h.valueOf(),h=w.precision?h.substring(0,w.precision):h;break;case"x":h=(parseInt(h,10)>>>0).toString(16);break;case"X":h=(parseInt(h,10)>>>0).toString(16).toUpperCase();break}e.json.test(w.type)?g+=h:(e.number.test(w.type)&&(!y||w.sign)?(D=y?"+":"-",h=h.toString().replace(e.sign,"")):D="",b=w.pad_char?w.pad_char==="0"?"0":w.pad_char.charAt(1):" ",m=w.width-(D+h).length,v=w.width&&m>0?b.repeat(m):"",g+=w.align?D+h+v:b==="0"?D+v+h:v+D+h)}return g}var i=Object.create(null);function a(s){if(i[s])return i[s];for(var u=s,c,f=[],h=0;u;){if((c=e.text.exec(u))!==null)f.push(c[0]);else if((c=e.modulo.exec(u))!==null)f.push("%");else if((c=e.placeholder.exec(u))!==null){if(c[2]){h|=1;var g=[],p=c[2],d=[];if((d=e.key.exec(p))!==null)for(g.push(d[1]);(p=p.substring(d[0].length))!=="";)if((d=e.key_access.exec(p))!==null)g.push(d[1]);else if((d=e.index_access.exec(p))!==null)g.push(d[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");c[2]=g}else h|=2;if(h===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");f.push({placeholder:c[0],param_no:c[1],keys:c[2],sign:c[3],pad_char:c[4],align:c[5],width:c[6],precision:c[7],type:c[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");u=u.substring(c[0].length)}return i[s]=f}typeof Zd<"u"&&(Zd.sprintf=t,Zd.vsprintf=r),typeof window<"u"&&(window.sprintf=t,window.vsprintf=r,typeof define=="function"&&define.amd&&define(function(){return{sprintf:t,vsprintf:r}}))})()});var Sg=ce(ia=>{"use strict";var N$=ia&&ia.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),k$=ia&&ia.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),zA=ia&&ia.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&N$(t,e,r);return k$(t,e),t};Object.defineProperty(ia,"__esModule",{value:!0});ia.Address4=void 0;var VA=zA(bg()),Ps=zA(_g()),KA=Xd(),Bf=Dg(),Yc=If(),Fg=class e{constructor(t){this.groups=Ps.GROUPS,this.parsedAddress=[],this.parsedSubnet="",this.subnet="/32",this.subnetMask=32,this.v4=!0,this.isCorrect=VA.isCorrect(Ps.BITS),this.isInSubnet=VA.isInSubnet,this.address=t;let r=Ps.RE_SUBNET_STRING.exec(t);if(r){if(this.parsedSubnet=r[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet=`/${this.subnetMask}`,this.subnetMask<0||this.subnetMask>Ps.BITS)throw new KA.AddressError("Invalid subnet mask.");t=t.replace(Ps.RE_SUBNET_STRING,"")}this.addressMinusSuffix=t,this.parsedAddress=this.parse(t)}static isValid(t){try{return new e(t),!0}catch{return!1}}parse(t){let r=t.split(".");if(!t.match(Ps.RE_ADDRESS))throw new KA.AddressError("Invalid IPv4 address.");return r}correctForm(){return this.parsedAddress.map(t=>parseInt(t,10)).join(".")}static fromHex(t){let r=t.replace(/:/g,"").padStart(8,"0"),n=[],i;for(i=0;i<8;i+=2){let a=r.slice(i,i+2);n.push(parseInt(a,16))}return new e(n.join("."))}static fromInteger(t){return e.fromHex(t.toString(16))}static fromArpa(t){let n=t.replace(/(\.in-addr\.arpa)?\.$/,"").split(".").reverse().join(".");return new e(n)}toHex(){return this.parsedAddress.map(t=>(0,Yc.sprintf)("%02x",parseInt(t,10))).join(":")}toArray(){return this.parsedAddress.map(t=>parseInt(t,10))}toGroup6(){let t=[],r;for(r=0;r<Ps.GROUPS;r+=2){let n=(0,Yc.sprintf)("%02x%02x",parseInt(this.parsedAddress[r],10),parseInt(this.parsedAddress[r+1],10));t.push((0,Yc.sprintf)("%x",parseInt(n,16)))}return t.join(":")}bigInteger(){return new Bf.BigInteger(this.parsedAddress.map(t=>(0,Yc.sprintf)("%02x",parseInt(t,10))).join(""),16)}_startAddress(){return new Bf.BigInteger(this.mask()+"0".repeat(Ps.BITS-this.subnetMask),2)}startAddress(){return e.fromBigInteger(this._startAddress())}startAddressExclusive(){let t=new Bf.BigInteger("1");return e.fromBigInteger(this._startAddress().add(t))}_endAddress(){return new Bf.BigInteger(this.mask()+"1".repeat(Ps.BITS-this.subnetMask),2)}endAddress(){return e.fromBigInteger(this._endAddress())}endAddressExclusive(){let t=new Bf.BigInteger("1");return e.fromBigInteger(this._endAddress().subtract(t))}static fromBigInteger(t){return e.fromInteger(parseInt(t.toString(),10))}mask(t){return t===void 0&&(t=this.subnetMask),this.getBitsBase2(0,t)}getBitsBase2(t,r){return this.binaryZeroPad().slice(t,r)}reverseForm(t){t||(t={});let r=this.correctForm().split(".").reverse().join(".");return t.omitSuffix?r:(0,Yc.sprintf)("%s.in-addr.arpa.",r)}isMulticast(){return this.isInSubnet(new e("224.0.0.0/4"))}binaryZeroPad(){return this.bigInteger().toString(2).padStart(Ps.BITS,"0")}groupForV6(){let t=this.parsedAddress;return this.address.replace(Ps.RE_ADDRESS,(0,Yc.sprintf)('<span class="hover-group group-v4 group-6">%s</span>.<span class="hover-group group-v4 group-7">%s</span>',t.slice(0,2).join("."),t.slice(2,4).join(".")))}};ia.Address4=Fg});var Ig=ce(Nr=>{"use strict";Object.defineProperty(Nr,"__esModule",{value:!0});Nr.RE_URL_WITH_PORT=Nr.RE_URL=Nr.RE_ZONE_STRING=Nr.RE_SUBNET_STRING=Nr.RE_BAD_ADDRESS=Nr.RE_BAD_CHARACTERS=Nr.TYPES=Nr.SCOPES=Nr.GROUPS=Nr.BITS=void 0;Nr.BITS=128;Nr.GROUPS=8;Nr.SCOPES={0:"Reserved",1:"Interface local",2:"Link local",4:"Admin local",5:"Site local",8:"Organization local",14:"Global",15:"Reserved"};Nr.TYPES={"ff01::1/128":"Multicast (All nodes on this interface)","ff01::2/128":"Multicast (All routers on this interface)","ff02::1/128":"Multicast (All nodes on this link)","ff02::2/128":"Multicast (All routers on this link)","ff05::2/128":"Multicast (All routers in this site)","ff02::5/128":"Multicast (OSPFv3 AllSPF routers)","ff02::6/128":"Multicast (OSPFv3 AllDR routers)","ff02::9/128":"Multicast (RIP routers)","ff02::a/128":"Multicast (EIGRP routers)","ff02::d/128":"Multicast (PIM routers)","ff02::16/128":"Multicast (MLDv2 reports)","ff01::fb/128":"Multicast (mDNSv6)","ff02::fb/128":"Multicast (mDNSv6)","ff05::fb/128":"Multicast (mDNSv6)","ff02::1:2/128":"Multicast (All DHCP servers and relay agents on this link)","ff05::1:2/128":"Multicast (All DHCP servers and relay agents in this site)","ff02::1:3/128":"Multicast (All DHCP servers on this link)","ff05::1:3/128":"Multicast (All DHCP servers in this site)","::/128":"Unspecified","::1/128":"Loopback","ff00::/8":"Multicast","fe80::/10":"Link-local unicast"};Nr.RE_BAD_CHARACTERS=/([^0-9a-f:/%])/gi;Nr.RE_BAD_ADDRESS=/([0-9a-f]{5,}|:{3,}|[^:]:$|^:[^:]|\/$)/gi;Nr.RE_SUBNET_STRING=/\/\d{1,3}(?=%|$)/;Nr.RE_ZONE_STRING=/%.*$/;Nr.RE_URL=new RegExp(/^\[{0,1}([0-9a-f:]+)\]{0,1}/);Nr.RE_URL_WITH_PORT=new RegExp(/\[([0-9a-f:]+)\]:([0-9]{1,5})/)});var Bg=ce(sa=>{"use strict";Object.defineProperty(sa,"__esModule",{value:!0});sa.simpleGroup=sa.spanLeadingZeroes=sa.spanAll=sa.spanAllZeroes=void 0;var GA=If();function YA(e){return e.replace(/(0+)/g,'<span class="zero">$1</span>')}sa.spanAllZeroes=YA;function L$(e,t=0){return e.split("").map((n,i)=>(0,GA.sprintf)('<span class="digit value-%s position-%d">%s</span>',n,i+t,YA(n))).join("")}sa.spanAll=L$;function WA(e){return e.replace(/^(0+)/,'<span class="zero">$1</span>')}function U$(e){return e.split(":").map(r=>WA(r)).join(":")}sa.spanLeadingZeroes=U$;function j$(e,t=0){return e.split(":").map((n,i)=>/group-v4/.test(n)?n:(0,GA.sprintf)('<span class="hover-group group-%d">%s</span>',i+t,WA(n)))}sa.simpleGroup=j$});var XA=ce(dn=>{"use strict";var H$=dn&&dn.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),M$=dn&&dn.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),q$=dn&&dn.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&H$(t,e,r);return M$(t,e),t};Object.defineProperty(dn,"__esModule",{value:!0});dn.possibleElisions=dn.simpleRegularExpression=dn.ADDRESS_BOUNDARY=dn.padGroup=dn.groupPossibilities=void 0;var V$=q$(Ig()),Wc=If();function e0(e){return(0,Wc.sprintf)("(%s)",e.join("|"))}dn.groupPossibilities=e0;function Qd(e){return e.length<4?(0,Wc.sprintf)("0{0,%d}%s",4-e.length,e):e}dn.padGroup=Qd;dn.ADDRESS_BOUNDARY="[^A-Fa-f0-9:]";function K$(e){let t=[];e.forEach((n,i)=>{parseInt(n,16)===0&&t.push(i)});let r=t.map(n=>e.map((i,a)=>{if(a===n){let s=a===0||a===V$.GROUPS-1?":":"";return e0([Qd(i),s])}return Qd(i)}).join(":"));return r.push(e.map(Qd).join(":")),e0(r)}dn.simpleRegularExpression=K$;function z$(e,t,r){let n=t?"":":",i=r?"":":",a=[];!t&&!r&&a.push("::"),t&&r&&a.push(""),(r&&!t||!r&&t)&&a.push(":"),a.push((0,Wc.sprintf)("%s(:0{1,4}){1,%d}",n,e-1)),a.push((0,Wc.sprintf)("(0{1,4}:){1,%d}%s",e-1,i)),a.push((0,Wc.sprintf)("(0{1,4}:){%d}0{1,4}",e-1));for(let s=1;s<e-1;s++)for(let u=1;u<e-s;u++)a.push((0,Wc.sprintf)("(0{1,4}:){%d}:(0{1,4}:){%d}0{1,4}",u,e-u-s-1));return e0(a)}dn.possibleElisions=z$});var ey=ce(aa=>{"use strict";var G$=aa&&aa.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Y$=aa&&aa.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r0=aa&&aa.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&G$(t,e,r);return Y$(t,e),t};Object.defineProperty(aa,"__esModule",{value:!0});aa.Address6=void 0;var JA=r0(bg()),$g=r0(_g()),dr=r0(Ig()),Rg=r0(Bg()),Mo=Sg(),qo=XA(),tu=Xd(),oi=Dg(),ci=If();function t0(e){if(!e)throw new Error("Assertion failed.")}function W$(e){let t=/(\d+)(\d{3})/;for(;t.test(e);)e=e.replace(t,"$1,$2");return e}function X$(e){return e=e.replace(/^(0{1,})([1-9]+)$/,'<span class="parse-error">$1</span>$2'),e=e.replace(/^(0{1,})(0)$/,'<span class="parse-error">$1</span>$2'),e}function J$(e,t){let r=[],n=[],i;for(i=0;i<e.length;i++)i<t[0]?r.push(e[i]):i>t[1]&&n.push(e[i]);return r.concat(["compact"]).concat(n)}function ZA(e){return(0,ci.sprintf)("%04x",parseInt(e,16))}function QA(e){return e&255}var xg=class e{constructor(t,r){this.addressMinusSuffix="",this.parsedSubnet="",this.subnet="/128",this.subnetMask=128,this.v4=!1,this.zone="",this.isInSubnet=JA.isInSubnet,this.isCorrect=JA.isCorrect(dr.BITS),r===void 0?this.groups=dr.GROUPS:this.groups=r,this.address=t;let n=dr.RE_SUBNET_STRING.exec(t);if(n){if(this.parsedSubnet=n[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet=`/${this.subnetMask}`,Number.isNaN(this.subnetMask)||this.subnetMask<0||this.subnetMask>dr.BITS)throw new tu.AddressError("Invalid subnet mask.");t=t.replace(dr.RE_SUBNET_STRING,"")}else if(/\//.test(t))throw new tu.AddressError("Invalid subnet mask.");let i=dr.RE_ZONE_STRING.exec(t);i&&(this.zone=i[0],t=t.replace(dr.RE_ZONE_STRING,"")),this.addressMinusSuffix=t,this.parsedAddress=this.parse(this.addressMinusSuffix)}static isValid(t){try{return new e(t),!0}catch{return!1}}static fromBigInteger(t){let r=t.toString(16).padStart(32,"0"),n=[],i;for(i=0;i<dr.GROUPS;i++)n.push(r.slice(i*4,(i+1)*4));return new e(n.join(":"))}static fromURL(t){let r,n=null,i;if(t.indexOf("[")!==-1&&t.indexOf("]:")!==-1){if(i=dr.RE_URL_WITH_PORT.exec(t),i===null)return{error:"failed to parse address with port",address:null,port:null};r=i[1],n=i[2]}else if(t.indexOf("/")!==-1){if(t=t.replace(/^[a-z0-9]+:\/\//,""),i=dr.RE_URL.exec(t),i===null)return{error:"failed to parse address from URL",address:null,port:null};r=i[1]}else r=t;return n?(n=parseInt(n,10),(n<0||n>65536)&&(n=null)):n=null,{address:new e(r),port:n}}static fromAddress4(t){let r=new Mo.Address4(t),n=dr.BITS-($g.BITS-r.subnetMask);return new e(`::ffff:${r.correctForm()}/${n}`)}static fromArpa(t){let r=t.replace(/(\.ip6\.arpa)?\.$/,""),n=7;if(r.length!==63)throw new tu.AddressError("Invalid 'ip6.arpa' form.");let i=r.split(".").reverse();for(let a=n;a>0;a--){let s=a*4;i.splice(s,0,":")}return r=i.join(""),new e(r)}microsoftTranscription(){return(0,ci.sprintf)("%s.ipv6-literal.net",this.correctForm().replace(/:/g,"-"))}mask(t=this.subnetMask){return this.getBitsBase2(0,t)}possibleSubnets(t=128){let r=dr.BITS-this.subnetMask,n=Math.abs(t-dr.BITS),i=r-n;return i<0?"0":W$(new oi.BigInteger("2",10).pow(i).toString(10))}_startAddress(){return new oi.BigInteger(this.mask()+"0".repeat(dr.BITS-this.subnetMask),2)}startAddress(){return e.fromBigInteger(this._startAddress())}startAddressExclusive(){let t=new oi.BigInteger("1");return e.fromBigInteger(this._startAddress().add(t))}_endAddress(){return new oi.BigInteger(this.mask()+"1".repeat(dr.BITS-this.subnetMask),2)}endAddress(){return e.fromBigInteger(this._endAddress())}endAddressExclusive(){let t=new oi.BigInteger("1");return e.fromBigInteger(this._endAddress().subtract(t))}getScope(){let t=dr.SCOPES[this.getBits(12,16).intValue()];return this.getType()==="Global unicast"&&t!=="Link local"&&(t="Global"),t||"Unknown"}getType(){for(let t of Object.keys(dr.TYPES))if(this.isInSubnet(new e(t)))return dr.TYPES[t];return"Global unicast"}getBits(t,r){return new oi.BigInteger(this.getBitsBase2(t,r),2)}getBitsBase2(t,r){return this.binaryZeroPad().slice(t,r)}getBitsBase16(t,r){let n=r-t;if(n%4!==0)throw new Error("Length of bits to retrieve must be divisible by four");return this.getBits(t,r).toString(16).padStart(n/4,"0")}getBitsPastSubnet(){return this.getBitsBase2(this.subnetMask,dr.BITS)}reverseForm(t){t||(t={});let r=Math.floor(this.subnetMask/4),n=this.canonicalForm().replace(/:/g,"").split("").slice(0,r).reverse().join(".");return r>0?t.omitSuffix?n:(0,ci.sprintf)("%s.ip6.arpa.",n):t.omitSuffix?"":"ip6.arpa."}correctForm(){let t,r=[],n=0,i=[];for(t=0;t<this.parsedAddress.length;t++){let u=parseInt(this.parsedAddress[t],16);u===0&&n++,u!==0&&n>0&&(n>1&&i.push([t-n,t-1]),n=0)}n>1&&i.push([this.parsedAddress.length-n,this.parsedAddress.length-1]);let a=i.map(u=>u[1]-u[0]+1);if(i.length>0){let u=a.indexOf(Math.max(...a));r=J$(this.parsedAddress,i[u])}else r=this.parsedAddress;for(t=0;t<r.length;t++)r[t]!=="compact"&&(r[t]=parseInt(r[t],16).toString(16));let s=r.join(":");return s=s.replace(/^compact$/,"::"),s=s.replace(/^compact|compact$/,":"),s=s.replace(/compact/,""),s}binaryZeroPad(){return this.bigInteger().toString(2).padStart(dr.BITS,"0")}parse4in6(t){let r=t.split(":"),i=r.slice(-1)[0].match($g.RE_ADDRESS);if(i){this.parsedAddress4=i[0],this.address4=new Mo.Address4(this.parsedAddress4);for(let a=0;a<this.address4.groups;a++)if(/^0[0-9]+/.test(this.address4.parsedAddress[a]))throw new tu.AddressError("IPv4 addresses can't have leading zeroes.",t.replace($g.RE_ADDRESS,this.address4.parsedAddress.map(X$).join(".")));this.v4=!0,r[r.length-1]=this.address4.toGroup6(),t=r.join(":")}return t}parse(t){t=this.parse4in6(t);let r=t.match(dr.RE_BAD_CHARACTERS);if(r)throw new tu.AddressError((0,ci.sprintf)("Bad character%s detected in address: %s",r.length>1?"s":"",r.join("")),t.replace(dr.RE_BAD_CHARACTERS,'<span class="parse-error">$1</span>'));let n=t.match(dr.RE_BAD_ADDRESS);if(n)throw new tu.AddressError((0,ci.sprintf)("Address failed regex: %s",n.join("")),t.replace(dr.RE_BAD_ADDRESS,'<span class="parse-error">$1</span>'));let i=[],a=t.split("::");if(a.length===2){let s=a[0].split(":"),u=a[1].split(":");s.length===1&&s[0]===""&&(s=[]),u.length===1&&u[0]===""&&(u=[]);let c=this.groups-(s.length+u.length);if(!c)throw new tu.AddressError("Error parsing groups");this.elidedGroups=c,this.elisionBegin=s.length,this.elisionEnd=s.length+this.elidedGroups,i=i.concat(s);for(let f=0;f<c;f++)i.push("0");i=i.concat(u)}else if(a.length===1)i=t.split(":"),this.elidedGroups=0;else throw new tu.AddressError("Too many :: groups found");if(i=i.map(s=>(0,ci.sprintf)("%x",parseInt(s,16))),i.length!==this.groups)throw new tu.AddressError("Incorrect number of groups found");return i}canonicalForm(){return this.parsedAddress.map(ZA).join(":")}decimal(){return this.parsedAddress.map(t=>(0,ci.sprintf)("%05d",parseInt(t,16))).join(":")}bigInteger(){return new oi.BigInteger(this.parsedAddress.map(ZA).join(""),16)}to4(){let t=this.binaryZeroPad().split("");return Mo.Address4.fromHex(new oi.BigInteger(t.slice(96,128).join(""),2).toString(16))}to4in6(){let t=this.to4(),n=new e(this.parsedAddress.slice(0,6).join(":"),6).correctForm(),i="";return/:$/.test(n)||(i=":"),n+i+t.address}inspectTeredo(){let t=this.getBitsBase16(0,32),r=this.getBits(80,96).xor(new oi.BigInteger("ffff",16)).toString(),n=Mo.Address4.fromHex(this.getBitsBase16(32,64)),i=Mo.Address4.fromHex(this.getBits(96,128).xor(new oi.BigInteger("ffffffff",16)).toString(16)),a=this.getBits(64,80),s=this.getBitsBase2(64,80),u=a.testBit(15),c=a.testBit(14),f=a.testBit(8),h=a.testBit(9),g=new oi.BigInteger(s.slice(2,6)+s.slice(8,16),2).toString(10);return{prefix:(0,ci.sprintf)("%s:%s",t.slice(0,4),t.slice(4,8)),server4:n.address,client4:i.address,flags:s,coneNat:u,microsoft:{reserved:c,universalLocal:h,groupIndividual:f,nonce:g},udpPort:r}}inspect6to4(){let t=this.getBitsBase16(0,16),r=Mo.Address4.fromHex(this.getBitsBase16(16,48));return{prefix:(0,ci.sprintf)("%s",t.slice(0,4)),gateway:r.address}}to6to4(){if(!this.is4())return null;let t=["2002",this.getBitsBase16(96,112),this.getBitsBase16(112,128),"","/16"].join(":");return new e(t)}toByteArray(){let t=this.bigInteger().toByteArray();return t.length===17&&t[0]===0?t.slice(1):t}toUnsignedByteArray(){return this.toByteArray().map(QA)}static fromByteArray(t){return this.fromUnsignedByteArray(t.map(QA))}static fromUnsignedByteArray(t){let r=new oi.BigInteger("256",10),n=new oi.BigInteger("0",10),i=new oi.BigInteger("1",10);for(let a=t.length-1;a>=0;a--)n=n.add(i.multiply(new oi.BigInteger(t[a].toString(10),10))),i=i.multiply(r);return e.fromBigInteger(n)}isCanonical(){return this.addressMinusSuffix===this.canonicalForm()}isLinkLocal(){return this.getBitsBase2(0,64)==="1111111010000000000000000000000000000000000000000000000000000000"}isMulticast(){return this.getType()==="Multicast"}is4(){return this.v4}isTeredo(){return this.isInSubnet(new e("2001::/32"))}is6to4(){return this.isInSubnet(new e("2002::/16"))}isLoopback(){return this.getType()==="Loopback"}href(t){return t===void 0?t="":t=(0,ci.sprintf)(":%s",t),(0,ci.sprintf)("http://[%s]%s/",this.correctForm(),t)}link(t){t||(t={}),t.className===void 0&&(t.className=""),t.prefix===void 0&&(t.prefix="/#address="),t.v4===void 0&&(t.v4=!1);let r=this.correctForm;return t.v4&&(r=this.to4in6),t.className?(0,ci.sprintf)('<a href="%1$s%2$s" class="%3$s">%2$s</a>',t.prefix,r.call(this),t.className):(0,ci.sprintf)('<a href="%1$s%2$s">%2$s</a>',t.prefix,r.call(this))}group(){if(this.elidedGroups===0)return Rg.simpleGroup(this.address).join(":");t0(typeof this.elidedGroups=="number"),t0(typeof this.elisionBegin=="number");let t=[],[r,n]=this.address.split("::");r.length?t.push(...Rg.simpleGroup(r)):t.push("");let i=["hover-group"];for(let a=this.elisionBegin;a<this.elisionBegin+this.elidedGroups;a++)i.push((0,ci.sprintf)("group-%d",a));return t.push((0,ci.sprintf)('<span class="%s"></span>',i.join(" "))),n.length?t.push(...Rg.simpleGroup(n,this.elisionEnd)):t.push(""),this.is4()&&(t0(this.address4 instanceof Mo.Address4),t.pop(),t.push(this.address4.groupForV6())),t.join(":")}regularExpressionString(t=!1){let r=[],n=new e(this.correctForm());if(n.elidedGroups===0)r.push((0,qo.simpleRegularExpression)(n.parsedAddress));else if(n.elidedGroups===dr.GROUPS)r.push((0,qo.possibleElisions)(dr.GROUPS));else{let i=n.address.split("::");i[0].length&&r.push((0,qo.simpleRegularExpression)(i[0].split(":"))),t0(typeof n.elidedGroups=="number"),r.push((0,qo.possibleElisions)(n.elidedGroups,i[0].length!==0,i[1].length!==0)),i[1].length&&r.push((0,qo.simpleRegularExpression)(i[1].split(":"))),r=[r.join(":")]}return t||(r=["(?=^|",qo.ADDRESS_BOUNDARY,"|[^\\w\\:])(",...r,")(?=[^\\w\\:]|",qo.ADDRESS_BOUNDARY,"|$)"]),r.join("")}regularExpression(t=!1){return new RegExp(this.regularExpressionString(t),"i")}};aa.Address6=xg});var ty=ce(Kn=>{"use strict";var Z$=Kn&&Kn.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Q$=Kn&&Kn.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),e7=Kn&&Kn.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&Z$(t,e,r);return Q$(t,e),t};Object.defineProperty(Kn,"__esModule",{value:!0});Kn.v6=Kn.AddressError=Kn.Address6=Kn.Address4=void 0;var t7=Sg();Object.defineProperty(Kn,"Address4",{enumerable:!0,get:function(){return t7.Address4}});var r7=ey();Object.defineProperty(Kn,"Address6",{enumerable:!0,get:function(){return r7.Address6}});var n7=Xd();Object.defineProperty(Kn,"AddressError",{enumerable:!0,get:function(){return n7.AddressError}});var i7=e7(Bg());Kn.v6={helpers:i7}});var uy=ce(u0=>{"use strict";u0.byteLength=f7;u0.toByteArray=d7;u0.fromByteArray=m7;var ca=[],vs=[],l7=typeof Uint8Array<"u"?Uint8Array:Array,Tg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(zo=0,sy=Tg.length;zo<sy;++zo)ca[zo]=Tg[zo],vs[Tg.charCodeAt(zo)]=zo;var zo,sy;vs[45]=62;vs[95]=63;function ay(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");r===-1&&(r=t);var n=r===t?0:4-r%4;return[r,n]}function f7(e){var t=ay(e),r=t[0],n=t[1];return(r+n)*3/4-n}function h7(e,t,r){return(t+r)*3/4-r}function d7(e){var t,r=ay(e),n=r[0],i=r[1],a=new l7(h7(e,n,i)),s=0,u=i>0?n-4:n,c;for(c=0;c<u;c+=4)t=vs[e.charCodeAt(c)]<<18|vs[e.charCodeAt(c+1)]<<12|vs[e.charCodeAt(c+2)]<<6|vs[e.charCodeAt(c+3)],a[s++]=t>>16&255,a[s++]=t>>8&255,a[s++]=t&255;return i===2&&(t=vs[e.charCodeAt(c)]<<2|vs[e.charCodeAt(c+1)]>>4,a[s++]=t&255),i===1&&(t=vs[e.charCodeAt(c)]<<10|vs[e.charCodeAt(c+1)]<<4|vs[e.charCodeAt(c+2)]>>2,a[s++]=t>>8&255,a[s++]=t&255),a}function p7(e){return ca[e>>18&63]+ca[e>>12&63]+ca[e>>6&63]+ca[e&63]}function g7(e,t,r){for(var n,i=[],a=t;a<r;a+=3)n=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(e[a+2]&255),i.push(p7(n));return i.join("")}function m7(e){for(var t,r=e.length,n=r%3,i=[],a=16383,s=0,u=r-n;s<u;s+=a)i.push(g7(e,s,s+a>u?u:s+a));return n===1?(t=e[r-1],i.push(ca[t>>2]+ca[t<<4&63]+"==")):n===2&&(t=(e[r-2]<<8)+e[r-1],i.push(ca[t>>10]+ca[t>>4&63]+ca[t<<2&63]+"=")),i.join("")}});var oy=ce(Ng=>{Ng.read=function(e,t,r,n,i){var a,s,u=i*8-n-1,c=(1<<u)-1,f=c>>1,h=-7,g=r?i-1:0,p=r?-1:1,d=e[t+g];for(g+=p,a=d&(1<<-h)-1,d>>=-h,h+=u;h>0;a=a*256+e[t+g],g+=p,h-=8);for(s=a&(1<<-h)-1,a>>=-h,h+=n;h>0;s=s*256+e[t+g],g+=p,h-=8);if(a===0)a=1-f;else{if(a===c)return s?NaN:(d?-1:1)*(1/0);s=s+Math.pow(2,n),a=a-f}return(d?-1:1)*s*Math.pow(2,a-n)};Ng.write=function(e,t,r,n,i,a){var s,u,c,f=a*8-i-1,h=(1<<f)-1,g=h>>1,p=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:a-1,w=n?1:-1,v=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,s=h):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),s+g>=1?t+=p/c:t+=p*Math.pow(2,1-g),t*c>=2&&(s++,c/=2),s+g>=h?(u=0,s=h):s+g>=1?(u=(t*c-1)*Math.pow(2,i),s=s+g):(u=t*Math.pow(2,g-1)*Math.pow(2,i),s=0));i>=8;e[r+d]=u&255,d+=w,u/=256,i-=8);for(s=s<<i|u,f+=i;f>0;e[r+d]=s&255,d+=w,s/=256,f-=8);e[r+d-w]|=v*128}});var l0=ce(il=>{"use strict";var kg=uy(),rl=oy(),cy=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;il.Buffer=de;il.SlowBuffer=b7;il.INSPECT_MAX_BYTES=50;var o0=2147483647;il.kMaxLength=o0;de.TYPED_ARRAY_SUPPORT=v7();!de.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function v7(){try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),e.foo()===42}catch{return!1}}Object.defineProperty(de.prototype,"parent",{enumerable:!0,get:function(){if(de.isBuffer(this))return this.buffer}});Object.defineProperty(de.prototype,"offset",{enumerable:!0,get:function(){if(de.isBuffer(this))return this.byteOffset}});function nu(e){if(e>o0)throw new RangeError('The value "'+e+'" is invalid for option "size"');let t=new Uint8Array(e);return Object.setPrototypeOf(t,de.prototype),t}function de(e,t,r){if(typeof e=="number"){if(typeof t=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Hg(e)}return dy(e,t,r)}de.poolSize=8192;function dy(e,t,r){if(typeof e=="string")return E7(e,t);if(ArrayBuffer.isView(e))return A7(e);if(e==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(la(e,ArrayBuffer)||e&&la(e.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(la(e,SharedArrayBuffer)||e&&la(e.buffer,SharedArrayBuffer)))return Ug(e,t,r);if(typeof e=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=e.valueOf&&e.valueOf();if(n!=null&&n!==e)return de.from(n,t,r);let i=y7(e);if(i)return i;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof e[Symbol.toPrimitive]=="function")return de.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}de.from=function(e,t,r){return dy(e,t,r)};Object.setPrototypeOf(de.prototype,Uint8Array.prototype);Object.setPrototypeOf(de,Uint8Array);function py(e){if(typeof e!="number")throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function w7(e,t,r){return py(e),e<=0?nu(e):t!==void 0?typeof r=="string"?nu(e).fill(t,r):nu(e).fill(t):nu(e)}de.alloc=function(e,t,r){return w7(e,t,r)};function Hg(e){return py(e),nu(e<0?0:Mg(e)|0)}de.allocUnsafe=function(e){return Hg(e)};de.allocUnsafeSlow=function(e){return Hg(e)};function E7(e,t){if((typeof t!="string"||t==="")&&(t="utf8"),!de.isEncoding(t))throw new TypeError("Unknown encoding: "+t);let r=gy(e,t)|0,n=nu(r),i=n.write(e,t);return i!==r&&(n=n.slice(0,i)),n}function Lg(e){let t=e.length<0?0:Mg(e.length)|0,r=nu(t);for(let n=0;n<t;n+=1)r[n]=e[n]&255;return r}function A7(e){if(la(e,Uint8Array)){let t=new Uint8Array(e);return Ug(t.buffer,t.byteOffset,t.byteLength)}return Lg(e)}function Ug(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return t===void 0&&r===void 0?n=new Uint8Array(e):r===void 0?n=new Uint8Array(e,t):n=new Uint8Array(e,t,r),Object.setPrototypeOf(n,de.prototype),n}function y7(e){if(de.isBuffer(e)){let t=Mg(e.length)|0,r=nu(t);return r.length===0||e.copy(r,0,0,t),r}if(e.length!==void 0)return typeof e.length!="number"||Vg(e.length)?nu(0):Lg(e);if(e.type==="Buffer"&&Array.isArray(e.data))return Lg(e.data)}function Mg(e){if(e>=o0)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o0.toString(16)+" bytes");return e|0}function b7(e){return+e!=e&&(e=0),de.alloc(+e)}de.isBuffer=function(t){return t!=null&&t._isBuffer===!0&&t!==de.prototype};de.compare=function(t,r){if(la(t,Uint8Array)&&(t=de.from(t,t.offset,t.byteLength)),la(r,Uint8Array)&&(r=de.from(r,r.offset,r.byteLength)),!de.isBuffer(t)||!de.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===r)return 0;let n=t.length,i=r.length;for(let a=0,s=Math.min(n,i);a<s;++a)if(t[a]!==r[a]){n=t[a],i=r[a];break}return n<i?-1:i<n?1:0};de.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};de.concat=function(t,r){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return de.alloc(0);let n;if(r===void 0)for(r=0,n=0;n<t.length;++n)r+=t[n].length;let i=de.allocUnsafe(r),a=0;for(n=0;n<t.length;++n){let s=t[n];if(la(s,Uint8Array))a+s.length>i.length?(de.isBuffer(s)||(s=de.from(s)),s.copy(i,a)):Uint8Array.prototype.set.call(i,s,a);else if(de.isBuffer(s))s.copy(i,a);else throw new TypeError('"list" argument must be an Array of Buffers');a+=s.length}return i};function gy(e,t){if(de.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||la(e,ArrayBuffer))return e.byteLength;if(typeof e!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let r=e.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&r===0)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return jg(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return Cy(e).length;default:if(i)return n?-1:jg(e).length;t=(""+t).toLowerCase(),i=!0}}de.byteLength=gy;function _7(e,t,r){let n=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,t>>>=0,r<=t))return"";for(e||(e="utf8");;)switch(e){case"hex":return P7(this,t,r);case"utf8":case"utf-8":return vy(this,t,r);case"ascii":return R7(this,t,r);case"latin1":case"binary":return x7(this,t,r);case"base64":return B7(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O7(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}de.prototype._isBuffer=!0;function Go(e,t,r){let n=e[t];e[t]=e[r],e[r]=n}de.prototype.swap16=function(){let t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<t;r+=2)Go(this,r,r+1);return this};de.prototype.swap32=function(){let t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<t;r+=4)Go(this,r,r+3),Go(this,r+1,r+2);return this};de.prototype.swap64=function(){let t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<t;r+=8)Go(this,r,r+7),Go(this,r+1,r+6),Go(this,r+2,r+5),Go(this,r+3,r+4);return this};de.prototype.toString=function(){let t=this.length;return t===0?"":arguments.length===0?vy(this,0,t):_7.apply(this,arguments)};de.prototype.toLocaleString=de.prototype.toString;de.prototype.equals=function(t){if(!de.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:de.compare(this,t)===0};de.prototype.inspect=function(){let t="",r=il.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"};cy&&(de.prototype[cy]=de.prototype.inspect);de.prototype.compare=function(t,r,n,i,a){if(la(t,Uint8Array)&&(t=de.from(t,t.offset,t.byteLength)),!de.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(r===void 0&&(r=0),n===void 0&&(n=t?t.length:0),i===void 0&&(i=0),a===void 0&&(a=this.length),r<0||n>t.length||i<0||a>this.length)throw new RangeError("out of range index");if(i>=a&&r>=n)return 0;if(i>=a)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,i>>>=0,a>>>=0,this===t)return 0;let s=a-i,u=n-r,c=Math.min(s,u),f=this.slice(i,a),h=t.slice(r,n);for(let g=0;g<c;++g)if(f[g]!==h[g]){s=f[g],u=h[g];break}return s<u?-1:u<s?1:0};function my(e,t,r,n,i){if(e.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,Vg(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0)if(i)r=0;else return-1;if(typeof t=="string"&&(t=de.from(t,n)),de.isBuffer(t))return t.length===0?-1:ly(e,t,r,n,i);if(typeof t=="number")return t=t&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):ly(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function ly(e,t,r,n,i){let a=1,s=e.length,u=t.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,r/=2}function c(h,g){return a===1?h[g]:h.readUInt16BE(g*a)}let f;if(i){let h=-1;for(f=r;f<s;f++)if(c(e,f)===c(t,h===-1?0:f-h)){if(h===-1&&(h=f),f-h+1===u)return h*a}else h!==-1&&(f-=f-h),h=-1}else for(r+u>s&&(r=s-u),f=r;f>=0;f--){let h=!0;for(let g=0;g<u;g++)if(c(e,f+g)!==c(t,g)){h=!1;break}if(h)return f}return-1}de.prototype.includes=function(t,r,n){return this.indexOf(t,r,n)!==-1};de.prototype.indexOf=function(t,r,n){return my(this,t,r,n,!0)};de.prototype.lastIndexOf=function(t,r,n){return my(this,t,r,n,!1)};function C7(e,t,r,n){r=Number(r)||0;let i=e.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;let a=t.length;n>a/2&&(n=a/2);let s;for(s=0;s<n;++s){let u=parseInt(t.substr(s*2,2),16);if(Vg(u))return s;e[r+s]=u}return s}function D7(e,t,r,n){return c0(jg(t,e.length-r),e,r,n)}function F7(e,t,r,n){return c0(L7(t),e,r,n)}function S7(e,t,r,n){return c0(Cy(t),e,r,n)}function I7(e,t,r,n){return c0(U7(t,e.length-r),e,r,n)}de.prototype.write=function(t,r,n,i){if(r===void 0)i="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")i=r,n=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(n)?(n=n>>>0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let a=this.length-r;if((n===void 0||n>a)&&(n=a),t.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let s=!1;for(;;)switch(i){case"hex":return C7(this,t,r,n);case"utf8":case"utf-8":return D7(this,t,r,n);case"ascii":case"latin1":case"binary":return F7(this,t,r,n);case"base64":return S7(this,t,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I7(this,t,r,n);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}};de.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function B7(e,t,r){return t===0&&r===e.length?kg.fromByteArray(e):kg.fromByteArray(e.slice(t,r))}function vy(e,t,r){r=Math.min(e.length,r);let n=[],i=t;for(;i<r;){let a=e[i],s=null,u=a>239?4:a>223?3:a>191?2:1;if(i+u<=r){let c,f,h,g;switch(u){case 1:a<128&&(s=a);break;case 2:c=e[i+1],(c&192)===128&&(g=(a&31)<<6|c&63,g>127&&(s=g));break;case 3:c=e[i+1],f=e[i+2],(c&192)===128&&(f&192)===128&&(g=(a&15)<<12|(c&63)<<6|f&63,g>2047&&(g<55296||g>57343)&&(s=g));break;case 4:c=e[i+1],f=e[i+2],h=e[i+3],(c&192)===128&&(f&192)===128&&(h&192)===128&&(g=(a&15)<<18|(c&63)<<12|(f&63)<<6|h&63,g>65535&&g<1114112&&(s=g))}}s===null?(s=65533,u=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|s&1023),n.push(s),i+=u}return $7(n)}var fy=4096;function $7(e){let t=e.length;if(t<=fy)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=fy));return r}function R7(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]&127);return n}function x7(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function P7(e,t,r){let n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let i="";for(let a=t;a<r;++a)i+=j7[e[a]];return i}function O7(e,t,r){let n=e.slice(t,r),i="";for(let a=0;a<n.length-1;a+=2)i+=String.fromCharCode(n[a]+n[a+1]*256);return i}de.prototype.slice=function(t,r){let n=this.length;t=~~t,r=r===void 0?n:~~r,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<t&&(r=t);let i=this.subarray(t,r);return Object.setPrototypeOf(i,de.prototype),i};function pn(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}de.prototype.readUintLE=de.prototype.readUIntLE=function(t,r,n){t=t>>>0,r=r>>>0,n||pn(t,r,this.length);let i=this[t],a=1,s=0;for(;++s<r&&(a*=256);)i+=this[t+s]*a;return i};de.prototype.readUintBE=de.prototype.readUIntBE=function(t,r,n){t=t>>>0,r=r>>>0,n||pn(t,r,this.length);let i=this[t+--r],a=1;for(;r>0&&(a*=256);)i+=this[t+--r]*a;return i};de.prototype.readUint8=de.prototype.readUInt8=function(t,r){return t=t>>>0,r||pn(t,1,this.length),this[t]};de.prototype.readUint16LE=de.prototype.readUInt16LE=function(t,r){return t=t>>>0,r||pn(t,2,this.length),this[t]|this[t+1]<<8};de.prototype.readUint16BE=de.prototype.readUInt16BE=function(t,r){return t=t>>>0,r||pn(t,2,this.length),this[t]<<8|this[t+1]};de.prototype.readUint32LE=de.prototype.readUInt32LE=function(t,r){return t=t>>>0,r||pn(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};de.prototype.readUint32BE=de.prototype.readUInt32BE=function(t,r){return t=t>>>0,r||pn(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};de.prototype.readBigUInt64LE=Wu(function(t){t=t>>>0,nl(t,"offset");let r=this[t],n=this[t+7];(r===void 0||n===void 0)&&xf(t,this.length-8);let i=r+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24,a=this[++t]+this[++t]*2**8+this[++t]*2**16+n*2**24;return BigInt(i)+(BigInt(a)<<BigInt(32))});de.prototype.readBigUInt64BE=Wu(function(t){t=t>>>0,nl(t,"offset");let r=this[t],n=this[t+7];(r===void 0||n===void 0)&&xf(t,this.length-8);let i=r*2**24+this[++t]*2**16+this[++t]*2**8+this[++t],a=this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+n;return(BigInt(i)<<BigInt(32))+BigInt(a)});de.prototype.readIntLE=function(t,r,n){t=t>>>0,r=r>>>0,n||pn(t,r,this.length);let i=this[t],a=1,s=0;for(;++s<r&&(a*=256);)i+=this[t+s]*a;return a*=128,i>=a&&(i-=Math.pow(2,8*r)),i};de.prototype.readIntBE=function(t,r,n){t=t>>>0,r=r>>>0,n||pn(t,r,this.length);let i=r,a=1,s=this[t+--i];for(;i>0&&(a*=256);)s+=this[t+--i]*a;return a*=128,s>=a&&(s-=Math.pow(2,8*r)),s};de.prototype.readInt8=function(t,r){return t=t>>>0,r||pn(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]};de.prototype.readInt16LE=function(t,r){t=t>>>0,r||pn(t,2,this.length);let n=this[t]|this[t+1]<<8;return n&32768?n|4294901760:n};de.prototype.readInt16BE=function(t,r){t=t>>>0,r||pn(t,2,this.length);let n=this[t+1]|this[t]<<8;return n&32768?n|4294901760:n};de.prototype.readInt32LE=function(t,r){return t=t>>>0,r||pn(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};de.prototype.readInt32BE=function(t,r){return t=t>>>0,r||pn(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};de.prototype.readBigInt64LE=Wu(function(t){t=t>>>0,nl(t,"offset");let r=this[t],n=this[t+7];(r===void 0||n===void 0)&&xf(t,this.length-8);let i=this[t+4]+this[t+5]*2**8+this[t+6]*2**16+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(r+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24)});de.prototype.readBigInt64BE=Wu(function(t){t=t>>>0,nl(t,"offset");let r=this[t],n=this[t+7];(r===void 0||n===void 0)&&xf(t,this.length-8);let i=(r<<24)+this[++t]*2**16+this[++t]*2**8+this[++t];return(BigInt(i)<<BigInt(32))+BigInt(this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+n)});de.prototype.readFloatLE=function(t,r){return t=t>>>0,r||pn(t,4,this.length),rl.read(this,t,!0,23,4)};de.prototype.readFloatBE=function(t,r){return t=t>>>0,r||pn(t,4,this.length),rl.read(this,t,!1,23,4)};de.prototype.readDoubleLE=function(t,r){return t=t>>>0,r||pn(t,8,this.length),rl.read(this,t,!0,52,8)};de.prototype.readDoubleBE=function(t,r){return t=t>>>0,r||pn(t,8,this.length),rl.read(this,t,!1,52,8)};function Fi(e,t,r,n,i,a){if(!de.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}de.prototype.writeUintLE=de.prototype.writeUIntLE=function(t,r,n,i){if(t=+t,r=r>>>0,n=n>>>0,!i){let u=Math.pow(2,8*n)-1;Fi(this,t,r,n,u,0)}let a=1,s=0;for(this[r]=t&255;++s<n&&(a*=256);)this[r+s]=t/a&255;return r+n};de.prototype.writeUintBE=de.prototype.writeUIntBE=function(t,r,n,i){if(t=+t,r=r>>>0,n=n>>>0,!i){let u=Math.pow(2,8*n)-1;Fi(this,t,r,n,u,0)}let a=n-1,s=1;for(this[r+a]=t&255;--a>=0&&(s*=256);)this[r+a]=t/s&255;return r+n};de.prototype.writeUint8=de.prototype.writeUInt8=function(t,r,n){return t=+t,r=r>>>0,n||Fi(this,t,r,1,255,0),this[r]=t&255,r+1};de.prototype.writeUint16LE=de.prototype.writeUInt16LE=function(t,r,n){return t=+t,r=r>>>0,n||Fi(this,t,r,2,65535,0),this[r]=t&255,this[r+1]=t>>>8,r+2};de.prototype.writeUint16BE=de.prototype.writeUInt16BE=function(t,r,n){return t=+t,r=r>>>0,n||Fi(this,t,r,2,65535,0),this[r]=t>>>8,this[r+1]=t&255,r+2};de.prototype.writeUint32LE=de.prototype.writeUInt32LE=function(t,r,n){return t=+t,r=r>>>0,n||Fi(this,t,r,4,4294967295,0),this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=t&255,r+4};de.prototype.writeUint32BE=de.prototype.writeUInt32BE=function(t,r,n){return t=+t,r=r>>>0,n||Fi(this,t,r,4,4294967295,0),this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=t&255,r+4};function wy(e,t,r,n,i){_y(t,n,i,e,r,7);let a=Number(t&BigInt(4294967295));e[r++]=a,a=a>>8,e[r++]=a,a=a>>8,e[r++]=a,a=a>>8,e[r++]=a;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=s,s=s>>8,e[r++]=s,s=s>>8,e[r++]=s,s=s>>8,e[r++]=s,r}function Ey(e,t,r,n,i){_y(t,n,i,e,r,7);let a=Number(t&BigInt(4294967295));e[r+7]=a,a=a>>8,e[r+6]=a,a=a>>8,e[r+5]=a,a=a>>8,e[r+4]=a;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=s,s=s>>8,e[r+2]=s,s=s>>8,e[r+1]=s,s=s>>8,e[r]=s,r+8}de.prototype.writeBigUInt64LE=Wu(function(t,r=0){return wy(this,t,r,BigInt(0),BigInt("0xffffffffffffffff"))});de.prototype.writeBigUInt64BE=Wu(function(t,r=0){return Ey(this,t,r,BigInt(0),BigInt("0xffffffffffffffff"))});de.prototype.writeIntLE=function(t,r,n,i){if(t=+t,r=r>>>0,!i){let c=Math.pow(2,8*n-1);Fi(this,t,r,n,c-1,-c)}let a=0,s=1,u=0;for(this[r]=t&255;++a<n&&(s*=256);)t<0&&u===0&&this[r+a-1]!==0&&(u=1),this[r+a]=(t/s>>0)-u&255;return r+n};de.prototype.writeIntBE=function(t,r,n,i){if(t=+t,r=r>>>0,!i){let c=Math.pow(2,8*n-1);Fi(this,t,r,n,c-1,-c)}let a=n-1,s=1,u=0;for(this[r+a]=t&255;--a>=0&&(s*=256);)t<0&&u===0&&this[r+a+1]!==0&&(u=1),this[r+a]=(t/s>>0)-u&255;return r+n};de.prototype.writeInt8=function(t,r,n){return t=+t,r=r>>>0,n||Fi(this,t,r,1,127,-128),t<0&&(t=255+t+1),this[r]=t&255,r+1};de.prototype.writeInt16LE=function(t,r,n){return t=+t,r=r>>>0,n||Fi(this,t,r,2,32767,-32768),this[r]=t&255,this[r+1]=t>>>8,r+2};de.prototype.writeInt16BE=function(t,r,n){return t=+t,r=r>>>0,n||Fi(this,t,r,2,32767,-32768),this[r]=t>>>8,this[r+1]=t&255,r+2};de.prototype.writeInt32LE=function(t,r,n){return t=+t,r=r>>>0,n||Fi(this,t,r,4,2147483647,-2147483648),this[r]=t&255,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24,r+4};de.prototype.writeInt32BE=function(t,r,n){return t=+t,r=r>>>0,n||Fi(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=t&255,r+4};de.prototype.writeBigInt64LE=Wu(function(t,r=0){return wy(this,t,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});de.prototype.writeBigInt64BE=Wu(function(t,r=0){return Ey(this,t,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ay(e,t,r,n,i,a){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function yy(e,t,r,n,i){return t=+t,r=r>>>0,i||Ay(e,t,r,4,34028234663852886e22,-34028234663852886e22),rl.write(e,t,r,n,23,4),r+4}de.prototype.writeFloatLE=function(t,r,n){return yy(this,t,r,!0,n)};de.prototype.writeFloatBE=function(t,r,n){return yy(this,t,r,!1,n)};function by(e,t,r,n,i){return t=+t,r=r>>>0,i||Ay(e,t,r,8,17976931348623157e292,-17976931348623157e292),rl.write(e,t,r,n,52,8),r+8}de.prototype.writeDoubleLE=function(t,r,n){return by(this,t,r,!0,n)};de.prototype.writeDoubleBE=function(t,r,n){return by(this,t,r,!1,n)};de.prototype.copy=function(t,r,n,i){if(!de.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),!i&&i!==0&&(i=this.length),r>=t.length&&(r=t.length),r||(r=0),i>0&&i<n&&(i=n),i===n||t.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-r<i-n&&(i=t.length-r+n);let a=i-n;return this===t&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,n,i):Uint8Array.prototype.set.call(t,this.subarray(n,i),r),a};de.prototype.fill=function(t,r,n,i){if(typeof t=="string"){if(typeof r=="string"?(i=r,r=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!de.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(t.length===1){let s=t.charCodeAt(0);(i==="utf8"&&s<128||i==="latin1")&&(t=s)}}else typeof t=="number"?t=t&255:typeof t=="boolean"&&(t=Number(t));if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,t||(t=0);let a;if(typeof t=="number")for(a=r;a<n;++a)this[a]=t;else{let s=de.isBuffer(t)?t:de.from(t,i),u=s.length;if(u===0)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(a=0;a<n-r;++a)this[a+r]=s[a%u]}return this};var tl={};function qg(e,t,r){tl[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}qg("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);qg("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError);qg("ERR_OUT_OF_RANGE",function(e,t,r){let n=`The value of "${e}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=hy(String(r)):typeof r=="bigint"&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=hy(i)),i+="n"),n+=` It must be ${t}. Received ${i}`,n},RangeError);function hy(e){let t="",r=e.length,n=e[0]==="-"?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function T7(e,t,r){nl(t,"offset"),(e[t]===void 0||e[t+r]===void 0)&&xf(t,e.length-(r+1))}function _y(e,t,r,n,i,a){if(e>r||e<t){let s=typeof t=="bigint"?"n":"",u;throw a>3?t===0||t===BigInt(0)?u=`>= 0${s} and < 2${s} ** ${(a+1)*8}${s}`:u=`>= -(2${s} ** ${(a+1)*8-1}${s}) and < 2 ** ${(a+1)*8-1}${s}`:u=`>= ${t}${s} and <= ${r}${s}`,new tl.ERR_OUT_OF_RANGE("value",u,e)}T7(n,i,a)}function nl(e,t){if(typeof e!="number")throw new tl.ERR_INVALID_ARG_TYPE(t,"number",e)}function xf(e,t,r){throw Math.floor(e)!==e?(nl(e,r),new tl.ERR_OUT_OF_RANGE(r||"offset","an integer",e)):t<0?new tl.ERR_BUFFER_OUT_OF_BOUNDS:new tl.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}var N7=/[^+/0-9A-Za-z-_]/g;function k7(e){if(e=e.split("=")[0],e=e.trim().replace(N7,""),e.length<2)return"";for(;e.length%4!==0;)e=e+"=";return e}function jg(e,t){t=t||1/0;let r,n=e.length,i=null,a=[];for(let s=0;s<n;++s){if(r=e.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&a.push(239,191,189);continue}else if(s+1===n){(t-=3)>-1&&a.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&a.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;a.push(r)}else if(r<2048){if((t-=2)<0)break;a.push(r>>6|192,r&63|128)}else if(r<65536){if((t-=3)<0)break;a.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((t-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return a}function L7(e){let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r)&255);return t}function U7(e,t){let r,n,i,a=[];for(let s=0;s<e.length&&!((t-=2)<0);++s)r=e.charCodeAt(s),n=r>>8,i=r%256,a.push(i),a.push(n);return a}function Cy(e){return kg.toByteArray(k7(e))}function c0(e,t,r,n){let i;for(i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function la(e,t){return e instanceof t||e!=null&&e.constructor!=null&&e.constructor.name!=null&&e.constructor.name===t.name}function Vg(e){return e!==e}var j7=function(){let e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){let n=r*16;for(let i=0;i<16;++i)t[n+i]=e[r]+e[i]}return t}();function Wu(e){return typeof BigInt>"u"?H7:e}function H7(){throw new Error("BigInt not supported")}});var Yy=ce(_e=>{var Pf={};Pf.userAgent=!1;var sl={},M7="11.1.0",q7="jsrsasign(all) 11.1.0 (2024-02-01) (c) 2010-2023 Kenji Urushima | kjur.github.io/jsrsasign/license";var Se=Se||function(e,t){var r={},n=r.lib={},i=n.Base=function(){function d(){}return{extend:function(w){d.prototype=this;var v=new d;return w&&v.mixIn(w),v.hasOwnProperty("init")||(v.init=function(){v.$super.init.apply(this,arguments)}),v.init.prototype=v,v.$super=this,v},create:function(){var w=this.extend();return w.init.apply(w,arguments),w},init:function(){},mixIn:function(w){for(var v in w)w.hasOwnProperty(v)&&(this[v]=w[v]);w.hasOwnProperty("toString")&&(this.toString=w.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),a=n.WordArray=i.extend({init:function(d,w){d=this.words=d||[],w!=t?this.sigBytes=w:this.sigBytes=d.length*4},toString:function(d){return(d||u).stringify(this)},concat:function(d){var w=this.words,v=d.words,b=this.sigBytes,m=d.sigBytes;if(this.clamp(),b%4)for(var y=0;y<m;y++){var D=v[y>>>2]>>>24-y%4*8&255;w[b+y>>>2]|=D<<24-(b+y)%4*8}else for(var y=0;y<m;y+=4)w[b+y>>>2]=v[y>>>2];return this.sigBytes+=m,this},clamp:function(){var d=this.words,w=this.sigBytes;d[w>>>2]&=4294967295<<32-w%4*8,d.length=e.ceil(w/4)},clone:function(){var d=i.clone.call(this);return d.words=this.words.slice(0),d},random:function(d){for(var w=[],v=0;v<d;v+=4)w.push(e.random()*4294967296|0);return new a.init(w,d)}}),s=r.enc={},u=s.Hex={stringify:function(d){for(var w=d.words,v=d.sigBytes,b=[],m=0;m<v;m++){var y=w[m>>>2]>>>24-m%4*8&255;b.push((y>>>4).toString(16)),b.push((y&15).toString(16))}return b.join("")},parse:function(d){for(var w=d.length,v=[],b=0;b<w;b+=2)v[b>>>3]|=parseInt(d.substr(b,2),16)<<24-b%8*4;return new a.init(v,w/2)}},c=s.Latin1={stringify:function(d){for(var w=d.words,v=d.sigBytes,b=[],m=0;m<v;m++){var y=w[m>>>2]>>>24-m%4*8&255;b.push(String.fromCharCode(y))}return b.join("")},parse:function(d){for(var w=d.length,v=[],b=0;b<w;b++)v[b>>>2]|=(d.charCodeAt(b)&255)<<24-b%4*8;return new a.init(v,w)}},f=s.Utf8={stringify:function(d){try{return decodeURIComponent(escape(c.stringify(d)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(d){return c.parse(unescape(encodeURIComponent(d)))}},h=n.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(d){typeof d=="string"&&(d=f.parse(d)),this._data.concat(d),this._nDataBytes+=d.sigBytes},_process:function(d){var w=this._data,v=w.words,b=w.sigBytes,m=this.blockSize,y=m*4,D=b/y;d?D=e.ceil(D):D=e.max((D|0)-this._minBufferSize,0);var C=D*m,F=e.min(C*4,b);if(C){for(var U=0;U<C;U+=m)this._doProcessBlock(v,U);var k=v.splice(0,C);w.sigBytes-=F}return new a.init(k,F)},clone:function(){var d=i.clone.call(this);return d._data=this._data.clone(),d},_minBufferSize:0}),g=n.Hasher=h.extend({cfg:i.extend(),init:function(d){this.cfg=this.cfg.extend(d),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(d){return this._append(d),this._process(),this},finalize:function(d){d&&this._append(d);var w=this._doFinalize();return w},blockSize:512/32,_createHelper:function(d){return function(w,v){return new d.init(v).finalize(w)}},_createHmacHelper:function(d){return function(w,v){return new p.HMAC.init(d,v).finalize(w)}}}),p=r.algo={};return r}(Math);(function(e){var i=Se,t=i.lib,r=t.Base,n=t.WordArray,i=i.x64={};i.Word=r.extend({init:function(a,s){this.high=a,this.low=s}}),i.WordArray=r.extend({init:function(a,s){a=this.words=a||[],this.sigBytes=s!=e?s:8*a.length},toX32:function(){for(var a=this.words,s=a.length,u=[],c=0;c<s;c++){var f=a[c];u.push(f.high),u.push(f.low)}return n.create(u,this.sigBytes)},clone:function(){for(var a=r.clone.call(this),s=a.words=this.words.slice(0),u=s.length,c=0;c<u;c++)s[c]=s[c].clone();return a}})})();Se.lib.Cipher||function(e){var d=Se,t=d.lib,r=t.Base,n=t.WordArray,i=t.BufferedBlockAlgorithm,a=d.enc.Base64,s=d.algo.EvpKDF,u=t.Cipher=i.extend({cfg:r.extend(),createEncryptor:function(v,b){return this.create(this._ENC_XFORM_MODE,v,b)},createDecryptor:function(v,b){return this.create(this._DEC_XFORM_MODE,v,b)},init:function(v,b,m){this.cfg=this.cfg.extend(m),this._xformMode=v,this._key=b,this.reset()},reset:function(){i.reset.call(this),this._doReset()},process:function(v){return this._append(v),this._process()},finalize:function(v){return v&&this._append(v),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(v){return{encrypt:function(b,m,y){return(typeof m=="string"?w:p).encrypt(v,b,m,y)},decrypt:function(b,m,y){return(typeof m=="string"?w:p).decrypt(v,b,m,y)}}}});t.StreamCipher=u.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var g=d.mode={},c=function(v,b,m){var y=this._iv;y?this._iv=e:y=this._prevBlock;for(var D=0;D<m;D++)v[b+D]^=y[D]},f=(t.BlockCipherMode=r.extend({createEncryptor:function(v,b){return this.Encryptor.create(v,b)},createDecryptor:function(v,b){return this.Decryptor.create(v,b)},init:function(v,b){this._cipher=v,this._iv=b}})).extend();f.Encryptor=f.extend({processBlock:function(v,b){var m=this._cipher,y=m.blockSize;c.call(this,v,b,y),m.encryptBlock(v,b),this._prevBlock=v.slice(b,b+y)}}),f.Decryptor=f.extend({processBlock:function(v,b){var m=this._cipher,y=m.blockSize,D=v.slice(b,b+y);m.decryptBlock(v,b),c.call(this,v,b,y),this._prevBlock=D}}),g=g.CBC=f,f=(d.pad={}).Pkcs7={pad:function(v,b){for(var m=4*b,m=m-v.sigBytes%m,y=m<<24|m<<16|m<<8|m,D=[],C=0;C<m;C+=4)D.push(y);m=n.create(D,m),v.concat(m)},unpad:function(v){v.sigBytes-=v.words[v.sigBytes-1>>>2]&255}},t.BlockCipher=u.extend({cfg:u.cfg.extend({mode:g,padding:f}),reset:function(){u.reset.call(this);var b=this.cfg,v=b.iv,b=b.mode;if(this._xformMode==this._ENC_XFORM_MODE)var m=b.createEncryptor;else m=b.createDecryptor,this._minBufferSize=1;this._mode=m.call(b,this,v&&v.words)},_doProcessBlock:function(v,b){this._mode.processBlock(v,b)},_doFinalize:function(){var v=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){v.pad(this._data,this.blockSize);var b=this._process(!0)}else b=this._process(!0),v.unpad(b);return b},blockSize:4});var h=t.CipherParams=r.extend({init:function(v){this.mixIn(v)},toString:function(v){return(v||this.formatter).stringify(this)}}),g=(d.format={}).OpenSSL={stringify:function(v){var b=v.ciphertext;return v=v.salt,(v?n.create([1398893684,1701076831]).concat(v).concat(b):b).toString(a)},parse:function(v){v=a.parse(v);var b=v.words;if(b[0]==1398893684&&b[1]==1701076831){var m=n.create(b.slice(2,4));b.splice(0,4),v.sigBytes-=16}return h.create({ciphertext:v,salt:m})}},p=t.SerializableCipher=r.extend({cfg:r.extend({format:g}),encrypt:function(v,b,m,y){y=this.cfg.extend(y);var D=v.createEncryptor(m,y);return b=D.finalize(b),D=D.cfg,h.create({ciphertext:b,key:m,iv:D.iv,algorithm:v,mode:D.mode,padding:D.padding,blockSize:v.blockSize,formatter:y.format})},decrypt:function(v,b,m,y){return y=this.cfg.extend(y),b=this._parse(b,y.format),v.createDecryptor(m,y).finalize(b.ciphertext)},_parse:function(v,b){return typeof v=="string"?b.parse(v,this):v}}),d=(d.kdf={}).OpenSSL={execute:function(v,b,m,y){return y||(y=n.random(8)),v=s.create({keySize:b+m}).compute(v,y),m=n.create(v.words.slice(b),4*m),v.sigBytes=4*b,h.create({key:v,iv:m,salt:y})}},w=t.PasswordBasedCipher=p.extend({cfg:p.cfg.extend({kdf:d}),encrypt:function(v,b,m,y){return y=this.cfg.extend(y),m=y.kdf.execute(m,v.keySize,v.ivSize),y.iv=m.iv,v=p.encrypt.call(this,v,b,m.key,y),v.mixIn(m),v},decrypt:function(v,b,m,y){return y=this.cfg.extend(y),b=this._parse(b,y.format),m=y.kdf.execute(m,v.keySize,v.ivSize,b.salt),y.iv=m.iv,p.decrypt.call(this,v,b,m.key,y)}})}();(function(){for(var e=Se,t=e.lib.BlockCipher,U=e.algo,r=[],n=[],i=[],a=[],s=[],u=[],c=[],f=[],h=[],g=[],p=[],d=0;256>d;d++)p[d]=128>d?d<<1:d<<1^283;for(var w=0,v=0,d=0;256>d;d++){var b=v^v<<1^v<<2^v<<3^v<<4,b=b>>>8^b&255^99;r[w]=b,n[b]=w;var m=p[w],y=p[m],D=p[y],C=257*p[b]^16843008*b;i[w]=C<<24|C>>>8,a[w]=C<<16|C>>>16,s[w]=C<<8|C>>>24,u[w]=C,C=16843009*D^65537*y^257*m^16843008*w,c[b]=C<<24|C>>>8,f[b]=C<<16|C>>>16,h[b]=C<<8|C>>>24,g[b]=C,w?(w=m^p[p[p[D^m]]],v^=p[p[v]]):w=v=1}var F=[0,1,2,4,8,16,32,64,128,27,54],U=U.AES=t.extend({_doReset:function(){for(var B=this._key,k=B.words,S=B.sigBytes/4,B=4*((this._nRounds=S+6)+1),T=this._keySchedule=[],P=0;P<B;P++)if(P<S)T[P]=k[P];else{var j=T[P-1];P%S?6<S&&P%S==4&&(j=r[j>>>24]<<24|r[j>>>16&255]<<16|r[j>>>8&255]<<8|r[j&255]):(j=j<<8|j>>>24,j=r[j>>>24]<<24|r[j>>>16&255]<<16|r[j>>>8&255]<<8|r[j&255],j^=F[P/S|0]<<24),T[P]=T[P-S]^j}for(k=this._invKeySchedule=[],S=0;S<B;S++)P=B-S,j=S%4?T[P]:T[P-4],k[S]=4>S||4>=P?j:c[r[j>>>24]]^f[r[j>>>16&255]]^h[r[j>>>8&255]]^g[r[j&255]]},encryptBlock:function(k,S){this._doCryptBlock(k,S,this._keySchedule,i,a,s,u,r)},decryptBlock:function(k,S){var B=k[S+1];k[S+1]=k[S+3],k[S+3]=B,this._doCryptBlock(k,S,this._invKeySchedule,c,f,h,g,n),B=k[S+1],k[S+1]=k[S+3],k[S+3]=B},_doCryptBlock:function(k,S,B,T,P,j,Y,M){for(var z=this._nRounds,nt=k[S]^B[0],dt=k[S+1]^B[1],pt=k[S+2]^B[2],it=k[S+3]^B[3],W=4,ie=1;ie<z;ie++)var Ce=T[nt>>>24]^P[dt>>>16&255]^j[pt>>>8&255]^Y[it&255]^B[W++],Fe=T[dt>>>24]^P[pt>>>16&255]^j[it>>>8&255]^Y[nt&255]^B[W++],xe=T[pt>>>24]^P[it>>>16&255]^j[nt>>>8&255]^Y[dt&255]^B[W++],it=T[it>>>24]^P[nt>>>16&255]^j[dt>>>8&255]^Y[pt&255]^B[W++],nt=Ce,dt=Fe,pt=xe;Ce=(M[nt>>>24]<<24|M[dt>>>16&255]<<16|M[pt>>>8&255]<<8|M[it&255])^B[W++],Fe=(M[dt>>>24]<<24|M[pt>>>16&255]<<16|M[it>>>8&255]<<8|M[nt&255])^B[W++],xe=(M[pt>>>24]<<24|M[it>>>16&255]<<16|M[nt>>>8&255]<<8|M[dt&255])^B[W++],it=(M[it>>>24]<<24|M[nt>>>16&255]<<16|M[dt>>>8&255]<<8|M[pt&255])^B[W++],k[S]=Ce,k[S+1]=Fe,k[S+2]=xe,k[S+3]=it},keySize:8});e.AES=t._createHelper(U)})();(function(){function e(p,d){var w=(this._lBlock>>>p^this._rBlock)&d;this._rBlock^=w,this._lBlock^=w<<p}function t(p,d){var w=(this._rBlock>>>p^this._lBlock)&d;this._lBlock^=w,this._rBlock^=w<<p}var r=Se,i=r.lib,n=i.WordArray,i=i.BlockCipher,a=r.algo,s=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],u=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],f=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],h=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],g=a.DES=i.extend({_doReset:function(){for(var p=this._key.words,d=[],w=0;56>w;w++){var v=s[w]-1;d[w]=p[v>>>5]>>>31-v%32&1}for(p=this._subKeys=[],v=0;16>v;v++){for(var b=p[v]=[],m=c[v],w=0;24>w;w++)b[w/6|0]|=d[(u[w]-1+m)%28]<<31-w%6,b[4+(w/6|0)]|=d[28+(u[w+24]-1+m)%28]<<31-w%6;for(b[0]=b[0]<<1|b[0]>>>31,w=1;7>w;w++)b[w]>>>=4*(w-1)+3;b[7]=b[7]<<5|b[7]>>>27}for(d=this._invSubKeys=[],w=0;16>w;w++)d[w]=p[15-w]},encryptBlock:function(p,d){this._doCryptBlock(p,d,this._subKeys)},decryptBlock:function(p,d){this._doCryptBlock(p,d,this._invSubKeys)},_doCryptBlock:function(p,d,w){this._lBlock=p[d],this._rBlock=p[d+1],e.call(this,4,252645135),e.call(this,16,65535),t.call(this,2,858993459),t.call(this,8,16711935),e.call(this,1,1431655765);for(var v=0;16>v;v++){for(var b=w[v],m=this._lBlock,y=this._rBlock,D=0,C=0;8>C;C++)D|=f[C][((y^b[C])&h[C])>>>0];this._lBlock=y,this._rBlock=m^D}w=this._lBlock,this._lBlock=this._rBlock,this._rBlock=w,e.call(this,1,1431655765),t.call(this,8,16711935),t.call(this,2,858993459),e.call(this,16,65535),e.call(this,4,252645135),p[d]=this._lBlock,p[d+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});r.DES=i._createHelper(g),a=a.TripleDES=i.extend({_doReset:function(){var p=this._key.words;this._des1=g.createEncryptor(n.create(p.slice(0,2))),this._des2=g.createEncryptor(n.create(p.slice(2,4))),this._des3=g.createEncryptor(n.create(p.slice(4,6)))},encryptBlock:function(p,d){this._des1.encryptBlock(p,d),this._des2.decryptBlock(p,d),this._des3.encryptBlock(p,d)},decryptBlock:function(p,d){this._des3.decryptBlock(p,d),this._des2.encryptBlock(p,d),this._des1.decryptBlock(p,d)},keySize:6,ivSize:2,blockSize:2}),r.TripleDES=i._createHelper(a)})();(function(){var e=Se,t=e.lib.WordArray;e.enc.Base64={stringify:function(r){var n=r.words,i=r.sigBytes,a=this._map;r.clamp(),r=[];for(var s=0;s<i;s+=3)for(var u=(n[s>>>2]>>>24-8*(s%4)&255)<<16|(n[s+1>>>2]>>>24-8*((s+1)%4)&255)<<8|n[s+2>>>2]>>>24-8*((s+2)%4)&255,c=0;4>c&&s+.75*c<i;c++)r.push(a.charAt(u>>>6*(3-c)&63));if(n=a.charAt(64))for(;r.length%4;)r.push(n);return r.join("")},parse:function(r){var n=r.length,i=this._map,a=i.charAt(64);a&&(a=r.indexOf(a),a!=-1&&(n=a));for(var a=[],s=0,u=0;u<n;u++)if(u%4){var c=i.indexOf(r.charAt(u-1))<<2*(u%4),f=i.indexOf(r.charAt(u))>>>6-2*(u%4);a[s>>>2]|=(c|f)<<24-8*(s%4),s++}return t.create(a,s)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})();(function(e){function t(g,p,d,w,v,b,m){return g=g+(p&d|~p&w)+v+m,(g<<b|g>>>32-b)+p}function r(g,p,d,w,v,b,m){return g=g+(p&w|d&~w)+v+m,(g<<b|g>>>32-b)+p}function n(g,p,d,w,v,b,m){return g=g+(p^d^w)+v+m,(g<<b|g>>>32-b)+p}function i(g,p,d,w,v,b,m){return g=g+(d^(p|~w))+v+m,(g<<b|g>>>32-b)+p}for(var a=Se,c=a.lib,s=c.WordArray,u=c.Hasher,c=a.algo,f=[],h=0;64>h;h++)f[h]=4294967296*e.abs(e.sin(h+1))|0;c=c.MD5=u.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(g,p){for(var d=0;16>d;d++){var w=p+d,v=g[w];g[w]=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360}var d=this._hash.words,w=g[p+0],v=g[p+1],b=g[p+2],m=g[p+3],y=g[p+4],D=g[p+5],C=g[p+6],F=g[p+7],U=g[p+8],k=g[p+9],S=g[p+10],B=g[p+11],T=g[p+12],P=g[p+13],j=g[p+14],Y=g[p+15],M=d[0],ie=d[1],W=d[2],z=d[3],M=t(M,ie,W,z,w,7,f[0]),z=t(z,M,ie,W,v,12,f[1]),W=t(W,z,M,ie,b,17,f[2]),ie=t(ie,W,z,M,m,22,f[3]),M=t(M,ie,W,z,y,7,f[4]),z=t(z,M,ie,W,D,12,f[5]),W=t(W,z,M,ie,C,17,f[6]),ie=t(ie,W,z,M,F,22,f[7]),M=t(M,ie,W,z,U,7,f[8]),z=t(z,M,ie,W,k,12,f[9]),W=t(W,z,M,ie,S,17,f[10]),ie=t(ie,W,z,M,B,22,f[11]),M=t(M,ie,W,z,T,7,f[12]),z=t(z,M,ie,W,P,12,f[13]),W=t(W,z,M,ie,j,17,f[14]),ie=t(ie,W,z,M,Y,22,f[15]),M=r(M,ie,W,z,v,5,f[16]),z=r(z,M,ie,W,C,9,f[17]),W=r(W,z,M,ie,B,14,f[18]),ie=r(ie,W,z,M,w,20,f[19]),M=r(M,ie,W,z,D,5,f[20]),z=r(z,M,ie,W,S,9,f[21]),W=r(W,z,M,ie,Y,14,f[22]),ie=r(ie,W,z,M,y,20,f[23]),M=r(M,ie,W,z,k,5,f[24]),z=r(z,M,ie,W,j,9,f[25]),W=r(W,z,M,ie,m,14,f[26]),ie=r(ie,W,z,M,U,20,f[27]),M=r(M,ie,W,z,P,5,f[28]),z=r(z,M,ie,W,b,9,f[29]),W=r(W,z,M,ie,F,14,f[30]),ie=r(ie,W,z,M,T,20,f[31]),M=n(M,ie,W,z,D,4,f[32]),z=n(z,M,ie,W,U,11,f[33]),W=n(W,z,M,ie,B,16,f[34]),ie=n(ie,W,z,M,j,23,f[35]),M=n(M,ie,W,z,v,4,f[36]),z=n(z,M,ie,W,y,11,f[37]),W=n(W,z,M,ie,F,16,f[38]),ie=n(ie,W,z,M,S,23,f[39]),M=n(M,ie,W,z,P,4,f[40]),z=n(z,M,ie,W,w,11,f[41]),W=n(W,z,M,ie,m,16,f[42]),ie=n(ie,W,z,M,C,23,f[43]),M=n(M,ie,W,z,k,4,f[44]),z=n(z,M,ie,W,T,11,f[45]),W=n(W,z,M,ie,Y,16,f[46]),ie=n(ie,W,z,M,b,23,f[47]),M=i(M,ie,W,z,w,6,f[48]),z=i(z,M,ie,W,F,10,f[49]),W=i(W,z,M,ie,j,15,f[50]),ie=i(ie,W,z,M,D,21,f[51]),M=i(M,ie,W,z,T,6,f[52]),z=i(z,M,ie,W,m,10,f[53]),W=i(W,z,M,ie,S,15,f[54]),ie=i(ie,W,z,M,v,21,f[55]),M=i(M,ie,W,z,U,6,f[56]),z=i(z,M,ie,W,Y,10,f[57]),W=i(W,z,M,ie,C,15,f[58]),ie=i(ie,W,z,M,P,21,f[59]),M=i(M,ie,W,z,y,6,f[60]),z=i(z,M,ie,W,B,10,f[61]),W=i(W,z,M,ie,b,15,f[62]),ie=i(ie,W,z,M,k,21,f[63]);d[0]=d[0]+M|0,d[1]=d[1]+ie|0,d[2]=d[2]+W|0,d[3]=d[3]+z|0},_doFinalize:function(){var g=this._data,p=g.words,d=8*this._nDataBytes,w=8*g.sigBytes;p[w>>>5]|=128<<24-w%32;var v=e.floor(d/4294967296);for(p[(w+64>>>9<<4)+15]=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,p[(w+64>>>9<<4)+14]=(d<<8|d>>>24)&16711935|(d<<24|d>>>8)&4278255360,g.sigBytes=4*(p.length+1),this._process(),g=this._hash,p=g.words,d=0;4>d;d++)w=p[d],p[d]=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360;return g},clone:function(){var g=u.clone.call(this);return g._hash=this._hash.clone(),g}}),a.MD5=u._createHelper(c),a.HmacMD5=u._createHmacHelper(c)})(Math);(function(){var e=Se,i=e.lib,t=i.WordArray,r=i.Hasher,n=[],i=e.algo.SHA1=r.extend({_doReset:function(){this._hash=new t.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(a,s){for(var u=this._hash.words,c=u[0],f=u[1],h=u[2],g=u[3],p=u[4],d=0;80>d;d++){if(16>d)n[d]=a[s+d]|0;else{var w=n[d-3]^n[d-8]^n[d-14]^n[d-16];n[d]=w<<1|w>>>31}w=(c<<5|c>>>27)+p+n[d],w=20>d?w+((f&h|~f&g)+1518500249):40>d?w+((f^h^g)+1859775393):60>d?w+((f&h|f&g|h&g)-1894007588):w+((f^h^g)-899497514),p=g,g=h,h=f<<30|f>>>2,f=c,c=w}u[0]=u[0]+c|0,u[1]=u[1]+f|0,u[2]=u[2]+h|0,u[3]=u[3]+g|0,u[4]=u[4]+p|0},_doFinalize:function(){var a=this._data,s=a.words,u=8*this._nDataBytes,c=8*a.sigBytes;return s[c>>>5]|=128<<24-c%32,s[(c+64>>>9<<4)+14]=Math.floor(u/4294967296),s[(c+64>>>9<<4)+15]=u,a.sigBytes=4*s.length,this._process(),this._hash},clone:function(){var a=r.clone.call(this);return a._hash=this._hash.clone(),a}});e.SHA1=r._createHelper(i),e.HmacSHA1=r._createHmacHelper(i)})();(function(e){for(var t=Se,d=t.lib,r=d.WordArray,n=d.Hasher,d=t.algo,i=[],a=[],s=function(v){return 4294967296*(v-(v|0))|0},u=2,c=0;64>c;){var f;e:{f=u;for(var h=e.sqrt(f),g=2;g<=h;g++)if(!(f%g)){f=!1;break e}f=!0}f&&(8>c&&(i[c]=s(e.pow(u,.5))),a[c]=s(e.pow(u,1/3)),c++),u++}var p=[],d=d.SHA256=n.extend({_doReset:function(){this._hash=new r.init(i.slice(0))},_doProcessBlock:function(w,v){for(var b=this._hash.words,m=b[0],y=b[1],D=b[2],C=b[3],F=b[4],U=b[5],k=b[6],S=b[7],B=0;64>B;B++){if(16>B)p[B]=w[v+B]|0;else{var T=p[B-15],P=p[B-2];p[B]=((T<<25|T>>>7)^(T<<14|T>>>18)^T>>>3)+p[B-7]+((P<<15|P>>>17)^(P<<13|P>>>19)^P>>>10)+p[B-16]}T=S+((F<<26|F>>>6)^(F<<21|F>>>11)^(F<<7|F>>>25))+(F&U^~F&k)+a[B]+p[B],P=((m<<30|m>>>2)^(m<<19|m>>>13)^(m<<10|m>>>22))+(m&y^m&D^y&D),S=k,k=U,U=F,F=C+T|0,C=D,D=y,y=m,m=T+P|0}b[0]=b[0]+m|0,b[1]=b[1]+y|0,b[2]=b[2]+D|0,b[3]=b[3]+C|0,b[4]=b[4]+F|0,b[5]=b[5]+U|0,b[6]=b[6]+k|0,b[7]=b[7]+S|0},_doFinalize:function(){var w=this._data,v=w.words,b=8*this._nDataBytes,m=8*w.sigBytes;return v[m>>>5]|=128<<24-m%32,v[(m+64>>>9<<4)+14]=e.floor(b/4294967296),v[(m+64>>>9<<4)+15]=b,w.sigBytes=4*v.length,this._process(),this._hash},clone:function(){var w=n.clone.call(this);return w._hash=this._hash.clone(),w}});t.SHA256=n._createHelper(d),t.HmacSHA256=n._createHmacHelper(d)})(Math);(function(){var e=Se,t=e.lib.WordArray,n=e.algo,r=n.SHA256,n=n.SHA224=r.extend({_doReset:function(){this._hash=new t.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var i=r._doFinalize.call(this);return i.sigBytes-=4,i}});e.SHA224=r._createHelper(n),e.HmacSHA224=r._createHmacHelper(n)})();(function(){function e(){return n.create.apply(n,arguments)}for(var t=Se,r=t.lib.Hasher,a=t.x64,n=a.Word,i=a.WordArray,a=t.algo,s=[e(1116352408,3609767458),e(1899447441,602891725),e(3049323471,3964484399),e(3921009573,2173295548),e(961987163,4081628472),e(1508970993,3053834265),e(2453635748,2937671579),e(2870763221,3664609560),e(3624381080,2734883394),e(310598401,1164996542),e(607225278,1323610764),e(1426881987,3590304994),e(1925078388,4068182383),e(2162078206,991336113),e(2614888103,633803317),e(3248222580,3479774868),e(3835390401,2666613458),e(4022224774,944711139),e(264347078,2341262773),e(604807628,2007800933),e(770255983,1495990901),e(1249150122,1856431235),e(1555081692,3175218132),e(1996064986,2198950837),e(2554220882,3999719339),e(2821834349,766784016),e(2952996808,2566594879),e(3210313671,3203337956),e(3336571891,1034457026),e(3584528711,2466948901),e(113926993,3758326383),e(338241895,168717936),e(666307205,1188179964),e(773529912,1546045734),e(1294757372,1522805485),e(1396182291,2643833823),e(1695183700,2343527390),e(1986661051,1014477480),e(2177026350,1206759142),e(2456956037,344077627),e(2730485921,1290863460),e(2820302411,3158454273),e(3259730800,3505952657),e(3345764771,106217008),e(3516065817,3606008344),e(3600352804,1432725776),e(4094571909,1467031594),e(275423344,851169720),e(430227734,3100823752),e(506948616,1363258195),e(659060556,3750685593),e(883997877,3785050280),e(958139571,3318307427),e(1322822218,3812723403),e(1537002063,2003034995),e(1747873779,3602036899),e(1955562222,1575990012),e(2024104815,1125592928),e(2227730452,2716904306),e(2361852424,442776044),e(2428436474,593698344),e(2756734187,3733110249),e(3204031479,2999351573),e(3329325298,3815920427),e(3391569614,3928383900),e(3515267271,566280711),e(3940187606,3454069534),e(4118630271,4000239992),e(116418474,1914138554),e(174292421,2731055270),e(289380356,3203993006),e(460393269,320620315),e(685471733,587496836),e(852142971,1086792851),e(1017036298,365543100),e(1126000580,2618297676),e(1288033470,3409855158),e(1501505948,4234509866),e(1607167915,987167468),e(1816402316,1246189591)],u=[],c=0;80>c;c++)u[c]=e();a=a.SHA512=r.extend({_doReset:function(){this._hash=new i.init([new n.init(1779033703,4089235720),new n.init(3144134277,2227873595),new n.init(1013904242,4271175723),new n.init(2773480762,1595750129),new n.init(1359893119,2917565137),new n.init(2600822924,725511199),new n.init(528734635,4215389547),new n.init(1541459225,327033209)])},_doProcessBlock:function(f,h){for(var y=this._hash.words,g=y[0],p=y[1],d=y[2],w=y[3],v=y[4],b=y[5],m=y[6],y=y[7],D=g.high,C=g.low,F=p.high,U=p.low,k=d.high,S=d.low,B=w.high,T=w.low,P=v.high,j=v.low,Y=b.high,M=b.low,z=m.high,W=m.low,ie=y.high,Ce=y.low,Fe=D,xe=C,it=F,nt=U,dt=k,pt=S,wn=B,hr=T,St=P,Br=j,gr=Y,vt=M,tr=z,st=W,Ge=ie,mr=Ce,qe=0;80>qe;qe++){var $r=u[qe];if(16>qe)var Ht=$r.high=f[h+2*qe]|0,De=$r.low=f[h+2*qe+1]|0;else{var Ht=u[qe-15],De=Ht.high,yt=Ht.low,Ht=(De>>>1|yt<<31)^(De>>>8|yt<<24)^De>>>7,yt=(yt>>>1|De<<31)^(yt>>>8|De<<24)^(yt>>>7|De<<25),Vr=u[qe-2],De=Vr.high,$t=Vr.low,Vr=(De>>>19|$t<<13)^(De<<3|$t>>>29)^De>>>6,$t=($t>>>19|De<<13)^($t<<3|De>>>29)^($t>>>6|De<<26),De=u[qe-7],En=De.high,cr=u[qe-16],He=cr.high,cr=cr.low,De=yt+De.low,Ht=Ht+En+(De>>>0<yt>>>0?1:0),De=De+$t,Ht=Ht+Vr+(De>>>0<$t>>>0?1:0),De=De+cr,Ht=Ht+He+(De>>>0<cr>>>0?1:0);$r.high=Ht,$r.low=De}var En=St&gr^~St&tr,cr=Br&vt^~Br&st,$r=Fe&it^Fe&dt^it&dt,rr=xe&nt^xe&pt^nt&pt,yt=(Fe>>>28|xe<<4)^(Fe<<30|xe>>>2)^(Fe<<25|xe>>>7),Vr=(xe>>>28|Fe<<4)^(xe<<30|Fe>>>2)^(xe<<25|Fe>>>7),$t=s[qe],ki=$t.high,An=$t.low,$t=mr+((Br>>>14|St<<18)^(Br>>>18|St<<14)^(Br<<23|St>>>9)),He=Ge+((St>>>14|Br<<18)^(St>>>18|Br<<14)^(St<<23|Br>>>9))+($t>>>0<mr>>>0?1:0),$t=$t+cr,He=He+En+($t>>>0<cr>>>0?1:0),$t=$t+An,He=He+ki+($t>>>0<An>>>0?1:0),$t=$t+De,He=He+Ht+($t>>>0<De>>>0?1:0),De=Vr+rr,$r=yt+$r+(De>>>0<Vr>>>0?1:0),Ge=tr,mr=st,tr=gr,st=vt,gr=St,vt=Br,Br=hr+$t|0,St=wn+He+(Br>>>0<hr>>>0?1:0)|0,wn=dt,hr=pt,dt=it,pt=nt,it=Fe,nt=xe,xe=$t+De|0,Fe=He+$r+(xe>>>0<$t>>>0?1:0)|0}C=g.low=C+xe,g.high=D+Fe+(C>>>0<xe>>>0?1:0),U=p.low=U+nt,p.high=F+it+(U>>>0<nt>>>0?1:0),S=d.low=S+pt,d.high=k+dt+(S>>>0<pt>>>0?1:0),T=w.low=T+hr,w.high=B+wn+(T>>>0<hr>>>0?1:0),j=v.low=j+Br,v.high=P+St+(j>>>0<Br>>>0?1:0),M=b.low=M+vt,b.high=Y+gr+(M>>>0<vt>>>0?1:0),W=m.low=W+st,m.high=z+tr+(W>>>0<st>>>0?1:0),Ce=y.low=Ce+mr,y.high=ie+Ge+(Ce>>>0<mr>>>0?1:0)},_doFinalize:function(){var f=this._data,h=f.words,g=8*this._nDataBytes,p=8*f.sigBytes;return h[p>>>5]|=128<<24-p%32,h[(p+128>>>10<<5)+30]=Math.floor(g/4294967296),h[(p+128>>>10<<5)+31]=g,f.sigBytes=4*h.length,this._process(),this._hash.toX32()},clone:function(){var f=r.clone.call(this);return f._hash=this._hash.clone(),f},blockSize:32}),t.SHA512=r._createHelper(a),t.HmacSHA512=r._createHmacHelper(a)})();(function(){var e=Se,i=e.x64,t=i.Word,r=i.WordArray,i=e.algo,n=i.SHA512,i=i.SHA384=n.extend({_doReset:function(){this._hash=new r.init([new t.init(3418070365,3238371032),new t.init(1654270250,914150663),new t.init(2438529370,812702999),new t.init(355462360,4144912697),new t.init(1731405415,4290775857),new t.init(2394180231,1750603025),new t.init(3675008525,1694076839),new t.init(1203062813,3204075428)])},_doFinalize:function(){var a=n._doFinalize.call(this);return a.sigBytes-=16,a}});e.SHA384=n._createHelper(i),e.HmacSHA384=n._createHmacHelper(i)})();(function(){var e=Se,f=e.lib,t=f.WordArray,r=f.Hasher,f=e.algo,n=t.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),i=t.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),a=t.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),s=t.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),u=t.create([0,1518500249,1859775393,2400959708,2840853838]),c=t.create([1352829926,1548603684,1836072691,2053994217,0]),f=f.RIPEMD160=r.extend({_doReset:function(){this._hash=t.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(h,g){for(var p=0;16>p;p++){var d=g+p,w=h[d];h[d]=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360}var d=this._hash.words,w=u.words,v=c.words,b=n.words,m=i.words,y=a.words,D=s.words,C,F,U,k,S,B,T,P,j,Y;B=C=d[0],T=F=d[1],P=U=d[2],j=k=d[3],Y=S=d[4];for(var M,p=0;80>p;p+=1)M=C+h[g+b[p]]|0,M=16>p?M+((F^U^k)+w[0]):32>p?M+((F&U|~F&k)+w[1]):48>p?M+(((F|~U)^k)+w[2]):64>p?M+((F&k|U&~k)+w[3]):M+((F^(U|~k))+w[4]),M|=0,M=M<<y[p]|M>>>32-y[p],M=M+S|0,C=S,S=k,k=U<<10|U>>>22,U=F,F=M,M=B+h[g+m[p]]|0,M=16>p?M+((T^(P|~j))+v[0]):32>p?M+((T&j|P&~j)+v[1]):48>p?M+(((T|~P)^j)+v[2]):64>p?M+((T&P|~T&j)+v[3]):M+((T^P^j)+v[4]),M|=0,M=M<<D[p]|M>>>32-D[p],M=M+Y|0,B=Y,Y=j,j=P<<10|P>>>22,P=T,T=M;M=d[1]+U+j|0,d[1]=d[2]+k+Y|0,d[2]=d[3]+S+B|0,d[3]=d[4]+C+T|0,d[4]=d[0]+F+P|0,d[0]=M},_doFinalize:function(){var h=this._data,g=h.words,p=8*this._nDataBytes,d=8*h.sigBytes;for(g[d>>>5]|=128<<24-d%32,g[(d+64>>>9<<4)+14]=(p<<8|p>>>24)&16711935|(p<<24|p>>>8)&4278255360,h.sigBytes=4*(g.length+1),this._process(),h=this._hash,g=h.words,p=0;5>p;p++)d=g[p],g[p]=(d<<8|d>>>24)&16711935|(d<<24|d>>>8)&4278255360;return h},clone:function(){var h=r.clone.call(this);return h._hash=this._hash.clone(),h}});e.RIPEMD160=r._createHelper(f),e.HmacRIPEMD160=r._createHmacHelper(f)})(Math);(function(){var e=Se,t=e.enc.Utf8;e.algo.HMAC=e.lib.Base.extend({init:function(r,n){r=this._hasher=new r.init,typeof n=="string"&&(n=t.parse(n));var i=r.blockSize,a=4*i;n.sigBytes>a&&(n=r.finalize(n)),n.clamp();for(var s=this._oKey=n.clone(),u=this._iKey=n.clone(),c=s.words,f=u.words,h=0;h<i;h++)c[h]^=1549556828,f[h]^=909522486;s.sigBytes=u.sigBytes=a,this.reset()},reset:function(){var r=this._hasher;r.reset(),r.update(this._iKey)},update:function(r){return this._hasher.update(r),this},finalize:function(r){var n=this._hasher;return r=n.finalize(r),n.reset(),n.finalize(this._oKey.clone().concat(r))}})})();(function(){var e=Se,n=e.lib,t=n.Base,r=n.WordArray,n=e.algo,i=n.HMAC,a=n.PBKDF2=t.extend({cfg:t.extend({keySize:4,hasher:n.SHA1,iterations:1}),init:function(s){this.cfg=this.cfg.extend(s)},compute:function(s,u){for(var w=this.cfg,c=i.create(w.hasher,s),f=r.create(),h=r.create([1]),g=f.words,p=h.words,d=w.keySize,w=w.iterations;g.length<d;){var v=c.update(u).finalize(h);c.reset();for(var b=v.words,m=b.length,y=v,D=1;D<w;D++){y=c.finalize(y),c.reset();for(var C=y.words,F=0;F<m;F++)b[F]^=C[F]}f.concat(v),p[0]++}return f.sigBytes=4*d,f}});e.PBKDF2=function(s,u,c){return a.create(c).compute(s,u)}})();var al="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Yg="=";function su(e){var t,r,n="";for(t=0;t+3<=e.length;t+=3)r=parseInt(e.substring(t,t+3),16),n+=al.charAt(r>>6)+al.charAt(r&63);if(t+1==e.length?(r=parseInt(e.substring(t,t+1),16),n+=al.charAt(r<<2)):t+2==e.length&&(r=parseInt(e.substring(t,t+2),16),n+=al.charAt(r>>2)+al.charAt((r&3)<<4)),Yg)for(;(n.length&3)>0;)n+=Yg;return n}function ol(e){var t="",r,n=0,i,a;for(r=0;r<e.length&&e.charAt(r)!=Yg;++r)a=al.indexOf(e.charAt(r)),!(a<0)&&(n==0?(t+=iu(a>>2),i=a&3,n=1):n==1?(t+=iu(i<<2|a>>4),i=a&15,n=2):n==2?(t+=iu(i),t+=iu(a>>2),i=a&3,n=3):(t+=iu(i<<2|a>>4),t+=iu(a&15),n=0));return n==1&&(t+=iu(i<<2)),t}function Iy(e){var t=ol(e),r,n=new Array;for(r=0;2*r<t.length;++r)n[r]=parseInt(t.substring(2*r,2*r+2),16);return n}var Ju,V7=0xdeadbeefcafe,Dy=(V7&16777215)==15715070;function ee(e,t,r){e!=null&&(typeof e=="number"?this.fromNumber(e,t,r):t==null&&typeof e!="string"?this.fromString(e,256):this.fromString(e,t))}function Pt(){return new ee(null)}function K7(e,t,r,n,i,a){for(;--a>=0;){var s=t*this[e++]+r[n]+i;i=Math.floor(s/67108864),r[n++]=s&67108863}return i}function z7(e,t,r,n,i,a){for(var s=t&32767,u=t>>15;--a>=0;){var c=this[e]&32767,f=this[e++]>>15,h=u*c+f*s;c=s*c+((h&32767)<<15)+r[n]+(i&1073741823),i=(c>>>30)+(h>>>15)+u*f+(i>>>30),r[n++]=c&1073741823}return i}function G7(e,t,r,n,i,a){for(var s=t&16383,u=t>>14;--a>=0;){var c=this[e]&16383,f=this[e++]>>14,h=u*c+f*s;c=s*c+((h&16383)<<14)+r[n]+i,i=(c>>28)+(h>>14)+u*f,r[n++]=c&268435455}return i}Dy&&Pf.appName=="Microsoft Internet Explorer"?(ee.prototype.am=z7,Ju=30):Dy&&Pf.appName!="Netscape"?(ee.prototype.am=K7,Ju=26):(ee.prototype.am=G7,Ju=28);ee.prototype.DB=Ju;ee.prototype.DM=(1<<Ju)-1;ee.prototype.DV=1<<Ju;var Qg=52;ee.prototype.FV=Math.pow(2,Qg);ee.prototype.F1=Qg-Ju;ee.prototype.F2=2*Ju-Qg;var Y7="0123456789abcdefghijklmnopqrstuvwxyz",g0=new Array,cl,Es;cl=48;for(Es=0;Es<=9;++Es)g0[cl++]=Es;cl=97;for(Es=10;Es<36;++Es)g0[cl++]=Es;cl=65;for(Es=10;Es<36;++Es)g0[cl++]=Es;function iu(e){return Y7.charAt(e)}function By(e,t){var r=g0[e.charCodeAt(t)];return r??-1}function W7(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s}function X7(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0}function Xu(e){var t=Pt();return t.fromInt(e),t}function J7(e,t){var r;if(t==16)r=4;else if(t==8)r=3;else if(t==256)r=8;else if(t==2)r=1;else if(t==32)r=5;else if(t==4)r=2;else{this.fromRadix(e,t);return}this.t=0,this.s=0;for(var n=e.length,i=!1,a=0;--n>=0;){var s=r==8?e[n]&255:By(e,n);if(s<0){e.charAt(n)=="-"&&(i=!0);continue}i=!1,a==0?this[this.t++]=s:a+r>this.DB?(this[this.t-1]|=(s&(1<<this.DB-a)-1)<<a,this[this.t++]=s>>this.DB-a):this[this.t-1]|=s<<a,a+=r,a>=this.DB&&(a-=this.DB)}r==8&&e[0]&128&&(this.s=-1,a>0&&(this[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),i&&ee.ZERO.subTo(this,this)}function Z7(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t}function Q7(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(e==16)t=4;else if(e==8)t=3;else if(e==2)t=1;else if(e==32)t=5;else if(e==4)t=2;else return this.toRadix(e);var r=(1<<t)-1,n,i=!1,a="",s=this.t,u=this.DB-s*this.DB%t;if(s-- >0)for(u<this.DB&&(n=this[s]>>u)>0&&(i=!0,a=iu(n));s>=0;)u<t?(n=(this[s]&(1<<u)-1)<<t-u,n|=this[--s]>>(u+=this.DB-t)):(n=this[s]>>(u-=t)&r,u<=0&&(u+=this.DB,--s)),n>0&&(i=!0),i&&(a+=iu(n));return i?a:"0"}function eR(){var e=Pt();return ee.ZERO.subTo(this,e),e}function tR(){return this.s<0?this.negate():this}function rR(e){var t=this.s-e.s;if(t!=0)return t;var r=this.t;if(t=r-e.t,t!=0)return this.s<0?-t:t;for(;--r>=0;)if((t=this[r]-e[r])!=0)return t;return 0}function m0(e){var t=1,r;return(r=e>>>16)!=0&&(e=r,t+=16),(r=e>>8)!=0&&(e=r,t+=8),(r=e>>4)!=0&&(e=r,t+=4),(r=e>>2)!=0&&(e=r,t+=2),(r=e>>1)!=0&&(e=r,t+=1),t}function nR(){return this.t<=0?0:this.DB*(this.t-1)+m0(this[this.t-1]^this.s&this.DM)}function iR(e,t){var r;for(r=this.t-1;r>=0;--r)t[r+e]=this[r];for(r=e-1;r>=0;--r)t[r]=0;t.t=this.t+e,t.s=this.s}function sR(e,t){for(var r=e;r<this.t;++r)t[r-e]=this[r];t.t=Math.max(this.t-e,0),t.s=this.s}function aR(e,t){var r=e%this.DB,n=this.DB-r,i=(1<<n)-1,a=Math.floor(e/this.DB),s=this.s<<r&this.DM,u;for(u=this.t-1;u>=0;--u)t[u+a+1]=this[u]>>n|s,s=(this[u]&i)<<r;for(u=a-1;u>=0;--u)t[u]=0;t[a]=s,t.t=this.t+a+1,t.s=this.s,t.clamp()}function uR(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t){t.t=0;return}var n=e%this.DB,i=this.DB-n,a=(1<<n)-1;t[0]=this[r]>>n;for(var s=r+1;s<this.t;++s)t[s-r-1]|=(this[s]&a)<<i,t[s-r]=this[s]>>n;n>0&&(t[this.t-r-1]|=(this.s&a)<<i),t.t=this.t-r,t.clamp()}function oR(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this[r]-e[r],t[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this[r],t[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n-=e[r],t[r++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t[r++]=this.DV+n:n>0&&(t[r++]=n),t.t=r,t.clamp()}function cR(e,t){var r=this.abs(),n=e.abs(),i=r.t;for(t.t=i+n.t;--i>=0;)t[i]=0;for(i=0;i<n.t;++i)t[i+r.t]=r.am(0,n[i],t,i,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&ee.ZERO.subTo(t,t)}function lR(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t[r],e,2*r,0,1);(e[r+t.t]+=t.am(r+1,2*t[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e[r+t.t]-=t.DV,e[r+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(r,t[r],e,2*r,0,1)),e.s=0,e.clamp()}function fR(e,t,r){var n=e.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t){t?.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=Pt());var a=Pt(),s=this.s,u=e.s,c=this.DB-m0(n[n.t-1]);c>0?(n.lShiftTo(c,a),i.lShiftTo(c,r)):(n.copyTo(a),i.copyTo(r));var f=a.t,h=a[f-1];if(h!=0){var g=h*(1<<this.F1)+(f>1?a[f-2]>>this.F2:0),p=this.FV/g,d=(1<<this.F1)/g,w=1<<this.F2,v=r.t,b=v-f,m=t??Pt();for(a.dlShiftTo(b,m),r.compareTo(m)>=0&&(r[r.t++]=1,r.subTo(m,r)),ee.ONE.dlShiftTo(f,m),m.subTo(a,a);a.t<f;)a[a.t++]=0;for(;--b>=0;){var y=r[--v]==h?this.DM:Math.floor(r[v]*p+(r[v-1]+w)*d);if((r[v]+=a.am(0,y,r,b,0,f))<y)for(a.dlShiftTo(b,m),r.subTo(m,r);r[v]<--y;)r.subTo(m,r)}t!=null&&(r.drShiftTo(f,t),s!=u&&ee.ZERO.subTo(t,t)),r.t=f,r.clamp(),c>0&&r.rShiftTo(c,r),s<0&&ee.ZERO.subTo(r,r)}}}function hR(e){var t=Pt();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(ee.ZERO)>0&&e.subTo(t,t),t}function Yo(e){this.m=e}function dR(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function pR(e){return e}function gR(e){e.divRemTo(this.m,null,e)}function mR(e,t,r){e.multiplyTo(t,r),this.reduce(r)}function vR(e,t){e.squareTo(t),this.reduce(t)}Yo.prototype.convert=dR;Yo.prototype.revert=pR;Yo.prototype.reduce=gR;Yo.prototype.mulTo=mR;Yo.prototype.sqrTo=vR;function wR(){if(this.t<1)return 0;var e=this[0];if(!(e&1))return 0;var t=e&3;return t=t*(2-(e&15)*t)&15,t=t*(2-(e&255)*t)&255,t=t*(2-((e&65535)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function Wo(e){this.m=e,this.mp=e.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function ER(e){var t=Pt();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(ee.ZERO)>0&&this.m.subTo(t,t),t}function AR(e){var t=Pt();return e.copyTo(t),this.reduce(t),t}function yR(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=e[t]&32767,n=r*this.mpl+((r*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(r=t+this.m.t,e[r]+=this.m.am(0,n,e,t,0,this.m.t);e[r]>=e.DV;)e[r]-=e.DV,e[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function bR(e,t){e.squareTo(t),this.reduce(t)}function _R(e,t,r){e.multiplyTo(t,r),this.reduce(r)}Wo.prototype.convert=ER;Wo.prototype.revert=AR;Wo.prototype.reduce=yR;Wo.prototype.mulTo=_R;Wo.prototype.sqrTo=bR;function CR(){return(this.t>0?this[0]&1:this.s)==0}function DR(e,t){if(e>4294967295||e<1)return ee.ONE;var r=Pt(),n=Pt(),i=t.convert(this),a=m0(e)-1;for(i.copyTo(r);--a>=0;)if(t.sqrTo(r,n),(e&1<<a)>0)t.mulTo(n,i,r);else{var s=r;r=n,n=s}return t.revert(r)}function FR(e,t){var r;return e<256||t.isEven()?r=new Yo(t):r=new Wo(t),this.exp(e,r)}ee.prototype.copyTo=W7;ee.prototype.fromInt=X7;ee.prototype.fromString=J7;ee.prototype.clamp=Z7;ee.prototype.dlShiftTo=iR;ee.prototype.drShiftTo=sR;ee.prototype.lShiftTo=aR;ee.prototype.rShiftTo=uR;ee.prototype.subTo=oR;ee.prototype.multiplyTo=cR;ee.prototype.squareTo=lR;ee.prototype.divRemTo=fR;ee.prototype.invDigit=wR;ee.prototype.isEven=CR;ee.prototype.exp=DR;ee.prototype.toString=Q7;ee.prototype.negate=eR;ee.prototype.abs=tR;ee.prototype.compareTo=rR;ee.prototype.bitLength=nR;ee.prototype.mod=hR;ee.prototype.modPowInt=FR;ee.ZERO=Xu(0);ee.ONE=Xu(1);function SR(){var e=Pt();return this.copyTo(e),e}function IR(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function BR(){return this.t==0?this.s:this[0]<<24>>24}function $R(){return this.t==0?this.s:this[0]<<16>>16}function RR(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function xR(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1}function PR(e){if(e==null&&(e=10),this.signum()==0||e<2||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),n=Xu(r),i=Pt(),a=Pt(),s="";for(this.divRemTo(n,i,a);i.signum()>0;)s=(r+a.intValue()).toString(e).substr(1)+s,i.divRemTo(n,i,a);return a.intValue().toString(e)+s}function OR(e,t){this.fromInt(0),t==null&&(t=10);for(var r=this.chunkSize(t),n=Math.pow(t,r),i=!1,a=0,s=0,u=0;u<e.length;++u){var c=By(e,u);if(c<0){e.charAt(u)=="-"&&this.signum()==0&&(i=!0);continue}s=t*s+c,++a>=r&&(this.dMultiply(n),this.dAddOffset(s,0),a=0,s=0)}a>0&&(this.dMultiply(Math.pow(t,a)),this.dAddOffset(s,0)),i&&ee.ZERO.subTo(this,this)}function TR(e,t,r){if(typeof t=="number")if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(ee.ONE.shiftLeft(e-1),em,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(ee.ONE.shiftLeft(e-1),this);else{var n=new Array,i=e&7;n.length=(e>>3)+1,t.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}}function NR(){var e=this.t,t=new Array;t[0]=this.s;var r=this.DB-e*this.DB%8,n,i=0;if(e-- >0)for(r<this.DB&&(n=this[e]>>r)!=(this.s&this.DM)>>r&&(t[i++]=n|this.s<<this.DB-r);e>=0;)r<8?(n=(this[e]&(1<<r)-1)<<8-r,n|=this[--e]>>(r+=this.DB-8)):(n=this[e]>>(r-=8)&255,r<=0&&(r+=this.DB,--e)),n&128&&(n|=-256),i==0&&(this.s&128)!=(n&128)&&++i,(i>0||n!=this.s)&&(t[i++]=n);return t}function kR(e){return this.compareTo(e)==0}function LR(e){return this.compareTo(e)<0?this:e}function UR(e){return this.compareTo(e)>0?this:e}function jR(e,t,r){var n,i,a=Math.min(e.t,this.t);for(n=0;n<a;++n)r[n]=t(this[n],e[n]);if(e.t<this.t){for(i=e.s&this.DM,n=a;n<this.t;++n)r[n]=t(this[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=a;n<e.t;++n)r[n]=t(i,e[n]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()}function HR(e,t){return e&t}function MR(e){var t=Pt();return this.bitwiseTo(e,HR,t),t}function em(e,t){return e|t}function qR(e){var t=Pt();return this.bitwiseTo(e,em,t),t}function $y(e,t){return e^t}function VR(e){var t=Pt();return this.bitwiseTo(e,$y,t),t}function Ry(e,t){return e&~t}function KR(e){var t=Pt();return this.bitwiseTo(e,Ry,t),t}function zR(){for(var e=Pt(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e}function GR(e){var t=Pt();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t}function YR(e){var t=Pt();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t}function WR(e){if(e==0)return-1;var t=0;return e&65535||(e>>=16,t+=16),e&255||(e>>=8,t+=8),e&15||(e>>=4,t+=4),e&3||(e>>=2,t+=2),e&1||++t,t}function XR(){for(var e=0;e<this.t;++e)if(this[e]!=0)return e*this.DB+WR(this[e]);return this.s<0?this.t*this.DB:-1}function JR(e){for(var t=0;e!=0;)e&=e-1,++t;return t}function ZR(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=JR(this[r]^t);return e}function QR(e){var t=Math.floor(e/this.DB);return t>=this.t?this.s!=0:(this[t]&1<<e%this.DB)!=0}function ex(e,t){var r=ee.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r}function tx(e){return this.changeBit(e,em)}function rx(e){return this.changeBit(e,Ry)}function nx(e){return this.changeBit(e,$y)}function ix(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this[r]+e[r],t[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this[r],t[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n+=e[r],t[r++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t[r++]=n:n<-1&&(t[r++]=this.DV+n),t.t=r,t.clamp()}function sx(e){var t=Pt();return this.addTo(e,t),t}function ax(e){var t=Pt();return this.subTo(e,t),t}function ux(e){var t=Pt();return this.multiplyTo(e,t),t}function ox(){var e=Pt();return this.squareTo(e),e}function cx(e){var t=Pt();return this.divRemTo(e,t,null),t}function lx(e){var t=Pt();return this.divRemTo(e,null,t),t}function fx(e){var t=Pt(),r=Pt();return this.divRemTo(e,t,r),new Array(t,r)}function hx(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function dx(e,t){if(e!=0){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}}function Tf(){}function xy(e){return e}function px(e,t,r){e.multiplyTo(t,r)}function gx(e,t){e.squareTo(t)}Tf.prototype.convert=xy;Tf.prototype.revert=xy;Tf.prototype.mulTo=px;Tf.prototype.sqrTo=gx;function mx(e){return this.exp(e,new Tf)}function vx(e,t,r){var n=Math.min(this.t+e.t,t);for(r.s=0,r.t=n;n>0;)r[--n]=0;var i;for(i=r.t-this.t;n<i;++n)r[n+this.t]=this.am(0,e[n],r,n,0,this.t);for(i=Math.min(e.t,t);n<i;++n)this.am(0,e[n],r,n,0,t-n);r.clamp()}function wx(e,t,r){--t;var n=r.t=this.t+e.t-t;for(r.s=0;--n>=0;)r[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r[this.t+n-t]=this.am(t-n,e[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r)}function ll(e){this.r2=Pt(),this.q3=Pt(),ee.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function Ex(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=Pt();return e.copyTo(t),this.reduce(t),t}function Ax(e){return e}function yx(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)}function bx(e,t){e.squareTo(t),this.reduce(t)}function _x(e,t,r){e.multiplyTo(t,r),this.reduce(r)}ll.prototype.convert=Ex;ll.prototype.revert=Ax;ll.prototype.reduce=yx;ll.prototype.mulTo=_x;ll.prototype.sqrTo=bx;function Cx(e,t){var r=e.bitLength(),n,i=Xu(1),a;if(r<=0)return i;r<18?n=1:r<48?n=3:r<144?n=4:r<768?n=5:n=6,r<8?a=new Yo(t):t.isEven()?a=new ll(t):a=new Wo(t);var s=new Array,u=3,c=n-1,f=(1<<n)-1;if(s[1]=a.convert(this),n>1){var h=Pt();for(a.sqrTo(s[1],h);u<=f;)s[u]=Pt(),a.mulTo(h,s[u-2],s[u]),u+=2}var g=e.t-1,p,d=!0,w=Pt(),v;for(r=m0(e[g])-1;g>=0;){for(r>=c?p=e[g]>>r-c&f:(p=(e[g]&(1<<r+1)-1)<<c-r,g>0&&(p|=e[g-1]>>this.DB+r-c)),u=n;!(p&1);)p>>=1,--u;if((r-=u)<0&&(r+=this.DB,--g),d)s[p].copyTo(i),d=!1;else{for(;u>1;)a.sqrTo(i,w),a.sqrTo(w,i),u-=2;u>0?a.sqrTo(i,w):(v=i,i=w,w=v),a.mulTo(w,s[p],i)}for(;g>=0&&!(e[g]&1<<r);)a.sqrTo(i,w),v=i,i=w,w=v,--r<0&&(r=this.DB-1,--g)}return a.revert(i)}function Dx(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var n=t;t=r,r=n}var i=t.getLowestSetBit(),a=r.getLowestSetBit();if(a<0)return t;for(i<a&&(a=i),a>0&&(t.rShiftTo(a,t),r.rShiftTo(a,r));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return a>0&&r.lShiftTo(a,r),r}function Fx(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(t==0)r=this[0]%e;else for(var n=this.t-1;n>=0;--n)r=(t*r+this[n])%e;return r}function Sx(e){var t=e.isEven();if(this.isEven()&&t||e.signum()==0)return ee.ZERO;for(var r=e.clone(),n=this.clone(),i=Xu(1),a=Xu(0),s=Xu(0),u=Xu(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),t?((!i.isEven()||!a.isEven())&&(i.addTo(this,i),a.subTo(e,a)),i.rShiftTo(1,i)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);for(;n.isEven();)n.rShiftTo(1,n),t?((!s.isEven()||!u.isEven())&&(s.addTo(this,s),u.subTo(e,u)),s.rShiftTo(1,s)):u.isEven()||u.subTo(e,u),u.rShiftTo(1,u);r.compareTo(n)>=0?(r.subTo(n,r),t&&i.subTo(s,i),a.subTo(u,a)):(n.subTo(r,n),t&&s.subTo(i,s),u.subTo(a,u))}if(n.compareTo(ee.ONE)!=0)return ee.ZERO;if(u.compareTo(e)>=0)return u.subtract(e);if(u.signum()<0)u.addTo(e,u);else return u;return u.signum()<0?u.add(e):u}var li=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],Ix=(1<<26)/li[li.length-1];function Bx(e){var t,r=this.abs();if(r.t==1&&r[0]<=li[li.length-1]){for(t=0;t<li.length;++t)if(r[0]==li[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<li.length;){for(var n=li[t],i=t+1;i<li.length&&n<Ix;)n*=li[i++];for(n=r.modInt(n);t<i;)if(n%li[t++]==0)return!1}return r.millerRabin(e)}function $x(e){var t=this.subtract(ee.ONE),r=t.getLowestSetBit();if(r<=0)return!1;var n=t.shiftRight(r);e=e+1>>1,e>li.length&&(e=li.length);for(var i=Pt(),a=0;a<e;++a){i.fromInt(li[Math.floor(Math.random()*li.length)]);var s=i.modPow(n,this);if(s.compareTo(ee.ONE)!=0&&s.compareTo(t)!=0){for(var u=1;u++<r&&s.compareTo(t)!=0;)if(s=s.modPowInt(2,this),s.compareTo(ee.ONE)==0)return!1;if(s.compareTo(t)!=0)return!1}}return!0}ee.prototype.chunkSize=RR;ee.prototype.toRadix=PR;ee.prototype.fromRadix=OR;ee.prototype.fromNumber=TR;ee.prototype.bitwiseTo=jR;ee.prototype.changeBit=ex;ee.prototype.addTo=ix;ee.prototype.dMultiply=hx;ee.prototype.dAddOffset=dx;ee.prototype.multiplyLowerTo=vx;ee.prototype.multiplyUpperTo=wx;ee.prototype.modInt=Fx;ee.prototype.millerRabin=$x;ee.prototype.clone=SR;ee.prototype.intValue=IR;ee.prototype.byteValue=BR;ee.prototype.shortValue=$R;ee.prototype.signum=xR;ee.prototype.toByteArray=NR;ee.prototype.equals=kR;ee.prototype.min=LR;ee.prototype.max=UR;ee.prototype.and=MR;ee.prototype.or=qR;ee.prototype.xor=VR;ee.prototype.andNot=KR;ee.prototype.not=zR;ee.prototype.shiftLeft=GR;ee.prototype.shiftRight=YR;ee.prototype.getLowestSetBit=XR;ee.prototype.bitCount=ZR;ee.prototype.testBit=QR;ee.prototype.setBit=tx;ee.prototype.clearBit=rx;ee.prototype.flipBit=nx;ee.prototype.add=sx;ee.prototype.subtract=ax;ee.prototype.multiply=ux;ee.prototype.divide=cx;ee.prototype.remainder=lx;ee.prototype.divideAndRemainder=fx;ee.prototype.modPow=Cx;ee.prototype.modInverse=Sx;ee.prototype.pow=mx;ee.prototype.gcd=Dx;ee.prototype.isProbablePrime=Bx;ee.prototype.square=ox;function tm(){this.i=0,this.j=0,this.S=new Array}function Rx(e){var t,r,n;for(t=0;t<256;++t)this.S[t]=t;for(r=0,t=0;t<256;++t)r=r+this.S[t]+e[t%e.length]&255,n=this.S[t],this.S[t]=this.S[r],this.S[r]=n;this.i=0,this.j=0}function xx(){var e;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,e=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=e,this.S[e+this.S[this.i]&255]}tm.prototype.init=Rx;tm.prototype.next=xx;function Px(){return new tm}var Wg=256;var f0,Yi,gn;function Ox(e){Yi[gn++]^=e&255,Yi[gn++]^=e>>8&255,Yi[gn++]^=e>>16&255,Yi[gn++]^=e>>24&255,gn>=Wg&&(gn-=Wg)}function rm(){Ox(new Date().getTime())}if(Yi==null){if(Yi=new Array,gn=0,sl!==void 0&&(sl.crypto!==void 0||sl.msCrypto!==void 0)){if(Kg=sl.crypto||sl.msCrypto,Kg.getRandomValues)for(zg=new Uint8Array(32),Kg.getRandomValues(zg),ws=0;ws<32;++ws)Yi[gn++]=zg[ws];else if(Pf.appName=="Netscape"&&Pf.appVersion<"5")for(Gg=sl.crypto.random(32),ws=0;ws<Gg.length;++ws)Yi[gn++]=Gg.charCodeAt(ws)&255}for(;gn<Wg;)ws=Math.floor(65536*Math.random()),Yi[gn++]=ws>>>8,Yi[gn++]=ws&255;gn=0,rm()}var ws,Kg,zg,Gg;function Tx(){if(f0==null){for(rm(),f0=Px(),f0.init(Yi),gn=0;gn<Yi.length;++gn)Yi[gn]=0;gn=0}return f0.next()}function Nx(e){var t;for(t=0;t<e.length;++t)e[t]=Tx()}function fl(){}fl.prototype.nextBytes=Nx;function Si(e,t){return new ee(e,t)}function rt(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function kx(e,t){if(this.isPublic=!0,this.isPrivate=!1,typeof e!="string")this.n=e,this.e=t;else if(e!=null&&t!=null&&e.length>0&&t.length>0)this.n=Si(e,16),this.e=parseInt(t,16);else throw"Invalid RSA public key"}function Lx(e){return e.modPowInt(this.e,this.n)}rt.prototype.doPublic=Lx;rt.prototype.setPublic=kx;rt.prototype.type="RSA";function Ux(e,t,r){if(this.isPrivate=!0,typeof e!="string")this.n=e,this.e=t,this.d=r;else if(e!=null&&t!=null&&e.length>0&&t.length>0)this.n=Si(e,16),this.e=parseInt(t,16),this.d=Si(r,16);else throw"Invalid RSA private key"}function jx(e,t,r,n,i,a,s,u){if(this.isPrivate=!0,this.isPublic=!1,e==null)throw"RSASetPrivateEx N == null";if(t==null)throw"RSASetPrivateEx E == null";if(e.length==0)throw"RSASetPrivateEx N.length == 0";if(t.length==0)throw"RSASetPrivateEx E.length == 0";if(e!=null&&t!=null&&e.length>0&&t.length>0)this.n=Si(e,16),this.e=parseInt(t,16),this.d=Si(r,16),this.p=Si(n,16),this.q=Si(i,16),this.dmp1=Si(a,16),this.dmq1=Si(s,16),this.coeff=Si(u,16);else throw"Invalid RSA private key in RSASetPrivateEx"}function Hx(e,t){var r=new fl,n=e>>1;this.e=parseInt(t,16);for(var i=new ee(t,16),a=e/2-100,s=ee.ONE.shiftLeft(a);;){for(;this.p=new ee(e-n,1,r),!(this.p.subtract(ee.ONE).gcd(i).compareTo(ee.ONE)==0&&this.p.isProbablePrime(10)););for(;this.q=new ee(n,1,r),!(this.q.subtract(ee.ONE).gcd(i).compareTo(ee.ONE)==0&&this.q.isProbablePrime(10)););if(this.p.compareTo(this.q)<=0){var u=this.p;this.p=this.q,this.q=u}var c=this.q.subtract(this.p).abs();if(!(c.bitLength()<a||c.compareTo(s)<=0)){var f=this.p.subtract(ee.ONE),h=this.q.subtract(ee.ONE),g=f.multiply(h);if(g.gcd(i).compareTo(ee.ONE)==0&&(this.n=this.p.multiply(this.q),this.n.bitLength()==e)){this.d=i.modInverse(g),this.dmp1=this.d.mod(f),this.dmq1=this.d.mod(h),this.coeff=this.q.modInverse(this.p);break}}}this.isPrivate=!0}function Mx(e){if(this.p==null||this.q==null)return e.modPow(this.d,this.n);for(var t=e.mod(this.p).modPow(this.dmp1,this.p),r=e.mod(this.q).modPow(this.dmq1,this.q);t.compareTo(r)<0;)t=t.add(this.p);return t.subtract(r).multiply(this.coeff).mod(this.p).multiply(this.q).add(r)}rt.prototype.doPrivate=Mx;rt.prototype.setPrivate=Ux;rt.prototype.setPrivateEx=jx;rt.prototype.generate=Hx;function nn(e,t){this.x=t,this.q=e}function qx(e){return e==this?!0:this.q.equals(e.q)&&this.x.equals(e.x)}function Vx(){return this.x}function Kx(){return new nn(this.q,this.x.negate().mod(this.q))}function zx(e){return new nn(this.q,this.x.add(e.toBigInteger()).mod(this.q))}function Gx(e){return new nn(this.q,this.x.subtract(e.toBigInteger()).mod(this.q))}function Yx(e){return new nn(this.q,this.x.multiply(e.toBigInteger()).mod(this.q))}function Wx(){return new nn(this.q,this.x.square().mod(this.q))}function Xx(e){return new nn(this.q,this.x.multiply(e.toBigInteger().modInverse(this.q)).mod(this.q))}nn.prototype.equals=qx;nn.prototype.toBigInteger=Vx;nn.prototype.negate=Kx;nn.prototype.add=zx;nn.prototype.subtract=Gx;nn.prototype.multiply=Yx;nn.prototype.square=Wx;nn.prototype.divide=Xx;nn.prototype.sqrt=function(){return new nn(this.q,this.x.sqrt().mod(this.q))};function qt(e,t,r,n){this.curve=e,this.x=t,this.y=r,n==null?this.z=ee.ONE:this.z=n,this.zinv=null}function Jx(){return this.zinv==null&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))}function Zx(){return this.zinv==null&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))}function Qx(e){if(e==this)return!0;if(this.isInfinity())return e.isInfinity();if(e.isInfinity())return this.isInfinity();var t,r;return t=e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.q),t.equals(ee.ZERO)?(r=e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.q),r.equals(ee.ZERO)):!1}function eP(){return this.x==null&&this.y==null?!0:this.z.equals(ee.ZERO)&&!this.y.toBigInteger().equals(ee.ZERO)}function tP(){return new qt(this.curve,this.x,this.y.negate(),this.z)}function rP(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.q),r=e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.q);if(ee.ZERO.equals(r))return ee.ZERO.equals(t)?this.twice():this.curve.getInfinity();var n=new ee("3"),i=this.x.toBigInteger(),a=this.y.toBigInteger(),s=e.x.toBigInteger(),u=e.y.toBigInteger(),c=r.square(),f=c.multiply(r),h=i.multiply(c),g=t.square().multiply(this.z),p=g.subtract(h.shiftLeft(1)).multiply(e.z).subtract(f).multiply(r).mod(this.curve.q),d=h.multiply(n).multiply(t).subtract(a.multiply(f)).subtract(g.multiply(t)).multiply(e.z).add(t.multiply(f)).mod(this.curve.q),w=f.multiply(this.z).multiply(e.z).mod(this.curve.q);return new qt(this.curve,this.curve.fromBigInteger(p),this.curve.fromBigInteger(d),w)}function nP(){if(this.isInfinity())return this;if(this.y.toBigInteger().signum()==0)return this.curve.getInfinity();var e=new ee("3"),t=this.x.toBigInteger(),r=this.y.toBigInteger(),n=r.multiply(this.z),i=n.multiply(r).mod(this.curve.q),a=this.curve.a.toBigInteger(),s=t.square().multiply(e);ee.ZERO.equals(a)||(s=s.add(this.z.square().multiply(a))),s=s.mod(this.curve.q);var u=s.square().subtract(t.shiftLeft(3).multiply(i)).shiftLeft(1).multiply(n).mod(this.curve.q),c=s.multiply(e).multiply(t).subtract(i.shiftLeft(1)).shiftLeft(2).multiply(i).subtract(s.square().multiply(s)).mod(this.curve.q),f=n.square().multiply(n).shiftLeft(3).mod(this.curve.q);return new qt(this.curve,this.curve.fromBigInteger(u),this.curve.fromBigInteger(c),f)}function iP(e){if(this.isInfinity())return this;if(e.signum()==0)return this.curve.getInfinity();var t=e,r=t.multiply(new ee("3")),n=this.negate(),i=this,a=this.curve.q.subtract(e),s=a.multiply(new ee("3")),u=new qt(this.curve,this.x,this.y),c=u.negate(),f;for(f=r.bitLength()-2;f>0;--f){i=i.twice();var h=r.testBit(f),g=t.testBit(f);h!=g&&(i=i.add(h?this:n))}for(f=s.bitLength()-2;f>0;--f){u=u.twice();var p=s.testBit(f),d=a.testBit(f);p!=d&&(u=u.add(p?u:c))}return i}function sP(e,t,r){var n;e.bitLength()>r.bitLength()?n=e.bitLength()-1:n=r.bitLength()-1;for(var i=this.curve.getInfinity(),a=this.add(t);n>=0;)i=i.twice(),e.testBit(n)?r.testBit(n)?i=i.add(a):i=i.add(this):r.testBit(n)&&(i=i.add(t)),--n;return i}qt.prototype.getX=Jx;qt.prototype.getY=Zx;qt.prototype.equals=Qx;qt.prototype.isInfinity=eP;qt.prototype.negate=tP;qt.prototype.add=rP;qt.prototype.twice=nP;qt.prototype.multiply=iP;qt.prototype.multiplyTwo=sP;function au(e,t,r){this.q=e,this.a=this.fromBigInteger(t),this.b=this.fromBigInteger(r),this.infinity=new qt(this,null,null)}function aP(){return this.q}function uP(){return this.a}function oP(){return this.b}function cP(e){return e==this?!0:this.q.equals(e.q)&&this.a.equals(e.a)&&this.b.equals(e.b)}function lP(){return this.infinity}function fP(e){return new nn(this.q,e)}function hP(e){switch(parseInt(e.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:var t=e.substr(0,2),r=e.substr(2),n=this.fromBigInteger(new ee(f,16)),i=this.getA(),a=this.getB(),s=n.square().add(i).multiply(n).add(a),u=s.sqrt();return t=="03"&&(u=u.negate()),new qt(this,n,u);case 4:case 6:case 7:var c=(e.length-2)/2,f=e.substr(2,c),h=e.substr(c+2,c);return new qt(this,this.fromBigInteger(new ee(f,16)),this.fromBigInteger(new ee(h,16)));default:return null}}au.prototype.getQ=aP;au.prototype.getA=uP;au.prototype.getB=oP;au.prototype.equals=cP;au.prototype.getInfinity=lP;au.prototype.fromBigInteger=fP;au.prototype.decodePointHex=hP;nn.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)};qt.prototype.getEncoded=function(e){var t=function(a,s){var u=a.toByteArrayUnsigned();if(s<u.length)u=u.slice(u.length-s);else for(;s>u.length;)u.unshift(0);return u},r=this.getX().toBigInteger(),n=this.getY().toBigInteger(),i=t(r,32);return e?n.isEven()?i.unshift(2):i.unshift(3):(i.unshift(4),i=i.concat(t(n,32))),i};qt.decodeFrom=function(e,t){var r=t[0],n=t.length-1,i=t.slice(1,1+n/2),a=t.slice(1+n/2,1+n);i.unshift(0),a.unshift(0);var s=new ee(i),u=new ee(a);return new qt(e,e.fromBigInteger(s),e.fromBigInteger(u))};qt.decodeFromHex=function(e,t){var r=t.substr(0,2),n=t.length-2,i=t.substr(2,n/2),a=t.substr(2+n/2,n/2),s=new ee(i,16),u=new ee(a,16);return new qt(e,e.fromBigInteger(s),e.fromBigInteger(u))};qt.prototype.add2D=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;if(this.x.equals(e.x))return this.y.equals(e.y)?this.twice():this.curve.getInfinity();var t=e.x.subtract(this.x),r=e.y.subtract(this.y),n=r.divide(t),i=n.square().subtract(this.x).subtract(e.x),a=n.multiply(this.x.subtract(i)).subtract(this.y);return new qt(this.curve,i,a)};qt.prototype.twice2D=function(){if(this.isInfinity())return this;if(this.y.toBigInteger().signum()==0)return this.curve.getInfinity();var e=this.curve.fromBigInteger(ee.valueOf(2)),t=this.curve.fromBigInteger(ee.valueOf(3)),r=this.x.square().multiply(t).add(this.curve.a).divide(this.y.multiply(e)),n=r.square().subtract(this.x.multiply(e)),i=r.multiply(this.x.subtract(n)).subtract(this.y);return new qt(this.curve,n,i)};qt.prototype.multiply2D=function(e){if(this.isInfinity())return this;if(e.signum()==0)return this.curve.getInfinity();var t=e,r=t.multiply(new ee("3")),n=this.negate(),i=this,a;for(a=r.bitLength()-2;a>0;--a){i=i.twice();var s=r.testBit(a),u=t.testBit(a);s!=u&&(i=i.add2D(s?this:n))}return i};qt.prototype.isOnCurve=function(){var e=this.getX().toBigInteger(),t=this.getY().toBigInteger(),r=this.curve.getA().toBigInteger(),n=this.curve.getB().toBigInteger(),i=this.curve.getQ(),a=t.multiply(t).mod(i),s=e.multiply(e).multiply(e).add(r.multiply(e)).add(n).mod(i);return a.equals(s)};qt.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"};qt.prototype.validate=function(){var e=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var t=this.getX().toBigInteger(),r=this.getY().toBigInteger();if(t.compareTo(ee.ONE)<0||t.compareTo(e.subtract(ee.ONE))>0)throw new Error("x coordinate out of bounds");if(r.compareTo(ee.ONE)<0||r.compareTo(e.subtract(ee.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(e).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};var Py=function(){var e="(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)",t='(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))',r='(?:"'+t+'*")',n=new RegExp("(?:false|true|null|[\\{\\}\\[\\]]|"+e+"|"+r+")","g"),i=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),a={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"};function s(g,p,d){return p?a[p]:String.fromCharCode(parseInt(d,16))}var u=new String(""),c="\\",f={"{":Object,"[":Array},h=Object.hasOwnProperty;return function(g,p){var d=g.match(n),w,v=d[0],b=!1;v==="{"?w={}:v==="["?w=[]:(w=[],b=!0);for(var m,y=[w],D=1-b,C=d.length;D<C;++D){v=d[D];var F;switch(v.charCodeAt(0)){default:F=y[0],F[m||F.length]=+v,m=void 0;break;case 34:if(v=v.substring(1,v.length-1),v.indexOf(c)!==-1&&(v=v.replace(i,s)),F=y[0],!m)if(F instanceof Array)m=F.length;else{m=v||u;break}F[m]=v,m=void 0;break;case 91:F=y[0],y.unshift(F[m||F.length]=[]),m=void 0;break;case 93:y.shift();break;case 102:F=y[0],F[m||F.length]=!1,m=void 0;break;case 110:F=y[0],F[m||F.length]=null,m=void 0;break;case 116:F=y[0],F[m||F.length]=!0,m=void 0;break;case 123:F=y[0],y.unshift(F[m||F.length]={}),m=void 0;break;case 125:y.shift();break}}if(b){if(y.length!==1)throw new Error;w=w[0]}else if(y.length)throw new Error;if(p){var U=function(k,S){var B=k[S];if(B&&typeof B=="object"){var T=null;for(var P in B)if(h.call(B,P)&&B!==k){var j=U(B,P);j!==void 0?B[P]=j:(T||(T=[]),T.push(P))}if(T)for(var Y=T.length;--Y>=0;)delete B[T[Y]]}return p.call(k,S,B)};w=U({"":w},"")}return w}}();(typeof E>"u"||!E)&&(E={});(typeof E.asn1>"u"||!E.asn1)&&(E.asn1={});E.asn1.ASN1Util=new function(){this.integerToByteHex=function(e){var t=e.toString(16);return t.length%2==1&&(t="0"+t),t},this.bigIntToMinTwosComplementsHex=function(e){return kf(e)},this.getPEMStringFromHex=function(e,t){return Gn(e,t)},this.newObject=function(e){var t=E,r=t.asn1,n=r.ASN1Object,i=r.DERBoolean,a=r.DERInteger,s=r.DERBitString,u=r.DEROctetString,c=r.DERNull,f=r.DERObjectIdentifier,h=r.DEREnumerated,g=r.DERUTF8String,p=r.DERNumericString,d=r.DERPrintableString,w=r.DERTeletexString,v=r.DERIA5String,b=r.DERUTCTime,m=r.DERGeneralizedTime,y=r.DERVisibleString,D=r.DERBMPString,C=r.DERSequence,F=r.DERSet,U=r.DERTaggedObject,k=r.ASN1Util.newObject;if(e instanceof r.ASN1Object)return e;var S=Object.keys(e);if(S.length!=1)throw new Error("key of param shall be only one.");var B=S[0];if(":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":"+B+":")==-1)throw new Error("undefined key: "+B);if(B=="bool")return new i(e[B]);if(B=="int")return new a(e[B]);if(B=="bitstr")return new s(e[B]);if(B=="octstr")return new u(e[B]);if(B=="null")return new c(e[B]);if(B=="oid")return new f(e[B]);if(B=="enum")return new h(e[B]);if(B=="utf8str")return new g(e[B]);if(B=="numstr")return new p(e[B]);if(B=="prnstr")return new d(e[B]);if(B=="telstr")return new w(e[B]);if(B=="ia5str")return new v(e[B]);if(B=="utctime")return new b(e[B]);if(B=="gentime")return new m(e[B]);if(B=="visstr")return new y(e[B]);if(B=="bmpstr")return new D(e[B]);if(B=="asn1")return new n(e[B]);if(B=="seq"){for(var T=e[B],P=[],j=0;j<T.length;j++){var Y=k(T[j]);P.push(Y)}return new C({array:P})}if(B=="set"){for(var T=e[B],P=[],j=0;j<T.length;j++){var Y=k(T[j]);P.push(Y)}return new F({array:P})}if(B=="tag"){var M=e[B];if(Object.prototype.toString.call(M)==="[object Array]"&&M.length==3){var z=k(M[2]);return new U({tag:M[0],explicit:M[1],obj:z})}else return new U(M)}},this.jsonToASN1HEX=function(e){var t=this.newObject(e);return t.tohex()}};E.asn1.ASN1Util.oidHexToInt=function(e){for(var i="",t=parseInt(e.substr(0,2),16),r=Math.floor(t/40),n=t%40,i=r+"."+n,a="",s=2;s<e.length;s+=2){var u=parseInt(e.substr(s,2),16),c=("00000000"+u.toString(2)).slice(-8);if(a=a+c.substr(1,7),c.substr(0,1)=="0"){var f=new ee(a,2);i=i+"."+f.toString(10),a=""}}return i};E.asn1.ASN1Util.oidIntToHex=function(e){var t=function(u){var c=u.toString(16);return c.length==1&&(c="0"+c),c},r=function(u){var c="",f=new ee(u,10),h=f.toString(2),g=7-h.length%7;g==7&&(g=0);for(var p="",d=0;d<g;d++)p+="0";h=p+h;for(var d=0;d<h.length-1;d+=7){var w=h.substr(d,7);d!=h.length-7&&(w="1"+w),c+=t(parseInt(w,2))}return c};if(!e.match(/^[0-9.]+$/))throw"malformed oid string: "+e;var n="",i=e.split("."),a=parseInt(i[0])*40+parseInt(i[1]);n+=t(a),i.splice(0,2);for(var s=0;s<i.length;s++)n+=r(i[s]);return n};E.asn1.ASN1Object=function(e){var t=!0,r=null,n="00",i="00",a="";this.params=null,this.getLengthHexFromValue=function(){if(typeof this.hV>"u"||this.hV==null)throw new Error("this.hV is null or undefined");if(this.hV.length%2==1)throw new Error("value hex must be even length: n="+a.length+",v="+this.hV);var s=this.hV.length/2,u=s.toString(16);if(u.length%2==1&&(u="0"+u),s<128)return u;var c=u.length/2;if(c>15)throw new Error("ASN.1 length too long to represent by 8x: n = "+s.toString(16));var f=128+c;return f.toString(16)+u},this.tohex=function(){return(this.hTLV==null||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getEncodedHex=function(){return this.tohex()},this.getValueHex=function(){return this.tohex(),this.hV},this.getFreshValueHex=function(){return""},this.setByParam=function(s){this.params=s},e!=null&&e.tlv!=null&&(this.hTLV=e.tlv,this.isModified=!1)};E.asn1.DERAbstractString=function(e){E.asn1.DERAbstractString.superclass.constructor.call(this);var t=null,r=null;this.getString=function(){return this.s},this.setString=function(n){this.hTLV=null,this.isModified=!0,this.s=n,this.hV=w0(this.s).toLowerCase()},this.setStringHex=function(n){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=n},this.getFreshValueHex=function(){return this.hV},typeof e<"u"&&(typeof e=="string"?this.setString(e):typeof e.str<"u"?this.setString(e.str):typeof e.hex<"u"&&this.setStringHex(e.hex))};pe(E.asn1.DERAbstractString,E.asn1.ASN1Object);E.asn1.DERAbstractTime=function(e){E.asn1.DERAbstractTime.superclass.constructor.call(this);var t=null,r=null;this.localDateToUTC=function(n){var i=n.getTime()+n.getTimezoneOffset()*6e4,a=new Date(i);return a},this.formatDate=function(n,i,a){var s=this.zeroPadding,u=this.localDateToUTC(n),c=String(u.getFullYear());i=="utc"&&(c=c.substr(2,2));var f=s(String(u.getMonth()+1),2),h=s(String(u.getDate()),2),g=s(String(u.getHours()),2),p=s(String(u.getMinutes()),2),d=s(String(u.getSeconds()),2),w=c+f+h+g+p+d;if(a===!0){var v=u.getMilliseconds();if(v!=0){var b=s(String(v),3);b=b.replace(/[0]+$/,""),w=w+"."+b}}return w+"Z"},this.zeroPadding=function(n,i){return n.length>=i?n:new Array(i-n.length+1).join("0")+n},this.setByParam=function(n){this.hV=null,this.hTLV=null,this.params=n},this.getString=function(){},this.setString=function(n){this.hTLV=null,this.isModified=!0,this.params==null&&(this.params={}),this.params.str=n},this.setByDate=function(n){this.hTLV=null,this.isModified=!0,this.params==null&&(this.params={}),this.params.date=n},this.setByDateValue=function(n,i,a,s,u,c){var f=new Date(Date.UTC(n,i-1,a,s,u,c,0));this.setByDate(f)},this.getFreshValueHex=function(){return this.hV}};pe(E.asn1.DERAbstractTime,E.asn1.ASN1Object);E.asn1.DERAbstractStructured=function(e){E.asn1.DERAbstractString.superclass.constructor.call(this);var t=null;this.setByASN1ObjectArray=function(r){this.hTLV=null,this.isModified=!0,this.asn1Array=r},this.appendASN1Object=function(r){this.hTLV=null,this.isModified=!0,this.asn1Array.push(r)},this.asn1Array=new Array,typeof e<"u"&&typeof e.array<"u"&&(this.asn1Array=e.array)};pe(E.asn1.DERAbstractStructured,E.asn1.ASN1Object);E.asn1.DERBoolean=function(e){E.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",e==!1?this.hTLV="010100":this.hTLV="0101ff"};pe(E.asn1.DERBoolean,E.asn1.ASN1Object);E.asn1.DERInteger=function(e){E.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.params=null;var t=kf;this.setByBigInteger=function(r){this.isModified=!0,this.params={bigint:r}},this.setByInteger=function(r){this.isModified=!0,this.params=r},this.setValueHex=function(r){this.isModified=!0,this.params={hex:r}},this.getFreshValueHex=function(){var r=this.params,n=null;if(r==null)throw new Error("value not set");if(typeof r=="object"&&r.hex!=null)return this.hV=r.hex,this.hV;if(typeof r=="number")n=new ee(String(r),10);else if(r.int!=null)n=new ee(String(r.int),10);else if(r.bigint!=null)n=r.bigint;else throw new Error("wrong parameter");return this.hV=t(n),this.hV},e!=null&&(this.params=e)};pe(E.asn1.DERInteger,E.asn1.ASN1Object);E.asn1.DERBitString=function(e){if(e!==void 0&&typeof e.obj<"u"){var t=E.asn1.ASN1Util.newObject(e.obj);e.hex="00"+t.tohex()}E.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(r){this.hTLV=null,this.isModified=!0,this.hV=r},this.setUnusedBitsAndHexValue=function(r,n){if(r<0||7<r)throw"unused bits shall be from 0 to 7: u = "+r;var i="0"+r;this.hTLV=null,this.isModified=!0,this.hV=i+n},this.setByBinaryString=function(r){r=r.replace(/0+$/,"");var n=8-r.length%8;n==8&&(n=0),r+="0000000".substr(0,n);for(var i="",a=0;a<r.length-1;a+=8){var s=r.substr(a,8),u=parseInt(s,2).toString(16);u.length==1&&(u="0"+u),i+=u}this.hTLV=null,this.isModified=!0,this.hV="0"+n+i},this.setByBooleanArray=function(r){for(var n="",i=0;i<r.length;i++)r[i]==!0?n+="1":n+="0";this.setByBinaryString(n)},this.newFalseArray=function(r){for(var n=new Array(r),i=0;i<r;i++)n[i]=!1;return n},this.getFreshValueHex=function(){return this.hV},typeof e<"u"&&(typeof e=="string"&&e.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(e):typeof e.hex<"u"?this.setHexValueIncludingUnusedBits(e.hex):typeof e.bin<"u"?this.setByBinaryString(e.bin):typeof e.array<"u"&&this.setByBooleanArray(e.array))};pe(E.asn1.DERBitString,E.asn1.ASN1Object);E.asn1.DEROctetString=function(e){if(e!==void 0&&typeof e.obj<"u"){var t=E.asn1.ASN1Util.newObject(e.obj);e.hex=t.tohex()}E.asn1.DEROctetString.superclass.constructor.call(this,e),this.hT="04"};pe(E.asn1.DEROctetString,E.asn1.DERAbstractString);E.asn1.DERNull=function(){E.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"};pe(E.asn1.DERNull,E.asn1.ASN1Object);E.asn1.DERObjectIdentifier=function(e){E.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(t){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.setValueOidString=function(t){var r=jy(t);if(r==null)throw new Error("malformed oid string: "+t);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=r},this.setValueName=function(t){var r=E.asn1.x509.OID.name2oid(t);if(r!=="")this.setValueOidString(r);else throw new Error("DERObjectIdentifier oidName undefined: "+t)},this.setValueNameOrOid=function(t){t.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(t):this.setValueName(t)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(t){typeof t=="string"?this.setValueNameOrOid(t):t.oid!==void 0?this.setValueNameOrOid(t.oid):t.name!==void 0?this.setValueNameOrOid(t.name):t.hex!==void 0&&this.setValueHex(t.hex)},e!==void 0&&this.setByParam(e)};pe(E.asn1.DERObjectIdentifier,E.asn1.ASN1Object);E.asn1.DEREnumerated=function(e){E.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(t){this.hTLV=null,this.isModified=!0,this.hV=kf(t)},this.setByInteger=function(t){var r=new ee(String(t),10);this.setByBigInteger(r)},this.setValueHex=function(t){this.hV=t},this.getFreshValueHex=function(){return this.hV},typeof e<"u"&&(typeof e.int<"u"?this.setByInteger(e.int):typeof e=="number"?this.setByInteger(e):typeof e.hex<"u"&&this.setValueHex(e.hex))};pe(E.asn1.DEREnumerated,E.asn1.ASN1Object);E.asn1.DERUTF8String=function(e){E.asn1.DERUTF8String.superclass.constructor.call(this,e),this.hT="0c"};pe(E.asn1.DERUTF8String,E.asn1.DERAbstractString);E.asn1.DERNumericString=function(e){E.asn1.DERNumericString.superclass.constructor.call(this,e),this.hT="12"};pe(E.asn1.DERNumericString,E.asn1.DERAbstractString);E.asn1.DERPrintableString=function(e){E.asn1.DERPrintableString.superclass.constructor.call(this,e),this.hT="13"};pe(E.asn1.DERPrintableString,E.asn1.DERAbstractString);E.asn1.DERTeletexString=function(e){E.asn1.DERTeletexString.superclass.constructor.call(this,e),this.hT="14"};pe(E.asn1.DERTeletexString,E.asn1.DERAbstractString);E.asn1.DERIA5String=function(e){E.asn1.DERIA5String.superclass.constructor.call(this,e),this.hT="16"};pe(E.asn1.DERIA5String,E.asn1.DERAbstractString);E.asn1.DERVisibleString=function(e){E.asn1.DERIA5String.superclass.constructor.call(this,e),this.hT="1a"};pe(E.asn1.DERVisibleString,E.asn1.DERAbstractString);E.asn1.DERBMPString=function(e){E.asn1.DERBMPString.superclass.constructor.call(this,e),this.hT="1e"};pe(E.asn1.DERBMPString,E.asn1.DERAbstractString);E.asn1.DERUTCTime=function(e){E.asn1.DERUTCTime.superclass.constructor.call(this,e),this.hT="17",this.params=void 0,this.getFreshValueHex=function(){var t=this.params;if(this.params==null&&(t={date:new Date}),typeof t=="string")if(t.match(/^[0-9]{12}Z$/)||t.match(/^[0-9]{12}\.[0-9]+Z$/))this.hV=Ii(t);else throw new Error("malformed string for UTCTime: "+t);else if(t.str!=null)this.hV=Ii(t.str);else if(t.date==null&&t.millis==!0){var r=new Date;this.hV=Ii(this.formatDate(r,"utc",!0))}else if(t.date!=null&&t.date instanceof Date){var n=t.millis===!0;this.hV=Ii(this.formatDate(t.date,"utc",n))}else t instanceof Date&&(this.hV=Ii(this.formatDate(t,"utc")));if(this.hV==null)throw new Error("parameter not specified properly for UTCTime");return this.hV},e!=null&&this.setByParam(e)};pe(E.asn1.DERUTCTime,E.asn1.DERAbstractTime);E.asn1.DERGeneralizedTime=function(e){E.asn1.DERGeneralizedTime.superclass.constructor.call(this,e),this.hT="18",this.params=e,this.getFreshValueHex=function(){var t=this.params;if(this.params==null&&(t={date:new Date}),typeof t=="string")if(t.match(/^[0-9]{14}Z$/)||t.match(/^[0-9]{14}\.[0-9]+Z$/))this.hV=Ii(t);else throw new Error("malformed string for GeneralizedTime: "+t);else if(t.str!=null)this.hV=Ii(t.str);else if(t.date==null&&t.millis==!0){var r=new Date;this.hV=Ii(this.formatDate(r,"gen",!0))}else if(t.date!=null&&t.date instanceof Date){var n=t.millis===!0;this.hV=Ii(this.formatDate(t.date,"gen",n))}else t instanceof Date&&(this.hV=Ii(this.formatDate(t,"gen")));if(this.hV==null)throw new Error("parameter not specified properly for GeneralizedTime");return this.hV},e!=null&&this.setByParam(e)};pe(E.asn1.DERGeneralizedTime,E.asn1.DERAbstractTime);E.asn1.DERSequence=function(e){E.asn1.DERSequence.superclass.constructor.call(this,e),this.hT="30",this.getFreshValueHex=function(){for(var t="",r=0;r<this.asn1Array.length;r++){var n=this.asn1Array[r];t+=n.tohex()}return this.hV=t,this.hV}};pe(E.asn1.DERSequence,E.asn1.DERAbstractStructured);E.asn1.DERSet=function(e){E.asn1.DERSet.superclass.constructor.call(this,e),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var t=new Array,r=0;r<this.asn1Array.length;r++){var n=this.asn1Array[r];t.push(n.tohex())}return this.sortFlag==!0&&t.sort(),this.hV=t.join(""),this.hV},typeof e<"u"&&typeof e.sortflag<"u"&&e.sortflag==!1&&(this.sortFlag=!1)};pe(E.asn1.DERSet,E.asn1.DERAbstractStructured);E.asn1.DERTaggedObject=function(e){E.asn1.DERTaggedObject.superclass.constructor.call(this);var t=E.asn1,r=be,n=r.getV,i=r.isASN1HEX,a=t.ASN1Util.newObject;this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.params={tag:"a0",explicit:!0},this.setASN1Object=function(s,u,c){this.params={tag:u,explicit:s,obj:c}},this.getFreshValueHex=function(){var s=this.params;if(s.explicit==null&&(s.explicit=!0),s.tage!=null&&(s.tag=s.tage,s.explicit=!0),s.tagi!=null&&(s.tag=s.tagi,s.explicit=!1),s.str!=null)this.hV=w0(s.str);else if(s.hex!=null)this.hV=s.hex;else if(s.obj!=null){var u;s.obj instanceof t.ASN1Object?u=s.obj.tohex():typeof s.obj=="object"&&(u=a(s.obj).tohex()),s.explicit?this.hV=u:this.hV=n(u,0)}else throw new Error("str, hex nor obj not specified");return s.tag==null&&(s.tag="a0"),this.hT=s.tag,this.hTLV=null,this.isModified=!0,this.hV},this.setByParam=function(s){this.params=s},e!==void 0&&this.setByParam(e)};pe(E.asn1.DERTaggedObject,E.asn1.ASN1Object);var be=new function(){};be.getLblen=function(e,t){if(e.substr(t+2,1)!="8")return 1;var r=parseInt(e.substr(t+3,1));return r==0?-1:0<r&&r<10?r+1:-2};be.getL=function(e,t){var r=be.getLblen(e,t);return r<1?"":e.substr(t+2,r*2)};be.getVblen=function(e,t){var r,n;return r=be.getL(e,t),r==""?-1:(r.substr(0,1)==="8"?n=new ee(r.substr(2),16):n=new ee(r,16),n.intValue())};be.getVidx=function(e,t){var r=be.getLblen(e,t);return r<0?r:t+(r+1)*2};be.getV=function(e,t){var r=be.getVidx(e,t),n=be.getVblen(e,t);return e.substr(r,n*2)};be.getTLV=function(e,t){return e.substr(t,2)+be.getL(e,t)+be.getV(e,t)};be.getTLVblen=function(e,t){return 2+be.getLblen(e,t)*2+be.getVblen(e,t)*2};be.getNextSiblingIdx=function(e,t){var r=be.getVidx(e,t),n=be.getVblen(e,t);return r+n*2};be.getChildIdx=function(e,t){var r=be,n=[],i,a,s;i=r.getVidx(e,t),a=r.getVblen(e,t)*2,e.substr(t,2)=="03"&&(i+=2,a-=2),s=0;for(var u=i;s<=a;){var c=r.getTLVblen(e,u);if(s+=c,s<=a&&n.push(u),u+=c,s>=a)break}return n};be.getNthChildIdx=function(e,t,r){var n=be.getChildIdx(e,t);return n[r]};be.getIdxbyList=function(e,t,r,n){var i=be,a,s;return r.length==0?n!==void 0&&e.substr(t,2)!==n?-1:t:(a=r.shift(),s=i.getChildIdx(e,t),a>=s.length?-1:i.getIdxbyList(e,s[a],r,n))};be.getIdxbyListEx=function(e,t,r,n){var i=be,a,s;if(r.length==0)return n!==void 0&&e.substr(t,2)!==n?-1:t;a=r.shift(),s=i.getChildIdx(e,t);for(var u=0,c=0;c<s.length;c++){var f=e.substr(s[c],2);if(typeof a=="number"&&!i.isContextTag(f)&&u==a||typeof a=="string"&&i.isContextTag(f,a))return i.getIdxbyListEx(e,s[c],r,n);i.isContextTag(f)||u++}return-1};be.getTLVbyList=function(e,t,r,n){var i=be,a=i.getIdxbyList(e,t,r,n);return a==-1||a>=e.length?null:i.getTLV(e,a)};be.getTLVbyListEx=function(e,t,r,n){var i=be,a=i.getIdxbyListEx(e,t,r,n);return a==-1?null:i.getTLV(e,a)};be.getVbyList=function(e,t,r,n,i){var a=be,s,u;return s=a.getIdxbyList(e,t,r,n),s==-1||s>=e.length?null:(u=a.getV(e,s),i===!0&&(u=u.substr(2)),u)};be.getVbyListEx=function(e,t,r,n,i){var a=be,s,u,c;return s=a.getIdxbyListEx(e,t,r,n),s==-1?null:(c=a.getV(e,s),e.substr(s,2)=="03"&&i!==!1&&(c=c.substr(2)),c)};be.getInt=function(e,t,r){r==null&&(r=-1);try{var n=e.substr(t,2);if(n!="02"&&n!="03")return r;var i=be.getV(e,t);return n=="02"?parseInt(i,16):My(i)}catch{return r}};be.getOID=function(e,t,r){r==null&&(r=null);try{if(e.substr(t,2)!="06")return r;var n=be.getV(e,t);return _0(n)}catch{return r}};be.getOIDName=function(e,t,r){r==null&&(r=null);try{var n=be.getOID(e,t,r);if(n==r)return r;var i=E.asn1.x509.OID.oid2name(n);return i==""?n:i}catch{return r}};be.getString=function(e,t,r){r==null&&(r=null);try{var n=be.getV(e,t);return Bi(n)}catch{return r}};be.hextooidstr=function(e){var t=function(g,p){return g.length>=p?g:new Array(p-g.length+1).join("0")+g},r=[],n=e.substr(0,2),i=parseInt(n,16);r[0]=new String(Math.floor(i/40)),r[1]=new String(i%40);for(var a=e.substr(2),s=[],u=0;u<a.length/2;u++)s.push(parseInt(a.substr(u*2,2),16));for(var c=[],f="",u=0;u<s.length;u++)s[u]&128?f=f+t((s[u]&127).toString(2),7):(f=f+t((s[u]&127).toString(2),7),c.push(new String(parseInt(f,2))),f="");var h=r.join(".");return c.length>0&&(h=h+"."+c.join(".")),h};be.dump=function(e,t,r,n){var i=be,a=i.getV,s=i.dump,u=i.getChildIdx,c=e;e instanceof E.asn1.ASN1Object&&(c=e.tohex());var f=function(k,S){if(k.length<=S*2)return k;var B=k.substr(0,S)+"..(total "+k.length/2+"bytes).."+k.substr(k.length-S,S);return B};t===void 0&&(t={ommit_long_octet:32}),r===void 0&&(r=0),n===void 0&&(n="");var h=t.ommit_long_octet,F=c.substr(r,2);if(F=="01"){var g=a(c,r);return g=="00"?n+`BOOLEAN FALSE
`:n+`BOOLEAN TRUE
`}if(F=="02"){var g=a(c,r);return n+"INTEGER "+f(g,h)+`
`}if(F=="03"){var g=a(c,r);if(i.isASN1HEX(g.substr(2))){var p=n+`BITSTRING, encapsulates
`;return p=p+s(g.substr(2),t,0,n+"  "),p}else return n+"BITSTRING "+f(g,h)+`
`}if(F=="04"){var g=a(c,r);if(i.isASN1HEX(g)){var p=n+`OCTETSTRING, encapsulates
`;return p=p+s(g,t,0,n+"  "),p}else return n+"OCTETSTRING "+f(g,h)+`
`}if(F=="05")return n+`NULL
`;if(F=="06"){var d=a(c,r),w=E.asn1.ASN1Util.oidHexToInt(d),v=E.asn1.x509.OID.oid2name(w),b=w.replace(/\./g," ");return v!=""?n+"ObjectIdentifier "+v+" ("+b+`)
`:n+"ObjectIdentifier ("+b+`)
`}if(F=="0a")return n+"ENUMERATED "+parseInt(a(c,r))+`
`;if(F=="0c")return n+"UTF8String '"+Qt(a(c,r))+`'
`;if(F=="13")return n+"PrintableString '"+Qt(a(c,r))+`'
`;if(F=="14")return n+"TeletexString '"+Qt(a(c,r))+`'
`;if(F=="16")return n+"IA5String '"+Qt(a(c,r))+`'
`;if(F=="17")return n+"UTCTime "+Qt(a(c,r))+`
`;if(F=="18")return n+"GeneralizedTime "+Qt(a(c,r))+`
`;if(F=="1a")return n+"VisualString '"+Qt(a(c,r))+`'
`;if(F=="1e")return n+"BMPString '"+am(a(c,r))+`'
`;if(F=="30"){if(c.substr(r,4)=="3000")return n+`SEQUENCE {}
`;var p=n+`SEQUENCE
`,m=u(c,r),y=t;if((m.length==2||m.length==3)&&c.substr(m[0],2)=="06"&&c.substr(m[m.length-1],2)=="04"){var v=i.oidname(a(c,m[0])),D=JSON.parse(JSON.stringify(t));D.x509ExtName=v,y=D}for(var C=0;C<m.length;C++)p=p+s(c,y,m[C],n+"  ");return p}if(F=="31"){for(var p=n+`SET
`,m=u(c,r),C=0;C<m.length;C++)p=p+s(c,t,m[C],n+"  ");return p}var F=parseInt(F,16);if(F&128){var U=F&31;if(F&32){for(var p=n+"["+U+`]
`,m=u(c,r),C=0;C<m.length;C++)p=p+s(c,t,m[C],n+"  ");return p}else{var g=a(c,r);if(be.isASN1HEX(g)){var p=n+"["+U+`]
`;return p=p+s(g,t,0,n+"  "),p}else(g.substr(0,8)=="68747470"||t.x509ExtName==="subjectAltName"&&U==2)&&(g=Qt(g));var p=n+"["+U+"] "+g+`
`;return p}}return n+"UNKNOWN("+F+") "+a(c,r)+`
`};be.parse=function(e){var t=be,r=t.parse,n=t.isASN1HEX,i=t.getV,a=t.getTLV,s=t.getChildIdx,u=E.asn1,c=u.ASN1Util.oidHexToInt,f=u.x509.OID.oid2name,h=Qt,g=am,p=wP,d={"0c":"utf8str",12:"numstr",13:"prnstr",14:"telstr",16:"ia5str",17:"utctime",18:"gentime","1a":"visstr","1e":"bmpstr",30:"seq",31:"set"},w=function(B){for(var T=[],P=s(B,0),j=0;j<P.length;j++){var Y=P[j],M=a(B,Y),z=r(M);T.push(z)}return T},v=e.substr(0,2),b={},m=i(e,0);if(v=="01")return e=="0101ff"?{bool:!0}:{bool:!1};if(v=="02")return{int:{hex:m}};if(v=="03")try{if(m.substr(0,2)!="00")throw"not encap";var y=m.substr(2);if(!n(y))throw"not encap";return{bitstr:{obj:r(y)}}}catch{var D=null;return m.length<=10&&(D=Vy(m)),D==null?{bitstr:{hex:m}}:{bitstr:{bin:D}}}else if(v=="04")try{if(!n(m))throw"not encap";return{octstr:{obj:r(m)}}}catch{return{octstr:{hex:m}}}else{if(v=="05")return{null:""};if(v=="06"){var C=c(m),F=f(C);return F==""?{oid:C}:{oid:F}}else{if(v=="0a")return m.length>4?{enum:{hex:m}}:{enum:parseInt(m,16)};if(v=="30"||v=="31")return b[d[v]]=w(e),b;if(v=="14"){var U=p(m);return b[d[v]]={str:U},b}else if(v=="1e"){var U=g(m);return b[d[v]]={str:U},b}else if(":0c:12:13:16:17:18:1a:".indexOf(v)!=-1){var U=h(m);return b[d[v]]={str:U},b}else if(v.match(/^8[0-9]$/)){var U=h(m);return U==null|U==""?{tag:{tag:v,explicit:!1,hex:m}}:U.match(/[\x00-\x1F\x7F-\x9F]/)!=null||U.match(/[\u0000-\u001F\u0080–\u009F]/)!=null?{tag:{tag:v,explicit:!1,hex:m}}:{tag:{tag:v,explicit:!1,str:U}}}else if(v.match(/^a[0-9]$/))try{if(!n(m))throw new Error("not encap");return{tag:{tag:v,explicit:!0,obj:r(m)}}}catch{return{tag:{tag:v,explicit:!0,hex:m}}}else{var k=new E.asn1.ASN1Object;k.hV=m;var S=k.getLengthHexFromValue();return{asn1:{tlv:v+S+m}}}}}};be.isContextTag=function(e,t){e=e.toLowerCase();var r,n;try{r=parseInt(e,16)}catch{return-1}if(t===void 0)return(r&192)==128;try{var i=t.match(/^\[[0-9]+\]$/);return i==null||(n=parseInt(t.substr(1,t.length-1),10),n>31)?!1:(r&192)==128&&(r&31)==n}catch{return!1}};be.isASN1HEX=function(e){var t=be;if(e.length%2==1)return!1;var r=t.getVblen(e,0),n=e.substr(0,2),i=t.getL(e,0),a=e.length-n.length-i.length;return a==r*2};be.checkStrictDER=function(e,t,r,n,i){var a=be;if(r===void 0){if(typeof e!="string")throw new Error("not hex string");if(e=e.toLowerCase(),!E.lang.String.isHex(e))throw new Error("not hex string");r=e.length,n=e.length/2,n<128?i=1:i=Math.ceil(n.toString(16))+1}var s=a.getL(e,t);if(s.length>i*2)throw new Error("L of TLV too long: idx="+t);var u=a.getVblen(e,t);if(u>n)throw new Error("value of L too long than hex: idx="+t);var c=a.getTLV(e,t),f=c.length-2-a.getL(e,t).length;if(f!==u*2)throw new Error("V string length and L's value not the same:"+f+"/"+u*2);if(t===0&&e.length!=c.length)throw new Error("total length and TLV length unmatch:"+e.length+"!="+c.length);var h=e.substr(t,2);if(h==="02"){var g=a.getVidx(e,t);if(e.substr(g,2)=="00"&&e.charCodeAt(g+2)<56)throw new Error("not least zeros for DER INTEGER")}if(parseInt(h,16)&32){for(var p=a.getVblen(e,t),d=0,w=a.getChildIdx(e,t),v=0;v<w.length;v++){var b=a.getTLV(e,w[v]);d+=b.length,a.checkStrictDER(e,w[v],r,n,i)}if(p*2!=d)throw new Error("sum of children's TLV length and L unmatch: "+p*2+"!="+d)}};be.oidname=function(e){var t=E.asn1;E.lang.String.isHex(e)&&(e=t.ASN1Util.oidHexToInt(e));var r=t.x509.OID.oid2name(e);return r===""&&(r=e),r};(typeof E>"u"||!E)&&(E={});(typeof E.asn1>"u"||!E.asn1)&&(E.asn1={});(typeof E.asn1.x509>"u"||!E.asn1.x509)&&(E.asn1.x509={});E.asn1.x509.Certificate=function(e){E.asn1.x509.Certificate.superclass.constructor.call(this);var t=E,r=t.asn1,n=r.DERBitString,i=r.DERSequence,a=r.x509,s=a.TBSCertificate,u=a.AlgorithmIdentifier;this.params=void 0,this.setByParam=function(c){this.params=c},this.sign=function(){var c=this.params,f=c.sigalg;c.sigalg.name!=null&&(f=c.sigalg.name);var h=c.tbsobj.tohex(),g=new E.crypto.Signature({alg:f});g.init(c.cakey),g.updateHex(h),c.sighex=g.sign()},this.getPEM=function(){return Gn(this.tohex(),"CERTIFICATE")},this.tohex=function(){var c=this.params;if((c.tbsobj==null||c.tbsobj==null)&&(c.tbsobj=new s(c)),c.sighex==null&&c.cakey!=null&&this.sign(),c.sighex==null)throw new Error("sighex or cakey parameter not defined");var f=[];f.push(c.tbsobj),f.push(new u({name:c.sigalg})),f.push(new n({hex:"00"+c.sighex}));var h=new i({array:f});return h.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&(this.params=e)};pe(E.asn1.x509.Certificate,E.asn1.ASN1Object);E.asn1.x509.TBSCertificate=function(e){E.asn1.x509.TBSCertificate.superclass.constructor.call(this);var t=E,r=t.asn1,n=r.x509,i=r.DERTaggedObject,a=r.DERInteger,s=r.DERSequence,u=n.AlgorithmIdentifier,c=n.Time,f=n.X500Name,h=n.Extensions,g=n.SubjectPublicKeyInfo;this.params=null,this.setByParam=function(p){this.params=p},this.tohex=function(){var p=[],d=this.params;if(d.version!=null||d.version!=1){var w=2;d.version!=null&&(w=d.version-1);var v=new i({obj:new a({int:w})});p.push(v)}p.push(new a(d.serial)),p.push(new u({name:d.sigalg})),p.push(new f(d.issuer)),p.push(new s({array:[new c(d.notbefore),new c(d.notafter)]})),p.push(new f(d.subject)),p.push(new g(Ct.getKey(d.sbjpubkey))),d.ext!==void 0&&d.ext.length>0&&p.push(new i({tag:"a3",obj:new h(d.ext)}));var b=new E.asn1.DERSequence({array:p});return b.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};pe(E.asn1.x509.TBSCertificate,E.asn1.ASN1Object);E.asn1.x509.Extensions=function(e){E.asn1.x509.Extensions.superclass.constructor.call(this);var t=E,r=t.asn1,n=r.DERSequence,i=r.x509;this.aParam=[],this.setByParam=function(a){this.aParam=a},this.tohex=function(){for(var a=[],s=0;s<this.aParam.length;s++){var u=this.aParam[s],c=u.extname,f=null;if(u.extn!=null)f=new i.PrivateExtension(u);else if(c=="subjectKeyIdentifier")f=new i.SubjectKeyIdentifier(u);else if(c=="keyUsage")f=new i.KeyUsage(u);else if(c=="subjectAltName")f=new i.SubjectAltName(u);else if(c=="issuerAltName")f=new i.IssuerAltName(u);else if(c=="basicConstraints")f=new i.BasicConstraints(u);else if(c=="nameConstraints")f=new i.NameConstraints(u);else if(c=="cRLDistributionPoints")f=new i.CRLDistributionPoints(u);else if(c=="certificatePolicies")f=new i.CertificatePolicies(u);else if(c=="policyMappings")f=new i.PolicyMappings(u);else if(c=="policyConstraints")f=new i.PolicyConstraints(u);else if(c=="inhibitAnyPolicy")f=new i.InhibitAnyPolicy(u);else if(c=="authorityKeyIdentifier")f=new i.AuthorityKeyIdentifier(u);else if(c=="extKeyUsage")f=new i.ExtKeyUsage(u);else if(c=="authorityInfoAccess")f=new i.AuthorityInfoAccess(u);else if(c=="cRLNumber")f=new i.CRLNumber(u);else if(c=="cRLReason")f=new i.CRLReason(u);else if(c=="ocspNonce")f=new i.OCSPNonce(u);else if(c=="ocspNoCheck")f=new i.OCSPNoCheck(u);else if(c=="adobeTimeStamp")f=new i.AdobeTimeStamp(u);else if(c=="subjectDirectoryAttributes")f=new i.SubjectDirectoryAttributes(u);else throw new Error("extension not supported:"+JSON.stringify(u));f!=null&&a.push(f)}var h=new n({array:a});return h.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(E.asn1.x509.Extensions,E.asn1.ASN1Object);E.asn1.x509.Extension=function(e){E.asn1.x509.Extension.superclass.constructor.call(this);var t=null,r=E,n=r.asn1,i=n.DERObjectIdentifier,a=n.DEROctetString,s=n.DERBitString,u=n.DERBoolean,c=n.DERSequence;this.tohex=function(){var f=new i({oid:this.oid}),h=new a({hex:this.getExtnValueHex()}),g=new Array;g.push(f),this.critical&&g.push(new u),g.push(h);var p=new c({array:g});return p.tohex()},this.getEncodedHex=function(){return this.tohex()},this.critical=!1,e!==void 0&&e.critical!==void 0&&(this.critical=e.critical)};pe(E.asn1.x509.Extension,E.asn1.ASN1Object);E.asn1.x509.KeyUsage=function(e){E.asn1.x509.KeyUsage.superclass.constructor.call(this,e);var t=Error,r={digitalSignature:0,nonRepudiation:1,keyEncipherment:2,dataEncipherment:3,keyAgreement:4,keyCertSign:5,cRLSign:6,encipherOnly:7,decipherOnly:8};this.getExtnValueHex=function(){var n=this.getBinValue();return this.asn1ExtnValue=new E.asn1.DERBitString({bin:n}),this.asn1ExtnValue.tohex()},this.getBinValue=function(){var n=this.params;if(typeof n!="object"||typeof n.names!="object"&&typeof n.bin!="string")throw new t("parameter not yet set");if(n.names!=null)return p0(n.names,r);if(n.bin!=null)return n.bin;throw new t("parameter not set properly")},this.oid="2.5.29.15",e!==void 0&&(this.params=e)};pe(E.asn1.x509.KeyUsage,E.asn1.x509.Extension);E.asn1.x509.BasicConstraints=function(e){E.asn1.x509.BasicConstraints.superclass.constructor.call(this,e);var t=E.asn1,r=t.DERBoolean,n=t.DERInteger,i=t.DERSequence,a=!1,s=-1;this.getExtnValueHex=function(){var u=new Array;this.cA&&u.push(new r),this.pathLen>-1&&u.push(new n({int:this.pathLen}));var c=new i({array:u});return this.asn1ExtnValue=c,this.asn1ExtnValue.tohex()},this.oid="2.5.29.19",this.cA=!1,this.pathLen=-1,e!==void 0&&(e.cA!==void 0&&(this.cA=e.cA),e.pathLen!==void 0&&(this.pathLen=e.pathLen))};pe(E.asn1.x509.BasicConstraints,E.asn1.x509.Extension);E.asn1.x509.CRLDistributionPoints=function(e){E.asn1.x509.CRLDistributionPoints.superclass.constructor.call(this,e);var t=E,r=t.asn1,n=r.x509;this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.setByDPArray=function(i){for(var a=[],s=0;s<i.length;s++)if(i[s]instanceof E.asn1.ASN1Object)a.push(i[s]);else{var u=new n.DistributionPoint(i[s]);a.push(u)}this.asn1ExtnValue=new r.DERSequence({array:a})},this.setByOneURI=function(i){var a=new n.DistributionPoint({fulluri:i});this.setByDPArray([a])},this.oid="2.5.29.31",e!==void 0&&(e.array!==void 0?this.setByDPArray(e.array):e.uri!==void 0&&this.setByOneURI(e.uri))};pe(E.asn1.x509.CRLDistributionPoints,E.asn1.x509.Extension);E.asn1.x509.DistributionPoint=function(e){E.asn1.x509.DistributionPoint.superclass.constructor.call(this);var t=null,r=E,n=r.asn1,i=n.x509.DistributionPointName;this.tohex=function(){var a=new n.DERSequence;if(this.asn1DP!=null){var s=new n.DERTaggedObject({explicit:!0,tag:"a0",obj:this.asn1DP});a.appendASN1Object(s)}return this.hTLV=a.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&(e.dpobj!==void 0?this.asn1DP=e.dpobj:e.dpname!==void 0?this.asn1DP=new i(e.dpname):e.fulluri!==void 0&&(this.asn1DP=new i({full:[{uri:e.fulluri}]})))};pe(E.asn1.x509.DistributionPoint,E.asn1.ASN1Object);E.asn1.x509.DistributionPointName=function(e){E.asn1.x509.DistributionPointName.superclass.constructor.call(this);var t=null,r=null,n=null,i=null,a=E,s=a.asn1,u=s.DERTaggedObject;if(this.tohex=function(){if(this.type!="full")throw new Error("currently type shall be 'full': "+this.type);return this.asn1Obj=new u({explicit:!1,tag:this.tag,obj:this.asn1V}),this.hTLV=this.asn1Obj.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0)if(s.x509.GeneralNames.prototype.isPrototypeOf(e))this.type="full",this.tag="a0",this.asn1V=e;else if(e.full!==void 0)this.type="full",this.tag="a0",this.asn1V=new s.x509.GeneralNames(e.full);else throw new Error("This class supports GeneralNames only as argument")};pe(E.asn1.x509.DistributionPointName,E.asn1.ASN1Object);E.asn1.x509.CertificatePolicies=function(e){E.asn1.x509.CertificatePolicies.superclass.constructor.call(this,e);var t=E,r=t.asn1,n=r.x509,i=r.DERSequence,a=n.PolicyInformation;this.params=null,this.getExtnValueHex=function(){for(var s=[],u=0;u<this.params.array.length;u++)s.push(new a(this.params.array[u]));var c=new i({array:s});return this.asn1ExtnValue=c,this.asn1ExtnValue.tohex()},this.oid="2.5.29.32",e!==void 0&&(this.params=e)};pe(E.asn1.x509.CertificatePolicies,E.asn1.x509.Extension);E.asn1.x509.PolicyInformation=function(e){E.asn1.x509.PolicyInformation.superclass.constructor.call(this,e);var t=E.asn1,r=t.DERSequence,n=t.DERObjectIdentifier,i=t.x509.PolicyQualifierInfo;this.params=null,this.tohex=function(){if(this.params.policyoid===void 0&&this.params.array===void 0)throw new Error("parameter oid and array missing");var a=[new n(this.params.policyoid)];if(this.params.array!==void 0){for(var s=[],u=0;u<this.params.array.length;u++)s.push(new i(this.params.array[u]));s.length>0&&a.push(new r({array:s}))}var c=new r({array:a});return c.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&(this.params=e)};pe(E.asn1.x509.PolicyInformation,E.asn1.ASN1Object);E.asn1.x509.PolicyQualifierInfo=function(e){E.asn1.x509.PolicyQualifierInfo.superclass.constructor.call(this,e);var t=E.asn1,r=t.DERSequence,n=t.DERIA5String,i=t.DERObjectIdentifier,a=t.x509.UserNotice;this.params=null,this.tohex=function(){if(this.params.cps!==void 0){var s=new r({array:[new i({oid:"1.3.6.1.5.5.7.2.1"}),new n({str:this.params.cps})]});return s.tohex()}if(this.params.unotice!=null){var s=new r({array:[new i({oid:"1.3.6.1.5.5.7.2.2"}),new a(this.params.unotice)]});return s.tohex()}},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&(this.params=e)};pe(E.asn1.x509.PolicyQualifierInfo,E.asn1.ASN1Object);E.asn1.x509.UserNotice=function(e){E.asn1.x509.UserNotice.superclass.constructor.call(this,e);var t=E.asn1.DERSequence,r=E.asn1.DERInteger,n=E.asn1.x509.DisplayText,i=E.asn1.x509.NoticeReference;this.params=null,this.tohex=function(){var a=[];this.params.noticeref!==void 0&&a.push(new i(this.params.noticeref)),this.params.exptext!==void 0&&a.push(new n(this.params.exptext));var s=new t({array:a});return s.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&(this.params=e)};pe(E.asn1.x509.UserNotice,E.asn1.ASN1Object);E.asn1.x509.NoticeReference=function(e){E.asn1.x509.NoticeReference.superclass.constructor.call(this,e);var t=E.asn1.DERSequence,r=E.asn1.DERInteger,n=E.asn1.x509.DisplayText;this.params=null,this.tohex=function(){var i=[];if(this.params.org!==void 0&&i.push(new n(this.params.org)),this.params.noticenum!==void 0){for(var a=[],s=this.params.noticenum,u=0;u<s.length;u++)a.push(new r(s[u]));i.push(new t({array:a}))}if(i.length==0)throw new Error("parameter is empty");var c=new t({array:i});return c.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&(this.params=e)};pe(E.asn1.x509.NoticeReference,E.asn1.ASN1Object);E.asn1.x509.DisplayText=function(e){E.asn1.x509.DisplayText.superclass.constructor.call(this,e),this.hT="0c",e!==void 0&&(e.type==="ia5"?this.hT="16":e.type==="vis"?this.hT="1a":e.type==="bmp"&&(this.hT="1e"))};pe(E.asn1.x509.DisplayText,E.asn1.DERAbstractString);E.asn1.x509.PolicyMappings=function(e){E.asn1.x509.PolicyMappings.superclass.constructor.call(this,e);var t=E,r=t.asn1,n=r.x509,i=r.ASN1Util.newObject;this.params=null,this.getExtnValueHex=function(){for(var a=this.params,s=[],u=0;u<a.array.length;u++){var c=a.array[u];s.push({seq:[{oid:c[0]},{oid:c[1]}]})}return this.asn1ExtnValue=i({seq:s}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.33",e!==void 0&&(this.params=e)};pe(E.asn1.x509.PolicyMappings,E.asn1.x509.Extension);E.asn1.x509.PolicyConstraints=function(e){E.asn1.x509.PolicyConstraints.superclass.constructor.call(this,e);var t=E,r=t.asn1,n=r.x509,i=r.ASN1Util.newObject;this.params=null,this.getExtnValueHex=function(){var a=this.params,s=[];return a.reqexp!=null&&s.push({tag:{tagi:"80",obj:{int:a.reqexp}}}),a.inhibit!=null&&s.push({tag:{tagi:"81",obj:{int:a.inhibit}}}),this.asn1ExtnValue=i({seq:s}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.36",e!==void 0&&(this.params=e)};pe(E.asn1.x509.PolicyConstraints,E.asn1.x509.Extension);E.asn1.x509.InhibitAnyPolicy=function(e){E.asn1.x509.InhibitAnyPolicy.superclass.constructor.call(this,e);var t=E,r=t.asn1,n=r.x509,i=r.ASN1Util.newObject;this.params=null,this.getExtnValueHex=function(){return this.asn1ExtnValue=i({int:this.params.skip}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.54",e!==void 0&&(this.params=e)};pe(E.asn1.x509.InhibitAnyPolicy,E.asn1.x509.Extension);E.asn1.x509.NameConstraints=function(e){E.asn1.x509.NameConstraints.superclass.constructor.call(this,e);var t=E,r=t.asn1,n=r.x509,i=r.ASN1Util.newObject,a=n.GeneralSubtree;this.params=null,this.getExtnValueHex=function(){var s=this.params,u=[];if(s.permit!=null&&s.permit.length!=null){for(var c=[],f=0;f<s.permit.length;f++)c.push(new a(s.permit[f]));u.push({tag:{tagi:"a0",obj:{seq:c}}})}if(s.exclude!=null&&s.exclude.length!=null){for(var h=[],f=0;f<s.exclude.length;f++)h.push(new a(s.exclude[f]));u.push({tag:{tagi:"a1",obj:{seq:h}}})}return this.asn1ExtnValue=i({seq:u}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.30",e!==void 0&&(this.params=e)};pe(E.asn1.x509.NameConstraints,E.asn1.x509.Extension);E.asn1.x509.GeneralSubtree=function(e){E.asn1.x509.GeneralSubtree.superclass.constructor.call(this);var t=E.asn1,r=t.x509,n=r.GeneralName,i=t.ASN1Util.newObject;this.params=null,this.setByParam=function(a){this.params=a},this.tohex=function(){var a=this.params,s=[new n(a)];a.min!=null&&s.push({tag:{tagi:"80",obj:{int:a.min}}}),a.max!=null&&s.push({tag:{tagi:"81",obj:{int:a.max}}});var u=i({seq:s});return u.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};pe(E.asn1.x509.GeneralSubtree,E.asn1.ASN1Object);E.asn1.x509.ExtKeyUsage=function(e){E.asn1.x509.ExtKeyUsage.superclass.constructor.call(this,e);var t=E,r=t.asn1;this.setPurposeArray=function(n){this.asn1ExtnValue=new r.DERSequence;for(var i=0;i<n.length;i++){var a=new r.DERObjectIdentifier(n[i]);this.asn1ExtnValue.appendASN1Object(a)}},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.37",e!==void 0&&e.array!==void 0&&this.setPurposeArray(e.array)};pe(E.asn1.x509.ExtKeyUsage,E.asn1.x509.Extension);E.asn1.x509.AuthorityKeyIdentifier=function(e){E.asn1.x509.AuthorityKeyIdentifier.superclass.constructor.call(this,e);var t=E,r=t.asn1,n=r.DERTaggedObject,i=r.x509.GeneralNames,a=t.crypto.Util.isKey;this.asn1KID=null,this.asn1CertIssuer=null,this.asn1CertSN=null,this.getExtnValueHex=function(){var s=new Array;this.asn1KID&&s.push(new n({explicit:!1,tag:"80",obj:this.asn1KID})),this.asn1CertIssuer&&s.push(new n({explicit:!1,tag:"a1",obj:new i([{dn:this.asn1CertIssuer}])})),this.asn1CertSN&&s.push(new n({explicit:!1,tag:"82",obj:this.asn1CertSN}));var u=new r.DERSequence({array:s});return this.asn1ExtnValue=u,this.asn1ExtnValue.tohex()},this.setKIDByParam=function(s){if(s.str!==void 0||s.hex!==void 0)this.asn1KID=new E.asn1.DEROctetString(s);else if(typeof s=="object"&&E.crypto.Util.isKey(s)||typeof s=="string"&&s.indexOf("BEGIN ")!=-1){var u=s;typeof s=="string"&&(u=Ct.getKey(s));var c=Ct.getKeyID(u);this.asn1KID=new E.asn1.DEROctetString({hex:c})}},this.setCertIssuerByParam=function(s){s.str!==void 0||s.ldapstr!==void 0||s.hex!==void 0||s.certsubject!==void 0||s.certissuer!==void 0?this.asn1CertIssuer=new E.asn1.x509.X500Name(s):typeof s=="string"&&s.indexOf("BEGIN ")!=-1&&s.indexOf("CERTIFICATE")!=-1&&(this.asn1CertIssuer=new E.asn1.x509.X500Name({certissuer:s}))},this.setCertSNByParam=function(s){if(s.str!==void 0||s.bigint!==void 0||s.hex!==void 0)this.asn1CertSN=new E.asn1.DERInteger(s);else if(typeof s=="string"&&s.indexOf("BEGIN ")!=-1&&s.indexOf("CERTIFICATE")){var u=new We;u.readCertPEM(s);var c=u.getSerialNumberHex();this.asn1CertSN=new E.asn1.DERInteger({hex:c})}},this.oid="2.5.29.35",e!==void 0&&(e.kid!==void 0&&this.setKIDByParam(e.kid),e.issuer!==void 0&&this.setCertIssuerByParam(e.issuer),e.sn!==void 0&&this.setCertSNByParam(e.sn),e.issuersn!==void 0&&typeof e.issuersn=="string"&&e.issuersn.indexOf("BEGIN ")!=-1&&e.issuersn.indexOf("CERTIFICATE")&&(this.setCertSNByParam(e.issuersn),this.setCertIssuerByParam(e.issuersn)))};pe(E.asn1.x509.AuthorityKeyIdentifier,E.asn1.x509.Extension);E.asn1.x509.SubjectKeyIdentifier=function(e){E.asn1.x509.SubjectKeyIdentifier.superclass.constructor.call(this,e);var t=E,r=t.asn1,n=r.DEROctetString;this.asn1KID=null,this.getExtnValueHex=function(){return this.asn1ExtnValue=this.asn1KID,this.asn1ExtnValue.tohex()},this.setKIDByParam=function(i){if(i.str!==void 0||i.hex!==void 0)this.asn1KID=new n(i);else if(typeof i=="object"&&E.crypto.Util.isKey(i)||typeof i=="string"&&i.indexOf("BEGIN")!=-1){var a=i;typeof i=="string"&&(a=Ct.getKey(i));var s=Ct.getKeyID(a);this.asn1KID=new E.asn1.DEROctetString({hex:s})}},this.oid="2.5.29.14",e!==void 0&&e.kid!==void 0&&this.setKIDByParam(e.kid)};pe(E.asn1.x509.SubjectKeyIdentifier,E.asn1.x509.Extension);E.asn1.x509.AuthorityInfoAccess=function(e){E.asn1.x509.AuthorityInfoAccess.superclass.constructor.call(this,e),this.setAccessDescriptionArray=function(t){for(var r=new Array,n=E,i=n.asn1,a=i.DERSequence,s=i.DERObjectIdentifier,u=i.x509.GeneralName,c=0;c<t.length;c++){var f,h=t[c];if(h.ocsp!==void 0)f=new a({array:[new s({oid:"1.3.6.1.5.5.7.48.1"}),new u({uri:h.ocsp})]});else if(h.caissuer!==void 0)f=new a({array:[new s({oid:"1.3.6.1.5.5.7.48.2"}),new u({uri:h.caissuer})]});else throw new Error("unknown AccessMethod parameter: "+JSON.stringify(h));r.push(f)}this.asn1ExtnValue=new a({array:r})},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.1.1",e!==void 0&&e.array!==void 0&&this.setAccessDescriptionArray(e.array)};pe(E.asn1.x509.AuthorityInfoAccess,E.asn1.x509.Extension);E.asn1.x509.SubjectAltName=function(e){E.asn1.x509.SubjectAltName.superclass.constructor.call(this,e),this.setNameArray=function(t){this.asn1ExtnValue=new E.asn1.x509.GeneralNames(t)},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.17",e!==void 0&&e.array!==void 0&&this.setNameArray(e.array)};pe(E.asn1.x509.SubjectAltName,E.asn1.x509.Extension);E.asn1.x509.IssuerAltName=function(e){E.asn1.x509.IssuerAltName.superclass.constructor.call(this,e),this.setNameArray=function(t){this.asn1ExtnValue=new E.asn1.x509.GeneralNames(t)},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.18",e!==void 0&&e.array!==void 0&&this.setNameArray(e.array)};pe(E.asn1.x509.IssuerAltName,E.asn1.x509.Extension);E.asn1.x509.SubjectDirectoryAttributes=function(e){E.asn1.x509.SubjectDirectoryAttributes.superclass.constructor.call(this,e);var t=E.asn1,r=t.DERSequence,n=t.ASN1Util.newObject,i=t.x509.OID.name2oid;this.params=null,this.getExtnValueHex=function(){for(var a=[],s=0;s<this.params.array.length;s++){var u=this.params.array[s];if(u.attr!=null&&u.array!=null){var c={seq:[{oid:u.attr},{set:u.array}]};a.push(n(c));continue}var f={seq:[{oid:"1.2.3.4"},{set:[{utf8str:"DE"}]}]};if(u.attr=="dateOfBirth")f.seq[0].oid=i(u.attr),f.seq[1].set[0]={gentime:u.str};else if(u.attr=="placeOfBirth")f.seq[0].oid=i(u.attr),f.seq[1].set[0]={utf8str:u.str};else if(u.attr=="gender")f.seq[0].oid=i(u.attr),f.seq[1].set[0]={prnstr:u.str};else if(u.attr=="countryOfCitizenship")f.seq[0].oid=i(u.attr),f.seq[1].set[0]={prnstr:u.str};else if(u.attr=="countryOfResidence")f.seq[0].oid=i(u.attr),f.seq[1].set[0]={prnstr:u.str};else throw new Error("unsupported attribute: "+u.attr);a.push(new n(f))}var h=new r({array:a});return this.asn1ExtnValue=h,this.asn1ExtnValue.tohex()},this.oid="2.5.29.9",e!==void 0&&(this.params=e)};pe(E.asn1.x509.SubjectDirectoryAttributes,E.asn1.x509.Extension);E.asn1.x509.PrivateExtension=function(e){E.asn1.x509.PrivateExtension.superclass.constructor.call(this,e);var t=E,r=t.lang.String.isHex,n=t.asn1,i=n.x509.OID.name2oid,a=n.ASN1Util.newObject;this.params=null,this.setByParam=function(s){this.oid=i(s.extname),this.params=s},this.getExtnValueHex=function(){if(this.params.extname==null||this.params.extn==null)throw new Error("extname or extnhex not specified");var s=this.params.extn;if(typeof s=="string"&&r(s))return s;if(typeof s=="object")try{return a(s).tohex()}catch{}throw new Error("unsupported extn value")},e!=null&&this.setByParam(e)};pe(E.asn1.x509.PrivateExtension,E.asn1.x509.Extension);E.asn1.x509.CRL=function(e){E.asn1.x509.CRL.superclass.constructor.call(this);var t=E,r=t.asn1,n=r.DERSequence,i=r.DERBitString,a=r.x509,s=a.AlgorithmIdentifier,u=a.TBSCertList;this.params=void 0,this.setByParam=function(c){this.params=c},this.sign=function(){var c=new u(this.params).tohex(),f=new E.crypto.Signature({alg:this.params.sigalg});f.init(this.params.cakey),f.updateHex(c);var h=f.sign();this.params.sighex=h},this.getPEM=function(){return Gn(this.tohex(),"X509 CRL")},this.tohex=function(){var c=this.params;if(c.tbsobj==null&&(c.tbsobj=new u(c)),c.sighex==null&&c.cakey!=null&&this.sign(),c.sighex==null)throw new Error("sighex or cakey parameter not defined");var f=[];f.push(c.tbsobj),f.push(new s({name:c.sigalg})),f.push(new i({hex:"00"+c.sighex}));var h=new n({array:f});return h.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&(this.params=e)};pe(E.asn1.x509.CRL,E.asn1.ASN1Object);E.asn1.x509.TBSCertList=function(e){E.asn1.x509.TBSCertList.superclass.constructor.call(this);var t=E,r=t.asn1,n=r.DERInteger,i=r.DERSequence,a=r.DERTaggedObject,s=r.DERObjectIdentifier,u=r.x509,c=u.AlgorithmIdentifier,f=u.Time,h=u.Extensions,g=u.X500Name;this.params=null,this.setByParam=function(p){this.params=p},this.getRevCertSequence=function(){for(var p=[],d=this.params.revcert,w=0;w<d.length;w++){var v=[new n(d[w].sn),new f(d[w].date)];d[w].ext!=null&&v.push(new h(d[w].ext)),p.push(new i({array:v}))}return new i({array:p})},this.tohex=function(){var p=[],d=this.params;if(d.version!=null){var w=d.version-1,v=new n({int:w});p.push(v)}if(p.push(new c({name:d.sigalg})),p.push(new g(d.issuer)),p.push(new f(d.thisupdate)),d.nextupdate!=null&&p.push(new f(d.nextupdate)),d.revcert!=null&&p.push(this.getRevCertSequence()),d.ext!=null){var b=new h(d.ext);p.push(new a({tag:"a0",explicit:!0,obj:b}))}var m=new i({array:p});return m.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};pe(E.asn1.x509.TBSCertList,E.asn1.ASN1Object);E.asn1.x509.CRLEntry=function(e){E.asn1.x509.CRLEntry.superclass.constructor.call(this);var t=null,r=null,n=E,i=n.asn1;this.setCertSerial=function(a){this.sn=new i.DERInteger(a)},this.setRevocationDate=function(a){this.time=new i.x509.Time(a)},this.tohex=function(){var a=new i.DERSequence({array:[this.sn,this.time]});return this.TLV=a.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&(e.time!==void 0&&this.setRevocationDate(e.time),e.sn!==void 0&&this.setCertSerial(e.sn))};pe(E.asn1.x509.CRLEntry,E.asn1.ASN1Object);E.asn1.x509.CRLNumber=function(e){E.asn1.x509.CRLNumber.superclass.constructor.call(this,e),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new E.asn1.DERInteger(this.params.num),this.asn1ExtnValue.tohex()},this.oid="2.5.29.20",e!=null&&(this.params=e)};pe(E.asn1.x509.CRLNumber,E.asn1.x509.Extension);E.asn1.x509.CRLReason=function(e){E.asn1.x509.CRLReason.superclass.constructor.call(this,e),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new E.asn1.DEREnumerated(this.params.code),this.asn1ExtnValue.tohex()},this.oid="2.5.29.21",e!=null&&(this.params=e)};pe(E.asn1.x509.CRLReason,E.asn1.x509.Extension);E.asn1.x509.OCSPNonce=function(e){E.asn1.x509.OCSPNonce.superclass.constructor.call(this,e),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new E.asn1.DEROctetString(this.params),this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.48.1.2",e!=null&&(this.params=e)};pe(E.asn1.x509.OCSPNonce,E.asn1.x509.Extension);E.asn1.x509.OCSPNoCheck=function(e){E.asn1.x509.OCSPNoCheck.superclass.constructor.call(this,e),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new E.asn1.DERNull,this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.48.1.5",e!=null&&(this.params=e)};pe(E.asn1.x509.OCSPNoCheck,E.asn1.x509.Extension);E.asn1.x509.AdobeTimeStamp=function(e){E.asn1.x509.AdobeTimeStamp.superclass.constructor.call(this,e);var t=E,r=t.asn1,n=r.DERInteger,i=r.DERBoolean,a=r.DERSequence,s=r.x509.GeneralName;this.params=null,this.getExtnValueHex=function(){var u=this.params,c=[new n(1)];return c.push(new s({uri:u.uri})),u.reqauth!=null&&c.push(new i(u.reqauth)),this.asn1ExtnValue=new a({array:c}),this.asn1ExtnValue.tohex()},this.oid="1.2.840.113583.1.1.9.1",e!==void 0&&this.setByParam(e)};pe(E.asn1.x509.AdobeTimeStamp,E.asn1.x509.Extension);E.asn1.x509.X500Name=function(e){E.asn1.x509.X500Name.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var t=E,r=t.asn1,n=r.x509,i=n.RDN,a=Sr;this.setByString=function(s,u){u!==void 0&&(this.sRule=u);var c=s.split("/");c.shift();for(var f=[],h=0;h<c.length;h++)if(c[h].match(/^[^=]+=.+$/))f.push(c[h]);else{var g=f.length-1;f[g]=f[g]+"/"+c[h]}for(var h=0;h<f.length;h++)this.asn1Array.push(new i({str:f[h],rule:this.sRule}))},this.setByLdapString=function(s,u){u!==void 0&&(this.sRule=u);var c=n.X500Name.ldapToCompat(s);this.setByString(c,u)},this.setByObject=function(s,u){u!==void 0&&(this.sRule=u);for(var c in s)if(s.hasOwnProperty(c)){var f=new i({str:c+"="+s[c],rule:this.sRule});this.asn1Array?this.asn1Array.push(f):this.asn1Array=[f]}},this.setByParam=function(s){if(s.rule!==void 0&&(this.sRule=s.rule),s.array!==void 0)this.paramArray=s.array;else if(s.str!==void 0)this.setByString(s.str);else if(s.ldapstr!==void 0)this.setByLdapString(s.ldapstr);else if(s.hex!==void 0)this.hTLV=s.hex;else if(s.certissuer!==void 0){var u=new We;u.readCertPEM(s.certissuer),this.hTLV=u.getIssuerHex()}else if(s.certsubject!==void 0){var u=new We;u.readCertPEM(s.certsubject),this.hTLV=u.getSubjectHex()}else typeof s=="object"&&s.certsubject===void 0&&s.certissuer===void 0&&this.setByObject(s)},this.tohex=function(){if(typeof this.hTLV=="string")return this.hTLV;if(this.asn1Array.length==0&&this.paramArray.length>0)for(var s=0;s<this.paramArray.length;s++){var u={array:this.paramArray[s]};this.sRule!="utf8"&&(u.rule=this.sRule);var c=new i(u);this.asn1Array.push(c)}var f=new r.DERSequence({array:this.asn1Array});return this.hTLV=f.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};pe(E.asn1.x509.X500Name,E.asn1.ASN1Object);E.asn1.x509.X500Name.compatToLDAP=function(e){if(e.substr(0,1)!=="/")throw"malformed input";var t="";e=e.substr(1);var r=e.split("/");return r.reverse(),r=r.map(function(n){return n.replace(/,/,"\\,")}),r.join(",")};E.asn1.x509.X500Name.onelineToLDAP=function(e){return E.asn1.x509.X500Name.compatToLDAP(e)};E.asn1.x509.X500Name.ldapToCompat=function(e){for(var t=e.split(","),r=!1,n=[],i=0;t.length>0;i++){var a=t.shift();if(r===!0){var s=n.pop(),u=(s+","+a).replace(/\\,/g,",");n.push(u),r=!1}else n.push(a);a.substr(-1,1)==="\\"&&(r=!0)}return n=n.map(function(c){return c.replace("/","\\/")}),n.reverse(),"/"+n.join("/")};E.asn1.x509.X500Name.ldapToOneline=function(e){return E.asn1.x509.X500Name.ldapToCompat(e)};E.asn1.x509.RDN=function(e){E.asn1.x509.RDN.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var t=E.asn1.x509.AttributeTypeAndValue;this.setByParam=function(r){r.rule!==void 0&&(this.sRule=r.rule),r.str!==void 0&&this.addByMultiValuedString(r.str),r.array!==void 0&&(this.paramArray=r.array)},this.addByString=function(r){this.asn1Array.push(new E.asn1.x509.AttributeTypeAndValue({str:r,rule:this.sRule}))},this.addByMultiValuedString=function(r){for(var n=E.asn1.x509.RDN.parseString(r),i=0;i<n.length;i++)this.addByString(n[i])},this.tohex=function(){if(this.asn1Array.length==0&&this.paramArray.length>0)for(var r=0;r<this.paramArray.length;r++){var n=this.paramArray[r];n.rule!==void 0&&this.sRule!="utf8"&&(n.rule=this.sRule);var i=new t(n);this.asn1Array.push(i)}var a=new E.asn1.DERSet({array:this.asn1Array});return this.TLV=a.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};pe(E.asn1.x509.RDN,E.asn1.ASN1Object);E.asn1.x509.RDN.parseString=function(e){for(var t=e.split(/\+/),r=!1,n=[],i=0;t.length>0;i++){var a=t.shift();if(r===!0){var s=n.pop(),u=(s+"+"+a).replace(/\\\+/g,"+");n.push(u),r=!1}else n.push(a);a.substr(-1,1)==="\\"&&(r=!0)}for(var c=!1,f=[],i=0;n.length>0;i++){var a=n.shift();if(c===!0){var h=f.pop();if(a.match(/"$/)){var u=(h+"+"+a).replace(/^([^=]+)="(.*)"$/,"$1=$2");f.push(u),c=!1}else f.push(h+"+"+a)}else f.push(a);a.match(/^[^=]+="/)&&(c=!0)}return f};E.asn1.x509.AttributeTypeAndValue=function(e){E.asn1.x509.AttributeTypeAndValue.superclass.constructor.call(this),this.sRule="utf8",this.sType=null,this.sValue=null,this.dsType=null;var t=E,r=t.asn1,n=r.DERSequence,i=r.DERUTF8String,a=r.DERPrintableString,s=r.DERTeletexString,u=r.DERIA5String,c=r.DERVisibleString,f=r.DERBMPString,h=t.lang.String.isMail,g=t.lang.String.isPrintable;this.setByParam=function(p){if(p.rule!==void 0&&(this.sRule=p.rule),p.ds!==void 0&&(this.dsType=p.ds),p.value===void 0&&p.str!==void 0){var d=p.str,w=d.match(/^([^=]+)=(.+)$/);if(w)this.sType=w[1],this.sValue=w[2];else throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr)}else this.sType=p.type,this.sValue=p.value},this.setByString=function(p,d){d!==void 0&&(this.sRule=d);var w=p.match(/^([^=]+)=(.+)$/);if(w)this.setByAttrTypeAndValueStr(w[1],w[2]);else throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr)},this._getDsType=function(){var p=this.sType,d=this.sValue,w=this.sRule;return w==="prn"?p=="CN"&&h(d)?"ia5":g(d)?"prn":"utf8":w==="utf8"?p=="CN"&&h(d)?"ia5":p=="C"?"prn":"utf8":"utf8"},this.setByAttrTypeAndValueStr=function(p,d,w){w!==void 0&&(this.sRule=w),this.sType=p,this.sValue=d},this.getValueObj=function(p,d){if(p=="utf8")return new i({str:d});if(p=="prn")return new a({str:d});if(p=="tel")return new s({str:d});if(p=="ia5")return new u({str:d});if(p=="vis")return new c({str:d});if(p=="bmp")return new f({str:d});throw new Error("unsupported directory string type: type="+p+" value="+d)},this.tohex=function(){this.dsType==null&&(this.dsType=this._getDsType());var p=E.asn1.x509.OID.atype2obj(this.sType),d=this.getValueObj(this.dsType,this.sValue),w=new n({array:[p,d]});return this.TLV=w.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};pe(E.asn1.x509.AttributeTypeAndValue,E.asn1.ASN1Object);E.asn1.x509.SubjectPublicKeyInfo=function(e){E.asn1.x509.SubjectPublicKeyInfo.superclass.constructor.call(this);var t=null,r=null,n=E,i=n.asn1,a=i.DERInteger,s=i.DERBitString,u=i.DERObjectIdentifier,c=i.DERSequence,f=i.ASN1Util.newObject,h=i.x509,g=h.AlgorithmIdentifier,p=n.crypto,d=p.ECDSA,w=p.DSA;this.getASN1Object=function(){if(this.asn1AlgId==null||this.asn1SubjPKey==null)throw"algId and/or subjPubKey not set";var v=new c({array:[this.asn1AlgId,this.asn1SubjPKey]});return v},this.tohex=function(){var v=this.getASN1Object();return this.hTLV=v.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},this.setPubKey=function(v){try{if(v instanceof rt){var b=f({seq:[{int:{bigint:v.n}},{int:{int:v.e}}]}),m=b.tohex();this.asn1AlgId=new g({name:"rsaEncryption"}),this.asn1SubjPKey=new s({hex:"00"+m})}}catch{}try{if(v instanceof E.crypto.ECDSA){var y=new u({name:v.curveName});this.asn1AlgId=new g({name:"ecPublicKey",asn1params:y}),this.asn1SubjPKey=new s({hex:"00"+v.pubKeyHex})}}catch{}try{if(v instanceof E.crypto.DSA){var y=new f({seq:[{int:{bigint:v.p}},{int:{bigint:v.q}},{int:{bigint:v.g}}]});this.asn1AlgId=new g({name:"dsa",asn1params:y});var D=new a({bigint:v.y});this.asn1SubjPKey=new s({hex:"00"+D.tohex()})}}catch{}},e!==void 0&&this.setPubKey(e)};pe(E.asn1.x509.SubjectPublicKeyInfo,E.asn1.ASN1Object);E.asn1.x509.Time=function(e){E.asn1.x509.Time.superclass.constructor.call(this);var t=null,r=null,n=E,i=n.asn1,a=i.DERUTCTime,s=i.DERGeneralizedTime;this.params=null,this.type=null,this.setTimeParams=function(u){this.timeParams=u},this.setByParam=function(u){this.params=u},this.getType=function(u){return u.match(/^[0-9]{12}Z$/)?"utc":u.match(/^[0-9]{14}Z$/)?"gen":u.match(/^[0-9]{12}\.[0-9]+Z$/)?"utc":u.match(/^[0-9]{14}\.[0-9]+Z$/)?"gen":null},this.tohex=function(){var u=this.params,c=null;if(typeof u=="string"&&(u={str:u}),u!=null&&u.str&&(u.type==null||u.type==null)&&(u.type=this.getType(u.str)),u!=null&&u.str?(u.type=="utc"&&(c=new a(u.str)),u.type=="gen"&&(c=new s(u.str))):this.type=="gen"?c=new s:c=new a,c==null)throw new Error("wrong setting for Time");return this.TLV=c.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};E.asn1.x509.Time_bak=function(e){E.asn1.x509.Time_bak.superclass.constructor.call(this);var t=null,r=null,n=E,i=n.asn1,a=i.DERUTCTime,s=i.DERGeneralizedTime;this.setTimeParams=function(u){this.timeParams=u},this.tohex=function(){var u=null;return this.timeParams!=null?this.type=="utc"?u=new a(this.timeParams):u=new s(this.timeParams):this.type=="utc"?u=new a:u=new s,this.TLV=u.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},this.type="utc",e!==void 0&&(e.type!==void 0?this.type=e.type:e.str!==void 0&&(e.str.match(/^[0-9]{12}Z$/)&&(this.type="utc"),e.str.match(/^[0-9]{14}Z$/)&&(this.type="gen")),this.timeParams=e)};pe(E.asn1.x509.Time,E.asn1.ASN1Object);E.asn1.x509.AlgorithmIdentifier=function(e){E.asn1.x509.AlgorithmIdentifier.superclass.constructor.call(this),this.nameAlg=null,this.asn1Alg=null,this.asn1Params=null,this.paramEmpty=!1;var t=E,r=t.asn1,n=r.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV;if(this.tohex=function(){if(this.nameAlg===null&&this.asn1Alg===null)throw new Error("algorithm not specified");if(this.nameAlg!==null){var a=null;for(var s in n)s===this.nameAlg&&(a=n[s]);if(a!==null)return this.hTLV=a,this.hTLV}this.nameAlg!==null&&this.asn1Alg===null&&(this.asn1Alg=r.x509.OID.name2obj(this.nameAlg));var u=[this.asn1Alg];this.asn1Params!==null&&u.push(this.asn1Params);var c=new r.DERSequence({array:u});return this.hTLV=c.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&(e.name!==void 0&&(this.nameAlg=e.name),e.asn1params!==void 0&&(this.asn1Params=e.asn1params),e.paramempty!==void 0&&(this.paramEmpty=e.paramempty)),this.asn1Params===null&&this.paramEmpty===!1&&this.nameAlg!==null){this.nameAlg.name!==void 0&&(this.nameAlg=this.nameAlg.name);var i=this.nameAlg.toLowerCase();i.substr(-7,7)!=="withdsa"&&i.substr(-9,9)!=="withecdsa"&&(this.asn1Params=new r.DERNull)}};pe(E.asn1.x509.AlgorithmIdentifier,E.asn1.ASN1Object);E.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV={SHAwithRSAandMGF1:"300d06092a864886f70d01010a3000",SHA256withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040201a11a301806092a864886f70d010108300b0609608648016503040201a203020120",SHA384withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040202a11a301806092a864886f70d010108300b0609608648016503040202a203020130",SHA512withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040203a11a301806092a864886f70d010108300b0609608648016503040203a203020140"};E.asn1.x509.GeneralName=function(e){E.asn1.x509.GeneralName.superclass.constructor.call(this);var t={rfc822:"81",dns:"82",dn:"a4",uri:"86",ip:"87",otherName:"a0"},r=E,n=r.asn1,i=n.x509,a=i.X500Name,s=i.OtherName,u=n.DERIA5String,c=n.DERPrintableString,f=n.DEROctetString,h=n.DERTaggedObject,g=n.ASN1Object,p=Error;this.params=null,this.setByParam=function(d){this.params=d},this.tohex=function(){var d=this.params,w,b,v,b=!1;if(d.other!==void 0)w="a0",v=new s(d.other);else if(d.rfc822!==void 0)w="81",v=new u({str:d.rfc822});else if(d.dns!==void 0)w="82",v=new u({str:d.dns});else if(d.dn!==void 0)w="a4",b=!0,typeof d.dn=="string"?v=new a({str:d.dn}):d.dn instanceof E.asn1.x509.X500Name?v=d.dn:v=new a(d.dn);else if(d.ldapdn!==void 0)w="a4",b=!0,v=new a({ldapstr:d.ldapdn});else if(d.certissuer!==void 0||d.certsubj!==void 0){w="a4",b=!0;var m,y,D=null;if(d.certsubj!==void 0?(m=!1,y=d.certsubj):(m=!0,y=d.certissuer),y.match(/^[0-9A-Fa-f]+$/)&&D==y,y.indexOf("-----BEGIN ")!=-1&&(D=Sr(y)),D==null)throw new Error("certsubj/certissuer not cert");var C=new We;C.hex=D;var F;m?F=C.getIssuerHex():F=C.getSubjectHex(),v=new g,v.hTLV=F}else if(d.uri!==void 0)w="86",v=new u({str:d.uri});else if(d.ip!==void 0){w="87";var U,k=d.ip;try{if(k.match(/^[0-9a-f]+$/)){var S=k.length;if(S==8||S==16||S==32||S==64)U=k;else throw"err"}else U=sm(k)}catch(T){throw new p("malformed IP address: "+d.ip+":"+T.message)}v=new f({hex:U})}else throw new p("improper params");var B=new h({tag:w,explicit:b,obj:v});return B.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};pe(E.asn1.x509.GeneralName,E.asn1.ASN1Object);E.asn1.x509.GeneralNames=function(e){E.asn1.x509.GeneralNames.superclass.constructor.call(this);var t=null,r=E,n=r.asn1;this.setByParamArray=function(i){for(var a=0;a<i.length;a++){var s=new n.x509.GeneralName(i[a]);this.asn1Array.push(s)}},this.tohex=function(){var i=new n.DERSequence({array:this.asn1Array});return i.tohex()},this.getEncodedHex=function(){return this.tohex()},this.asn1Array=new Array,typeof e<"u"&&this.setByParamArray(e)};pe(E.asn1.x509.GeneralNames,E.asn1.ASN1Object);E.asn1.x509.OtherName=function(e){E.asn1.x509.OtherName.superclass.constructor.call(this);var t=null,r=null,n=E,i=n.asn1,a=i.DERObjectIdentifier,s=i.DERSequence,u=i.ASN1Util.newObject;this.params=null,this.setByParam=function(c){this.params=c},this.tohex=function(){var c=this.params;if(c.oid==null||c.value==null)throw new Error("oid or value not specified");var f=new a({oid:c.oid}),h=u({tag:{tag:"a0",explicit:!0,obj:c.value}}),g=new s({array:[f,h]});return g.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};pe(E.asn1.x509.OtherName,E.asn1.ASN1Object);E.asn1.x509.OID=new function(){var e=E.asn1.DERObjectIdentifier;this.name2oidList={"aes128-CBC":"2.16.840.1.101.3.4.1.2","aes256-CBC":"2.16.840.1.101.3.4.1.42",sha1:"1.3.14.3.2.26",sha256:"2.16.840.1.101.3.4.2.1",sha384:"2.16.840.1.101.3.4.2.2",sha512:"2.16.840.1.101.3.4.2.3",sha224:"2.16.840.1.101.3.4.2.4",md5:"1.2.840.113549.2.5",md2:"1.3.14.7.2.2.1",ripemd160:"1.3.36.3.2.1",hmacWithSHA1:"1.2.840.113549.2.7",hmacWithSHA224:"1.2.840.113549.2.8",hmacWithSHA256:"1.2.840.113549.2.9",hmacWithSHA384:"1.2.840.113549.2.10",hmacWithSHA512:"1.2.840.113549.2.11",MD2withRSA:"1.2.840.113549.1.1.2",MD4withRSA:"1.2.840.113549.1.1.3",MD5withRSA:"1.2.840.113549.1.1.4",SHA1withRSA:"1.2.840.113549.1.1.5","pkcs1-MGF":"1.2.840.113549.1.1.8",rsaPSS:"1.2.840.113549.1.1.10",SHA224withRSA:"1.2.840.113549.1.1.14",SHA256withRSA:"1.2.840.113549.1.1.11",SHA384withRSA:"1.2.840.113549.1.1.12",SHA512withRSA:"1.2.840.113549.1.1.13",SHA1withECDSA:"1.2.840.10045.4.1",SHA224withECDSA:"1.2.840.10045.4.3.1",SHA256withECDSA:"1.2.840.10045.4.3.2",SHA384withECDSA:"1.2.840.10045.4.3.3",SHA512withECDSA:"1.2.840.10045.4.3.4",dsa:"1.2.840.10040.4.1",SHA1withDSA:"1.2.840.10040.4.3",SHA224withDSA:"2.16.840.1.101.3.4.3.1",SHA256withDSA:"2.16.840.1.101.3.4.3.2",rsaEncryption:"1.2.840.113549.1.1.1",commonName:"2.5.4.3",countryName:"2.5.4.6",localityName:"2.5.4.7",stateOrProvinceName:"2.5.4.8",streetAddress:"2.5.4.9",organizationName:"2.5.4.10",organizationalUnitName:"2.5.4.11",domainComponent:"0.9.2342.19200300.100.1.25",userId:"0.9.2342.19200300.100.1.1",surname:"2.5.4.4",givenName:"2.5.4.42",title:"2.5.4.12",distinguishedName:"2.5.4.49",emailAddress:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3",subjectDirectoryAttributes:"2.5.29.9",subjectKeyIdentifier:"2.5.29.14",keyUsage:"2.5.29.15",subjectAltName:"2.5.29.17",issuerAltName:"2.5.29.18",basicConstraints:"2.5.29.19",cRLNumber:"2.5.29.20",cRLReason:"2.5.29.21",nameConstraints:"2.5.29.30",cRLDistributionPoints:"2.5.29.31",certificatePolicies:"2.5.29.32",anyPolicy:"2.5.29.32.0",policyMappings:"2.5.29.33",authorityKeyIdentifier:"2.5.29.35",policyConstraints:"2.5.29.36",extKeyUsage:"2.5.29.37",inhibitAnyPolicy:"2.5.29.54",authorityInfoAccess:"1.3.6.1.5.5.7.1.1",ocsp:"1.3.6.1.5.5.7.48.1",ocspBasic:"1.3.6.1.5.5.7.48.1.1",ocspNonce:"1.3.6.1.5.5.7.48.1.2",ocspNoCheck:"1.3.6.1.5.5.7.48.1.5",caIssuers:"1.3.6.1.5.5.7.48.2",anyExtendedKeyUsage:"2.5.29.37.0",serverAuth:"1.3.6.1.5.5.7.3.1",clientAuth:"1.3.6.1.5.5.7.3.2",codeSigning:"1.3.6.1.5.5.7.3.3",emailProtection:"1.3.6.1.5.5.7.3.4",timeStamping:"1.3.6.1.5.5.7.3.8",ocspSigning:"1.3.6.1.5.5.7.3.9",smtpUTF8Mailbox:"1.3.6.1.5.5.7.8.9",dateOfBirth:"1.3.6.1.5.5.7.9.1",placeOfBirth:"1.3.6.1.5.5.7.9.2",gender:"1.3.6.1.5.5.7.9.3",countryOfCitizenship:"1.3.6.1.5.5.7.9.4",countryOfResidence:"1.3.6.1.5.5.7.9.5",ecPublicKey:"1.2.840.10045.2.1","P-256":"1.2.840.10045.3.1.7",secp256r1:"1.2.840.10045.3.1.7",secp256k1:"1.3.132.0.10",secp384r1:"1.3.132.0.34",secp521r1:"1.3.132.0.35",pkcs5PBES2:"1.2.840.113549.1.5.13",pkcs5PBKDF2:"1.2.840.113549.1.5.12","des-EDE3-CBC":"1.2.840.113549.3.7",data:"1.2.840.113549.1.7.1","signed-data":"1.2.840.113549.1.7.2","enveloped-data":"1.2.840.113549.1.7.3","digested-data":"1.2.840.113549.1.7.5","encrypted-data":"1.2.840.113549.1.7.6","authenticated-data":"1.2.840.113549.1.9.16.1.2",tstinfo:"1.2.840.113549.1.9.16.1.4",signingCertificate:"1.2.840.113549.1.9.16.2.12",timeStampToken:"1.2.840.113549.1.9.16.2.14",signaturePolicyIdentifier:"1.2.840.113549.1.9.16.2.15",etsArchiveTimeStamp:"1.2.840.113549.1.9.16.2.27",signingCertificateV2:"1.2.840.113549.1.9.16.2.47",etsArchiveTimeStampV2:"1.2.840.113549.1.9.16.2.48",extensionRequest:"1.2.840.113549.1.9.14",contentType:"1.2.840.113549.1.9.3",messageDigest:"1.2.840.113549.1.9.4",signingTime:"1.2.840.113549.1.9.5",counterSignature:"1.2.840.113549.1.9.6",archiveTimeStampV3:"0.4.0.1733.2.4",pdfRevocationInfoArchival:"1.2.840.113583.1.1.8",adobeTimeStamp:"1.2.840.113583.1.1.9.1",smimeMailboxLegacy:"2.23.140.1.5.1.1",smimeMailboxMulti:"2.23.140.1.5.1.2",smimeMailboxStrict:"2.23.140.1.5.1.3",smimeOrganizationLegacy:"2.23.140.1.5.2.1",smimeOrganizationMulti:"2.23.140.1.5.2.2",smimeOrganizationStrict:"2.23.140.1.5.2.3",smimeSponsorLegacy:"2.23.140.1.5.3.1",smimeSponsorMulti:"2.23.140.1.5.3.2",smimeSponsorStrict:"2.23.140.1.5.3.3",smimeIndividualLegacy:"2.23.140.1.5.4.1",smimeIndividualMulti:"2.23.140.1.5.4.2",smimeIndividualStrict:"2.23.140.1.5.4.3"},this.atype2oidList={CN:"2.5.4.3",L:"2.5.4.7",ST:"2.5.4.8",O:"2.5.4.10",OU:"2.5.4.11",C:"2.5.4.6",STREET:"2.5.4.9",DC:"0.9.2342.19200300.100.1.25",UID:"0.9.2342.19200300.100.1.1",SN:"2.5.4.4",T:"2.5.4.12",GN:"2.5.4.42",DN:"2.5.4.49",E:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",serialNumber:"2.5.4.5",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3"},this.objCache={},this.name2obj=function(t){if(typeof this.objCache[t]<"u")return this.objCache[t];if(typeof this.name2oidList[t]>"u")throw"Name of ObjectIdentifier not defined: "+t;var r=this.name2oidList[t],n=new e({oid:r});return this.objCache[t]=n,n},this.atype2obj=function(t){if(this.objCache[t]!==void 0)return this.objCache[t];var r;if(t.match(/^\d+\.\d+\.[0-9.]+$/))r=t;else if(this.atype2oidList[t]!==void 0)r=this.atype2oidList[t];else if(this.name2oidList[t]!==void 0)r=this.name2oidList[t];else throw new Error("AttributeType name undefined: "+t);var n=new e({oid:r});return this.objCache[t]=n,n},this.registerOIDs=function(t){if(this.checkOIDs(t))for(var r in t)this.name2oidList[r]=t[r]},this.checkOIDs=function(t){try{var r=Object.keys(t);return r.length==0?!1:(r.map(function(n,i,a){var s=this[n];if(!s.match(/^[0-2]\.[0-9.]+$/))throw new Error("value is not OID")},t),!0)}catch{return!1}}};E.asn1.x509.OID.oid2name=function(e){var t=E.asn1.x509.OID.name2oidList;for(var r in t)if(t[r]==e)return r;return""};E.asn1.x509.OID.oid2atype=function(e){var t=E.asn1.x509.OID.atype2oidList;for(var r in t)if(t[r]==e)return r;return e};E.asn1.x509.OID.name2oid=function(e){if(e.match(/^[0-9.]+$/))return e;var t=E.asn1.x509.OID.name2oidList;return t[e]===void 0?"":t[e]};E.asn1.x509.X509Util={};E.asn1.x509.X509Util.newCertPEM=function(e){var t=E.asn1.x509,r=t.TBSCertificate,n=t.Certificate,i=new n(e);return i.getPEM()};(typeof E>"u"||!E)&&(E={});(typeof E.asn1>"u"||!E.asn1)&&(E.asn1={});(typeof E.asn1.cms>"u"||!E.asn1.cms)&&(E.asn1.cms={});E.asn1.cms.Attribute=function(e){var t=Error,r=E,n=r.asn1,i=n.DERSequence,a=n.DERSet,s=n.DERObjectIdentifier;this.params=null,this.typeOid=null,this.setByParam=function(u){this.params=u},this.getValueArray=function(){throw new t("not yet implemented abstract")},this.tohex=function(){var u=new s({oid:this.typeOid}),c=new a({array:this.getValueArray()}),f=new i({array:[u,c]});return f.tohex()},this.getEncodedHex=function(){return this.tohex()}};pe(E.asn1.cms.Attribute,E.asn1.ASN1Object);E.asn1.cms.ContentType=function(e){var t=E,r=t.asn1;r.cms.ContentType.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.3",this.getValueArray=function(){var n=new r.DERObjectIdentifier(this.params.type);return[n]},e!=null&&this.setByParam(e)};pe(E.asn1.cms.ContentType,E.asn1.cms.Attribute);E.asn1.cms.MessageDigest=function(e){var t=E,r=t.asn1,n=r.DEROctetString,i=r.cms;i.MessageDigest.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.4",this.getValueArray=function(){var a=new n(this.params);return[a]},e!=null&&this.setByParam(e)};pe(E.asn1.cms.MessageDigest,E.asn1.cms.Attribute);E.asn1.cms.SigningTime=function(e){var t=E,r=t.asn1;r.cms.SigningTime.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.5",this.getValueArray=function(){var n=new r.x509.Time(this.params);return[n]},e!=null&&this.setByParam(e)};pe(E.asn1.cms.SigningTime,E.asn1.cms.Attribute);E.asn1.cms.SigningCertificate=function(e){var t=Error,r=E,n=r.asn1,i=n.DERSequence,a=n.cms,s=a.ESSCertID,u=r.crypto;a.SigningCertificate.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.12",this.getValueArray=function(){if(this.params==null||this.params==null||this.params.array==null)throw new t("parameter 'array' not specified");for(var c=this.params.array,f=[],h=0;h<c.length;h++){var g=c[h];e.hasis==!1&&typeof g=="string"&&(g.indexOf("-----BEGIN")!=-1||be.isASN1HEX(g))&&(g={cert:g}),g.hasis!=!1&&e.hasis==!1&&(g.hasis=!1),f.push(new s(g))}var p=new i({array:f}),d=new i({array:[p]});return[d]},e!=null&&this.setByParam(e)};pe(E.asn1.cms.SigningCertificate,E.asn1.cms.Attribute);E.asn1.cms.ESSCertID=function(e){E.asn1.cms.ESSCertID.superclass.constructor.call(this);var t=Error,r=E,n=r.asn1,i=n.DEROctetString,a=n.DERSequence,s=n.cms.IssuerSerial;this.params=null,this.getCertHash=function(u,c){if(u.hash!=null)return u.hash;if(typeof u=="string"&&u.indexOf("-----BEGIN")==-1&&!be.isASN1HEX(u))return u;var f;if(typeof u=="string")f=u;else if(u.cert!=null)f=u.cert;else throw new t("hash nor cert unspecified");var h;f.indexOf("-----BEGIN")!=-1?h=Sr(f):h=f,typeof u=="string"&&(u.indexOf("-----BEGIN")!=-1?h=Sr(u):be.isASN1HEX(u)&&(h=u));var g;if(u.alg!=null)g=u.alg;else if(c!=null)g=c;else throw new t("hash alg unspecified");return r.crypto.Util.hashHex(h,g)},this.tohex=function(){var u=this.params,c=this.getCertHash(u,"sha1"),f=[];f.push(new i({hex:c})),(typeof u=="string"&&u.indexOf("-----BEGIN")!=-1||u.cert!=null&&u.hasis!=!1||u.issuer!=null&&u.serial!=null)&&f.push(new s(u));var h=new a({array:f});return h.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(E.asn1.cms.ESSCertID,E.asn1.ASN1Object);E.asn1.cms.SigningCertificateV2=function(e){var t=Error,r=E,n=r.asn1,i=n.DERSequence,a=n.x509,s=n.cms,u=s.ESSCertIDv2,c=r.crypto;s.SigningCertificateV2.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.47",this.getValueArray=function(){if(this.params==null||this.params==null||this.params.array==null)throw new t("parameter 'array' not specified");for(var f=this.params.array,h=[],g=0;g<f.length;g++){var p=f[g];(e.alg!=null||e.hasis==!1)&&typeof p=="string"&&(p.indexOf("-----BEGIN")!=-1||be.isASN1HEX(p))&&(p={cert:p}),p.alg==null&&e.alg!=null&&(p.alg=e.alg),p.hasis!=!1&&e.hasis==!1&&(p.hasis=!1),h.push(new u(p))}var d=new i({array:h}),w=new i({array:[d]});return[w]},e!=null&&this.setByParam(e)};pe(E.asn1.cms.SigningCertificateV2,E.asn1.cms.Attribute);E.asn1.cms.ESSCertIDv2=function(e){E.asn1.cms.ESSCertIDv2.superclass.constructor.call(this);var t=Error,r=E,n=r.asn1,i=n.DEROctetString,a=n.DERSequence,s=n.cms.IssuerSerial,u=n.x509.AlgorithmIdentifier;this.params=null,this.tohex=function(){var c=this.params,f=this.getCertHash(c,"sha256"),h=[];c.alg!=null&&c.alg!="sha256"&&h.push(new u({name:c.alg})),h.push(new i({hex:f})),(typeof c=="string"&&c.indexOf("-----BEGIN")!=-1||c.cert!=null&&c.hasis!=!1||c.issuer!=null&&c.serial!=null)&&h.push(new s(c));var g=new a({array:h});return g.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(E.asn1.cms.ESSCertIDv2,E.asn1.cms.ESSCertID);E.asn1.cms.IssuerSerial=function(e){var t=Error,r=E,n=r.asn1,i=n.DERInteger,a=n.DERSequence,s=n.cms,u=n.x509,c=u.GeneralNames,f=We;s.IssuerSerial.superclass.constructor.call(this),this.setByParam=function(h){this.params=h},this.tohex=function(){var h=this.params,g,p;if(typeof h=="string"&&h.indexOf("-----BEGIN")!=-1||h.cert!=null){var d;h.cert!=null?d=h.cert:d=h;var w=new f;w.readCertPEM(d),g=w.getIssuer(),p={hex:w.getSerialNumberHex()}}else if(h.issuer!=null&&h.serial)g=h.issuer,p=h.serial;else throw new t("cert or issuer and serial parameter not specified");var v=new c([{dn:g}]),b=new i(p),m=new a({array:[v,b]});return m.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(E.asn1.cms.IssuerSerial,E.asn1.ASN1Object);E.asn1.cms.SignerIdentifier=function(e){var t=E,r=t.asn1,n=r.DERInteger,i=r.DERSequence,a=r.cms,s=a.IssuerAndSerialNumber,u=a.SubjectKeyIdentifier,c=r.x509,f=c.X500Name,h=We,g=Error;a.SignerIdentifier.superclass.constructor.call(this),this.params=null,this.tohex=function(){var p=this.params;if(p.type=="isssn"){var d=new s(p);return d.tohex()}else if(p.type=="skid"){var w=new u(p);return w.tohex()}else throw new Error("wrong property for isssn or skid")},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(E.asn1.cms.SignerIdentifier,E.asn1.ASN1Object);E.asn1.cms.IssuerAndSerialNumber=function(e){var t=E,r=t.asn1,n=r.DERInteger,i=r.DERSequence,a=r.cms,s=r.x509,u=s.X500Name,c=We,f=Error;a.IssuerAndSerialNumber.superclass.constructor.call(this),this.params=null,this.tohex=function(){var h=this.params,g,p;if(typeof h=="string"&&h.indexOf("-----BEGIN")!=-1||h.cert!=null){var d;h.cert!=null?d=h.cert:d=h;var w=new c;w.readCertPEM(d),g=w.getIssuer(),p={hex:w.getSerialNumberHex()}}else if(h.issuer!=null&&h.serial)g=h.issuer,p=h.serial;else throw new f("cert or issuer and serial parameter not specified");var v=new u(g),b=new n(p),m=new i({array:[v,b]});return m.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(h){this.params=h},e!=null&&this.setByParam(e)};pe(E.asn1.cms.IssuerAndSerialNumber,E.asn1.ASN1Object);E.asn1.cms.SubjectKeyIdentifier=function(e){var t=E,r=t.asn1,n=r.DERInteger,i=r.DERSequence,a=r.ASN1Util.newObject,s=r.cms,u=s.IssuerAndSerialName,c=s.SubjectKeyIdentifier,f=r.x509,h=f.X500Name,g=We,p=Error;s.SubjectKeyIdentifier.superclass.constructor.call(this),this.tohex=function(){var d=this.params;if(d.cert==null&&d.skid==null)throw new p("property cert nor skid undefined");var w;if(d.cert!=null){var v=new g(d.cert),b=v.getExtSubjectKeyIdentifier();w=b.kid.hex}else d.skid!=null&&(w=d.skid);var m=a({tag:{tage:"a0",obj:{octstr:{hex:w}}}});return m.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(E.asn1.cms.SubjectKeyIdentifier,E.asn1.ASN1Object);E.asn1.cms.AttributeList=function(e){var t=Error,r=E,n=r.asn1,i=n.DERSet,a=n.cms;a.AttributeList.superclass.constructor.call(this),this.params=null,this.hTLV=null,this.setByParam=function(s){this.params=s},this.tohex=function(){var s=this.params;if(this.hTLV!=null)return this.hTLV;var u=!0;s.sortflag!=null&&(u=s.sortflag);for(var c=s.array,f=[],h=0;h<c.length;h++){var g=c[h],p=g.attr;if(p=="contentType")f.push(new a.ContentType(g));else if(p=="messageDigest")f.push(new a.MessageDigest(g));else if(p=="signingTime")f.push(new a.SigningTime(g));else if(p=="signingCertificate")f.push(new a.SigningCertificate(g));else if(p=="signingCertificateV2")f.push(new a.SigningCertificateV2(g));else if(p=="signaturePolicyIdentifier")f.push(new E.asn1.cades.SignaturePolicyIdentifier(g));else if(p=="signatureTimeStamp"||p=="timeStampToken")f.push(new E.asn1.cades.SignatureTimeStamp(g));else throw new t("unknown attr: "+p)}var d=new i({array:f,sortflag:u});return this.hTLV=d.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(E.asn1.cms.AttributeList,E.asn1.ASN1Object);E.asn1.cms.SignerInfo=function(e){var t=Error,r=E,n=r.asn1,i=n.DERInteger,a=n.DEROctetString,s=n.DERSequence,u=n.DERTaggedObject,c=n.cms,f=c.SignerIdentifier,h=c.AttributeList,g=c.ContentType,p=c.EncapsulatedContentInfo,d=c.MessageDigest,w=c.SignedData,v=n.x509,b=v.AlgorithmIdentifier,m=r.crypto,y=Ct;c.SignerInfo.superclass.constructor.call(this),this.params=null,this.sign=function(){var D=this.params,C=D.sigalg,F=new h(D.sattrs).tohex(),U=y.getKey(D.signkey),k=new m.Signature({alg:C});k.init(U),k.updateHex(F);var S=k.sign();D.sighex=S},this.tohex=function(){var D=this.params,C=[];if(C.push(new i({int:D.version})),C.push(new f(D.id)),C.push(new b({name:D.hashalg})),D.sattrs!=null){var F=new h(D.sattrs);try{C.push(new u({tag:"a0",explicit:!1,obj:F}))}catch(k){throw new t("si sattr error: "+k)}}if(D.sigalgfield!=null?C.push(new b({name:D.sigalgfield})):C.push(new b({name:D.sigalg})),D.sighex==null&&D.signkey!=null&&this.sign(),C.push(new a({hex:D.sighex})),D.uattrs!=null){var F=new h(D.uattrs);try{C.push(new u({tag:"a1",explicit:!1,obj:F}))}catch(S){throw new t("si uattr error: "+S)}}var U=new s({array:C});return U.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(E.asn1.cms.SignerInfo,E.asn1.ASN1Object);E.asn1.cms.EncapsulatedContentInfo=function(e){var t=E,r=t.asn1,n=r.DERTaggedObject,i=r.DERSequence,a=r.DERObjectIdentifier,s=r.DEROctetString,u=r.cms;u.EncapsulatedContentInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var c=this.params,f=[];if(f.push(new a(c.type)),c.content!=null&&(c.content.hex!=null||c.content.str!=null)&&c.isDetached!=!0){var h=new s(c.content),g=new n({tag:"a0",explicit:!0,obj:h});f.push(g)}var p=new i({array:f});return p.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(c){this.params=c},e!=null&&this.setByParam(e)};pe(E.asn1.cms.EncapsulatedContentInfo,E.asn1.ASN1Object);E.asn1.cms.ContentInfo=function(e){var t=E,r=t.asn1,n=r.DERTaggedObject,i=r.DERSequence,a=r.DERObjectIdentifier,s=r.x509,u=s.OID.name2obj;E.asn1.cms.ContentInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var c=this.params,f=[];f.push(new a(c.type));var h=new n({tag:"a0",explicit:!0,obj:c.obj});f.push(h);var g=new i({array:f});return g.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(c){this.params=c},e!=null&&this.setByParam(e)};pe(E.asn1.cms.ContentInfo,E.asn1.ASN1Object);E.asn1.cms.SignedData=function(e){var t=Error,r=E,n=r.asn1,i=n.ASN1Object,a=n.DERInteger,s=n.DERSet,u=n.DERSequence,c=n.DERTaggedObject,f=n.cms,h=f.EncapsulatedContentInfo,g=f.SignerInfo,p=f.ContentInfo,d=f.CertificateSet,w=f.RevocationInfoChoices,v=n.x509,b=v.AlgorithmIdentifier;E.asn1.cms.SignedData.superclass.constructor.call(this),this.params=null,this.checkAndFixParam=function(){var m=this.params;this._setDigestAlgs(m),this._setContentTypeByEContent(m),this._setMessageDigestByEContent(m),this._setSignerInfoVersion(m),this._setSignedDataVersion(m)},this._setDigestAlgs=function(m){for(var y={},D=m.sinfos,C=0;C<D.length;C++){var F=D[C];y[F.hashalg]=1}m.hashalgs=Object.keys(y).sort()},this._setContentTypeByEContent=function(m){for(var y=m.econtent.type,D=m.sinfos,C=0;C<D.length;C++){var F=D[C],U=this._getAttrParamByName(F,"contentType");U.type=y}},this._setMessageDigestByEContent=function(m){var y=m.econtent,D=m.econtent.type,C=y.content.hex;C==null&&y.type=="data"&&y.content.str!=null&&(C=fa(y.content.str));for(var F=m.sinfos,U=0;U<F.length;U++){var k=F[U],S=k.hashalg,B=this._getAttrParamByName(k,"messageDigest"),T=E.crypto.Util.hashHex(C,S);B.hex=T}},this._getAttrParamByName=function(m,y){for(var D=m.sattrs.array,C=0;C<D.length;C++)if(D[C].attr==y)return D[C]},this._setSignerInfoVersion=function(m){for(var y=m.sinfos,D=0;D<y.length;D++){var C=y[D],F=1;C.id.type=="skid"&&(F=3),C.version=F}},this._setSignedDataVersion=function(m){var y=this._getSignedDataVersion(m);m.version=y},this._getSignedDataVersion=function(m){if(m.revinfos!=null)for(var y=m.revinfos,D=0;D<y.length;D++){var C=y[D];if(C.ocsp!=null)return 5}for(var F=m.sinfos,D=0;D<F.length;D++){var U=m.sinfos[D];if(U.version==3)return 3}return m.econtent.type!="data"?3:1},this.tohex=function(){var m=this.params;this.getEncodedHexPrepare!=null&&this.getEncodedHexPrepare(),m.fixed!=!0&&this.checkAndFixParam();var y=[];y.push(new a({int:m.version}));for(var D=[],C=0;C<m.hashalgs.length;C++){var F=m.hashalgs[C];D.push(new b({name:F}))}y.push(new s({array:D})),y.push(new h(m.econtent)),m.certs!=null&&y.push(new d(m.certs)),m.revinfos!=null&&y.push(new w(m.revinfos));for(var U=[],C=0;C<m.sinfos.length;C++){var k=m.sinfos[C];U.push(new g(k))}y.push(new s({array:U}));var S=new u({array:y});return S.tohex()},this.getEncodedHex=function(){return this.tohex()},this.getContentInfo=function(){var m=new p({type:"signed-data",obj:this});return m},this.getContentInfoEncodedHex=function(){return this.getContentInfo().tohex()},e!=null&&this.setByParam(e)};pe(E.asn1.cms.SignedData,E.asn1.ASN1Object);E.asn1.cms.CertificateSet=function(e){E.asn1.cms.CertificateSet.superclass.constructor.call(this);var t=Error,r=E.asn1,n=r.DERTaggedObject,i=r.DERSet,a=r.ASN1Object;this.params=null,this.tohex=function(){var s=this.params,u=[],c;if(s instanceof Array)c=s;else if(s.array!=null)c=s.array;else throw new t("cert array not specified");for(var f=0;f<c.length;f++){var h=c[f],g=Sr(h),p=new a;p.hTLV=g,u.push(p)}var d={array:u};s.sortflag==!1&&(d.sortflag=!1);var w=new i(d),v=new n({tag:"a0",explicit:!1,obj:w});return v.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(E.asn1.cms.CertificateSet,E.asn1.ASN1Object);E.asn1.cms.RevocationInfoChoices=function(e){E.asn1.cms.RevocationInfoChoices.superclass.constructor.call(this),this.params=null,this.tohex=function(){var t=this.params;if(!t instanceof Array)throw new Error("params is not array");for(var r=[],n=0;n<t.length;n++)r.push(new E.asn1.cms.RevocationInfoChoice(t[n]));var i=E.asn1.ASN1Util.newObject({tag:{tagi:"a1",obj:{set:r}}});return i.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(E.asn1.cms.RevocationInfoChoices,E.asn1.ASN1Object);E.asn1.cms.RevocationInfoChoice=function(e){E.asn1.cms.RevocationInfoChoice.superclass.constructor.call(this),this.params=null,this.tohex=function(){var t=this.params;if(t.crl!=null&&typeof t.crl=="string"){var r=t.crl;return t.crl.indexOf("-----BEGIN")!=-1&&(r=Sr(t.crl)),r}else if(t.ocsp!=null){var n=E.asn1.ASN1Util.newObject({tag:{tagi:"a1",obj:new E.asn1.cms.OtherRevocationFormat(t)}});return n.tohex()}else throw new Error("property crl or ocsp undefined")},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(E.asn1.cms.RevocationInfoChoice,E.asn1.ASN1Object);E.asn1.cms.OtherRevocationFormat=function(e){E.asn1.cms.OtherRevocationFormat.superclass.constructor.call(this);var t=Error,r=E,n=r.asn1,i=n.ASN1Util.newObject,a=r.lang.String.isHex;this.params=null,this.tohex=function(){var s=this.params;if(s.ocsp==null)throw new t("property ocsp not specified");if(!a(s.ocsp)||!be.isASN1HEX(s.ocsp))throw new t("ocsp value not ASN.1 hex string");var u=i({seq:[{oid:"1.3.6.1.5.5.7.16.2"},{asn1:{tlv:s.ocsp}}]});return u.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(E.asn1.cms.OtherRevocationFormat,E.asn1.ASN1Object);E.asn1.cms.CMSUtil=new function(){};E.asn1.cms.CMSUtil.newSignedData=function(e){return new E.asn1.cms.SignedData(e)};E.asn1.cms.CMSUtil.verifySignedData=function(e){var t=E,r=t.asn1,n=r.cms,i=n.SignerInfo,a=n.SignedData,s=n.SigningTime,u=n.SigningCertificate,c=n.SigningCertificateV2,f=r.cades,h=f.SignaturePolicyIdentifier,g=t.lang.String.isHex,p=be,d=p.getVbyList,w=p.getTLVbyList,v=p.getIdxbyList,b=p.getChildIdx,m=p.getTLV,y=p.oidname,D=t.crypto.Util.hashHex;e.cms===void 0&&g(e.cms);var C=e.cms,F=function(z,W){for(var ie,Ce=3;Ce<6;Ce++)if(ie=v(z,0,[1,0,Ce]),ie!==void 0){var Fe=z.substr(ie,2);Fe==="a0"&&(W.certsIdx=ie),Fe==="a1"&&(W.revinfosIdx=ie),Fe==="31"&&(W.signerinfosIdx=ie)}},U=function(z,W){var ie=W.signerinfosIdx;if(ie!==void 0){var Ce=b(z,ie);W.signerInfoIdxList=Ce;for(var Fe=0;Fe<Ce.length;Fe++){var xe=Ce[Fe],it={idx:xe};k(z,it),W.signerInfos.push(it)}}},k=function(z,W){var ie=W.idx;W.signerid_issuer1=w(z,ie,[1,0],"30"),W.signerid_serial1=d(z,ie,[1,1],"02"),W.hashalg=y(d(z,ie,[2,0],"06"));var Ce=v(z,ie,[3],"a0");W.idxSignedAttrs=Ce,S(z,W,Ce);var Fe=b(z,ie),xe=Fe.length;if(xe<6)throw"malformed SignerInfo";W.sigalg=y(d(z,ie,[xe-2,0],"06")),W.sigval=d(z,ie,[xe-1],"04")},S=function(z,W,ie){var Ce=b(z,ie);W.signedAttrIdxList=Ce;for(var Fe=0;Fe<Ce.length;Fe++){var xe=Ce[Fe],it=d(z,xe,[0],"06"),nt;it==="2a864886f70d010905"?(nt=Qt(d(z,xe,[1,0])),W.saSigningTime=nt):it==="2a864886f70d010904"&&(nt=d(z,xe,[1,0],"04"),W.saMessageDigest=nt)}},B=function(z,W){if(d(z,0,[0],"06")!=="2a864886f70d010702")return W;W.cmsType="signedData",W.econtent=d(z,0,[1,0,2,1,0]),F(z,W),W.signerInfos=[],U(z,W)},T=function(z,W){for(var ie=W.parse.signerInfos,Ce=ie.length,Fe=!0,xe=0;xe<Ce;xe++){var it=ie[xe];j(z,W,it,xe),it.isValid||(Fe=!1)}W.isValid=Fe},P=function(z,W,ie,Ce){var Fe=W.parse.certsIdx,xe;if(W.certs===void 0){xe=[],W.certkeys=[];for(var it=b(z,Fe),nt=0;nt<it.length;nt++){var dt=m(z,it[nt]),pt=new We;pt.readCertHex(dt),xe[nt]=pt,W.certkeys[nt]=pt.getPublicKey()}W.certs=xe}else xe=W.certs;W.cccc=xe.length,W.cccci=it.length;for(var nt=0;nt<xe.length;nt++){var wn=pt.getIssuerHex(),hr=pt.getSerialNumberHex();ie.signerid_issuer1===wn&&ie.signerid_serial1===hr&&(ie.certkey_idx=nt)}},j=function(z,W,ie,Ce){ie.verifyDetail={};var Fe=ie.verifyDetail,xe=W.parse.econtent,it=ie.hashalg,nt=ie.saMessageDigest;Fe.validMessageDigest=!1,D(xe,it)===nt&&(Fe.validMessageDigest=!0),P(z,W,ie,Ce),Fe.validSignatureValue=!1;var dt=ie.sigalg,pt="31"+m(z,ie.idxSignedAttrs).substr(2);ie.signedattrshex=pt;var wn=W.certs[ie.certkey_idx].getPublicKey(),hr=new E.crypto.Signature({alg:dt});hr.init(wn),hr.updateHex(pt);var St=hr.verify(ie.sigval);Fe.validSignatureValue_isValid=St,St===!0&&(Fe.validSignatureValue=!0),ie.isValid=!1,Fe.validMessageDigest&&Fe.validSignatureValue&&(ie.isValid=!0)},Y=function(){},M={isValid:!1,parse:{}};return B(C,M.parse),T(C,M),M};E.asn1.cms.CMSParser=function(){var e=Error,t=We,r=new t,n=be,i=n.getV,a=n.getTLV,s=n.getIdxbyList,u=n.getTLVbyList,c=n.getTLVbyListEx,f=n.getVbyList,h=n.getVbyListEx,g=n.getChildIdx;this.getCMSSignedData=function(p){var d=u(p,0,[1,0]),w=this.getSignedData(d);return w},this.getSignedData=function(p){var d=g(p,0),w={},v=i(p,d[0]),b=parseInt(v,16);w.version=b;var m=a(p,d[1]);w.hashalgs=this.getHashAlgArray(m);var y=a(p,d[2]);w.econtent=this.getEContent(y);var D=c(p,0,["[0]"]);D!=null&&(w.certs=this.getCertificateSet(D));var C=c(p,0,["[1]"]);C!=null;var F=c(p,0,[3]);return w.sinfos=this.getSignerInfos(F),w},this.getHashAlgArray=function(p){for(var d=g(p,0),w=new t,v=[],b=0;b<d.length;b++){var m=a(p,d[b]),y=w.getAlgorithmIdentifierName(m);v.push(y)}return v},this.getEContent=function(p){var d={},w=f(p,0,[0]),v=f(p,0,[1,0]);return d.type=E.asn1.x509.OID.oid2name(be.hextooidstr(w)),d.content={hex:v},d},this.getSignerInfos=function(p){for(var d=[],w=g(p,0),v=0;v<w.length;v++){var b=a(p,w[v]),m=this.getSignerInfo(b);d.push(m)}return d},this.getSignerInfo=function(p){var d={},w=g(p,0),v=n.getInt(p,w[0],-1);v!=-1&&(d.version=v);var b=a(p,w[1]),m=this.getIssuerAndSerialNumber(b);d.id=m;var y=a(p,w[2]),D=r.getAlgorithmIdentifierName(y);d.hashalg=D;var C=c(p,0,["[0]"]);if(C!=null){var F=this.getAttributeList(C);d.sattrs=F}var U=c(p,0,[3]),k=r.getAlgorithmIdentifierName(U);d.sigalg=k;var S=h(p,0,[4]);d.sighex=S;var B=c(p,0,["[1]"]);if(B!=null){var T=this.getAttributeList(B);d.uattrs=T}return d},this.getSignerIdentifier=function(p){if(p.substr(0,2)=="30")return this.getIssuerAndSerialNumber(p);throw new Error("SKID of signerIdentifier not supported")},this.getIssuerAndSerialNumber=function(p){var d={type:"isssn"},w=g(p,0),v=a(p,w[0]);d.issuer=r.getX500Name(v);var b=i(p,w[1]);return d.serial={hex:b},d},this.getAttributeList=function(p){for(var d=[],w=g(p,0),v=0;v<w.length;v++){var b=a(p,w[v]),m=this.getAttribute(b);d.push(m)}return{array:d}},this.getAttribute=function(p){var d={},w=g(p,0),v=n.getOID(p,w[0]),b=E.asn1.x509.OID.oid2name(v);d.attr=b;var m=a(p,w[1]),y=g(m,0);if(y.length==1)d.valhex=a(m,y[0]);else{for(var D=[],C=0;C<y.length;C++)D.push(a(m,y[C]));d.valhex=D}return b=="contentType"?this.setContentType(d):b=="messageDigest"?this.setMessageDigest(d):b=="signingTime"?this.setSigningTime(d):b=="signingCertificate"?this.setSigningCertificate(d):b=="signingCertificateV2"?this.setSigningCertificateV2(d):b=="signaturePolicyIdentifier"&&this.setSignaturePolicyIdentifier(d),d},this.setContentType=function(p){var d=n.getOIDName(p.valhex,0,null);d!=null&&(p.type=d,delete p.valhex)},this.setSigningTime=function(p){var d=i(p.valhex,0),w=Qt(d);p.str=w,delete p.valhex},this.setMessageDigest=function(p){var d=i(p.valhex,0);p.hex=d,delete p.valhex},this.setSigningCertificate=function(p){var d=g(p.valhex,0);if(d.length>0){for(var w=a(p.valhex,d[0]),v=g(w,0),b=[],m=0;m<v.length;m++){var y=a(w,v[m]),D=this.getESSCertID(y);b.push(D)}p.array=b}if(d.length>1){var C=a(p.valhex,d[1]);p.polhex=C}delete p.valhex},this.setSignaturePolicyIdentifier=function(p){var d=g(p.valhex,0);if(d.length>0){var w=n.getOID(p.valhex,d[0]);p.oid=w}if(d.length>1){var v=new t,b=g(p.valhex,d[1]),m=a(p.valhex,b[0]),y=v.getAlgorithmIdentifierName(m);p.alg=y;var D=i(p.valhex,b[1]);p.hash=D}delete p.valhex},this.setSigningCertificateV2=function(p){var d=g(p.valhex,0);if(d.length>0){for(var w=a(p.valhex,d[0]),v=g(w,0),b=[],m=0;m<v.length;m++){var y=a(w,v[m]),D=this.getESSCertIDv2(y);b.push(D)}p.array=b}if(d.length>1){var C=a(p.valhex,d[1]);p.polhex=C}delete p.valhex},this.getESSCertID=function(p){var d={},w=g(p,0);if(w.length>0){var v=i(p,w[0]);d.hash=v}if(w.length>1){var b=a(p,w[1]),m=this.getIssuerSerial(b);m.serial!=null&&(d.serial=m.serial),m.issuer!=null&&(d.issuer=m.issuer)}return d},this.getESSCertIDv2=function(p){var d={},w=g(p,0);if(w.length<1||3<w.length)throw new e("wrong number of elements");var v=0;if(p.substr(w[0],2)=="30"){var b=a(p,w[0]);d.alg=r.getAlgorithmIdentifierName(b),v++}else d.alg="sha256";var m=i(p,w[v]);if(d.hash=m,w.length>v+1){var y=a(p,w[v+1]),D=this.getIssuerSerial(y);d.issuer=D.issuer,d.serial=D.serial}return d},this.getIssuerSerial=function(p){var d={},w=g(p,0),v=a(p,w[0]),b=r.getGeneralNames(v),m=b[0].dn;d.issuer=m;var y=i(p,w[1]);return d.serial={hex:y},d},this.getCertificateSet=function(p){for(var d=g(p,0),w=[],v=0;v<d.length;v++){var b=a(p,d[v]);if(b.substr(0,2)=="30"){var m=Gn(b,"CERTIFICATE");w.push(m)}}return{array:w,sortflag:!1}}};(typeof E>"u"||!E)&&(E={});(typeof E.asn1>"u"||!E.asn1)&&(E.asn1={});(typeof E.asn1.tsp>"u"||!E.asn1.tsp)&&(E.asn1.tsp={});E.asn1.tsp.TimeStampToken=function(e){var t=E,r=t.asn1,n=r.tsp;n.TimeStampToken.superclass.constructor.call(this),this.params=null,this.getEncodedHexPrepare=function(){var i=new n.TSTInfo(this.params.econtent.content);this.params.econtent.content.hex=i.tohex()},e!=null&&this.setByParam(e)};pe(E.asn1.tsp.TimeStampToken,E.asn1.cms.SignedData);E.asn1.tsp.TSTInfo=function(e){var t=Error,r=E,n=r.asn1,i=n.DERSequence,a=n.DERInteger,s=n.DERBoolean,u=n.DERGeneralizedTime,c=n.DERObjectIdentifier,f=n.DERTaggedObject,h=n.tsp,g=h.MessageImprint,p=h.Accuracy,d=n.x509.X500Name,w=n.x509.GeneralName;if(h.TSTInfo.superclass.constructor.call(this),this.dVersion=new a({int:1}),this.dPolicy=null,this.dMessageImprint=null,this.dSerial=null,this.dGenTime=null,this.dAccuracy=null,this.dOrdering=null,this.dNonce=null,this.dTsa=null,this.tohex=function(){var v=[this.dVersion];if(this.dPolicy==null)throw new Error("policy shall be specified.");if(v.push(this.dPolicy),this.dMessageImprint==null)throw new Error("messageImprint shall be specified.");if(v.push(this.dMessageImprint),this.dSerial==null)throw new Error("serialNumber shall be specified.");if(v.push(this.dSerial),this.dGenTime==null)throw new Error("genTime shall be specified.");v.push(this.dGenTime),this.dAccuracy!=null&&v.push(this.dAccuracy),this.dOrdering!=null&&v.push(this.dOrdering),this.dNonce!=null&&v.push(this.dNonce),this.dTsa!=null&&v.push(this.dTsa);var b=new i({array:v});return this.hTLV=b.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0){if(typeof e.policy=="string"){if(!e.policy.match(/^[0-9.]+$/))throw"policy shall be oid like 0.1.4.134";this.dPolicy=new c({oid:e.policy})}e.messageImprint!==void 0&&(this.dMessageImprint=new g(e.messageImprint)),e.serial!==void 0&&(this.dSerial=new a(e.serial)),e.genTime!==void 0&&(this.dGenTime=new u(e.genTime)),e.accuracy!==void 0&&(this.dAccuracy=new p(e.accuracy)),e.ordering!==void 0&&e.ordering==!0&&(this.dOrdering=new s),e.nonce!==void 0&&(this.dNonce=new a(e.nonce)),e.tsa!==void 0&&(this.dTsa=new f({tag:"a0",explicit:!0,obj:new w({dn:e.tsa})}))}};pe(E.asn1.tsp.TSTInfo,E.asn1.ASN1Object);E.asn1.tsp.Accuracy=function(e){var t=E,r=t.asn1,n=r.ASN1Util.newObject;r.tsp.Accuracy.superclass.constructor.call(this),this.params=null,this.tohex=function(){var i=this.params,a=[];return i.seconds!=null&&typeof i.seconds=="number"&&a.push({int:i.seconds}),i.millis!=null&&typeof i.millis=="number"&&a.push({tag:{tagi:"80",obj:{int:i.millis}}}),i.micros!=null&&typeof i.micros=="number"&&a.push({tag:{tagi:"81",obj:{int:i.micros}}}),n({seq:a}).tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(E.asn1.tsp.Accuracy,E.asn1.ASN1Object);E.asn1.tsp.MessageImprint=function(e){var t=E,r=t.asn1,n=r.DERSequence,i=r.DEROctetString,a=r.x509,s=a.AlgorithmIdentifier;r.tsp.MessageImprint.superclass.constructor.call(this),this.params=null,this.tohex=function(){var u=this.params,c=new s({name:u.alg}),f=new i({hex:u.hash}),h=new n({array:[c,f]});return h.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};pe(E.asn1.tsp.MessageImprint,E.asn1.ASN1Object);E.asn1.tsp.TimeStampReq=function(e){var t=E,r=t.asn1,n=r.DERSequence,i=r.DERInteger,a=r.DERBoolean,s=r.ASN1Object,u=r.DERObjectIdentifier,c=r.tsp,f=c.MessageImprint;c.TimeStampReq.superclass.constructor.call(this),this.params=null,this.tohex=function(){var h=this.params,g=[];g.push(new i({int:1})),h.messageImprint instanceof E.asn1.ASN1Object?g.push(h.messageImprint):g.push(new f(h.messageImprint)),h.policy!=null&&g.push(new u(h.policy)),h.nonce!=null&&g.push(new i(h.nonce)),h.certreq==!0&&g.push(new a);var p=new n({array:g});return p.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(E.asn1.tsp.TimeStampReq,E.asn1.ASN1Object);E.asn1.tsp.TimeStampResp=function(e){var t=E,r=t.asn1,n=r.DERSequence,i=r.ASN1Object,a=r.tsp,s=a.PKIStatusInfo;a.TimeStampResp.superclass.constructor.call(this),this.params=null,this.tohex=function(){var u=this.params,c=[];if(u.econtent!=null||u.tst!=null)if(u.statusinfo!=null?c.push(new s(u.statusinfo)):c.push(new s("granted")),u.econtent!=null)c.push(new a.TimeStampToken(u).getContentInfo());else if(u.tst instanceof r.ASN1Object)c.push(u.tst);else throw new Error("improper member tst value");else if(u.statusinfo!=null)c.push(new s(u.statusinfo));else throw new Error("parameter for token nor statusinfo not specified");var f=new n({array:c});return f.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(E.asn1.tsp.TimeStampResp,E.asn1.ASN1Object);E.asn1.tsp.PKIStatusInfo=function(e){var t=Error,r=E,n=r.asn1,i=n.DERSequence,a=n.tsp,s=a.PKIStatus,u=a.PKIFreeText,c=a.PKIFailureInfo;a.PKIStatusInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var f=this.params,h=[];if(typeof f=="string")h.push(new s(f));else{if(f.status==null)throw new t("property 'status' unspecified");h.push(new s(f.status)),f.statusstr!=null&&h.push(new u(f.statusstr)),f.failinfo!=null&&h.push(new c(f.failinfo))}var g=new i({array:h});return g.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(E.asn1.tsp.PKIStatusInfo,E.asn1.ASN1Object);E.asn1.tsp.PKIStatus=function(e){var t=Error,r=E,n=r.asn1,i=n.DERInteger,a=n.tsp;a.PKIStatus.superclass.constructor.call(this);var s={granted:0,grantedWithMods:1,rejection:2,waiting:3,revocationWarning:4,revocationNotification:5};this.params=null,this.tohex=function(){var u=this.params,c,f;if(typeof u=="string")try{f=s[u]}catch{throw new t("undefined name: "+u)}else if(typeof u=="number")f=u;else throw new t("unsupported params");return new i({int:f}).tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(E.asn1.tsp.PKIStatus,E.asn1.ASN1Object);E.asn1.tsp.PKIFreeText=function(e){var t=Error,r=E,n=r.asn1,i=n.DERSequence,a=n.DERUTF8String,s=n.tsp;s.PKIFreeText.superclass.constructor.call(this),this.params=null,this.tohex=function(){var u=this.params;if(!u instanceof Array)throw new t("wrong params: not array");for(var c=[],f=0;f<u.length;f++)c.push(new a({str:u[f]}));var h=new i({array:c});return h.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(E.asn1.tsp.PKIFreeText,E.asn1.ASN1Object);E.asn1.tsp.PKIFailureInfo=function(e){var t=Error,r=E,n=r.asn1,i=n.DERBitString,a=n.tsp,s=a.PKIFailureInfo,u={badAlg:0,badRequest:2,badDataFormat:5,timeNotAvailable:14,unacceptedPolicy:15,unacceptedExtension:16,addInfoNotAvailable:17,systemFailure:25};s.superclass.constructor.call(this),this.params=null,this.getBinValue=function(){var c=this.params,f=0;if(typeof c=="number"&&0<=c&&c<=25){f|=1<<c;for(var h=f.toString(2),g="",p=h.length-1;p>=0;p--)g+=h[p];return g}else{if(typeof c=="string"&&u[c]!=null)return p0([c],u);if(typeof c=="object"&&c.length!=null)return p0(c,u);throw new t("wrong params")}},this.tohex=function(){var c=this.params,f=this.getBinValue();return new i({bin:f}).tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(E.asn1.tsp.PKIFailureInfo,E.asn1.ASN1Object);E.asn1.tsp.AbstractTSAAdapter=function(e){this.getTSTHex=function(t,r){throw"not implemented yet"}};E.asn1.tsp.SimpleTSAAdapter=function(e){var t=E,r=t.asn1,n=r.tsp,i=t.crypto.Util.hashHex;n.SimpleTSAAdapter.superclass.constructor.call(this),this.params=null,this.serial=0,this.getTSTHex=function(a,s){var u=i(a,s);this.params.econtent.content.messageImprint={alg:s,hash:u},this.params.econtent.content.serial={int:this.serial++};var c=Math.floor(Math.random()*1e9);this.params.econtent.content.nonce={int:c};var f=new n.TimeStampToken(this.params);return f.getContentInfoEncodedHex()},e!==void 0&&(this.params=e)};pe(E.asn1.tsp.SimpleTSAAdapter,E.asn1.tsp.AbstractTSAAdapter);E.asn1.tsp.FixedTSAAdapter=function(e){var t=E,r=t.asn1,n=r.tsp,i=t.crypto.Util.hashHex;n.FixedTSAAdapter.superclass.constructor.call(this),this.params=null,this.getTSTHex=function(a,s){var u=i(a,s);this.params.econtent.content.messageImprint={alg:s,hash:u};var c=new n.TimeStampToken(this.params);return c.getContentInfoEncodedHex()},e!==void 0&&(this.params=e)};pe(E.asn1.tsp.FixedTSAAdapter,E.asn1.tsp.AbstractTSAAdapter);E.asn1.tsp.TSPUtil=new function(){};E.asn1.tsp.TSPUtil.newTimeStampToken=function(e){return new E.asn1.tsp.TimeStampToken(e)};E.asn1.tsp.TSPUtil.parseTimeStampReq=function(e){var t=new E.asn1.tsp.TSPParser;return t.getTimeStampReq(e)};E.asn1.tsp.TSPUtil.parseMessageImprint=function(e){var t=new E.asn1.tsp.TSPParser;return t.getMessageImprint(e)};E.asn1.tsp.TSPParser=function(){var e=Error,t=We,r=new t,n=be,i=n.getV,a=n.getTLV,s=n.getIdxbyList,u=n.getTLVbyListEx,c=n.getChildIdx,f=["granted","grantedWithMods","rejection","waiting","revocationWarning","revocationNotification"],h={0:"badAlg",2:"badRequest",5:"badDataFormat",14:"timeNotAvailable",15:"unacceptedPolicy",16:"unacceptedExtension",17:"addInfoNotAvailable",25:"systemFailure"};this.getResponse=function(g){var p=c(g,0);if(p.length==1)return this.getPKIStatusInfo(a(g,p[0]));if(p.length>1){var d=this.getPKIStatusInfo(a(g,p[0])),w=a(g,p[1]),v=this.getToken(w);return v.statusinfo=d,v}},this.getToken=function(g){var p=new E.asn1.cms.CMSParser,d=p.getCMSSignedData(g);return this.setTSTInfo(d),d},this.setTSTInfo=function(g){var p=g.econtent;if(p.type=="tstinfo"){var d=p.content.hex,w=this.getTSTInfo(d);p.content=w}},this.getTSTInfo=function(g){var p={},d=c(g,0),w=i(g,d[1]);p.policy=_0(w);var v=a(g,d[2]);p.messageImprint=this.getMessageImprint(v);var b=i(g,d[3]);p.serial={hex:b};var m=i(g,d[4]);p.genTime={str:Qt(m)};var y=0;if(d.length>5&&g.substr(d[5],2)=="30"){var D=a(g,d[5]);p.accuracy=this.getAccuracy(D),y++}if(d.length>5+y&&g.substr(d[5+y],2)=="01"){var C=i(g,d[5+y]);C=="ff"&&(p.ordering=!0),y++}if(d.length>5+y&&g.substr(d[5+y],2)=="02"){var F=i(g,d[5+y]);p.nonce={hex:F},y++}if(d.length>5+y&&g.substr(d[5+y],2)=="a0"){var U=a(g,d[5+y]);U="30"+U.substr(2),pGeneralNames=r.getGeneralNames(U);var k=pGeneralNames[0].dn;p.tsa=k,y++}if(d.length>5+y&&g.substr(d[5+y],2)=="a1"){var S=a(g,d[5+y]);S="30"+S.substr(2);var B=r.getExtParamArray(S);p.ext=B,y++}return p},this.getAccuracy=function(g){for(var p={},d=c(g,0),w=0;w<d.length;w++){var v=g.substr(d[w],2),b=i(g,d[w]),m=parseInt(b,16);v=="02"?p.seconds=m:v=="80"?p.millis=m:v=="81"&&(p.micros=m)}return p},this.getMessageImprint=function(g){if(g.substr(0,2)!="30")throw new Error("head of messageImprint hex shall be x30");var p={},d=c(g,0),w=s(g,0,[0,0]),v=i(g,w),b=n.hextooidstr(v),m=E.asn1.x509.OID.oid2name(b);if(m=="")throw new Error("hashAlg name undefined: "+b);var y=m,D=s(g,0,[1]);return p.alg=y,p.hash=i(g,D),p},this.getPKIStatusInfo=function(g){var p={},d=c(g,0),w=0;try{var v=i(g,d[0]),b=parseInt(v,16);p.status=f[b]}catch{}if(d.length>1&&g.substr(d[1],2)=="30"){var m=a(g,d[1]);p.statusstr=this.getPKIFreeText(m),w++}if(d.length>w&&g.substr(d[1+w],2)=="03"){var y=a(g,d[1+w]);p.failinfo=this.getPKIFailureInfo(y)}return p},this.getPKIFreeText=function(g){for(var p=[],d=c(g,0),w=0;w<d.length;w++)p.push(n.getString(g,d[w]));return p},this.getPKIFailureInfo=function(g){var p=n.getInt(g,0);return h[p]!=null?h[p]:p},this.getTimeStampReq=function(g){var p={};p.certreq=!1;var d=c(g,0);if(d.length<2)throw new Error("TimeStampReq must have at least 2 items");var w=a(g,d[1]);p.messageImprint=E.asn1.tsp.TSPUtil.parseMessageImprint(w);for(var v=2;v<d.length;v++){var b=d[v],m=g.substr(b,2);if(m=="06"){var y=i(g,b);p.policy=n.hextooidstr(y)}m=="02"&&(p.nonce=i(g,b)),m=="01"&&(p.certreq=!0)}return p}};(typeof E>"u"||!E)&&(E={});(typeof E.asn1>"u"||!E.asn1)&&(E.asn1={});(typeof E.asn1.cades>"u"||!E.asn1.cades)&&(E.asn1.cades={});E.asn1.cades.SignaturePolicyIdentifier=function(e){var t=E,r=t.asn1,n=r.cades,i=n.SignaturePolicyId;n.SignaturePolicyIdentifier.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.15",this.params=null,this.getValueArray=function(){return[new i(this.params)]},this.setByParam=function(a){this.params=a},e!=null&&this.setByParam(e)};pe(E.asn1.cades.SignaturePolicyIdentifier,E.asn1.cms.Attribute);E.asn1.cades.SignaturePolicyId=function(e){var t=E,r=t.asn1,n=r.DERSequence,i=r.DERObjectIdentifier,a=r.x509,s=a.AlgorithmIdentifier,u=r.cades,c=u.SignaturePolicyId,f=u.OtherHashAlgAndValue;c.superclass.constructor.call(this),this.params=null,this.tohex=function(){var h=this.params,g=[];g.push(new i(h.oid)),g.push(new f(h));var p=new n({array:g});return p.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(h){this.params=h},e!=null&&this.setByParam(e)};pe(E.asn1.cades.SignaturePolicyId,E.asn1.ASN1Object);E.asn1.cades.OtherHashAlgAndValue=function(e){var t=Error,r=E,n=r.asn1,i=n.DERSequence,a=n.DEROctetString,s=n.x509,u=s.AlgorithmIdentifier,c=n.cades,f=c.OtherHashAlgAndValue;f.superclass.constructor.call(this),this.params=null,this.tohex=function(){var h=this.params;if(h.alg==null)throw new t("property 'alg' not specified");if(h.hash==null&&h.cert==null)throw new t("property 'hash' nor 'cert' not specified");var g=null;if(h.hash!=null)g=h.hash;else if(h.cert!=null){if(typeof h.cert!="string")throw new t("cert not string");var p=h.cert;h.cert.indexOf("-----BEGIN")!=-1&&(p=Sr(h.cert)),g=E.crypto.Util.hashHex(p,h.alg)}var d=[];d.push(new u({name:h.alg})),d.push(new a({hex:g}));var w=new i({array:d});return w.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(E.asn1.cades.OtherHashAlgAndValue,E.asn1.ASN1Object);E.asn1.cades.OtherHashValue=function(e){E.asn1.cades.OtherHashValue.superclass.constructor.call(this);var t=Error,r=E,n=r.lang.String.isHex,i=r.asn1,a=i.DEROctetString,s=r.crypto.Util.hashHex;this.params=null,this.tohex=function(){var u=this.params;if(u.hash==null&&u.cert==null)throw new t("hash or cert not specified");var c=null;if(u.hash!=null)c=u.hash;else if(u.cert!=null){if(typeof u.cert!="string")throw new t("cert not string");var f=u.cert;u.cert.indexOf("-----BEGIN")!=-1&&(f=Sr(u.cert)),c=E.crypto.Util.hashHex(f,"sha1")}return new a({hex:c}).tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(E.asn1.cades.OtherHashValue,E.asn1.ASN1Object);E.asn1.cades.SignatureTimeStamp=function(e){var t=Error,r=E,n=r.lang.String.isHex,i=r.asn1,a=i.ASN1Object,s=i.x509,u=i.cades;u.SignatureTimeStamp.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.14",this.params=null,this.getValueArray=function(){var c=this.params;if(c.tst!=null)if(n(c.tst)){var f=new a;return f.hTLV=c.tst,[f]}else{if(c.tst instanceof a)return[c.tst];throw new t("params.tst has wrong value")}else if(c.res!=null){var h=c.res;if(h instanceof a&&(h=h.tohex()),typeof h!="string"||!n(h))throw new t("params.res has wrong value");var g=be.getTLVbyList(h,0,[1]),f=new a;return f.hTLV=c.tst,[f]}},e!=null&&this.setByParam(e)};pe(E.asn1.cades.SignatureTimeStamp,E.asn1.cms.Attribute);E.asn1.cades.CompleteCertificateRefs=function(e){var t=Error,r=E,n=r.asn1,i=n.DERSequence,a=n.cades,s=a.OtherCertID,u=r.lang.String.isHex;a.CompleteCertificateRefs.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.21",this.params=null,this.getValueArray=function(){for(var c=this.params,f=[],h=0;h<c.array.length;h++){var g=c.array[h];if(typeof g=="string")if(g.indexOf("-----BEGIN")!=-1)g={cert:g};else if(u(g))g={hash:g};else throw new t("unsupported value: "+g);c.alg!=null&&g.alg==null&&(g.alg=c.alg),c.hasis!=null&&g.hasis==null&&(g.hasis=c.hasis);var p=new s(g);f.push(p)}var d=new i({array:f});return[d]},e!=null&&this.setByParam(e)};pe(E.asn1.cades.CompleteCertificateRefs,E.asn1.cms.Attribute);E.asn1.cades.OtherCertID=function(e){var t=E,r=t.asn1,n=r.DERSequence,i=r.cms,a=i.IssuerSerial,s=r.cades,u=s.OtherHashValue,c=s.OtherHashAlgAndValue;s.OtherCertID.superclass.constructor.call(this),this.params=e,this.tohex=function(){var f=this.params;typeof f=="string"&&(f.indexOf("-----BEGIN")!=-1?f={cert:f}:_isHex(f)&&(f={hash:f}));var h=[],g=null;if(f.alg!=null?g=new c(f):g=new u(f),h.push(g),f.cert!=null&&f.hasis==!0||f.issuer!=null&&f.serial!=null){var p=new a(f);h.push(p)}var d=new n({array:h});return d.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(E.asn1.cades.OtherCertID,E.asn1.ASN1Object);E.asn1.cades.OtherHash=function(e){var t=Error,r=E,n=r.asn1,i=n.cms,a=n.cades,s=a.OtherHashAlgAndValue,u=a.OtherHashValue,c=r.crypto.Util.hashHex,f=r.lang.String.isHex;a.OtherHash.superclass.constructor.call(this),this.params=null,this.tohex=function(){var h=this.params;typeof h=="string"&&(h.indexOf("-----BEGIN")!=-1?h={cert:h}:f(h)&&(h={hash:h}));var g=null;return h.alg!=null?g=new s(h):g=new u(h),g.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(E.asn1.cades.OtherHash,E.asn1.ASN1Object);E.asn1.cades.CAdESUtil=new function(){};E.asn1.cades.CAdESUtil.parseSignedDataForAddingUnsigned=function(e){var t=new E.asn1.cms.CMSParser,r=t.getCMSSignedData(e);return r};E.asn1.cades.CAdESUtil.parseSignerInfoForAddingUnsigned=function(e,t,r){var n=be,i=n.getChildIdx,a=n.getTLV,s=n.getV,u=E,c=u.asn1,f=c.ASN1Object,h=c.cms,g=h.AttributeList,p=h.SignerInfo,d={},w=i(e,t);if(w.length!=6)throw"not supported items for SignerInfo (!=6)";var v=w.shift();d.version=a(e,v);var b=w.shift();d.si=a(e,b);var m=w.shift();d.digalg=a(e,m);var y=w.shift();d.sattrs=a(e,y);var D=w.shift();d.sigalg=a(e,D);var C=w.shift();d.sig=a(e,C),d.sigval=s(e,C);var F=null;return d.obj=new p,F=new f,F.hTLV=d.version,d.obj.dCMSVersion=F,F=new f,F.hTLV=d.si,d.obj.dSignerIdentifier=F,F=new f,F.hTLV=d.digalg,d.obj.dDigestAlgorithm=F,F=new f,F.hTLV=d.sattrs,d.obj.dSignedAttrs=F,F=new f,F.hTLV=d.sigalg,d.obj.dSigAlg=F,F=new f,F.hTLV=d.sig,d.obj.dSig=F,d.obj.dUnsignedAttrs=new g,d};(typeof E.asn1.csr>"u"||!E.asn1.csr)&&(E.asn1.csr={});E.asn1.csr.CertificationRequest=function(e){var t=E,r=t.asn1,n=r.DERBitString,i=r.DERSequence,a=r.csr,s=r.x509,u=a.CertificationRequestInfo;a.CertificationRequest.superclass.constructor.call(this),this.setByParam=function(c){this.params=c},this.sign=function(){var c=new u(this.params).tohex(),f=new E.crypto.Signature({alg:this.params.sigalg});f.init(this.params.sbjprvkey),f.updateHex(c);var h=f.sign();this.params.sighex=h},this.getPEM=function(){return Gn(this.tohex(),"CERTIFICATE REQUEST")},this.tohex=function(){var c=this.params,f=new E.asn1.csr.CertificationRequestInfo(this.params),h=new E.asn1.x509.AlgorithmIdentifier({name:c.sigalg});if(c.sighex==null&&c.sbjprvkey!=null&&this.sign(),c.sighex==null)throw new Error("sighex or sbjprvkey parameter not defined");var g=new n({hex:"00"+c.sighex}),p=new i({array:[f,h,g]});return p.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};pe(E.asn1.csr.CertificationRequest,E.asn1.ASN1Object);E.asn1.csr.CertificationRequestInfo=function(e){var t=E,r=t.asn1,n=r.DERBitString,i=r.DERSequence,a=r.DERInteger,s=r.DERUTF8String,u=r.DERTaggedObject,c=r.ASN1Util.newObject,f=r.csr,h=r.x509,g=h.X500Name,p=h.Extensions,d=h.SubjectPublicKeyInfo,w=f.AttributeList;f.CertificationRequestInfo.superclass.constructor.call(this),this.params=null,this.setByParam=function(b){b!=null&&(this.params=b)},this.tohex=function(){var b=this.params,m=[];if(m.push(new a({int:0})),m.push(new g(b.subject)),m.push(new d(Ct.getKey(b.sbjpubkey))),b.attrs!=null){var y=v(b.attrs),D=c({tag:{tage:"a0",obj:y}});m.push(D)}else if(b.extreq!=null){var C=new p(b.extreq),D=c({tag:{tage:"a0",obj:{seq:[{oid:"1.2.840.113549.1.9.14"},{set:[C]}]}}});m.push(D)}else m.push(new u({tag:"a0",explicit:!1,obj:new s({str:""})}));var F=new i({array:m});return F.tohex()},this.getEncodedHex=function(){return this.tohex()};function v(b){for(var m=Error,y=E.asn1.x509.Extensions,D=[],C=0;C<b.length;C++){var F=b[C],U=F.attr;if(U=="extensionRequest"){var k=new y(F.ext),S={seq:[{oid:"1.2.840.113549.1.9.14"},{set:[k]}]};D.push(S)}else if(U=="unstructuredName"){var S={seq:[{oid:"1.2.840.113549.1.9.2"},{set:F.names}]};D.push(S)}else if(U=="challengePassword"){var S={seq:[{oid:"1.2.840.113549.1.9.7"},{set:[{utf8str:F.password}]}]};D.push(S)}else throw new m("unknown CSR attribute")}return{set:D}}e!=null&&this.setByParam(e)};pe(E.asn1.csr.CertificationRequestInfo,E.asn1.ASN1Object);E.asn1.csr.AttributeList=function(e){function t(r){}};pe(E.asn1.csr.AttributeList,E.asn1.ASN1Object);E.asn1.csr.CSRUtil=new function(){};E.asn1.csr.CSRUtil.newCSRPEM=function(e){var t=Ct,r=E.asn1.csr,n=new r.CertificationRequest(e),i=n.getPEM();return i};E.asn1.csr.CSRUtil.getParam=function(e,t){var r=be,n=r.getV,i=r.getIdxbyList,a=r.getTLVbyList,s=r.getTLVbyListEx,u=r.getVbyListEx,c=function(y){var D=i(y,0,[0,3,0,0],"06");return n(y,D)!="2a864886f70d01090e"?null:a(y,0,[0,3,0,1,0],"30")},f={};if(e.indexOf("-----BEGIN CERTIFICATE REQUEST")==-1)throw new Error("argument is not PEM file");var h=Sr(e,"CERTIFICATE REQUEST");t&&(f.tbs=a(h,0,[0]));try{var g=s(h,0,[0,1]);if(g=="3000")f.subject={};else{var v=new We;f.subject=v.getX500Name(g)}}catch{}var p=s(h,0,[0,2]),d=Ct.getKey(p,null,"pkcs8pub");f.sbjpubkey=Ct.getPEM(d,"PKCS8PUB");var w=c(h),v=new We;w!=null&&(f.extreq=v.getExtParamArray(w));try{var b=s(h,0,[1],"30"),v=new We;f.sigalg=v.getAlgorithmIdentifierName(b)}catch{}try{var m=u(h,0,[2]);f.sighex=m}catch{}return f};E.asn1.csr.CSRUtil.verifySignature=function(e){try{var t=null;if(typeof e=="string"&&e.indexOf("-----BEGIN CERTIFICATE REQUEST")!=-1?t=E.asn1.csr.CSRUtil.getParam(e,!0):typeof e=="object"&&e.sbjpubkey!=null&&e.sigalg!=null&&e.sighex!=null&&e.tbs!=null&&(t=e),t==null)return!1;var r=new E.crypto.Signature({alg:t.sigalg});return r.init(t.sbjpubkey),r.updateHex(t.tbs),r.verify(t.sighex)}catch(n){return alert(n),!1}};(typeof E>"u"||!E)&&(E={});(typeof E.asn1>"u"||!E.asn1)&&(E.asn1={});(typeof E.asn1.ocsp>"u"||!E.asn1.ocsp)&&(E.asn1.ocsp={});E.asn1.ocsp.DEFAULT_HASH="sha1";E.asn1.ocsp.OCSPResponse=function(e){E.asn1.ocsp.OCSPResponse.superclass.constructor.call(this);var t=E.asn1.DEREnumerated,r=E.asn1.ASN1Util.newObject,n=E.asn1.ocsp.ResponseBytes,i=["successful","malformedRequest","internalError","tryLater","_not_used_","sigRequired","unauthorized"];this.params=null,this._getStatusCode=function(){var a=this.params.resstatus;return typeof a=="number"?a:typeof a!="string"?-1:i.indexOf(a)},this.setByParam=function(a){this.params=a},this.tohex=function(){var a=this.params,s=this._getStatusCode();if(s==-1)throw new Error("responseStatus not supported: "+a.resstatus);if(s!=0)return r({seq:[{enum:{int:s}}]}).tohex();var u=new n(a);return r({seq:[{enum:{int:0}},{tag:{tag:"a0",explicit:!0,obj:u}}]}).tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};pe(E.asn1.ocsp.OCSPResponse,E.asn1.ASN1Object);E.asn1.ocsp.ResponseBytes=function(e){E.asn1.ocsp.ResponseBytes.superclass.constructor.call(this);var t=E.asn1,r=t.DERSequence,n=t.DERObjectIdentifier,i=t.DEROctetString,a=t.ocsp.BasicOCSPResponse;this.params=null,this.setByParam=function(s){this.params=s},this.tohex=function(){var s=this.params;if(s.restype!="ocspBasic")throw new Error("not supported responseType: "+s.restype);var u=new a(s),c=[];c.push(new n({name:"ocspBasic"})),c.push(new i({hex:u.tohex()}));var f=new r({array:c});return f.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};pe(E.asn1.ocsp.ResponseBytes,E.asn1.ASN1Object);E.asn1.ocsp.BasicOCSPResponse=function(e){E.asn1.ocsp.BasicOCSPResponse.superclass.constructor.call(this);var t=Error,r=E.asn1,n=r.ASN1Object,i=r.DERSequence,a=r.DERGeneralizedTime,s=r.DERTaggedObject,u=r.DERBitString,c=r.x509.Extensions,f=r.x509.AlgorithmIdentifier,h=r.ocsp,g=h.ResponderID;_SingleResponseList=h.SingleResponseList,_ResponseData=h.ResponseData,this.params=null,this.setByParam=function(p){this.params=p},this.sign=function(){var p=this.params,d=p.tbsresp.tohex(),w=new E.crypto.Signature({alg:p.sigalg});w.init(p.reskey),w.updateHex(d),p.sighex=w.sign()},this.tohex=function(){var p=this.params;p.tbsresp==null&&(p.tbsresp=new _ResponseData(p)),p.sighex==null&&p.reskey!=null&&this.sign();var d=[];if(d.push(p.tbsresp),d.push(new f({name:p.sigalg})),d.push(new u({hex:"00"+p.sighex})),p.certs!=null&&p.certs.length!=null){for(var w=[],v=0;v<p.certs.length;v++){var b=p.certs[v],m=null;if(be.isASN1HEX(b))m=b;else if(b.match(/-----BEGIN/))m=Sr(b);else throw new t("certs["+v+"] not hex or PEM");w.push(new n({tlv:m}))}var y=new i({array:w});d.push(new s({tag:"a0",explicit:!0,obj:y}))}var D=new i({array:d});return D.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};pe(E.asn1.ocsp.BasicOCSPResponse,E.asn1.ASN1Object);E.asn1.ocsp.ResponseData=function(e){E.asn1.ocsp.ResponseData.superclass.constructor.call(this);var t=Error,r=E.asn1,n=r.DERSequence,i=r.DERGeneralizedTime,a=r.DERTaggedObject,s=r.x509.Extensions,u=r.ocsp,c=u.ResponderID;_SingleResponseList=u.SingleResponseList,this.params=null,this.tohex=function(){var f=this.params;f.respid!=null&&new t("respid not specified"),f.prodat!=null&&new t("prodat not specified"),f.array!=null&&new t("array not specified");var h=[];if(h.push(new c(f.respid)),h.push(new i(f.prodat)),h.push(new _SingleResponseList(f.array)),f.ext!=null){var g=new s(f.ext);h.push(new a({tag:"a1",explicit:!0,obj:g}))}var p=new n({array:h});return p.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(f){this.params=f},e!==void 0&&this.setByParam(e)};pe(E.asn1.ocsp.ResponseData,E.asn1.ASN1Object);E.asn1.ocsp.ResponderID=function(e){E.asn1.ocsp.ResponderID.superclass.constructor.call(this);var t=E,r=t.asn1,n=r.ASN1Util.newObject,i=r.x509.X500Name,a=t.lang.String.isHex,s=Error;this.params=null,this.tohex=function(){var u=this.params;if(u.key!=null){var c=null;if(typeof u.key=="string"){if(a(u.key)&&(c=u.key),u.key.match(/-----BEGIN CERTIFICATE/)){var f=new We(u.key),h=f.getExtSubjectKeyIdentifier();h!=null&&(c=h.kid.hex)}}else if(u.key instanceof We){var h=u.key.getExtSubjectKeyIdentifier();h!=null&&(c=h.kid.hex)}if(c==null)throw new s("wrong key member value");var g=n({tag:{tag:"a2",explicit:!0,obj:{octstr:{hex:c}}}});return g.tohex()}else if(u.name!=null){var p=null;if(typeof u.name=="string"&&u.name.match(/-----BEGIN CERTIFICATE/)){var f=new We(u.name);p=f.getSubject()}else u.name instanceof We?p=u.name.getSubject():typeof u.name=="object"&&(u.name.array!=null||u.name.str!=null)&&(p=u.name);if(p==null)throw new s("wrong name member value");var g=n({tag:{tag:"a1",explicit:!0,obj:new i(p)}});return g.tohex()}throw new s("key or name not specified")},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(u){this.params=u},e!==void 0&&this.setByParam(e)};pe(E.asn1.ocsp.ResponderID,E.asn1.ASN1Object);E.asn1.ocsp.SingleResponseList=function(e){E.asn1.ocsp.SingleResponseList.superclass.constructor.call(this);var t=E.asn1,r=t.DERSequence,n=t.ocsp.SingleResponse;this.params=null,this.tohex=function(){var i=this.params;if(typeof i!="object"||i.length==null)throw new Error("params not specified properly");for(var a=[],s=0;s<i.length;s++)a.push(new n(i[s]));var u=new r({array:a});return u.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(i){this.params=i},e!==void 0&&this.setByParam(e)};pe(E.asn1.ocsp.SingleResponseList,E.asn1.ASN1Object);E.asn1.ocsp.SingleResponse=function(e){var t=Error,r=E,n=r.asn1,i=n.DERSequence,a=n.DERGeneralizedTime,s=n.DERTaggedObject,u=n.ocsp,c=u.CertID,f=u.CertStatus,h=n.x509,g=h.Extensions;u.SingleResponse.superclass.constructor.call(this),this.params=null,this.tohex=function(){var p=this.params,d=[];if(p.certid==null)throw new t("certid unspecified");if(p.status==null)throw new t("status unspecified");if(p.thisupdate==null)throw new t("thisupdate unspecified");if(d.push(new c(p.certid)),d.push(new f(p.status)),d.push(new a(p.thisupdate)),p.nextupdate!=null){var w=new a(p.nextupdate);d.push(new s({tag:"a0",explicit:!0,obj:w}))}if(p.ext!=null){var v=new g(p.ext);d.push(new s({tag:"a1",explicit:!0,obj:v}))}var b=new i({array:d});return b.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(p){this.params=p},e!==void 0&&this.setByParam(e)};pe(E.asn1.ocsp.SingleResponse,E.asn1.ASN1Object);E.asn1.ocsp.CertID=function(e){var t=E,r=t.asn1,n=r.DEROctetString,i=r.DERInteger,a=r.DERSequence,s=r.x509,u=s.AlgorithmIdentifier,c=r.ocsp,f=c.DEFAULT_HASH,h=t.crypto,g=h.Util.hashHex,p=We,d=be,w=d.getVbyList;c.CertID.superclass.constructor.call(this),this.DEFAULT_HASH="sha1",this.params=null,this.setByValue=function(v,b,m,y){y==null&&(y=this.DEFAULT_HASH),this.params={alg:y,issname:v,isskey:b,sbjsn:m}},this.setByCert=function(v,b,m){m==null&&(m=this.DEFAULT_HASH),this.params={alg:m,issuerCert:v,subjectCert:b}},this.getParamByCerts=function(v,b,m){m==null&&(m=this.DEFAULT_HASH);var y=new p(v),D=new p(b),C=g(y.getSubjectHex(),m),F=y.getPublicKeyHex(),U=g(w(F,0,[1],"03",!0),m),k=D.getSerialNumberHex(),S={alg:m,issname:C,isskey:U,sbjsn:k};return S},this.tohex=function(){if(typeof this.params!="object")throw new Error("params not set");var v=this.params,b,m,y,D;if(v.alg==null?D=this.DEFAULT_HASH:D=v.alg,v.issuerCert!=null&&v.subjectCert!=null){var C=this.getParamByCerts(v.issuerCert,v.subjectCert,D);b=C.issname,m=C.isskey,y=C.sbjsn}else if(v.issname!=null&&v.isskey!=null&&v.sbjsn!=null)b=v.issname,m=v.isskey,y=v.sbjsn;else throw new Error("required param members not defined");var F=new u({name:D}),U=new n({hex:b}),k=new n({hex:m}),S=new i({hex:y}),B=new a({array:[F,U,k,S]});return this.hTLV=B.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};pe(E.asn1.ocsp.CertID,E.asn1.ASN1Object);E.asn1.ocsp.CertStatus=function(e){E.asn1.ocsp.CertStatus.superclass.constructor.call(this),this.params=null,this.tohex=function(){var t=this.params;if(t.status=="good")return"8000";if(t.status=="unknown")return"8200";if(t.status=="revoked"){var r=[{gentime:{str:t.time}}];t.reason!=null&&r.push({tag:{tag:"a0",explicit:!0,obj:{enum:{int:t.reason}}}});var n={tag:"a1",explicit:!1,obj:{seq:r}};return E.asn1.ASN1Util.newObject({tag:n}).tohex()}throw new Error("bad status")},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(t){this.params=t},e!==void 0&&this.setByParam(e)};pe(E.asn1.ocsp.CertStatus,E.asn1.ASN1Object);E.asn1.ocsp.Request=function(e){var t=E,r=t.asn1,n=r.DERSequence,i=r.ocsp;if(i.Request.superclass.constructor.call(this),this.dReqCert=null,this.dExt=null,this.tohex=function(){var s=[];if(this.dReqCert===null)throw"reqCert not set";s.push(this.dReqCert);var u=new n({array:s});return this.hTLV=u.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},typeof e<"u"){var a=new i.CertID(e);this.dReqCert=a}};pe(E.asn1.ocsp.Request,E.asn1.ASN1Object);E.asn1.ocsp.TBSRequest=function(e){var t=E,r=t.asn1,n=r.DERSequence,i=r.ocsp;i.TBSRequest.superclass.constructor.call(this),this.version=0,this.dRequestorName=null,this.dRequestList=[],this.dRequestExt=null,this.setRequestListByParam=function(a){for(var s=[],u=0;u<a.length;u++){var c=new i.Request(a[0]);s.push(c)}this.dRequestList=s},this.tohex=function(){var a=[];if(this.version!==0)throw"not supported version: "+this.version;if(this.dRequestorName!==null)throw"requestorName not supported";var s=new n({array:this.dRequestList});if(a.push(s),this.dRequestExt!==null)throw"requestExtensions not supported";var u=new n({array:a});return this.hTLV=u.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&e.reqList!==void 0&&this.setRequestListByParam(e.reqList)};pe(E.asn1.ocsp.TBSRequest,E.asn1.ASN1Object);E.asn1.ocsp.OCSPRequest=function(e){var t=E,r=t.asn1,n=r.DERSequence,i=r.ocsp;if(i.OCSPRequest.superclass.constructor.call(this),this.dTbsRequest=null,this.dOptionalSignature=null,this.tohex=function(){var s=[];if(this.dTbsRequest!==null)s.push(this.dTbsRequest);else throw"tbsRequest not set";if(this.dOptionalSignature!==null)throw"optionalSignature not supported";var u=new n({array:s});return this.hTLV=u.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&e.reqList!==void 0){var a=new i.TBSRequest(e);this.dTbsRequest=a}};pe(E.asn1.ocsp.OCSPRequest,E.asn1.ASN1Object);E.asn1.ocsp.OCSPUtil={};E.asn1.ocsp.OCSPUtil.getRequestHex=function(e,t,r){var n=E,i=n.asn1,a=i.ocsp;r===void 0&&(r=a.DEFAULT_HASH);var s={alg:r,issuerCert:e,subjectCert:t},u=new a.OCSPRequest({reqList:[s]});return u.tohex()};E.asn1.ocsp.OCSPUtil.getOCSPResponseInfo=function(e){var t=be,r=t.getVbyList,n=t.getVbyListEx,i=t.getIdxbyList,a=t.getIdxbyListEx,s=t.getV,u={};try{var c=n(e,0,[0],"0a");u.responseStatus=parseInt(c,16)}catch{}if(u.responseStatus!==0)return u;try{var f=i(e,0,[1,0,1,0,0,2,0,1]);e.substr(f,2)==="80"?u.certStatus="good":e.substr(f,2)==="a1"?(u.certStatus="revoked",u.revocationTime=Qt(r(e,f,[0]))):e.substr(f,2)==="82"&&(u.certStatus="unknown")}catch{}try{var h=i(e,0,[1,0,1,0,0,2,0,2]);u.thisUpdate=Qt(s(e,h))}catch{}try{var g=i(e,0,[1,0,1,0,0,2,0,3]);e.substr(g,2)==="a0"&&(u.nextUpdate=Qt(r(e,g,[0])))}catch{}return u};E.asn1.ocsp.OCSPParser=function(){var e=Error,t=We,r=new t,n=be,i=n.getV,a=n.getTLV,s=n.getIdxbyList,u=n.getVbyList,c=n.getTLVbyList,f=n.getVbyListEx,h=n.getTLVbyListEx,g=n.getChildIdx;this.getOCSPRequest=function(p){var d=g(p,0);if(d.length!=1&&d.length!=2)throw new e("wrong number elements: "+d.length);var w=this.getTBSRequest(a(p,d[0]));return w},this.getTBSRequest=function(p){var d={},w=h(p,0,[0],"30");d.array=this.getRequestList(w);var v=h(p,0,["[2]",0],"30");return v!=null&&(d.ext=r.getExtParamArray(v)),d},this.getRequestList=function(p){for(var d=[],w=g(p,0),v=0;v<w.length;v++){var p=a(p,w[v]);d.push(this.getRequest(p))}return d},this.getRequest=function(p){var d=g(p,0);if(d.length!=1&&d.length!=2)throw new e("wrong number elements: "+d.length);var w=this.getCertID(a(p,d[0]));if(d.length==2){var v=s(p,0,[1,0]);w.ext=r.getExtParamArray(a(p,v))}return w},this.getCertID=function(p){var d=g(p,0);if(d.length!=4)throw new e("wrong number elements: "+d.length);var w=new t,v={};return v.alg=w.getAlgorithmIdentifierName(a(p,d[0])),v.issname=i(p,d[1]),v.isskey=i(p,d[2]),v.sbjsn=i(p,d[3]),v},this.getOCSPResponse=function(p){var d=g(p,0),w,v=i(p,d[0]),b=parseInt(v);if(d.length==1)return{resstatus:b};var m=c(p,0,[1,0]);return w=this.getResponseBytes(m),w.resstatus=b,w},this.getResponseBytes=function(p){var d=g(p,0),w,v=c(p,0,[1,0]);w=this.getBasicOCSPResponse(v);var b=i(p,d[0]);return w.restype=E.asn1.x509.OID.oid2name(_0(b)),w},this.getBasicOCSPResponse=function(p){var d=g(p,0),w;w=this.getResponseData(a(p,d[0]));var v=new We;w.alg=v.getAlgorithmIdentifierName(a(p,d[1]));var b=i(p,d[2]);w.sighex=b.substr(2);var m=f(p,0,["[0]"]);if(m!=null){for(var y=g(m,0),D=[],C=0;C<y.length;C++){var F=a(m,y[C]);D.push(F)}w.certs=D}return w},this.getResponseData=function(p){var d=g(p,0),w=d.length,v={},b=0;p.substr(d[0],2)=="a0"&&b++,v.respid=this.getResponderID(a(p,d[b++]));var m=i(p,d[b++]);if(v.prodat=Qt(m),v.array=this.getSingleResponseList(a(p,d[b++])),p.substr(d[w-1],2)=="a1"){var y=c(p,d[w-1],[0]),D=new We;v.ext=D.getExtParamArray(y)}return v},this.getResponderID=function(p){var d={};if(p.substr(0,2)=="a2"){var w=u(p,0,[0]);d.key=w}if(p.substr(0,2)=="a1"){var v=c(p,0,[0]),b=new We;d.name=b.getX500Name(v)}return d},this.getSingleResponseList=function(p){for(var d=g(p,0),w=[],v=0;v<d.length;v++){var b=this.getSingleResponse(a(p,d[v]));w.push(b)}return w},this.getSingleResponse=function(p){var d=g(p,0),w={},v=this.getCertID(a(p,d[0]));w.certid=v;var b=this.getCertStatus(a(p,d[1]));if(w.status=b,p.substr(d[2],2)=="18"){var m=i(p,d[2]);w.thisupdate=Qt(m)}for(var y=3;y<d.length;y++){if(p.substr(d[y],2)=="a0"){var D=u(p,d[y],[0],"18");w.nextupdate=Qt(D)}if(p.substr(d[y],2)=="a1"){var C=new We,F=c(p,0,[y,0]);w.ext=C.getExtParamArray(F)}}return w},this.getCertStatus=function(p){var d={};if(p=="8000")return{status:"good"};if(p=="8200")return{status:"unknown"};if(p.substr(0,2)=="a1"){d.status="revoked";var w=u(p,0,[0]),v=Qt(w);d.time=v}return d}};var E;(typeof E>"u"||!E)&&(E={});(typeof E.lang>"u"||!E.lang)&&(E.lang={});E.lang.String=function(){};function Oy(e){for(var t=new Array,r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}function Ty(e){for(var t="",r=0;r<e.length;r++)t=t+String.fromCharCode(e[r]);return t}function v0(e){for(var t="",r=0;r<e.length;r++){var n=e[r].toString(16);n.length==1&&(n="0"+n),t=t+n}return t}function Ii(e){return v0(Oy(e))}function dP(e){return su(Ii(e))}function pP(e){return ul(su(Ii(e)))}function gP(e){return Ty(Iy(Nf(e)))}function ul(e){return e=e.replace(/\=/g,""),e=e.replace(/\+/g,"-"),e=e.replace(/\//g,"_"),e}function Nf(e){return e.length%4==2?e=e+"==":e.length%4==3&&(e=e+"="),e=e.replace(/-/g,"+"),e=e.replace(/_/g,"/"),e}function rn(e){return e.length%2==1&&(e="0"+e),ul(su(e))}function Er(e){return ol(Nf(e))}var Of,Ts;typeof Buffer=="function"?(Of=function(e){return ul(Buffer.from(e,"utf8").toString("base64"))},Ts=function(e){return Buffer.from(Nf(e),"base64").toString("utf8")}):(Of=function(e){return rn(A0(b0(e)))},Ts=function(e){return decodeURIComponent(y0(Er(e)))});function mP(e){return su(A0(b0(e)))}function vP(e){return decodeURIComponent(y0(ol(e)))}function w0(e){return A0(b0(e)).toLowerCase()}function Qt(e){try{return decodeURIComponent(y0(e))}catch{return null}}function wP(e){return Qt(EP(e))}function EP(e){for(var t=e.match(/.{1,2}/g),r=[],n=0;n<t.length;n++){var i=parseInt(t[n],16);161<=i&&i<=191?(r.push("c2"),r.push(t[n])):192<=i&&i<=255?(r.push("c3"),r.push((i-64).toString(16))):r.push(t[n])}return r.join("")}function Bi(e){for(var t="",r=0;r<e.length-1;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t}function fa(e){for(var t="",r=0;r<e.length;r++)t+=("0"+e.charCodeAt(r).toString(16)).slice(-2);return t}function nm(e){return su(e)}function AP(e){return E0(nm(e),64)}function E0(e,t){return e=e.replace(new RegExp("(.{"+t+"})","g"),`$1\r
`),e=e.replace(/\s+$/,""),e}function Ny(e){var t=e.replace(/[^0-9A-Za-z\/+=]*/g,""),r=ol(t);return r}function yP(e,t){return"-----BEGIN "+t+`-----\r
`+E0(e,64)+`\r
-----END `+t+`-----\r
`}function Gn(e,t){return"-----BEGIN "+t+`-----\r
`+E0(nm(e),64)+`\r
-----END `+t+`-----\r
`}function Sr(e,t){if(e.indexOf("-----BEGIN ")==-1)throw new Error("can't find PEM header");return t!==void 0?(e=e.replace(new RegExp("^[^]*-----BEGIN "+t+"-----"),""),e=e.replace(new RegExp("-----END "+t+"-----[^]*$"),"")):(e=e.replace(/^[^]*-----BEGIN [^-]+-----/,""),e=e.replace(/-----END [^-]+-----[^]*$/,"")),Ny(e)}function bP(e){return e.indexOf("-----BEGIN ")==-1||e.indexOf("-----END ")==-1?null:(e=e.replace(/^[\s\S]*?-----BEGIN [^-]+-----/m,""),e=e.replace(/-----END [\s\S]+$/m,""),e=e.replace(/\s+/g,""),e.match(/^[0-9a-zA-Z+/=]+$/)?e:null)}function _P(e){if(e.length%2!=0)throw"input is not even length";if(e.match(/^[0-9A-Fa-f]+$/)==null)throw"input is not hexadecimal";for(var t=new ArrayBuffer(e.length/2),r=new DataView(t),n=0;n<e.length/2;n++)r.setUint8(n,parseInt(e.substr(n*2,2),16));return t}function CP(e){for(var t="",r=new DataView(e),n=0;n<e.byteLength;n++)t+=("00"+r.getUint8(n).toString(16)).slice(-2);return t}function im(e){var t,r,n,i,a,s,u,c,f,h,g,p;if(e=Ly(e),p=e.match(/^(\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/),p)return t=parseInt(p[1]),r=parseInt(p[2])-1,n=parseInt(p[3]),i=parseInt(p[4]),a=parseInt(p[5]),s=parseInt(p[6]),u=0,h=p[7],h!==""&&(g=(h.substr(1)+"00").substr(0,3),u=parseInt(g)),Date.UTC(t,r,n,i,a,s,u);throw new Error("unsupported zulu format: "+e)}function DP(e){var t=new Date(e),r=("0000"+t.getUTCFullYear()).slice(-4),n=("00"+(t.getUTCMonth()+1)).slice(-2),i=("00"+t.getUTCDate()).slice(-2),a=("00"+t.getUTCHours()).slice(-2),s=("00"+t.getUTCMinutes()).slice(-2),u=("00"+t.getUTCSeconds()).slice(-2),c=("000"+t.getUTCMilliseconds()).slice(-3);return c=c.replace(/0+$/,""),c=c!=""?"."+c:c,r+n+i+a+s+u+c+"Z"}function ky(e){return Math.round(im(e)/1e3)}function FP(e){return new Date(im(e))}function SP(e,t,r){var n,i=e.getUTCFullYear();if(t){if(i<1950||2049<i)throw"not proper year for UTCTime: "+i;n=(""+i).slice(-2)}else n=("000"+i).slice(-4);if(n+=("0"+(e.getUTCMonth()+1)).slice(-2),n+=("0"+e.getUTCDate()).slice(-2),n+=("0"+e.getUTCHours()).slice(-2),n+=("0"+e.getUTCMinutes()).slice(-2),n+=("0"+e.getUTCSeconds()).slice(-2),r){var a=e.getUTCMilliseconds();a!==0&&(a=("00"+a).slice(-3),a=a.replace(/0+$/g,""),n+="."+a)}return n+="Z",n}function Ly(e){return e.match(/^[0-9]{12}Z$/)||e.match(/^[0-9]{12}[.][0-9]*Z$/)?e.match(/^[0-4]/)?"20"+e:"19"+e:e}function A0(e){return e.replace(/%/g,"")}function y0(e){return e.replace(/(..)/g,"%$1")}function Xg(e){var t="malformed IPv6 address";if(!e.match(/^[0-9A-Fa-f:]+$/))throw t;e=e.toLowerCase();var r=e.split(":").length-1;if(r<2)throw t;var n=":".repeat(7-r+2);e=e.replace("::",n);var i=e.split(":");if(i.length!=8)throw t;for(var a=0;a<8;a++)i[a]=("0000"+i[a]).slice(-4);return i.join("")}function Jg(e){if(!e.match(/^[0-9A-Fa-f]{32}$/))throw new Error("malformed IPv6 address: "+e);e=e.toLowerCase();var t=e.match(/.{1,4}/g);t=t.map(function(i){return i.replace(/^0+/,"")}),t=t.map(function(i){return i==""?"0":i}),e=":"+t.join(":")+":";var r=e.match(/:(0:){2,}/g);if(r==null)return e.slice(1,-1);var n=r.sort().slice(-1)[0];return e=e.replace(n.substr(0,n.length-1),":"),e.substr(0,2)!="::"&&(e=e.substr(1)),e.substr(-2,2)!="::"&&(e=e.substr(0,e.length-1)),e}function h0(e){var t=new Error("malformed hex value");if(!e.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw t;if(e.length==8){var r;try{return r=parseInt(e.substr(0,2),16)+"."+parseInt(e.substr(2,2),16)+"."+parseInt(e.substr(4,2),16)+"."+parseInt(e.substr(6,2),16),r}catch{throw t}}else if(e.length==16)try{return h0(e.substr(0,8))+"/"+Fy(e.substr(8))}catch{throw t}else{if(e.length==32)return Jg(e);if(e.length==64){try{return Jg(e.substr(0,32))+"/"+Fy(e.substr(32))}catch{throw t}return}else return e}}function Fy(e){var t=new Error("malformed mask"),r;try{r=new ee(e,16).toString(2)}catch{throw t}if(!r.match(/^1*0*$/))throw t;return r.replace(/0+$/,"").length}function sm(e){var t=new Error("malformed IP address");if(e=e.toLowerCase(e),!e.match(/^[0-9a-f.:/]+$/))throw t;if(e.match(/^[0-9.]+$/)){var r=e.split(".");if(r.length!==4)throw t;var n="";try{for(var i=0;i<4;i++){var a=parseInt(r[i]);n+=("0"+a.toString(16)).slice(-2)}return n}catch{throw t}}else if(e.match(/^[0-9.]+\/[0-9]+$/)){var s=e.split("/");return sm(s[0])+Sy(parseInt(s[1]),32)}else{if(e.match(/^[0-9a-f:]+$/)&&e.indexOf(":")!==-1)return Xg(e);if(e.match(/^[0-9a-f:]+\/[0-9]+$/)&&e.indexOf(":")!==-1){var s=e.split("/");return Xg(s[0])+Sy(parseInt(s[1]),128)}else throw t}}function Sy(e,t){if(t==32&&e==0)return"00000000";if(t==128&&e==0)return"00000000000000000000000000000000";var r=Array(e+1).join("1")+Array(t-e+1).join("0");return new ee(r,2).toString(16)}function am(e){function t(i){var a=parseInt(i.substr(0,2),16),s=parseInt(i.substr(2),16);if(a==0&s<128)return String.fromCharCode(s);if(a<8){var u=192|(a&7)<<3|(s&192)>>6,c=128|s&63;return Qt(u.toString(16)+c.toString(16))}var u=224|(a&240)>>4,c=128|(a&15)<<2|(s&192)>>6,f=128|s&63;return Qt(u.toString(16)+c.toString(16)+f.toString(16))}var r=e.match(/.{4}/g),n=r.map(t);return n.join("")}function b0(e){for(var t=encodeURIComponent(e),r="",n=0;n<t.length;n++)t[n]=="%"?(r=r+t.substr(n,3),n=n+2):r=r+"%"+Ii(t[n]);return r}function IP(e){return e=e.replace(/\r\n/mg,`
`),e}function BP(e){return e=e.replace(/\r\n/mg,`
`),e=e.replace(/\n/mg,`\r
`),e}E.lang.String.isInteger=function(e){return e.match(/^[0-9]+$/)?!0:!!e.match(/^-[0-9]+$/)};E.lang.String.isHex=function(e){return Uy(e)};function Uy(e){return!!(e.length%2==0&&(e.match(/^[0-9a-f]+$/)||e.match(/^[0-9A-F]+$/)))}E.lang.String.isBase64=function(e){return e=e.replace(/\s+/g,""),!!(e.match(/^[0-9A-Za-z+\/]+={0,3}$/)&&e.length%4==0)};E.lang.String.isBase64URL=function(e){return e.match(/[+/=]/)?!1:(e=Nf(e),E.lang.String.isBase64(e))};function um(e){return!!e.match(/^[0-9A-Za-z-_.]+$/)}E.lang.String.isIntegerArray=function(e){return e=e.replace(/\s+/g,""),!!e.match(/^\[[0-9,]+\]$/)};E.lang.String.isPrintable=function(e){return e.match(/^[0-9A-Za-z '()+,-./:=?]*$/)!==null};E.lang.String.isIA5=function(e){return e.match(/^[\x20-\x21\x23-\x7f]*$/)!==null};E.lang.String.isMail=function(e){return e.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/)!==null};function Zg(e){return e.length%2==1?"0"+e:e.substr(0,1)>"7"?"00"+e:e}function $P(e){e=e.replace(/^\s*\[\s*/,""),e=e.replace(/\s*\]\s*$/,""),e=e.replace(/\s*/g,"");try{var t=e.split(/,/).map(function(r,n,i){var a=parseInt(r);if(a<0||255<a)throw"integer not in range 0-255";var s=("00"+a.toString(16)).slice(-2);return s}).join("");return t}catch(r){throw"malformed integer array string: "+r}}var RP=function(e,t){var r=e.length;e.length>t.length&&(r=t.length);for(var n=0;n<r;n++)if(e.charCodeAt(n)!=t.charCodeAt(n))return n;return e.length!=t.length?r:-1};function jy(e){var t=function(u){var c=u.toString(16);return c.length==1&&(c="0"+c),c},r=function(u){var c="",f=parseInt(u,10),h=f.toString(2),g=7-h.length%7;g==7&&(g=0);for(var p="",d=0;d<g;d++)p+="0";h=p+h;for(var d=0;d<h.length-1;d+=7){var w=h.substr(d,7);d!=h.length-7&&(w="1"+w),c+=t(parseInt(w,2))}return c};try{if(!e.match(/^[0-9.]+$/))return null;var n="",i=e.split("."),a=parseInt(i[0],10)*40+parseInt(i[1],10);n+=t(a),i.splice(0,2);for(var s=0;s<i.length;s++)n+=r(i[s]);return n}catch{return null}}function _0(e){if(!Uy(e))return null;try{var t=[],r=e.substr(0,2),n=parseInt(r,16);t[0]=new String(Math.floor(n/40)),t[1]=new String(n%40);for(var i=e.substr(2),a=[],s=0;s<i.length/2;s++)a.push(parseInt(i.substr(s*2,2),16));for(var u=[],c="",s=0;s<a.length;s++)a[s]&128?c=c+d0((a[s]&127).toString(2),7):(c=c+d0((a[s]&127).toString(2),7),u.push(new String(parseInt(c,2))),c="");var f=t.join(".");return u.length>0&&(f=f+"."+u.join(".")),f}catch{return null}}function Hy(e){var t=new ee(String(e),10);return kf(t)}function kf(e){var t=e.toString(16);if(t.substr(0,1)!="-")return t.length%2==1?t="0"+t:t.match(/^[0-7]/)||(t="00"+t),t;var r=t.substr(1),n=r.length;n%2==1?n+=1:t.match(/^[0-7]/)||(n+=2);for(var i="",a=0;a<n;a++)i+="f";var s=new ee(i,16),u=s.xor(e).add(ee.ONE);return t=u.toString(16).replace(/^-/,""),t}var d0=function(e,t,r){return r==null&&(r="0"),e.length>=t?e:new Array(t-e.length+1).join(r)+e};function My(e){if(e.length%2!=0||(e=e.toLowerCase(),e.match(/^[0-9a-f]+$/)==null))return-1;try{var t=e.substr(0,2);if(t=="00")return parseInt(e.substr(2),16);var r=parseInt(t,16);if(r>7)return-1;var n=e.substr(2),i=parseInt(n,16).toString(2);i=="0"&&(i="00000000"),i=i.slice(0,0-r);var a=parseInt(i,2);return a==NaN?-1:a}catch{return-1}}function qy(e){if(typeof e!="number"||e<0)return null;var t=Number(e).toString(2),r=8-t.length%8;r==8&&(r=0),t=t+d0("",r,"0");var n=parseInt(t,2).toString(16);n.length%2==1&&(n="0"+n);var i="0"+r;return i+n}function Vy(e){if(typeof e!="string"||e.length%2!=0||!e.match(/^[0-9a-f]+$/))return null;try{var t=parseInt(e.substr(0,2),16);if(t<0||7<t)return null;for(var r=e.substr(2),n="",i=0;i<r.length;i+=2){var a=r.substr(i,2),s=parseInt(a,16).toString(2);s=("0000000"+s).slice(-8),n+=s}return n.substr(0,n.length-t)}catch{return null}}function xP(e){if(typeof e!="string"||e.match(/^[01]+$/)==null)return null;try{var t=parseInt(e,2);return qy(t)}catch{return null}}function p0(e,t){for(var r=0,n=0;n<e.length;n++)r|=1<<t[e[n]];for(var i=r.toString(2),a="",n=i.length-1;n>=0;n--)a+=i[n];return a}function ur(e,n,r){if(typeof e=="object"){for(var n=String(n).split("."),i=0;i<n.length&&e;i++){var a=n[i];a.match(/^[0-9]+$/)&&(a=parseInt(a)),e=e[a]}return e||e===!1?e:r}}function pe(e,t){var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e,e.superclass=t.prototype,t.prototype.constructor==Object.prototype.constructor&&(t.prototype.constructor=t)}(typeof E>"u"||!E)&&(E={});(typeof E.crypto>"u"||!E.crypto)&&(E.crypto={});E.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHAwithRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:Se.algo.MD5,sha1:Se.algo.SHA1,sha224:Se.algo.SHA224,sha256:Se.algo.SHA256,sha384:Se.algo.SHA384,sha512:Se.algo.SHA512,ripemd160:Se.algo.RIPEMD160},this.getDigestInfoHex=function(e,t){if(typeof this.DIGESTINFOHEAD[t]>"u")throw"alg not supported in Util.DIGESTINFOHEAD: "+t;return this.DIGESTINFOHEAD[t]+e},this.getPaddedDigestInfoHex=function(e,t,r){var n=this.getDigestInfoHex(e,t),i=r/4;if(n.length+22>i)throw"key is too short for SigAlg: keylen="+r+","+t;for(var a="0001",s="00"+n,u="",c=i-a.length-s.length,f=0;f<c;f+=2)u+="ff";var h=a+u+s;return h},this.hashString=function(e,t){var r=new E.crypto.MessageDigest({alg:t});return r.digestString(e)},this.hashHex=function(e,t){var r=new E.crypto.MessageDigest({alg:t});return r.digestHex(e)},this.sha1=function(e){return this.hashString(e,"sha1")},this.sha256=function(e){return this.hashString(e,"sha256")},this.sha256Hex=function(e){return this.hashHex(e,"sha256")},this.sha512=function(e){return this.hashString(e,"sha512")},this.sha512Hex=function(e){return this.hashHex(e,"sha512")},this.isKey=function(e){return e instanceof rt||e instanceof E.crypto.DSA||e instanceof E.crypto.ECDSA}};E.crypto.Util.md5=function(e){var t=new E.crypto.MessageDigest({alg:"md5",prov:"cryptojs"});return t.digestString(e)};E.crypto.Util.ripemd160=function(e){var t=new E.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"});return t.digestString(e)};E.crypto.Util.SECURERANDOMGEN=new fl;E.crypto.Util.getRandomHexOfNbytes=function(e){var t=new Array(e);return E.crypto.Util.SECURERANDOMGEN.nextBytes(t),v0(t)};E.crypto.Util.getRandomBigIntegerOfNbytes=function(e){return new ee(E.crypto.Util.getRandomHexOfNbytes(e),16)};E.crypto.Util.getRandomHexOfNbits=function(e){var t=e%8,r=(e-t)/8,n=new Array(r+1);return E.crypto.Util.SECURERANDOMGEN.nextBytes(n),n[0]=(255<<t&255^255)&n[0],v0(n)};E.crypto.Util.getRandomBigIntegerOfNbits=function(e){return new ee(E.crypto.Util.getRandomHexOfNbits(e),16)};E.crypto.Util.getRandomBigIntegerZeroToMax=function(e){for(var t=e.bitLength();;){var r=E.crypto.Util.getRandomBigIntegerOfNbits(t);if(e.compareTo(r)!=-1)return r}};E.crypto.Util.getRandomBigIntegerMinToMax=function(e,t){var r=e.compareTo(t);if(r==1)throw"biMin is greater than biMax";if(r==0)return e;var n=t.subtract(e),i=E.crypto.Util.getRandomBigIntegerZeroToMax(n);return i.add(e)};E.crypto.MessageDigest=function(e){var t=null,r=null,n=null;this.setAlgAndProvider=function(i,a){if(i=E.crypto.MessageDigest.getCanonicalAlgName(i),i!==null&&a===void 0&&(a=E.crypto.Util.DEFAULTPROVIDER[i]),":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(i)!=-1&&a=="cryptojs"){try{this.md=E.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[i].create()}catch(s){throw"setAlgAndProvider hash alg set fail alg="+i+"/"+s}this.updateString=function(s){this.md.update(s)},this.updateHex=function(s){var u=Se.enc.Hex.parse(s);this.md.update(u)},this.digest=function(){var s=this.md.finalize();return s.toString(Se.enc.Hex)},this.digestString=function(s){return this.updateString(s),this.digest()},this.digestHex=function(s){return this.updateHex(s),this.digest()}}if(":sha256:".indexOf(i)!=-1&&a=="sjcl"){try{this.md=new sjcl.hash.sha256}catch(s){throw"setAlgAndProvider hash alg set fail alg="+i+"/"+s}this.updateString=function(s){this.md.update(s)},this.updateHex=function(s){var u=sjcl.codec.hex.toBits(s);this.md.update(u)},this.digest=function(){var s=this.md.finalize();return sjcl.codec.hex.fromBits(s)},this.digestString=function(s){return this.updateString(s),this.digest()},this.digestHex=function(s){return this.updateHex(s),this.digest()}}},this.updateString=function(i){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(i){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(i){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(i){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},e!==void 0&&e.alg!==void 0&&(this.algName=e.alg,e.prov===void 0&&(this.provName=E.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))};E.crypto.MessageDigest.getCanonicalAlgName=function(e){return typeof e=="string"&&(e=e.toLowerCase(),e=e.replace(/-/,"")),e};E.crypto.MessageDigest.getHashLength=function(e){var t=E.crypto.MessageDigest,r=t.getCanonicalAlgName(e);if(t.HASHLENGTH[r]===void 0)throw"not supported algorithm: "+e;return t.HASHLENGTH[r]};E.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20};E.crypto.Mac=function(e){var t=null,r=null,n=null,i=null,a=null;this.setAlgAndProvider=function(s,u){if(s=s.toLowerCase(),s==null&&(s="hmacsha1"),s=s.toLowerCase(),s.substr(0,4)!="hmac")throw"setAlgAndProvider unsupported HMAC alg: "+s;u===void 0&&(u=E.crypto.Util.DEFAULTPROVIDER[s]),this.algProv=s+"/"+u;var c=s.substr(4);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(c)!=-1&&u=="cryptojs"){try{var f=E.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[c];this.mac=Se.algo.HMAC.create(f,this.pass)}catch(h){throw"setAlgAndProvider hash alg set fail hashAlg="+c+"/"+h}this.updateString=function(h){this.mac.update(h)},this.updateHex=function(h){var g=Se.enc.Hex.parse(h);this.mac.update(g)},this.doFinal=function(){var h=this.mac.finalize();return h.toString(Se.enc.Hex)},this.doFinalString=function(h){return this.updateString(h),this.doFinal()},this.doFinalHex=function(h){return this.updateHex(h),this.doFinal()}}},this.updateString=function(s){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(s){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(s){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(s){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(s){if(typeof s=="string"){var u=s;(s.length%2==1||!s.match(/^[0-9A-Fa-f]+$/))&&(u=fa(s)),this.pass=Se.enc.Hex.parse(u);return}if(typeof s!="object")throw"KJUR.crypto.Mac unsupported password type: "+s;var u=null;if(s.hex!==void 0){if(s.hex.length%2!=0||!s.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+s.hex;u=s.hex}if(s.utf8!==void 0&&(u=w0(s.utf8)),s.rstr!==void 0&&(u=fa(s.rstr)),s.b64!==void 0&&(u=ol(s.b64)),s.b64u!==void 0&&(u=Er(s.b64u)),u==null)throw"KJUR.crypto.Mac unsupported password type: "+s;this.pass=Se.enc.Hex.parse(u)},e!==void 0&&(e.pass!==void 0&&this.setPassword(e.pass),e.alg!==void 0&&(this.algName=e.alg,e.prov===void 0&&(this.provName=E.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))};E.crypto.Signature=function(e){var t=null,r=null,n=null,i=null,a=null,s=null,u=null,c=null,f=null,h=null,g=-1,p=null,d=null,w=null,v=null,b=null;if(this._setAlgNames=function(){var m=this.algName.match(/^(.+)with(.+)$/);m&&(this.mdAlgName=m[1].toLowerCase(),this.pubkeyAlgName=m[2].toLowerCase(),this.pubkeyAlgName=="rsaandmgf1"&&this.mdAlgName=="sha"&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(m,y){for(var D="",C=y/4-m.length,F=0;F<C;F++)D=D+"0";return D+m},this.setAlgAndProvider=function(m,y){if(this._setAlgNames(),y!="cryptojs/jsrsa")throw new Error("provider not supported: "+y);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)!=-1){try{this.md=new E.crypto.MessageDigest({alg:this.mdAlgName})}catch(D){throw new Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+D)}this.init=function(D,C){var F=null;try{C===void 0?F=Ct.getKey(D):F=Ct.getKey(D,C)}catch(U){throw"init failed:"+U}if(F.isPrivate===!0)this.prvKey=F,this.state="SIGN";else if(F.isPublic===!0)this.pubKey=F,this.state="VERIFY";else throw"init failed.:"+F},this.updateString=function(D){this.md.updateString(D)},this.updateHex=function(D){this.md.updateHex(D)},this.sign=function(){if(this.sHashHex=this.md.digest(),this.prvKey===void 0&&this.ecprvhex!==void 0&&this.eccurvename!==void 0&&E.crypto.ECDSA!==void 0&&(this.prvKey=new E.crypto.ECDSA({curve:this.eccurvename,prv:this.ecprvhex})),this.prvKey instanceof rt&&this.pubkeyAlgName==="rsaandmgf1")this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof rt&&this.pubkeyAlgName==="rsa")this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof E.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else if(this.prvKey instanceof E.crypto.DSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;return this.hSign},this.signString=function(D){return this.updateString(D),this.sign()},this.signHex=function(D){return this.updateHex(D),this.sign()},this.verify=function(D){if(this.sHashHex=this.md.digest(),this.pubKey===void 0&&this.ecpubhex!==void 0&&this.eccurvename!==void 0&&E.crypto.ECDSA!==void 0&&(this.pubKey=new E.crypto.ECDSA({curve:this.eccurvename,pub:this.ecpubhex})),this.pubKey instanceof rt&&this.pubkeyAlgName==="rsaandmgf1")return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,D,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof rt&&this.pubkeyAlgName==="rsa")return this.pubKey.verifyWithMessageHash(this.sHashHex,D);if(E.crypto.ECDSA!==void 0&&this.pubKey instanceof E.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,D);if(E.crypto.DSA!==void 0&&this.pubKey instanceof E.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,D);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(m,y){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(m){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(m){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(m){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(m){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(m){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=e,e!==void 0&&(e.alg!==void 0&&(this.algName=e.alg,e.prov===void 0?this.provName=E.crypto.Util.DEFAULTPROVIDER[this.algName]:this.provName=e.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),e.psssaltlen!==void 0&&(this.pssSaltLen=e.psssaltlen),e.prvkeypem!==void 0)){if(e.prvkeypas!==void 0)throw"both prvkeypem and prvkeypas parameters not supported";try{var t=Ct.getKey(e.prvkeypem);this.init(t)}catch(m){throw"fatal error to load pem private key: "+m}}};E.crypto.Cipher=function(e){};E.crypto.Cipher.encrypt=function(e,t,r,n){if(ur(n,"enclag")!=null&&(r=n.encalg),typeof r=="string"&&r.substr(-4)=="-CBC"){var i=t,a=e;ur(n,"key")!=null&&(i=n.key),ur(n,"enc")!=null&&(hEnc=n.enc);var s=Se.enc.Hex.parse(i),u=Se.enc.Hex.parse(a),c=Se.enc.Hex.parse(n.iv),f;if(r=="des-EDE3-CBC")f=Se.TripleDES.encrypt(u,s,{iv:c});else if(r=="aes128-CBC"||r=="aes256-CBC")f=Se.AES.encrypt(u,s,{iv:c});else throw new Error("unsupported algorithm: "+r);return f+""}else throw new Error("Cipher.encrypt: unsupported key or algorithm")};E.crypto.Cipher.decrypt=function(e,t,r,n){if(ur(n,"enclag")!=null&&(r=n.encalg),typeof r=="string"&&r.substr(-4)=="-CBC"){var i=t,a=e;ur(n,"key")!=null&&(i=n.key),ur(n,"enc")!=null&&(a=n.enc);var s=Se.enc.Hex.parse(i),u=Se.enc.Hex.parse(a),c=Se.enc.Hex.parse(n.iv),f;if(r=="des-EDE3-CBC")f=Se.TripleDES.decrypt({ciphertext:u},s,{iv:c});else if(r=="aes128-CBC"||r=="aes256-CBC")f=Se.AES.decrypt({ciphertext:u},s,{iv:c});else throw new Error("unsupported algorithm: "+r);return Se.enc.Hex.stringify(f)}else throw new Error("Cipher.decrypt: unsupported key or algorithm")};E.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040022":"secp384r1","2b81040023":"secp521r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}};(typeof E>"u"||!E)&&(E={});(typeof E.crypto>"u"||!E.crypto)&&(E.crypto={});E.crypto.ECDSA=function(e){var t="secp256r1",r=null,n=null,i=null,a=Error,s=ee,u=qt,c=E.crypto.ECDSA,f=E.crypto.ECParameterDB,h=c.getName,g=be,p=g.getVbyListEx,d=g.isASN1HEX,w=new fl,v=null;this.type="EC",this.isPrivate=!1,this.isPublic=!1;function b(m,y,D,C){for(var F=Math.max(y.bitLength(),C.bitLength()),U=m.add2D(D),k=m.curve.getInfinity(),S=F-1;S>=0;--S)k=k.twice2D(),k.z=s.ONE,y.testBit(S)?C.testBit(S)?k=k.add2D(U):k=k.add2D(m):C.testBit(S)&&(k=k.add2D(D));return k}this.getBigRandom=function(m){return new s(m.bitLength(),w).mod(m.subtract(s.ONE)).add(s.ONE)},this.setNamedCurve=function(m){this.ecparams=f.getByName(m),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=m},this.setPrivateKeyHex=function(m){this.isPrivate=!0,this.prvKeyHex=m},this.setPublicKeyHex=function(m){this.isPublic=!0,this.pubKeyHex=m},this.getPublicKeyXYHex=function(){var m=this.pubKeyHex;if(m.substr(0,2)!=="04")throw"this method supports uncompressed format(04) only";var y=this.ecparams.keycharlen;if(m.length!==2+y*2)throw"malformed public key hex length";var D={};return D.x=m.substr(2,y),D.y=m.substr(2+y),D},this.getShortNISTPCurveName=function(){var m=this.curveName;return m==="secp256r1"||m==="NIST P-256"||m==="P-256"||m==="prime256v1"?"P-256":m==="secp384r1"||m==="NIST P-384"||m==="P-384"?"P-384":m==="secp521r1"||m==="NIST P-521"||m==="P-521"?"P-521":null},this.generateKeyPairHex=function(){var m=this.ecparams.n,y=this.getBigRandom(m),D=this.ecparams.keycharlen,C=("0000000000"+y.toString(16)).slice(-D);this.setPrivateKeyHex(C);var F=this.generatePublicKeyHex();return{ecprvhex:C,ecpubhex:F}},this.generatePublicKeyHex=function(){var m=new s(this.prvKeyHex,16),y=this.ecparams.G.multiply(m),D=y.getX().toBigInteger(),C=y.getY().toBigInteger(),F=this.ecparams.keycharlen,U=("0000000000"+D.toString(16)).slice(-F),k=("0000000000"+C.toString(16)).slice(-F),S="04"+U+k;return this.setPublicKeyHex(S),S},this.signWithMessageHash=function(m){return this.signHex(m,this.prvKeyHex)},this.signHex=function(m,y){var D=new s(y,16),C=this.ecparams.n,F=new s(m.substring(0,this.ecparams.keycharlen),16);do var U=this.getBigRandom(C),k=this.ecparams.G,S=k.multiply(U),B=S.getX().toBigInteger().mod(C);while(B.compareTo(s.ZERO)<=0);var T=U.modInverse(C).multiply(F.add(D.multiply(B))).mod(C);return c.biRSSigToASN1Sig(B,T)},this.sign=function(m,y){var D=y,C=this.ecparams.n,F=s.fromByteArrayUnsigned(m);do var U=this.getBigRandom(C),k=this.ecparams.G,S=k.multiply(U),B=S.getX().toBigInteger().mod(C);while(B.compareTo(ee.ZERO)<=0);var T=U.modInverse(C).multiply(F.add(D.multiply(B))).mod(C);return this.serializeSig(B,T)},this.verifyWithMessageHash=function(m,y){return this.verifyHex(m,y,this.pubKeyHex)},this.verifyHex=function(m,y,D){try{var C,F,U=c.parseSigHex(y);C=U.r,F=U.s;var k=u.decodeFromHex(this.ecparams.curve,D),S=new s(m.substring(0,this.ecparams.keycharlen),16);return this.verifyRaw(S,C,F,k)}catch{return!1}},this.verify=function(m,y,D){var C,F;if(Bitcoin.Util.isArray(y)){var U=this.parseSig(y);C=U.r,F=U.s}else if(typeof y=="object"&&y.r&&y.s)C=y.r,F=y.s;else throw"Invalid value for signature";var k;if(D instanceof qt)k=D;else if(Bitcoin.Util.isArray(D))k=u.decodeFrom(this.ecparams.curve,D);else throw"Invalid format for pubkey value, must be byte array or ECPointFp";var S=s.fromByteArrayUnsigned(m);return this.verifyRaw(S,C,F,k)},this.verifyRaw=function(m,y,D,C){var F=this.ecparams.n,U=this.ecparams.G;if(y.compareTo(s.ONE)<0||y.compareTo(F)>=0||D.compareTo(s.ONE)<0||D.compareTo(F)>=0)return!1;var k=D.modInverse(F),S=m.multiply(k).mod(F),B=y.multiply(k).mod(F),T=U.multiply(S).add(C.multiply(B)),P=T.getX().toBigInteger().mod(F);return P.equals(y)},this.serializeSig=function(m,y){var D=m.toByteArraySigned(),C=y.toByteArraySigned(),F=[];return F.push(2),F.push(D.length),F=F.concat(D),F.push(2),F.push(C.length),F=F.concat(C),F.unshift(F.length),F.unshift(48),F},this.parseSig=function(m){var y;if(m[0]!=48)throw new Error("Signature not a valid DERSequence");if(y=2,m[y]!=2)throw new Error("First element in signature must be a DERInteger");var D=m.slice(y+2,y+2+m[y+1]);if(y+=2+m[y+1],m[y]!=2)throw new Error("Second element in signature must be a DERInteger");var C=m.slice(y+2,y+2+m[y+1]);y+=2+m[y+1];var F=s.fromByteArrayUnsigned(D),U=s.fromByteArrayUnsigned(C);return{r:F,s:U}},this.parseSigCompact=function(m){if(m.length!==65)throw"Signature has the wrong length";var y=m[0]-27;if(y<0||y>7)throw"Invalid signature type";var D=this.ecparams.n,C=s.fromByteArrayUnsigned(m.slice(1,33)).mod(D),F=s.fromByteArrayUnsigned(m.slice(33,65)).mod(D);return{r:C,s:F,i:y}},this.readPKCS5PrvKeyHex=function(m){if(d(m)===!1)throw new Error("not ASN.1 hex string");var y,D,C;try{y=p(m,0,["[0]",0],"06"),D=p(m,0,[1],"04");try{C=p(m,0,["[1]",0],"03")}catch{}}catch{throw new Error("malformed PKCS#1/5 plain ECC private key")}if(this.curveName=h(y),this.curveName===void 0)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(C),this.setPrivateKeyHex(D),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(m){if(d(m)===!1)throw new a("not ASN.1 hex string");var y,D,C,F;try{y=p(m,0,[1,0],"06"),D=p(m,0,[1,1],"06"),C=p(m,0,[2,0,1],"04");try{F=p(m,0,[2,0,"[1]",0],"03")}catch{}}catch{throw new a("malformed PKCS#8 plain ECC private key")}if(this.curveName=h(D),this.curveName===void 0)throw new a("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(F),this.setPrivateKeyHex(C),this.isPublic=!1},this.readPKCS8PubKeyHex=function(m){if(d(m)===!1)throw new a("not ASN.1 hex string");var y,D,C;try{y=p(m,0,[0,0],"06"),D=p(m,0,[0,1],"06"),C=p(m,0,[1],"03")}catch{throw new a("malformed PKCS#8 ECC public key")}if(this.curveName=h(D),this.curveName===null)throw new a("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(C)},this.readCertPubKeyHex=function(m,y){if(d(m)===!1)throw new a("not ASN.1 hex string");var D,C;try{D=p(m,0,[0,5,0,1],"06"),C=p(m,0,[0,5,1],"03")}catch{throw new a("malformed X.509 certificate ECC public key")}if(this.curveName=h(D),this.curveName===null)throw new a("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(C)},e!==void 0&&e.curve!==void 0&&(this.curveName=e.curve),this.curveName===void 0&&(this.curveName=t),this.setNamedCurve(this.curveName),e!==void 0&&(e.prv!==void 0&&this.setPrivateKeyHex(e.prv),e.pub!==void 0&&this.setPublicKeyHex(e.pub))};E.crypto.ECDSA.parseSigHex=function(e){var t=E.crypto.ECDSA.parseSigHexInHexRS(e),r=new ee(t.r,16),n=new ee(t.s,16);return{r,s:n}};E.crypto.ECDSA.parseSigHexInHexRS=function(e){var t=be,r=t.getChildIdx,n=t.getV;if(t.checkStrictDER(e,0),e.substr(0,2)!="30")throw new Error("signature is not a ASN.1 sequence");var i=r(e,0);if(i.length!=2)throw new Error("signature shall have two elements");var a=i[0],s=i[1];if(e.substr(a,2)!="02")throw new Error("1st item not ASN.1 integer");if(e.substr(s,2)!="02")throw new Error("2nd item not ASN.1 integer");var u=n(e,a),c=n(e,s);return{r:u,s:c}};E.crypto.ECDSA.asn1SigToConcatSig=function(e){var t=E.crypto.ECDSA.parseSigHexInHexRS(e),r=t.r,n=t.s;if(r.length>=130&&r.length<=134){if(r.length%2!=0)throw Error("unknown ECDSA sig r length error");if(n.length%2!=0)throw Error("unknown ECDSA sig s length error");r.substr(0,2)=="00"&&(r=r.substr(2)),n.substr(0,2)=="00"&&(n=n.substr(2));var i=Math.max(r.length,n.length);return r=("000000"+r).slice(-i),n=("000000"+n).slice(-i),r+n}if(r.substr(0,2)=="00"&&r.length%32==2&&(r=r.substr(2)),n.substr(0,2)=="00"&&n.length%32==2&&(n=n.substr(2)),r.length%32==30&&(r="00"+r),n.length%32==30&&(n="00"+n),r.length%32!=0)throw Error("unknown ECDSA sig r length error");if(n.length%32!=0)throw Error("unknown ECDSA sig s length error");return r+n};E.crypto.ECDSA.concatSigToASN1Sig=function(e){if(e.length%4!=0)throw Error("unknown ECDSA concatinated r-s sig length error");var t=e.substr(0,e.length/2),r=e.substr(e.length/2);return E.crypto.ECDSA.hexRSSigToASN1Sig(t,r)};E.crypto.ECDSA.hexRSSigToASN1Sig=function(e,t){var r=new ee(e,16),n=new ee(t,16);return E.crypto.ECDSA.biRSSigToASN1Sig(r,n)};E.crypto.ECDSA.biRSSigToASN1Sig=function(e,t){var r=E.asn1,n=new r.DERInteger({bigint:e}),i=new r.DERInteger({bigint:t}),a=new r.DERSequence({array:[n,i]});return a.tohex()};E.crypto.ECDSA.getName=function(e){return e==="2b8104001f"?"secp192k1":e==="2a8648ce3d030107"?"secp256r1":e==="2b8104000a"?"secp256k1":e==="2b81040021"?"secp224r1":e==="2b81040022"?"secp384r1":e==="2b81040023"?"secp521r1":"|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(e)!==-1?"secp256r1":"|secp256k1|".indexOf(e)!==-1?"secp256k1":"|secp224r1|NIST P-224|P-224|".indexOf(e)!==-1?"secp224r1":"|secp384r1|NIST P-384|P-384|".indexOf(e)!==-1?"secp384r1":"|secp521r1|NIST P-521|P-521|".indexOf(e)!==-1?"secp521r1":null};(typeof E>"u"||!E)&&(E={});(typeof E.crypto>"u"||!E.crypto)&&(E.crypto={});E.crypto.ECParameterDB=new function(){var e={},t={};function r(n){return new ee(n,16)}this.getByName=function(n){var i=n;if(typeof t[i]<"u"&&(i=t[n]),typeof e[i]<"u")return e[i];throw"unregistered EC curve name: "+i},this.regist=function(n,i,a,s,u,c,f,h,g,p,d,w){e[n]={};var v=r(a),b=r(s),m=r(u),y=r(c),D=r(f),C=new au(v,b,m),F=C.decodePointHex("04"+h+g);e[n].name=n,e[n].keylen=i,e[n].keycharlen=Math.ceil(i/8)*2,e[n].curve=C,e[n].G=F,e[n].n=y,e[n].h=D,e[n].oid=d,e[n].info=w;for(var U=0;U<p.length;U++)t[p[U]]=n}};E.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field");E.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field");E.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field");E.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]);E.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]);E.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]);E.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]);E.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]);E.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]);E.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","00C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]);(typeof E>"u"||!E)&&(E={});(typeof E.crypto>"u"||!E.crypto)&&(E.crypto={});E.crypto.DSA=function(){var e=be,t=e.getVbyList,r=e.getVbyListEx,n=e.isASN1HEX,i=ee;this.p=null,this.q=null,this.g=null,this.y=null,this.x=null,this.type="DSA",this.isPrivate=!1,this.isPublic=!1,this.setPrivate=function(a,s,u,c,f){this.isPrivate=!0,this.p=a,this.q=s,this.g=u,this.y=c,this.x=f},this.setPrivateHex=function(a,s,u,c,f){var h,g,p,d,w;h=new ee(a,16),g=new ee(s,16),p=new ee(u,16),typeof c=="string"&&c.length>1?d=new ee(c,16):d=null,w=new ee(f,16),this.setPrivate(h,g,p,d,w)},this.setPublic=function(a,s,u,c){this.isPublic=!0,this.p=a,this.q=s,this.g=u,this.y=c,this.x=null},this.setPublicHex=function(a,s,u,c){var f,h,g,p;f=new ee(a,16),h=new ee(s,16),g=new ee(u,16),p=new ee(c,16),this.setPublic(f,h,g,p)},this.signWithMessageHash=function(a){var s=this.p,u=this.q,c=this.g,f=this.y,h=this.x,g=E.crypto.Util.getRandomBigIntegerMinToMax(ee.ONE.add(ee.ONE),u.subtract(ee.ONE)),p=a.substr(0,u.bitLength()/4),d=new ee(p,16),w=c.modPow(g,s).mod(u),v=g.modInverse(u).multiply(d.add(h.multiply(w))).mod(u),b=E.asn1.ASN1Util.jsonToASN1HEX({seq:[{int:{bigint:w}},{int:{bigint:v}}]});return b},this.verifyWithMessageHash=function(a,s){var u=this.p,c=this.q,f=this.g,h=this.y,g=this.parseASN1Signature(s),p=g[0],d=g[1],w=a.substr(0,c.bitLength()/4),v=new ee(w,16);if(ee.ZERO.compareTo(p)>0||p.compareTo(c)>0||ee.ZERO.compareTo(d)>=0||d.compareTo(c)>0)throw"invalid DSA signature";var b=d.modInverse(c),m=v.multiply(b).mod(c),y=p.multiply(b).mod(c),D=f.modPow(m,u).multiply(h.modPow(y,u)).mod(u).mod(c);return D.compareTo(p)==0},this.parseASN1Signature=function(a){try{var s=new i(r(a,0,[0],"02"),16),u=new i(r(a,0,[1],"02"),16);return[s,u]}catch{throw new Error("malformed ASN.1 DSA signature")}},this.readPKCS5PrvKeyHex=function(a){var s,u,c,f,h;if(n(a)===!1)throw new Error("not ASN.1 hex string");try{s=r(a,0,[1],"02"),u=r(a,0,[2],"02"),c=r(a,0,[3],"02"),f=r(a,0,[4],"02"),h=r(a,0,[5],"02")}catch{throw new Error("malformed PKCS#1/5 plain DSA private key")}this.setPrivateHex(s,u,c,f,h)},this.readPKCS8PrvKeyHex=function(a){var s,u,c,f;if(n(a)===!1)throw new Error("not ASN.1 hex string");try{s=r(a,0,[1,1,0],"02"),u=r(a,0,[1,1,1],"02"),c=r(a,0,[1,1,2],"02"),f=r(a,0,[2,0],"02")}catch{throw new Error("malformed PKCS#8 plain DSA private key")}this.setPrivateHex(s,u,c,null,f)},this.readPKCS8PubKeyHex=function(a){var s,u,c,f;if(n(a)===!1)throw new Error("not ASN.1 hex string");try{s=r(a,0,[0,1,0],"02"),u=r(a,0,[0,1,1],"02"),c=r(a,0,[0,1,2],"02"),f=r(a,0,[1,0],"02")}catch{throw new Error("malformed PKCS#8 DSA public key")}this.setPublicHex(s,u,c,f)},this.readCertPubKeyHex=function(a,s){var u,c,f,h;if(n(a)===!1)throw new Error("not ASN.1 hex string");try{u=r(a,0,[0,5,0,1,0],"02"),c=r(a,0,[0,5,0,1,1],"02"),f=r(a,0,[0,5,0,1,2],"02"),h=r(a,0,[0,5,1,0],"02")}catch{throw new Error("malformed X.509 certificate DSA public key")}this.setPublicHex(u,c,f,h)}};var Ct=function(){var e=function(v,b,m){return n(Se.AES,v,b,m)},t=function(v,b,m){return n(Se.TripleDES,v,b,m)},r=function(v,b,m){return n(Se.DES,v,b,m)},n=function(v,b,m,y){var D=Se.enc.Hex.parse(b),C=Se.enc.Hex.parse(m),F=Se.enc.Hex.parse(y),U={};U.key=C,U.iv=F,U.ciphertext=D;var k=v.decrypt(U,C,{iv:F});return Se.enc.Hex.stringify(k)},i=function(v,b,m){return u(Se.AES,v,b,m)},a=function(v,b,m){return u(Se.TripleDES,v,b,m)},s=function(v,b,m){return u(Se.DES,v,b,m)},u=function(v,b,m,y){var D=Se.enc.Hex.parse(b),C=Se.enc.Hex.parse(m),F=Se.enc.Hex.parse(y),U=v.encrypt(D,C,{iv:F}),k=Se.enc.Hex.parse(U.toString()),S=Se.enc.Base64.stringify(k);return S},c={"AES-256-CBC":{proc:e,eproc:i,keylen:32,ivlen:16},"AES-192-CBC":{proc:e,eproc:i,keylen:24,ivlen:16},"AES-128-CBC":{proc:e,eproc:i,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:t,eproc:a,keylen:24,ivlen:8},"DES-CBC":{proc:r,eproc:s,keylen:8,ivlen:8}},f=function(v){return c[v].proc},h=function(v){var b=Se.lib.WordArray.random(v),m=Se.enc.Hex.stringify(b);return m},g=function(v){var b={},m=v.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));m&&(b.cipher=m[1],b.ivsalt=m[2]);var y=v.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));y&&(b.type=y[1]);var D=-1,C=0;v.indexOf(`\r
\r
`)!=-1&&(D=v.indexOf(`\r
\r
`),C=2),v.indexOf(`

`)!=-1&&(D=v.indexOf(`

`),C=1);var F=v.indexOf("-----END");if(D!=-1&&F!=-1){var U=v.substring(D+C*2,F-C);U=U.replace(/\s+/g,""),b.data=U}return b},p=function(v,b,m){for(var y=m.substring(0,16),D=Se.enc.Hex.parse(y),C=Se.enc.Utf8.parse(b),F=c[v].keylen+c[v].ivlen,U="",k=null;;){var S=Se.algo.MD5.create();if(k!=null&&S.update(k),S.update(C),S.update(D),k=S.finalize(),U=U+Se.enc.Hex.stringify(k),U.length>=F*2)break}var B={};return B.keyhex=U.substr(0,c[v].keylen*2),B.ivhex=U.substr(c[v].keylen*2,c[v].ivlen*2),B},d=function(v,b,m,y){var D=Se.enc.Base64.parse(v),C=Se.enc.Hex.stringify(D),F=c[b].proc,U=F(C,m,y);return U},w=function(v,b,m,y){var D=c[b].eproc,C=D(v,m,y);return C};return{version:"1.0.0",parsePKCS5PEM:function(v){return g(v)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(v,b,m){return p(v,b,m)},decryptKeyB64:function(v,b,m,y){return d(v,b,m,y)},getDecryptedKeyHex:function(v,b){var m=g(v),y=m.type,D=m.cipher,C=m.ivsalt,F=m.data,U=p(D,b,C),k=U.keyhex,S=d(F,D,k,C);return S},getEncryptedPKCS5PEMFromPrvKeyHex:function(v,b,m,y,D){var T="";if((typeof y>"u"||y==null)&&(y="AES-256-CBC"),typeof c[y]>"u")throw new Error("KEYUTIL unsupported algorithm: "+y);if(typeof D>"u"||D==null){var C=c[y].ivlen,F=h(C);D=F.toUpperCase()}var U=p(y,m,D),k=U.keyhex,S=w(b,y,k,D),B=S.replace(/(.{64})/g,`$1\r
`),T="-----BEGIN "+v+` PRIVATE KEY-----\r
`;return T+=`Proc-Type: 4,ENCRYPTED\r
`,T+="DEK-Info: "+y+","+D+`\r
`,T+=`\r
`,T+=B,T+=`\r
-----END `+v+` PRIVATE KEY-----\r
`,T},getEncryptedPKCS8PEM:function(v,b,m){var y=this.getEncryptedPKCS8Hex(v,b,m);return Gn(y,"ENCRYPTED PRIVATE KEY")},getEncryptedPKCS8Hex:function(v,b,m){var y;m==null||m==null?y={}:y=JSON.parse(JSON.stringify(m)),y.plain=v,this.initPBES2Param(y),this.encryptPBES2Param(y,b);var D=this.generatePBES2ASN1Param(y);return E.asn1.ASN1Util.newObject(D).tohex()},initPBES2Param:function(v){if(ur(v,"encalg")==null&&(v.encalg="aes256-CBC"),ur(v,"iter")==null&&(v.iter=2048),ur(v,"prf")==null&&(v.prf="hmacWithSHA256"),ur(v,"salt")==null&&(v.salt=Se.enc.Hex.stringify(Se.lib.WordArray.random(8))),ur(v,"enciv")==null){var b;v.encalg=="des-EDE3-CBC"&&(b=8),v.encalg=="aes128-CBC"&&(b=16),v.encalg=="aes256-CBC"&&(b=16),v.enciv=Se.enc.Hex.stringify(Se.lib.WordArray.random(b))}},encryptPBES2Param:function(v,b){var m=Ct.getDKFromPBES2Param(v,b);try{var y=E.crypto.Cipher.encrypt(v.plain,m,v.encalg,{iv:v.enciv})}catch{throw new Error("encrypt error: "+v.plain+" "+m+" "+v.encalg+" "+v.enciv)}v.enc=y},generatePBES2ASN1Param:function(v){var b={seq:[{seq:[{oid:"pkcs5PBES2"},{seq:[{seq:[{oid:"pkcs5PBKDF2"},{seq:[{octstr:{hex:v.salt}},{int:{hex:Hy(v.iter)}}]}]},{seq:[{oid:v.encalg},{octstr:{hex:v.enciv}}]}]}]},{octstr:{hex:v.enc}}]};return v.prf!="hmacWithSHA1"&&b.seq[0].seq[1].seq[0].seq[1].seq.push({seq:[{oid:v.prf},{null:""}]}),b},parseHexOfEncryptedPKCS8:function(v){var b=be,m=b.getChildIdx,y=b.getV,D={},C=m(v,0);if(C.length!=2)throw new Error("malformed format: SEQUENCE(0).items != 2: "+C.length);D.ciphertext=y(v,C[1]);var F=m(v,C[0]);if(F.length!=2)throw new Error("malformed format: SEQUENCE(0.0).items != 2: "+F.length);if(y(v,F[0])!="2a864886f70d01050d")throw new Error("this only supports pkcs5PBES2");var U=m(v,F[1]);if(F.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1).items != 2: "+U.length);var k=m(v,U[1]);if(k.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1.1).items != 2: "+k.length);if(y(v,k[0])!="2a864886f70d0307")throw"this only supports TripleDES";D.encryptionSchemeAlg="TripleDES",D.encryptionSchemeIV=y(v,k[1]);var S=m(v,U[0]);if(S.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1.0).items != 2: "+S.length);if(y(v,S[0])!="2a864886f70d01050c")throw new Error("this only supports pkcs5PBKDF2");var B=m(v,S[1]);if(B.length<2)throw new Error("malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+B.length);D.pbkdf2Salt=y(v,B[0]);var T=y(v,B[1]);try{D.pbkdf2Iter=parseInt(T,16)}catch{throw new Error("malformed format pbkdf2Iter: "+T)}return D},getPBKDF2KeyHexFromParam:function(v,b){var m=Se.enc.Hex.parse(v.pbkdf2Salt),y=v.pbkdf2Iter,D=Se.PBKDF2(b,m,{keySize:192/32,iterations:y}),C=Se.enc.Hex.stringify(D);return C},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(v,b){var m=Sr(v,"ENCRYPTED PRIVATE KEY"),y=this.parseHexOfEncryptedPKCS8(m),D=Ct.getPBKDF2KeyHexFromParam(y,b),C={};C.ciphertext=Se.enc.Hex.parse(y.ciphertext);var F=Se.enc.Hex.parse(D),U=Se.enc.Hex.parse(y.encryptionSchemeIV),k=Se.TripleDES.decrypt(C,F,{iv:U}),S=Se.enc.Hex.stringify(k);return S},parsePBES2:function(v){var b=be.parse(v);if(ur(b,"seq.0.seq.0.oid")!="pkcs5PBES2"||ur(b,"seq.0.seq.1.seq.0.seq.0.oid")!="pkcs5PBKDF2")throw new Error("not pkcs5PBES2 and pkcs5PBKDF2 used");var m=ur(b,"seq.0.seq.1.seq.0.seq.1.seq");if(m==null)throw new Error("PBKDF2 parameter not found");var y=ur(m,"0.octstr.hex"),D=ur(m,"1.int.hex"),C=ur(m,"2.seq.0.oid","hmacWithSHA1"),F=-1;try{F=parseInt(D,16)}catch{throw new Error("iter not proper value")}var U=ur(b,"seq.0.seq.1.seq.1.seq.0.oid"),k=ur(b,"seq.0.seq.1.seq.1.seq.1.octstr.hex"),S=ur(b,"seq.1.octstr.hex");if(U==null||k==null||S==null)throw new Error("encalg, enciv or enc is undefined");var B={salt:y,iter:F,prf:C,encalg:U,enciv:k,enc:S};return B},getDKFromPBES2Param:function(v,b){var m={hmacWithSHA1:Se.algo.SHA1,hmacWithSHA224:Se.algo.SHA224,hmacWithSHA256:Se.algo.SHA256,hmacWithSHA384:Se.algo.SHA384,hmacWithSHA512:Se.algo.SHA512},y={"des-EDE3-CBC":192/32,"aes128-CBC":128/32,"aes256-CBC":256/32},D=m[v.prf];if(D==null)throw new Error("unsupported prf");var C=y[v.encalg];if(C==null)throw new Error("unsupported encalg");var F=Se.enc.Hex.parse(v.salt),U=v.iter;try{var k=Se.PBKDF2(b,F,{keySize:C,iterations:U,hasher:D});return Se.enc.Hex.stringify(k)}catch(S){throw new Error("PBKDF2 error: "+S+" "+JSON.stringify(v)+" "+b)}},getPlainHexFromEncryptedPKCS8PEM:function(v,b){if(v.indexOf("BEGIN ENCRYPTED PRIVATE KEY")==-1)throw new Error("not Encrypted PKCS#8 PEM string");var m=Sr(v),y;try{y=Ct.parsePBES2(m)}catch(C){throw new Error("malformed PBES2 format: "+C.message)}var D=Ct.getDKFromPBES2Param(y,b);return E.crypto.Cipher.decrypt(y.enc,D,y.encalg,{iv:y.enciv})},getKeyFromEncryptedPKCS8PEM:function(v,b){var m=this.getPlainHexFromEncryptedPKCS8PEM(v,b),y=this.getKeyFromPlainPrivatePKCS8Hex(m);return y},parsePlainPrivatePKCS8Hex:function(v){var b=be,m=b.getChildIdx,y=b.getV,D={};if(D.algparam=null,v.substr(0,2)!="30")throw new Error("malformed plain PKCS8 private key(code:001)");var C=m(v,0);if(C.length<3)throw new Error("malformed plain PKCS8 private key(code:002)");if(v.substr(C[1],2)!="30")throw new Error("malformed PKCS8 private key(code:003)");var F=m(v,C[1]);if(F.length!=2)throw new Error("malformed PKCS8 private key(code:004)");if(v.substr(F[0],2)!="06")throw new Error("malformed PKCS8 private key(code:005)");if(D.algoid=y(v,F[0]),v.substr(F[1],2)=="06"&&(D.algparam=y(v,F[1])),v.substr(C[2],2)!="04")throw new Error("malformed PKCS8 private key(code:006)");return D.keyidx=b.getVidx(v,C[2]),D},getKeyFromPlainPrivatePKCS8PEM:function(v){var b=Sr(v,"PRIVATE KEY"),m=this.getKeyFromPlainPrivatePKCS8Hex(b);return m},getKeyFromPlainPrivatePKCS8Hex:function(v){var b=this.parsePlainPrivatePKCS8Hex(v),m;if(b.algoid=="2a864886f70d010101")m=new rt;else if(b.algoid=="2a8648ce380401")m=new E.crypto.DSA;else if(b.algoid=="2a8648ce3d0201")m=new E.crypto.ECDSA;else throw new Error("unsupported private key algorithm");return m.readPKCS8PrvKeyHex(v),m},_getKeyFromPublicPKCS8Hex:function(v){var b,m=be.getVbyList(v,0,[0,0],"06");if(m==="2a864886f70d010101")b=new rt;else if(m==="2a8648ce380401")b=new E.crypto.DSA;else if(m==="2a8648ce3d0201")b=new E.crypto.ECDSA;else throw new Error("unsupported PKCS#8 public key hex");return b.readPKCS8PubKeyHex(v),b},parsePublicRawRSAKeyHex:function(v){var b=be,m=b.getChildIdx,y=b.getV,D={};if(v.substr(0,2)!="30")throw new Error("malformed RSA key(code:001)");var C=m(v,0);if(C.length!=2)throw new Error("malformed RSA key(code:002)");if(v.substr(C[0],2)!="02")throw new Error("malformed RSA key(code:003)");if(D.n=y(v,C[0]),v.substr(C[1],2)!="02")throw new Error("malformed RSA key(code:004)");return D.e=y(v,C[1]),D},parsePublicPKCS8Hex:function(v){var b=be,m=b.getChildIdx,y=b.getV,D={};D.algparam=null;var C=m(v,0);if(C.length!=2)throw new Error("outer DERSequence shall have 2 elements: "+C.length);var F=C[0];if(v.substr(F,2)!="30")throw new Error("malformed PKCS8 public key(code:001)");var U=m(v,F);if(U.length!=2)throw new Error("malformed PKCS8 public key(code:002)");if(v.substr(U[0],2)!="06")throw new Error("malformed PKCS8 public key(code:003)");if(D.algoid=y(v,U[0]),v.substr(U[1],2)=="06"?D.algparam=y(v,U[1]):v.substr(U[1],2)=="30"&&(D.algparam={},D.algparam.p=b.getVbyList(v,U[1],[0],"02"),D.algparam.q=b.getVbyList(v,U[1],[1],"02"),D.algparam.g=b.getVbyList(v,U[1],[2],"02")),v.substr(C[1],2)!="03")throw new Error("malformed PKCS8 public key(code:004)");return D.key=y(v,C[1]).substr(2),D}}}();Ct.getKey=function(e,t,r){var n=be,i=n.getChildIdx,a=n.getV,s=n.getVbyList,u=E.crypto,c=u.ECDSA,f=u.DSA,h=rt,g=Sr,p=Ct;if(typeof h<"u"&&e instanceof h||typeof c<"u"&&e instanceof c||typeof f<"u"&&e instanceof f)return e;if(e.curve!==void 0&&e.xy!==void 0&&e.d===void 0)return new c({pub:e.xy,curve:e.curve});if(e.curve!==void 0&&e.d!==void 0)return new c({prv:e.d,curve:e.curve});if(e.kty===void 0&&e.n!==void 0&&e.e!==void 0&&e.d===void 0){var d=new h;return d.setPublic(e.n,e.e),d}if(e.kty===void 0&&e.n!==void 0&&e.e!==void 0&&e.d!==void 0&&e.p!==void 0&&e.q!==void 0&&e.dp!==void 0&&e.dq!==void 0&&e.co!==void 0&&e.qi===void 0){var d=new h;return d.setPrivateEx(e.n,e.e,e.d,e.p,e.q,e.dp,e.dq,e.co),d}if(e.kty===void 0&&e.n!==void 0&&e.e!==void 0&&e.d!==void 0&&e.p===void 0){var d=new h;return d.setPrivate(e.n,e.e,e.d),d}if(e.p!==void 0&&e.q!==void 0&&e.g!==void 0&&e.y!==void 0&&e.x===void 0){var d=new f;return d.setPublic(e.p,e.q,e.g,e.y),d}if(e.p!==void 0&&e.q!==void 0&&e.g!==void 0&&e.y!==void 0&&e.x!==void 0){var d=new f;return d.setPrivate(e.p,e.q,e.g,e.y,e.x),d}if(e.kty==="RSA"&&e.n!==void 0&&e.e!==void 0&&e.d===void 0){var d=new h;return d.setPublic(Er(e.n),Er(e.e)),d}if(e.kty==="RSA"&&e.n!==void 0&&e.e!==void 0&&e.d!==void 0&&e.p!==void 0&&e.q!==void 0&&e.dp!==void 0&&e.dq!==void 0&&e.qi!==void 0){var d=new h;return d.setPrivateEx(Er(e.n),Er(e.e),Er(e.d),Er(e.p),Er(e.q),Er(e.dp),Er(e.dq),Er(e.qi)),d}if(e.kty==="RSA"&&e.n!==void 0&&e.e!==void 0&&e.d!==void 0){var d=new h;return d.setPrivate(Er(e.n),Er(e.e),Er(e.d)),d}if(e.kty==="EC"&&e.crv!==void 0&&e.x!==void 0&&e.y!==void 0&&e.d===void 0){var w=new c({curve:e.crv}),v=w.ecparams.keycharlen,b=("0000000000"+Er(e.x)).slice(-v),m=("0000000000"+Er(e.y)).slice(-v),y="04"+b+m;return w.setPublicKeyHex(y),w}if(e.kty==="EC"&&e.crv!==void 0&&e.x!==void 0&&e.y!==void 0&&e.d!==void 0){var w=new c({curve:e.crv}),v=w.ecparams.keycharlen,b=("0000000000"+Er(e.x)).slice(-v),m=("0000000000"+Er(e.y)).slice(-v),y="04"+b+m,D=("0000000000"+Er(e.d)).slice(-v);return w.setPublicKeyHex(y),w.setPrivateKeyHex(D),w}if(r==="pkcs5prv"){var C=e,n=be,F,d;if(F=i(C,0),F.length===9)d=new h,d.readPKCS5PrvKeyHex(C);else if(F.length===6)d=new f,d.readPKCS5PrvKeyHex(C);else if(F.length>2&&C.substr(F[1],2)==="04")d=new c,d.readPKCS5PrvKeyHex(C);else throw new Error("unsupported PKCS#1/5 hexadecimal key");return d}if(r==="pkcs8prv"){var d=p.getKeyFromPlainPrivatePKCS8Hex(e);return d}if(r==="pkcs8pub")return p._getKeyFromPublicPKCS8Hex(e);if(r==="x509pub")return We.getPublicKeyFromCertHex(e);if(e.indexOf("-END CERTIFICATE-",0)!=-1||e.indexOf("-END X509 CERTIFICATE-",0)!=-1||e.indexOf("-END TRUSTED CERTIFICATE-",0)!=-1)return We.getPublicKeyFromCertPEM(e);if(e.indexOf("-END PUBLIC KEY-")!=-1){var U=Sr(e,"PUBLIC KEY");return p._getKeyFromPublicPKCS8Hex(U)}if(e.indexOf("-END RSA PRIVATE KEY-")!=-1&&e.indexOf("4,ENCRYPTED")==-1){var k=g(e,"RSA PRIVATE KEY");return p.getKey(k,null,"pkcs5prv")}if(e.indexOf("-END DSA PRIVATE KEY-")!=-1&&e.indexOf("4,ENCRYPTED")==-1){var S=g(e,"DSA PRIVATE KEY"),B=s(S,0,[1],"02"),T=s(S,0,[2],"02"),P=s(S,0,[3],"02"),j=s(S,0,[4],"02"),Y=s(S,0,[5],"02"),d=new f;return d.setPrivate(new ee(B,16),new ee(T,16),new ee(P,16),new ee(j,16),new ee(Y,16)),d}if(e.indexOf("-END EC PRIVATE KEY-")!=-1&&e.indexOf("4,ENCRYPTED")==-1){var k=g(e,"EC PRIVATE KEY");return p.getKey(k,null,"pkcs5prv")}if(e.indexOf("-END PRIVATE KEY-")!=-1)return p.getKeyFromPlainPrivatePKCS8PEM(e);if(e.indexOf("-END RSA PRIVATE KEY-")!=-1&&e.indexOf("4,ENCRYPTED")!=-1){var M=p.getDecryptedKeyHex(e,t),z=new rt;return z.readPKCS5PrvKeyHex(M),z}if(e.indexOf("-END EC PRIVATE KEY-")!=-1&&e.indexOf("4,ENCRYPTED")!=-1){var S=p.getDecryptedKeyHex(e,t),d=s(S,0,[1],"04"),W=s(S,0,[2,0],"06"),ie=s(S,0,[3,0],"03").substr(2),Ce="";if(E.crypto.OID.oidhex2name[W]!==void 0)Ce=E.crypto.OID.oidhex2name[W];else throw new Error("undefined OID(hex) in KJUR.crypto.OID: "+W);var w=new c({curve:Ce});return w.setPublicKeyHex(ie),w.setPrivateKeyHex(d),w.isPublic=!1,w}if(e.indexOf("-END DSA PRIVATE KEY-")!=-1&&e.indexOf("4,ENCRYPTED")!=-1){var S=p.getDecryptedKeyHex(e,t),B=s(S,0,[1],"02"),T=s(S,0,[2],"02"),P=s(S,0,[3],"02"),j=s(S,0,[4],"02"),Y=s(S,0,[5],"02"),d=new f;return d.setPrivate(new ee(B,16),new ee(T,16),new ee(P,16),new ee(j,16),new ee(Y,16)),d}if(e.indexOf("-END ENCRYPTED PRIVATE KEY-")!=-1)return p.getKeyFromEncryptedPKCS8PEM(e,t);throw new Error("not supported argument")};Ct.generateKeypair=function(e,t){if(e=="RSA"){var r=t,n=new rt;n.generate(r,"10001"),n.isPrivate=!0,n.isPublic=!0;var i=new rt,a=n.n.toString(16),s=n.e.toString(16);i.setPublic(a,s),i.isPrivate=!1,i.isPublic=!0;var u={};return u.prvKeyObj=n,u.pubKeyObj=i,u}else if(e=="EC"){var c=t,f=new E.crypto.ECDSA({curve:c}),h=f.generateKeyPairHex(),n=new E.crypto.ECDSA({curve:c});n.setPublicKeyHex(h.ecpubhex),n.setPrivateKeyHex(h.ecprvhex),n.isPrivate=!0,n.isPublic=!1;var i=new E.crypto.ECDSA({curve:c});i.setPublicKeyHex(h.ecpubhex),i.isPrivate=!1,i.isPublic=!0;var u={};return u.prvKeyObj=n,u.pubKeyObj=i,u}else throw new Error("unknown algorithm: "+e)};Ct.getPEM=function(e,t,r,n,i,a){var s=E,u=s.asn1,c=u.DERObjectIdentifier,f=u.DERInteger,h=u.ASN1Util.newObject,g=u.x509,p=g.SubjectPublicKeyInfo,d=s.crypto,w=d.DSA,v=d.ECDSA,b=rt;function m(z){var W=h({seq:[{int:0},{int:{bigint:z.n}},{int:z.e},{int:{bigint:z.d}},{int:{bigint:z.p}},{int:{bigint:z.q}},{int:{bigint:z.dmp1}},{int:{bigint:z.dmq1}},{int:{bigint:z.coeff}}]});return W}function y(z){var W=h({seq:[{int:1},{octstr:{hex:z.prvKeyHex}},{tag:["a0",!0,{oid:{name:z.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+z.pubKeyHex}}]}]});return W}function D(z){var W=h({seq:[{int:0},{int:{bigint:z.p}},{int:{bigint:z.q}},{int:{bigint:z.g}},{int:{bigint:z.y}},{int:{bigint:z.x}}]});return W}if((b!==void 0&&e instanceof b||w!==void 0&&e instanceof w||v!==void 0&&e instanceof v)&&e.isPublic==!0&&(t===void 0||t=="PKCS8PUB")){var C=new p(e),F=C.tohex();return Gn(F,"PUBLIC KEY")}if(t=="PKCS1PRV"&&b!==void 0&&e instanceof b&&(r===void 0||r==null)&&e.isPrivate==!0){var C=m(e),F=C.tohex();return Gn(F,"RSA PRIVATE KEY")}if(t=="PKCS1PRV"&&v!==void 0&&e instanceof v&&(r===void 0||r==null)&&e.isPrivate==!0){var U=new c({name:e.curveName}),k=U.tohex(),S=y(e),B=S.tohex(),T="";return T+=Gn(k,"EC PARAMETERS"),T+=Gn(B,"EC PRIVATE KEY"),T}if(t=="PKCS1PRV"&&w!==void 0&&e instanceof w&&(r===void 0||r==null)&&e.isPrivate==!0){var C=D(e),F=C.tohex();return Gn(F,"DSA PRIVATE KEY")}if(t=="PKCS5PRV"&&b!==void 0&&e instanceof b&&r!==void 0&&r!=null&&e.isPrivate==!0){var C=m(e),F=C.tohex();return n===void 0&&(n="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",F,r,n,a)}if(t=="PKCS5PRV"&&v!==void 0&&e instanceof v&&r!==void 0&&r!=null&&e.isPrivate==!0){var C=y(e),F=C.tohex();return n===void 0&&(n="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",F,r,n,a)}if(t=="PKCS5PRV"&&w!==void 0&&e instanceof w&&r!==void 0&&r!=null&&e.isPrivate==!0){var C=D(e),F=C.tohex();return n===void 0&&(n="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",F,r,n,a)}var P=function(z,W){if(typeof W=="string")return Ct.getEncryptedPKCS8PEM(z,W);if(typeof W=="object"&&ur(W,"passcode")!=null){var ie=JSON.parse(JSON.stringify(W)),Ce=ie.passcode;return delete ie.passcode,Ct.getEncryptedPKCS8PEM(z,Ce,ie)}};if(t=="PKCS8PRV"&&b!=null&&e instanceof b&&e.isPrivate==!0){var j=m(e),Y=j.tohex(),C=h({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:Y}}]}),F=C.tohex();return r===void 0||r==null?Gn(F,"PRIVATE KEY"):P(F,r)}if(t=="PKCS8PRV"&&v!==void 0&&e instanceof v&&e.isPrivate==!0){var M={seq:[{int:1},{octstr:{hex:e.prvKeyHex}}]};typeof e.pubKeyHex=="string"&&M.seq.push({tag:["a1",!0,{bitstr:{hex:"00"+e.pubKeyHex}}]});var j=new h(M),Y=j.tohex(),C=h({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:e.curveName}}]},{octstr:{hex:Y}}]}),F=C.tohex();return r===void 0||r==null?Gn(F,"PRIVATE KEY"):P(F,r)}if(t=="PKCS8PRV"&&w!==void 0&&e instanceof w&&e.isPrivate==!0){var j=new f({bigint:e.x}),Y=j.tohex(),C=h({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.g}}]}]},{octstr:{hex:Y}}]}),F=C.tohex();return r===void 0||r==null?Gn(F,"PRIVATE KEY"):P(F,r)}throw new Error("unsupported object nor format")};Ct.getKeyFromCSRPEM=function(e){var t=Sr(e,"CERTIFICATE REQUEST"),r=Ct.getKeyFromCSRHex(t);return r};Ct.getKeyFromCSRHex=function(e){var t=Ct.parseCSRHex(e),r=Ct.getKey(t.p8pubkeyhex,null,"pkcs8pub");return r};Ct.parseCSRHex=function(e){var t=be,r=t.getChildIdx,n=t.getTLV,i={},a=e;if(a.substr(0,2)!="30")throw new Error("malformed CSR(code:001)");var s=r(a,0);if(s.length<1)throw new Error("malformed CSR(code:002)");if(a.substr(s[0],2)!="30")throw new Error("malformed CSR(code:003)");var u=r(a,s[0]);if(u.length<3)throw new Error("malformed CSR(code:004)");return i.p8pubkeyhex=n(a,u[2]),i};Ct.getKeyID=function(e){var t=Ct,r=be;typeof e=="string"&&e.indexOf("BEGIN ")!=-1&&(e=t.getKey(e));var n=Sr(t.getPEM(e)),i=r.getIdxbyList(n,0,[1]),a=r.getV(n,i).substring(2);return E.crypto.Util.hashHex(a,"sha1")};Ct.getJWK=function(e,t,r,n,i){var a,s={},u,c=E.crypto.Util.hashHex;if(typeof e=="string")a=Ct.getKey(e),e.indexOf("CERTIFICATE")!=-1&&(u=Sr(e));else if(typeof e=="object")e instanceof We?(a=e.getPublicKey(),u=e.hex):a=e;else throw new Error("unsupported keyinfo type");if(a instanceof rt&&a.isPrivate)s.kty="RSA",s.n=rn(a.n.toString(16)),s.e=rn(a.e.toString(16)),s.d=rn(a.d.toString(16)),s.p=rn(a.p.toString(16)),s.q=rn(a.q.toString(16)),s.dp=rn(a.dmp1.toString(16)),s.dq=rn(a.dmq1.toString(16)),s.qi=rn(a.coeff.toString(16));else if(a instanceof rt&&a.isPublic)s.kty="RSA",s.n=rn(a.n.toString(16)),s.e=rn(a.e.toString(16));else if(a instanceof E.crypto.ECDSA&&a.isPrivate){var f=a.getShortNISTPCurveName();if(f!=="P-256"&&f!=="P-384"&&f!=="P-521")throw new Error("unsupported curve name for JWT: "+f);var h=a.getPublicKeyXYHex();s.kty="EC",s.crv=f,s.x=rn(h.x),s.y=rn(h.y),s.d=rn(a.prvKeyHex)}else if(a instanceof E.crypto.ECDSA&&a.isPublic){var f=a.getShortNISTPCurveName();if(f!=="P-256"&&f!=="P-384"&&f!=="P-521")throw new Error("unsupported curve name for JWT: "+f);var h=a.getPublicKeyXYHex();s.kty="EC",s.crv=f,s.x=rn(h.x),s.y=rn(h.y)}if(s.kty==null)throw new Error("unsupported keyinfo");return!a.isPrivate&&t!=!0&&(s.kid=E.jws.JWS.getJWKthumbprint(s)),u!=null&&r!=!0&&(s.x5c=[su(u)]),u!=null&&n!=!0&&(s.x5t=ul(su(c(u,"sha1")))),u!=null&&i!=!0&&(s["x5t#S256"]=ul(su(c(u,"sha256")))),s};Ct.getJWKFromKey=function(e){return Ct.getJWK(e,!0,!0,!0,!0)};rt.getPosArrayOfChildrenFromHex=function(e){return be.getChildIdx(e,0)};rt.getHexValueArrayOfChildrenFromHex=function(e){var t=be,r=t.getV,p=rt.getPosArrayOfChildrenFromHex(e),n=r(e,p[0]),i=r(e,p[1]),a=r(e,p[2]),s=r(e,p[3]),u=r(e,p[4]),c=r(e,p[5]),f=r(e,p[6]),h=r(e,p[7]),g=r(e,p[8]),p=new Array;return p.push(n,i,a,s,u,c,f,h,g),p};rt.prototype.readPrivateKeyFromPEMString=function(e){var t=Sr(e),r=rt.getHexValueArrayOfChildrenFromHex(t);this.setPrivateEx(r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8])};rt.prototype.readPKCS5PrvKeyHex=function(e){var t=rt.getHexValueArrayOfChildrenFromHex(e);this.setPrivateEx(t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])};rt.prototype.readPKCS8PrvKeyHex=function(e){var t,r,n,i,a,s,u,c,f=be,h=f.getVbyListEx;if(f.isASN1HEX(e)===!1)throw new Error("not ASN.1 hex string");try{t=h(e,0,[2,0,1],"02"),r=h(e,0,[2,0,2],"02"),n=h(e,0,[2,0,3],"02"),i=h(e,0,[2,0,4],"02"),a=h(e,0,[2,0,5],"02"),s=h(e,0,[2,0,6],"02"),u=h(e,0,[2,0,7],"02"),c=h(e,0,[2,0,8],"02")}catch{throw new Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx(t,r,n,i,a,s,u,c)};rt.prototype.readPKCS5PubKeyHex=function(e){var t=be,r=t.getV;if(t.isASN1HEX(e)===!1)throw new Error("keyHex is not ASN.1 hex string");var n=t.getChildIdx(e,0);if(n.length!==2||e.substr(n[0],2)!=="02"||e.substr(n[1],2)!=="02")throw new Error("wrong hex for PKCS#5 public key");var i=r(e,n[0]),a=r(e,n[1]);this.setPublic(i,a)};rt.prototype.readPKCS8PubKeyHex=function(e){var t=be;if(t.isASN1HEX(e)===!1)throw new Error("not ASN.1 hex string");if(t.getTLVbyListEx(e,0,[0,0])!=="06092a864886f70d010101")throw new Error("not PKCS8 RSA public key");var r=t.getTLVbyListEx(e,0,[1,0]);this.readPKCS5PubKeyHex(r)};rt.prototype.readCertPubKeyHex=function(e,t){var r,n;r=new We,r.readCertHex(e),n=r.getPublicKeyHex(),this.readPKCS8PubKeyHex(n)};var XG=new RegExp("[^0-9a-f]","gi");function Ky(e,t){for(var r="",n=t/4-e.length,i=0;i<n;i++)r=r+"0";return r+e}rt.prototype.sign=function(e,t){var r=function(i){return E.crypto.Util.hashString(i,t)},n=r(e);return this.signWithMessageHash(n,t)};rt.prototype.signWithMessageHash=function(e,t){var r=E.crypto.Util.getPaddedDigestInfoHex(e,t,this.n.bitLength()),n=Si(r,16),i=this.doPrivate(n),a=i.toString(16);return Ky(a,this.n.bitLength())};function zy(e,t,r){for(var n="",i=0;n.length<t;)n+=Bi(r(fa(e+String.fromCharCode.apply(String,[(i&4278190080)>>24,(i&16711680)>>16,(i&65280)>>8,i&255])))),i+=1;return n}rt.prototype.signPSS=function(e,t,r){var n=function(a){return E.crypto.Util.hashHex(a,t)},i=n(fa(e));return r===void 0&&(r=-1),this.signWithMessageHashPSS(i,t,r)};rt.prototype.signWithMessageHashPSS=function(e,t,r){var n=Bi(e),i=n.length,a=this.n.bitLength()-1,s=Math.ceil(a/8),u,c=function(b){return E.crypto.Util.hashHex(b,t)};if(r===-1||r===void 0)r=i;else if(r===-2)r=s-i-2;else if(r<-2)throw new Error("invalid salt length");if(s<i+r+2)throw new Error("data too long");var f="";r>0&&(f=new Array(r),new fl().nextBytes(f),f=String.fromCharCode.apply(String,f));var h=Bi(c(fa("\0\0\0\0\0\0\0\0"+n+f))),g=[];for(u=0;u<s-r-i-2;u+=1)g[u]=0;var p=String.fromCharCode.apply(String,g)+""+f,d=zy(h,p.length,c),w=[];for(u=0;u<p.length;u+=1)w[u]=p.charCodeAt(u)^d.charCodeAt(u);var v=65280>>8*s-a&255;for(w[0]&=~v,u=0;u<i;u++)w.push(h.charCodeAt(u));return w.push(188),Ky(this.doPrivate(new ee(w)).toString(16),this.n.bitLength())};function Gy(e){for(var t in E.crypto.Util.DIGESTINFOHEAD){var r=E.crypto.Util.DIGESTINFOHEAD[t],n=r.length;if(e.substring(0,n)==r){var i=[t,e.substring(n)];return i}}return[]}rt.prototype.verify=function(e,t){if(t=t.toLowerCase(),t.match(/^[0-9a-f]+$/)==null)return!1;var r=Si(t,16),n=this.n.bitLength();if(r.bitLength()>n)return!1;var i=this.doPublic(r),a=i.toString(16);if(a.length+3!=n/4)return!1;var s=a.replace(/^1f+00/,""),u=Gy(s);if(u.length==0)return!1;var c=u[0],f=u[1],h=function(p){return E.crypto.Util.hashString(p,c)},g=h(e);return f==g};rt.prototype.verifyWithMessageHash=function(e,t){if(t.length!=Math.ceil(this.n.bitLength()/4))return!1;var r=Si(t,16);if(r.bitLength()>this.n.bitLength())return 0;var n=this.doPublic(r),i=n.toString(16).replace(/^1f+00/,""),a=Gy(i);if(a.length==0)return!1;var s=a[0],u=a[1];return u==e};rt.prototype.verifyPSS=function(e,t,r,n){var i=function(s){return E.crypto.Util.hashHex(s,r)},a=i(fa(e));return n===void 0&&(n=-1),this.verifyWithMessageHashPSS(a,t,r,n)};rt.prototype.verifyWithMessageHashPSS=function(e,t,r,n){if(t.length!=Math.ceil(this.n.bitLength()/4))return!1;var i=new ee(t,16),a=function(y){return E.crypto.Util.hashHex(y,r)},s=Bi(e),u=s.length,c=this.n.bitLength()-1,f=Math.ceil(c/8),h;if(n===-1||n===void 0)n=u;else if(n===-2)n=f-u-2;else if(n<-2)throw new Error("invalid salt length");if(f<u+n+2)throw new Error("data too long");var g=this.doPublic(i).toByteArray();for(h=0;h<g.length;h+=1)g[h]&=255;for(;g.length<f;)g.unshift(0);if(g[f-1]!==188)throw new Error("encoded message does not end in 0xbc");g=String.fromCharCode.apply(String,g);var p=g.substr(0,f-u-1),d=g.substr(p.length,u),w=65280>>8*f-c&255;if(p.charCodeAt(0)&w)throw new Error("bits beyond keysize not zero");var v=zy(d,p.length,a),b=[];for(h=0;h<p.length;h+=1)b[h]=p.charCodeAt(h)^v.charCodeAt(h);b[0]&=~w;var m=f-u-n-2;for(h=0;h<m;h+=1)if(b[h]!==0)throw new Error("leftmost octets not zero");if(b[m]!==1)throw new Error("0x01 marker not found");return d===Bi(a(fa("\0\0\0\0\0\0\0\0"+s+String.fromCharCode.apply(String,b.slice(-n)))))};rt.SALT_LEN_HLEN=-1;rt.SALT_LEN_MAX=-2;rt.SALT_LEN_RECOVER=-2;function We(e){var t=be,r=t.getChildIdx,n=t.getV,i=t.dump,a=t.parse,s=t.getTLV,u=t.getVbyList,c=t.getVbyListEx,f=t.getTLVbyList,h=t.getTLVbyListEx,g=t.getIdxbyList,p=t.getIdxbyListEx,d=t.getVidx,w=t.getInt,v=t.oidname,b=t.hextooidstr,m=We,y=Sr,D,C=Error;try{D=E.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch{}this.HEX2STAG={"0c":"utf8",13:"prn",16:"ia5","1a":"vis","1e":"bmp"},this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){if(this.hex===null||this.version!==0)return this.version;var S=f(this.hex,0,[0,0]);if(S.substr(0,2)=="a0"){var B=f(S,0,[0]),T=w(B,0);if(T<0||2<T)throw new Error("malformed version field");return this.version=T+1,this.version}else return this.version=1,this.foffset=-1,1},this.getSerialNumberHex=function(){return c(this.hex,0,[0,0],"02")},this.getSignatureAlgorithmField=function(){var S=h(this.hex,0,[0,1]);return this.getAlgorithmIdentifierName(S)},this.getAlgorithmIdentifierName=function(S){for(var B in D)if(S===D[B])return B;return v(c(S,0,[0],"06"))},this.getIssuer=function(S,B){return this.getX500Name(this.getIssuerHex(),S,B)},this.getIssuerHex=function(){return f(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){var S=this.getIssuer();return S.str},this.getSubject=function(S,B){return this.getX500Name(this.getSubjectHex(),S,B)},this.getSubjectHex=function(){return f(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){var S=this.getSubject();return S.str},this.getNotBefore=function(){var S=u(this.hex,0,[0,4+this.foffset,0]);return S=S.replace(/(..)/g,"%$1"),S=decodeURIComponent(S),S},this.getNotAfter=function(){var S=u(this.hex,0,[0,4+this.foffset,1]);return S=S.replace(/(..)/g,"%$1"),S=decodeURIComponent(S),S},this.getPublicKeyHex=function(){return this.getSPKI()},this.getSPKI=function(){return f(this.hex,0,[0,6+this.foffset],"30")},this.getSPKIValue=function(){var S=this.getSPKI();return S==null?null:u(S,0,[1],"03",!0)},this.getPublicKeyIdx=function(){return g(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var S=this.getPublicKeyIdx();return g(this.hex,S,[1,0],"30")},this.getPublicKey=function(){return Ct.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){var S=f(this.hex,0,[1],"30");return this.getAlgorithmIdentifierName(S)},this.getSignatureValueHex=function(){return u(this.hex,0,[2],"03",!0)},this.verifySignature=function(S){var B=this.getSignatureAlgorithmField(),T=this.getSignatureValueHex(),P=f(this.hex,0,[0],"30"),j=new E.crypto.Signature({alg:B});return j.init(S),j.updateHex(P),j.verify(T)},this.parseExt=function(S){var B,T,P;if(S===void 0){if(P=this.hex,this.version!==3)return-1;B=g(P,0,[0,7,0],"30"),T=r(P,B)}else{P=Sr(S);var j=g(P,0,[0,3,0,0],"06");if(n(P,j)!="2a864886f70d01090e"){this.aExtInfo=new Array;return}B=g(P,0,[0,3,0,1,0],"30"),T=r(P,B),this.hex=P}this.aExtInfo=new Array;for(var Y=0;Y<T.length;Y++){var M={};M.critical=!1;var z=r(P,T[Y]),W=0;z.length===3&&(M.critical=!0,W=1),M.oid=t.hextooidstr(u(P,T[Y],[0],"06"));var ie=g(P,T[Y],[1+W]);M.vidx=d(P,ie),this.aExtInfo.push(M)}},this.getExtInfo=function(S){var B=this.aExtInfo,T=S;if(S.match(/^[0-9.]+$/)||(T=E.asn1.x509.OID.name2oid(S)),T!==""){for(var P=0;P<B.length;P++)if(B[P].oid===T)return B[P]}},this.getCriticalExtV=function(S,B,T){if(B!=null)return[B,T];var P=this.getExtInfo(S);return P==null?[null,null]:[s(this.hex,P.vidx),P.critical]},this.getExtBasicConstraints=function(S,B){if(S===void 0&&B===void 0){var T=this.getExtInfo("basicConstraints");if(T===void 0)return;S=s(this.hex,T.vidx),B=T.critical}var P={extname:"basicConstraints"};if(B&&(P.critical=!0),S==="3000")return P;if(S==="30030101ff")return P.cA=!0,P;if(S.substr(0,12)==="30060101ff02"){var j=n(S,10),Y=parseInt(j,16);return P.cA=!0,P.pathLen=Y,P}throw new Error("hExtV parse error: "+S)},this.getExtNameConstraints=function(S,B){var T=this.getCriticalExtV("nameConstraints",S,B);if(S=T[0],B=T[1],S!=null){var P={extname:"nameConstraints"};B&&(P.critical=!0);for(var j=r(S,0),Y=0;Y<j.length;Y++){for(var M=[],z=r(S,j[Y]),W=0;W<z.length;W++){var ie=s(S,z[W]),Ce=this.getGeneralSubtree(ie);M.push(Ce)}var Fe=S.substr(j[Y],2);Fe=="a0"?P.permit=M:Fe=="a1"&&(P.exclude=M)}return P}},this.getGeneralSubtree=function(S){var B=r(S,0),T=B.length;if(T<1||2<T)throw new Error("wrong num elements");for(var P=this.getGeneralName(s(S,B[0])),j=1;j<T;j++){var Y=S.substr(B[j],2),M=n(S,B[j]),z=parseInt(M,16);Y=="80"&&(P.min=z),Y=="81"&&(P.max=z)}return P},this.getExtKeyUsage=function(S,B){var T=this.getCriticalExtV("keyUsage",S,B);if(S=T[0],B=T[1],S!=null){var P={extname:"keyUsage"};return B&&(P.critical=!0),P.names=this.getExtKeyUsageString(S).split(","),P}},this.getExtKeyUsageBin=function(S){if(S===void 0){var B=this.getExtInfo("keyUsage");if(B===void 0)return"";S=s(this.hex,B.vidx)}if(S.length!=8&&S.length!=10)throw new Error("malformed key usage value: "+S);var T="000000000000000"+parseInt(S.substr(6),16).toString(2);return S.length==8&&(T=T.slice(-8)),S.length==10&&(T=T.slice(-16)),T=T.replace(/0+$/,""),T==""&&(T="0"),T},this.getExtKeyUsageString=function(S){for(var B=this.getExtKeyUsageBin(S),T=new Array,P=0;P<B.length;P++)B.substr(P,1)=="1"&&T.push(We.KEYUSAGE_NAME[P]);return T.join(",")},this.getExtSubjectKeyIdentifier=function(S,B){if(S===void 0&&B===void 0){var T=this.getExtInfo("subjectKeyIdentifier");if(T===void 0)return;S=s(this.hex,T.vidx),B=T.critical}var P={extname:"subjectKeyIdentifier"};B&&(P.critical=!0);var j=n(S,0);return P.kid={hex:j},P},this.getExtAuthorityKeyIdentifier=function(S,B){if(S===void 0&&B===void 0){var T=this.getExtInfo("authorityKeyIdentifier");if(T===void 0)return;S=s(this.hex,T.vidx),B=T.critical}var P={extname:"authorityKeyIdentifier"};B&&(P.critical=!0);for(var j=r(S,0),Y=0;Y<j.length;Y++){var M=S.substr(j[Y],2);if(M==="80"&&(P.kid={hex:n(S,j[Y])}),M==="a1"){var z=s(S,j[Y]),W=this.getGeneralNames(z);P.issuer=W[0].dn}M==="82"&&(P.sn={hex:n(S,j[Y])})}return P},this.getExtExtKeyUsage=function(S,B){if(S===void 0&&B===void 0){var T=this.getExtInfo("extKeyUsage");if(T===void 0)return;S=s(this.hex,T.vidx),B=T.critical}var P={extname:"extKeyUsage",array:[]};B&&(P.critical=!0);for(var j=r(S,0),Y=0;Y<j.length;Y++)P.array.push(v(n(S,j[Y])));return P},this.getExtExtKeyUsageName=function(){var S=this.getExtInfo("extKeyUsage");if(S===void 0)return S;var B=new Array,T=s(this.hex,S.vidx);if(T==="")return B;for(var P=r(T,0),j=0;j<P.length;j++)B.push(v(n(T,P[j])));return B},this.getExtSubjectAltName=function(S,B){if(S===void 0&&B===void 0){var T=this.getExtInfo("subjectAltName");if(T===void 0)return;S=s(this.hex,T.vidx),B=T.critical}var P={extname:"subjectAltName",array:[]};return B&&(P.critical=!0),P.array=this.getGeneralNames(S),P},this.getExtIssuerAltName=function(S,B){if(S===void 0&&B===void 0){var T=this.getExtInfo("issuerAltName");if(T===void 0)return;S=s(this.hex,T.vidx),B=T.critical}var P={extname:"issuerAltName",array:[]};return B&&(P.critical=!0),P.array=this.getGeneralNames(S),P},this.getGeneralNames=function(S){for(var B=r(S,0),T=[],P=0;P<B.length;P++){var j=this.getGeneralName(s(S,B[P]));j!==void 0&&T.push(j)}return T},this.getGeneralName=function(S){var B=S.substr(0,2),T=n(S,0),P=Bi(T);if(B=="81")return{rfc822:P};if(B=="82")return{dns:P};if(B=="86")return{uri:P};if(B=="87")return{ip:h0(T)};if(B=="a4")return{dn:this.getX500Name(T)};if(B=="a0")return{other:this.getOtherName(S)}},this.getExtSubjectAltName2=function(){var S,B,T,P=this.getExtInfo("subjectAltName");if(P===void 0)return P;for(var j=new Array,Y=s(this.hex,P.vidx),M=r(Y,0),z=0;z<M.length;z++)T=Y.substr(M[z],2),S=n(Y,M[z]),T==="81"&&(B=Qt(S),j.push(["MAIL",B])),T==="82"&&(B=Qt(S),j.push(["DNS",B])),T==="84"&&(B=We.hex2dn(S,0),j.push(["DN",B])),T==="86"&&(B=Qt(S),j.push(["URI",B])),T==="87"&&(B=h0(S),j.push(["IP",B]));return j},this.getExtCRLDistributionPoints=function(S,B){if(S===void 0&&B===void 0){var T=this.getExtInfo("cRLDistributionPoints");if(T===void 0)return;S=s(this.hex,T.vidx),B=T.critical}var P={extname:"cRLDistributionPoints",array:[]};B&&(P.critical=!0);for(var j=r(S,0),Y=0;Y<j.length;Y++){var M=s(S,j[Y]);P.array.push(this.getDistributionPoint(M))}return P},this.getDistributionPoint=function(S){for(var B={},T=r(S,0),P=0;P<T.length;P++){var j=S.substr(T[P],2),Y=s(S,T[P]);j=="a0"&&(B.dpname=this.getDistributionPointName(Y))}return B},this.getDistributionPointName=function(S){for(var B={},T=r(S,0),P=0;P<T.length;P++){var j=S.substr(T[P],2),Y=s(S,T[P]);j=="a0"&&(B.full=this.getGeneralNames(Y))}return B},this.getExtCRLDistributionPointsURI=function(){var S=this.getExtCRLDistributionPoints();if(S==null)return S;for(var B=S.array,T=[],P=0;P<B.length;P++)try{B[P].dpname.full[0].uri!=null&&T.push(B[P].dpname.full[0].uri)}catch{}return T},this.getExtAIAInfo=function(){var S=this.getExtInfo("authorityInfoAccess");if(S===void 0)return S;for(var B={ocsp:[],caissuer:[]},T=r(this.hex,S.vidx),P=0;P<T.length;P++){var j=u(this.hex,T[P],[0],"06"),Y=u(this.hex,T[P],[1],"86");j==="2b06010505073001"&&B.ocsp.push(Qt(Y)),j==="2b06010505073002"&&B.caissuer.push(Qt(Y))}return B},this.getExtAuthorityInfoAccess=function(S,B){if(S===void 0&&B===void 0){var T=this.getExtInfo("authorityInfoAccess");if(T===void 0)return;S=s(this.hex,T.vidx),B=T.critical}var P={extname:"authorityInfoAccess",array:[]};B&&(P.critical=!0);for(var j=r(S,0),Y=0;Y<j.length;Y++){var M=c(S,j[Y],[0],"06"),z=u(S,j[Y],[1],"86"),W=Qt(z);if(M=="2b06010505073001")P.array.push({ocsp:W});else if(M=="2b06010505073002")P.array.push({caissuer:W});else throw new Error("unknown method: "+M)}return P},this.getExtCertificatePolicies=function(S,B){if(S===void 0&&B===void 0){var T=this.getExtInfo("certificatePolicies");if(T===void 0)return;S=s(this.hex,T.vidx),B=T.critical}var P={extname:"certificatePolicies",array:[]};B&&(P.critical=!0);for(var j=r(S,0),Y=0;Y<j.length;Y++){var M=s(S,j[Y]),z=this.getPolicyInformation(M);P.array.push(z)}return P},this.getPolicyInformation=function(S){var B={},T=u(S,0,[0],"06");B.policyoid=v(T);var P=p(S,0,[1],"30");if(P!=-1){B.array=[];for(var j=r(S,P),Y=0;Y<j.length;Y++){var M=s(S,j[Y]),z=this.getPolicyQualifierInfo(M);B.array.push(z)}}return B},this.getOtherName=function(S){var B={},T=r(S,0),P=u(S,T[0],[],"06"),j=u(S,T[1],[]);return B.oid=v(P),B.value=a(j),B},this.getPolicyQualifierInfo=function(S){var B={},T=u(S,0,[0],"06");if(T==="2b06010505070201"){var P=c(S,0,[1],"16");B.cps=Bi(P)}else if(T==="2b06010505070202"){var j=f(S,0,[1],"30");B.unotice=this.getUserNotice(j)}return B},this.getUserNotice=function(S){var B=null,T={};try{B=t.parse(S);var P=this._asn1ToUnotice(B);return P}catch{return}},this._asn1ToUnotice=function(S){try{for(var B={},T=ur(S,"seq"),P=0;P<T.length;P++){var j=this._asn1ToNoticeRef(T[P]);j!=null&&(B.noticeref=j);var Y=this.asn1ToDisplayText(T[P]);Y!=null&&(B.exptext=Y)}return Object.keys(B).length>0?B:void 0}catch{return}},this._asn1ToNoticeRef=function(S){try{for(var B={},T=ur(S,"seq"),P=0;P<T.length;P++){var j=this._asn1ToNoticeNum(T[P]);j!=null&&(B.noticenum=j);var Y=this.asn1ToDisplayText(T[P]);Y!=null&&(B.org=Y)}return Object.keys(B).length>0?B:void 0}catch{return}},this._asn1ToNoticeNum=function(S){try{for(var B=ur(S,"seq"),T=[],P=0;P<B.length;P++){var j=B[P];T.push(parseInt(ur(j,"int.hex"),16))}return T}catch{return}},this.getDisplayText=function(S){var B={"0c":"utf8",16:"ia5","1a":"vis","1e":"bmp"},T={};return T.type=B[S.substr(0,2)],T.str=Bi(n(S,0)),T},this.asn1ToDisplayText=function(S){if(S.utf8str!=null)return{type:"utf8",str:S.utf8str.str};if(S.ia5str!=null)return{type:"ia5",str:S.ia5str.str};if(S.visstr!=null)return{type:"vis",str:S.visstr.str};if(S.bmpstr!=null)return{type:"bmp",str:S.bmpstr.str};if(S.prnstr!=null)return{type:"prn",str:S.prnstr.str}},this.getExtPolicyMappings=function(S,B){var T=this.getCriticalExtV("policyMappings",S,B);if(S=T[0],B=T[1],S!=null){var P={extname:"policyMappings"};B&&(P.critical=!0);try{for(var j=a(S),Y=j.seq,M=[],z=0;z<Y.length;z++){var W=Y[z].seq;M.push([W[0].oid,W[1].oid])}P.array=M}catch{throw new C("malformed policyMappings")}return P}},this.getExtPolicyConstraints=function(S,B){var T=this.getCriticalExtV("policyConstraints",S,B);if(S=T[0],B=T[1],S!=null){var P={extname:"policyConstraints"};B&&(P.critical=!0);var j=a(S);try{for(var Y=j.seq,M=0;M<Y.length;M++){var z=Y[M].tag;z.explicit==!1&&(z.tag=="80"&&(P.reqexp=parseInt(z.hex,16)),z.tag=="81"&&(P.inhibit=parseInt(z.hex,16)))}}catch{return new C("malformed policyConstraints value")}return P}},this.getExtInhibitAnyPolicy=function(S,B){var T=this.getCriticalExtV("inhibitAnyPolicy",S,B);if(S=T[0],B=T[1],S!=null){var P={extname:"inhibitAnyPolicy"};B&&(P.critical=!0);var j=w(S,0);return j==-1?new C("wrong value"):(P.skip=j,P)}},this.getExtCRLNumber=function(S,B){var T={extname:"cRLNumber"};if(B&&(T.critical=!0),S.substr(0,2)=="02")return T.num={hex:n(S,0)},T;throw new C("hExtV parse error: "+S)},this.getExtCRLReason=function(S,B){var T={extname:"cRLReason"};if(B&&(T.critical=!0),S.substr(0,2)=="0a")return T.code=parseInt(n(S,0),16),T;throw new Error("hExtV parse error: "+S)},this.getExtOcspNonce=function(S,B){var T={extname:"ocspNonce"};B&&(T.critical=!0);var P=n(S,0);return T.hex=P,T},this.getExtOcspNoCheck=function(S,B){var T={extname:"ocspNoCheck"};return B&&(T.critical=!0),T},this.getExtAdobeTimeStamp=function(S,B){if(S===void 0&&B===void 0){var T=this.getExtInfo("adobeTimeStamp");if(T===void 0)return;S=s(this.hex,T.vidx),B=T.critical}var P={extname:"adobeTimeStamp"};B&&(P.critical=!0);var j=r(S,0);if(j.length>1){var Y=s(S,j[1]),M=this.getGeneralName(Y);M.uri!=null&&(P.uri=M.uri)}if(j.length>2){var z=s(S,j[2]);z=="0101ff"&&(P.reqauth=!0),z=="010100"&&(P.reqauth=!1)}return P},this.getExtSubjectDirectoryAttributes=function(S,B){if(S===void 0&&B===void 0){var T=this.getExtInfo("subjectDirectoryAttributes");if(T===void 0)return;S=s(this.hex,T.vidx),B=T.critical}var P={extname:"subjectDirectoryAttributes"};B&&(P.critical=!0);try{for(var j=a(S),Y=[],M=0;M<j.seq.length;M++){var z=j.seq[M],W=ur(z,"seq.0.oid"),ie=ur(z,"seq.1.set");if(W==null||ie==null)throw"error";Y.push({attr:W,array:ie})}return P.array=Y,P}catch{throw new Error("malformed subjectDirectoryAttributes extension value")}};var F=function(S){var B={};try{var T=S.seq[0].oid,P=E.asn1.x509.OID.name2oid(T);B.type=E.asn1.x509.OID.oid2atype(P);var j=S.seq[1];if(j.utf8str!=null)B.ds="utf8",B.value=j.utf8str.str;else if(j.numstr!=null)B.ds="num",B.value=j.numstr.str;else if(j.telstr!=null)B.ds="tel",B.value=j.telstr.str;else if(j.prnstr!=null)B.ds="prn",B.value=j.prnstr.str;else if(j.ia5str!=null)B.ds="ia5",B.value=j.ia5str.str;else if(j.visstr!=null)B.ds="vis",B.value=j.visstr.str;else if(j.bmpstr!=null)B.ds="bmp",B.value=j.bmpstr.str;else throw"error";return B}catch{throw new Erorr("improper ASN.1 parsed AttrTypeAndValue")}},U=function(S){try{return S.set.map(function(B){return F(B)})}catch(B){throw new Error("improper ASN.1 parsed RDN: "+B)}},k=function(S){try{return S.seq.map(function(B){return U(B)})}catch(B){throw new Error("improper ASN.1 parsed X500Name: "+B)}};this.getX500NameRule=function(S){for(var B=!0,T=!0,P=!1,j="",Y="",M=null,z=[],W=0;W<S.length;W++)for(var ie=S[W],Ce=0;Ce<ie.length;Ce++)z.push(ie[Ce]);for(var W=0;W<z.length;W++){var Fe=z[W],xe=Fe.ds,it=Fe.value,nt=Fe.type;if(j+=":"+xe,xe!="prn"&&xe!="utf8"&&xe!="ia5")return"mixed";if(xe=="ia5"){if(nt!="CN")return"mixed";if(E.lang.String.isMail(it))continue;return"mixed"}if(nt=="C"){if(xe=="prn")continue;return"mixed"}if(Y+=":"+xe,M==null)M=xe;else if(M!==xe)return"mixed"}return M??"prn"},this.getAttrTypeAndValue=function(S){var B=a(S);return F(B)},this.getRDN=function(S){var B=a(S);return U(B)},this.getX500NameArray=function(S){var B=a(S);return k(B)},this.getX500Name=function(S,B,T){var P=this.getX500NameArray(S),j=this.dnarraytostr(P),Y={str:j};return Y.array=P,T==!0&&(Y.hex=S),B==!0&&(Y.canon=this.c14nRDNArray(P)),Y},this.readCertPEM=function(S){this.readCertHex(y(S))},this.readCertHex=function(S){this.hex=S,this.getVersion();try{g(this.hex,0,[0,7],"a3"),this.parseExt()}catch{}},this.getParam=function(S){var B={};return S==null&&(S={}),B.version=this.getVersion(),B.serial={hex:this.getSerialNumberHex()},B.sigalg=this.getSignatureAlgorithmField(),B.issuer=this.getIssuer(S.dncanon,S.dnhex),B.notbefore=this.getNotBefore(),B.notafter=this.getNotAfter(),B.subject=this.getSubject(S.dncanon,S.dnhex),B.sbjpubkey=Gn(this.getPublicKeyHex(),"PUBLIC KEY"),this.aExtInfo!=null&&this.aExtInfo.length>0&&(B.ext=this.getExtParamArray()),B.sighex=this.getSignatureValueHex(),S.tbshex==!0&&(B.tbshex=f(this.hex,0,[0])),S.nodnarray==!0&&(delete B.issuer.array,delete B.subject.array),B},this.getExtParamArray=function(S){if(S==null){var B=p(this.hex,0,[0,"[3]"]);B!=-1&&(S=h(this.hex,0,[0,"[3]",0],"30"))}for(var T=[],P=r(S,0),j=0;j<P.length;j++){var Y=s(S,P[j]),M=this.getExtParam(Y);M!=null&&T.push(M)}return T},this.getExtParam=function(S){var B={},T=r(S,0),P=T.length;if(P!=2&&P!=3)throw new Error("wrong number elements in Extension: "+P+" "+S);var j=b(u(S,0,[0],"06")),Y=!1;P==3&&f(S,0,[1])=="0101ff"&&(Y=!0);var M=f(S,0,[P-1,0]),z=void 0;if(j=="2.5.29.14"?z=this.getExtSubjectKeyIdentifier(M,Y):j=="2.5.29.15"?z=this.getExtKeyUsage(M,Y):j=="2.5.29.17"?z=this.getExtSubjectAltName(M,Y):j=="2.5.29.18"?z=this.getExtIssuerAltName(M,Y):j=="2.5.29.19"?z=this.getExtBasicConstraints(M,Y):j=="2.5.29.30"?z=this.getExtNameConstraints(M,Y):j=="2.5.29.31"?z=this.getExtCRLDistributionPoints(M,Y):j=="2.5.29.32"?z=this.getExtCertificatePolicies(M,Y):j=="2.5.29.33"?z=this.getExtPolicyMappings(M,Y):j=="2.5.29.35"?z=this.getExtAuthorityKeyIdentifier(M,Y):j=="2.5.29.36"?z=this.getExtPolicyConstraints(M,Y):j=="2.5.29.37"?z=this.getExtExtKeyUsage(M,Y):j=="2.5.29.54"?z=this.getExtInhibitAnyPolicy(M,Y):j=="1.3.6.1.5.5.7.1.1"?z=this.getExtAuthorityInfoAccess(M,Y):j=="2.5.29.20"?z=this.getExtCRLNumber(M,Y):j=="2.5.29.21"?z=this.getExtCRLReason(M,Y):j=="2.5.29.9"?z=this.getExtSubjectDirectoryAttributes(M,Y):j=="1.3.6.1.5.5.7.48.1.2"?z=this.getExtOcspNonce(M,Y):j=="1.3.6.1.5.5.7.48.1.5"?z=this.getExtOcspNoCheck(M,Y):j=="1.2.840.113583.1.1.9.1"?z=this.getExtAdobeTimeStamp(M,Y):We.EXT_PARSER[j]!=null&&(z=We.EXT_PARSER[j](j,Y,M)),z!=null)return z;var W={extname:j,extn:M};try{W.extn=a(M)}catch{}return Y&&(W.critical=!0),W},this.findExt=function(S,B){for(var T=0;T<S.length;T++)if(S[T].extname==B)return S[T];return null},this.updateExtCDPFullURI=function(S,B){var T=this.findExt(S,"cRLDistributionPoints");if(T!=null&&T.array!=null){for(var P=T.array,j=0;j<P.length;j++)if(P[j].dpname!=null&&P[j].dpname.full!=null)for(var Y=P[j].dpname.full,M=0;M<Y.length;M++){var z=Y[j];z.uri!=null&&(z.uri=B)}}},this.updateExtAIAOCSP=function(S,B){var T=this.findExt(S,"authorityInfoAccess");if(T!=null&&T.array!=null)for(var P=T.array,j=0;j<P.length;j++)P[j].ocsp!=null&&(P[j].ocsp=B)},this.updateExtAIACAIssuer=function(S,B){var T=this.findExt(S,"authorityInfoAccess");if(T!=null&&T.array!=null)for(var P=T.array,j=0;j<P.length;j++)P[j].caissuer!=null&&(P[j].caissuer=B)},this.dnarraytostr=function(S){function B(P){return P.map(function(j){return T(j).replace(/\+/,"\\+")}).join("+")}function T(P){return P.type+"="+P.value}return"/"+S.map(function(P){return B(P).replace(/\//,"\\/")}).join("/")},this.setCanonicalizedDN=function(S){var B;if(S.str!=null&&S.array==null){var T=new E.asn1.x509.X500Name({str:S.str}),P=T.tohex();B=this.getX500NameArray(P)}else B=S.array;S.canon==null&&(S.canon=this.c14nRDNArray(B))},this.c14nRDNArray=function(S){for(var B=[],T=0;T<S.length;T++){for(var P=S[T],j=[],Y=0;Y<P.length;Y++){var M=P[Y],z=M.value;z=z.replace(/^\s*/,""),z=z.replace(/\s*$/,""),z=z.replace(/\s+/g," "),z=z.toLowerCase(),j.push(M.type.toLowerCase()+"="+z)}B.push(j.join("+"))}return"/"+B.join("/")},this.getInfo=function(){var S=function(gr){for(var vt="",tr="    ",st=`
`,Ge=gr.array,mr=0;mr<Ge.length;mr++){var qe=Ge[mr];if(qe.dn!=null&&(vt+=tr+"dn: "+qe.dn.str+st),qe.ip!=null&&(vt+=tr+"ip: "+qe.ip+st),qe.rfc822!=null&&(vt+=tr+"rfc822: "+qe.rfc822+st),qe.dns!=null&&(vt+=tr+"dns: "+qe.dns+st),qe.uri!=null&&(vt+=tr+"uri: "+qe.uri+st),qe.other!=null){var Ht=qe.other.oid,En=JSON.stringify(qe.other.value).replace(/\"/g,"");vt+=tr+"other: "+Ht+"="+En+st}}return vt=vt.replace(/\n$/,""),vt},B=function(gr){for(var vt="",tr=gr.array,st=0;st<tr.length;st++){var Ge=tr[st];if(vt+="    policy oid: "+Ge.policyoid+`
`,Ge.array!==void 0)for(var mr=0;mr<Ge.array.length;mr++){var qe=Ge.array[mr];qe.cps!==void 0&&(vt+="    cps: "+qe.cps+`
`)}}return vt},T=function(gr){for(var vt="",tr=gr.array,st=0;st<tr.length;st++){var Ge=tr[st];try{Ge.dpname.full[0].uri!==void 0&&(vt+="    "+Ge.dpname.full[0].uri+`
`)}catch{}try{Ge.dname.full[0].dn.hex!==void 0&&(vt+="    "+We.hex2dn(Ge.dpname.full[0].dn.hex)+`
`)}catch{}}return vt},P=function(gr){for(var vt="",tr=gr.array,st=0;st<tr.length;st++){var Ge=tr[st];Ge.caissuer!==void 0&&(vt+="    caissuer: "+Ge.caissuer+`
`),Ge.ocsp!==void 0&&(vt+="    ocsp: "+Ge.ocsp+`
`)}return vt},j=We,Y,M,z;if(Y=`Basic Fields
`,Y+="  serial number: "+this.getSerialNumberHex()+`
`,Y+="  signature algorithm: "+this.getSignatureAlgorithmField()+`
`,Y+="  issuer: "+this.getIssuerString()+`
`,Y+="  notBefore: "+this.getNotBefore()+`
`,Y+="  notAfter: "+this.getNotAfter()+`
`,Y+="  subject: "+this.getSubjectString()+`
`,Y+=`  subject public key info: 
`,M=this.getPublicKey(),Y+="    key algorithm: "+M.type+`
`,M.type==="RSA"&&(Y+="    n="+Zg(M.n.toString(16)).substr(0,16)+`...
`,Y+="    e="+Zg(M.e.toString(16))+`
`),z=this.aExtInfo,z!=null){Y+=`X509v3 Extensions:
`;for(var W=0;W<z.length;W++){var ie=z[W],Ce=E.asn1.x509.OID.oid2name(ie.oid);Ce===""&&(Ce=ie.oid);var Fe="";if(ie.critical===!0&&(Fe="CRITICAL"),Y+="  "+Ce+" "+Fe+`:
`,Ce==="basicConstraints"){var xe=this.getExtBasicConstraints();xe.cA===void 0?Y+=`    {}
`:(Y+="    cA=true",xe.pathLen!==void 0&&(Y+=", pathLen="+xe.pathLen),Y+=`
`)}else if(Ce=="policyMappings"){var it=this.getExtPolicyMappings().array,nt=it.map(function(gr){var vt=gr;return vt[0]+":"+vt[1]}).join(", ");Y+="    "+nt+`
`}else if(Ce=="policyConstraints"){var dt=this.getExtPolicyConstraints();Y+="    ",dt.reqexp!=null&&(Y+=" reqexp="+dt.reqexp),dt.inhibit!=null&&(Y+=" inhibit="+dt.inhibit),Y+=`
`}else if(Ce=="inhibitAnyPolicy"){var dt=this.getExtInhibitAnyPolicy();Y+="    skip="+dt.skip+`
`}else if(Ce=="keyUsage")Y+="    "+this.getExtKeyUsageString()+`
`;else if(Ce=="subjectKeyIdentifier")Y+="    "+this.getExtSubjectKeyIdentifier().kid.hex+`
`;else if(Ce=="authorityKeyIdentifier"){var pt=this.getExtAuthorityKeyIdentifier();pt.kid!==void 0&&(Y+="    kid="+pt.kid.hex+`
`)}else if(Ce=="extKeyUsage"){var wn=this.getExtExtKeyUsage().array;Y+="    "+wn.join(", ")+`
`}else if(Ce=="subjectAltName"){var hr=S(this.getExtSubjectAltName());Y+=hr+`
`}else if(Ce=="cRLDistributionPoints"){var St=this.getExtCRLDistributionPoints();Y+=T(St)}else if(Ce=="authorityInfoAccess"){var Br=this.getExtAuthorityInfoAccess();Y+=P(Br)}else Ce=="certificatePolicies"&&(Y+=B(this.getExtCertificatePolicies()))}}return Y+="signature algorithm: "+this.getSignatureAlgorithmName()+`
`,Y+="signature: "+this.getSignatureValueHex().substr(0,16)+`...
`,Y},typeof e=="string"&&(e.indexOf("-----BEGIN")!=-1?this.readCertPEM(e):E.lang.String.isHex(e)&&this.readCertHex(e))}We.EXT_PARSER={};We.registExtParser=function(e,t){We.EXT_PARSER[e]=t};We.hex2dn=function(e,t){t===void 0&&(t=0);var r=new We,n=be.getTLV(e,t),i=r.getX500Name(e);return i.str};We.hex2rdn=function(e,t){if(t===void 0&&(t=0),e.substr(t,2)!=="31")throw new Error("malformed RDN");for(var r=new Array,n=be.getChildIdx(e,t),i=0;i<n.length;i++)r.push(We.hex2attrTypeValue(e,n[i]));return r=r.map(function(a){return a.replace("+","\\+")}),r.join("+")};We.hex2attrTypeValue=function(e,t){var r=be,n=r.getV;if(t===void 0&&(t=0),e.substr(t,2)!=="30")throw new Error("malformed attribute type and value");var i=r.getChildIdx(e,t);i.length!==2||e.substr(i[0],2);var a=n(e,i[0]),s=E.asn1.ASN1Util.oidHexToInt(a),u=E.asn1.x509.OID.oid2atype(s),c=n(e,i[1]),f=Bi(c);return u+"="+f};We.getPublicKeyFromCertHex=function(e){var t=new We;return t.readCertHex(e),t.getPublicKey()};We.getPublicKeyFromCertPEM=function(e){var t=new We;return t.readCertPEM(e),t.getPublicKey()};We.getPublicKeyInfoPropOfCertPEM=function(e){var t=be,r=t.getVbyList,n={},i,a,s;return n.algparam=null,i=new We,i.readCertPEM(e),a=i.getPublicKeyHex(),n.keyhex=r(a,0,[1],"03").substr(2),n.algoid=r(a,0,[0,0],"06"),n.algoid==="2a8648ce3d0201"&&(n.algparam=r(a,0,[0,1],"06")),n};We.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"];var PP=function(e){var t=E,r=t.lang.String.isHex,n=be,i=n.getV,a=n.getTLV,s=n.getVbyList,u=n.getTLVbyList,c=n.getTLVbyListEx,f=n.getIdxbyList,h=n.getIdxbyListEx,g=n.getChildIdx,p=new We;this.hex=null,this.posSigAlg=null,this.posRevCert=null,this.parsed=null,this._setPos=function(){var d=f(this.hex,0,[0,0]),w=this.hex.substr(d,2);if(w=="02")this.posSigAlg=1;else if(w=="30")this.posSigAlg=0;else throw new Error("malformed 1st item of TBSCertList: "+w);var v=f(this.hex,0,[0,this.posSigAlg+3]),b=this.hex.substr(v,2);if(b=="17"||b=="18"){var m,y;m=f(this.hex,0,[0,this.posSigAlg+4]),this.posRevCert=null,m!=-1&&(y=this.hex.substr(m,2),y=="30"&&(this.posRevCert=this.posSigAlg+4))}else if(b=="30")this.posRevCert=this.posSigAlg+3;else if(b=="a0")this.posRevCert=null;else throw new Error("malformed nextUpdate or revCert tag: "+b)},this.getVersion=function(){return this.posSigAlg==0?null:parseInt(s(this.hex,0,[0,0],"02"),16)+1},this.getSignatureAlgorithmField=function(){var d=u(this.hex,0,[0,this.posSigAlg],"30");return p.getAlgorithmIdentifierName(d)},this.getIssuer=function(){return p.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return u(this.hex,0,[0,this.posSigAlg+1],"30")},this.getThisUpdate=function(){var d=s(this.hex,0,[0,this.posSigAlg+2]);return result=Bi(d)},this.getNextUpdate=function(){var d=f(this.hex,0,[0,this.posSigAlg+3]),w=this.hex.substr(d,2);return w!="17"&&w!="18"?null:Bi(i(this.hex,d))},this.getRevCertArray=function(){if(this.posRevCert==null)return null;for(var d=[],w=f(this.hex,0,[0,this.posRevCert]),v=g(this.hex,w),b=0;b<v.length;b++){var m=a(this.hex,v[b]);d.push(this.getRevCert(m))}return d},this.getRevCert=function(d){var w={},v=g(d,0);return w.sn={hex:s(d,0,[0],"02")},w.date=Bi(s(d,0,[1])),v.length==3&&(w.ext=p.getExtParamArray(u(d,0,[2]))),w},this.findRevCert=function(d){var w=new We(d),v=w.getSerialNumberHex();return this.findRevCertBySN(v)},this.findRevCertBySN=function(d){if(this.parsed==null&&this.getParam(),this.parsed.revcert==null)return null;for(var w=this.parsed.revcert,v=0;v<w.length;v++)if(d==w[v].sn.hex)return w[v];return null},this.getSignatureValueHex=function(){return s(this.hex,0,[2],"03",!0)},this.verifySignature=function(d){var w=this.getSignatureAlgorithmField(),v=this.getSignatureValueHex(),b=u(this.hex,0,[0],"30"),m=new E.crypto.Signature({alg:w});return m.init(d),m.updateHex(b),m.verify(v)},this.getParam=function(d){var w={},v=this.getVersion();v!=null&&(w.version=v),w.sigalg=this.getSignatureAlgorithmField(),w.issuer=this.getIssuer(),w.thisupdate=this.getThisUpdate();var b=this.getNextUpdate();b!=null&&(w.nextupdate=b);var m=this.getRevCertArray();m!=null&&(w.revcert=m);var y=h(this.hex,0,[0,"[0]"]);if(y!=-1){var D=c(this.hex,0,[0,"[0]",0]);w.ext=p.getExtParamArray(D)}return w.sighex=this.getSignatureValueHex(),this.parsed=w,typeof d=="object"&&(d.tbshex==!0&&(w.tbshex=u(this.hex,0,[0])),d.nodnarray==!0&&delete w.issuer.array),w},typeof e=="string"&&(r(e)?this.hex=e:e.match(/-----BEGIN X509 CRL/)&&(this.hex=Sr(e)),this._setPos())};(typeof E>"u"||!E)&&(E={});(typeof E.jws>"u"||!E.jws)&&(E.jws={});E.jws.JWS=function(){var e=E,t=e.jws.JWS,r=t.isSafeJSONString;this.parseJWS=function(n,i){if(!(this.parsedJWS!==void 0&&(i||this.parsedJWS.sigvalH!==void 0))){var a=n.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(a==null)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var s=a[1],u=a[2],c=a[3],f=s+"."+u;if(this.parsedJWS={},this.parsedJWS.headB64U=s,this.parsedJWS.payloadB64U=u,this.parsedJWS.sigvalB64U=c,this.parsedJWS.si=f,!i){var h=Er(c),g=Si(h,16);this.parsedJWS.sigvalH=h,this.parsedJWS.sigvalBI=g}var p=Ts(s),d=Ts(u);if(this.parsedJWS.headS=p,this.parsedJWS.payloadS=d,!r(p,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+p}}};E.jws.JWS.sign=function(e,t,r,n,i){var a=E,s=a.jws,u=s.JWS,c=u.readSafeJSONString,f=u.isSafeJSONString,h=a.crypto,g=h.ECDSA,p=h.Mac,d=h.Signature,w=JSON,v,b,m;if(typeof t!="string"&&typeof t!="object")throw"spHeader must be JSON string or object: "+t;if(typeof t=="object"&&(b=t,v=w.stringify(b)),typeof t=="string"){if(v=t,!f(v))throw"JWS Head is not safe JSON string: "+v;b=c(v)}if(m=r,typeof r=="object"&&(m=w.stringify(r)),(e==""||e==null)&&b.alg!==void 0&&(e=b.alg),e!=""&&e!=null&&b.alg===void 0&&(b.alg=e,v=w.stringify(b)),e!==b.alg)throw"alg and sHeader.alg doesn't match: "+e+"!="+b.alg;var y=null;if(u.jwsalg2sigalg[e]===void 0)throw"unsupported alg name: "+e;y=u.jwsalg2sigalg[e];var D=Of(v),C=Of(m),F=D+"."+C,U="";if(y.substr(0,4)=="Hmac"){if(n===void 0)throw"mac key shall be specified for HS* alg";var k=new p({alg:y,prov:"cryptojs",pass:n});k.updateString(F),U=k.doFinal()}else if(y.indexOf("withECDSA")!=-1){var S=new d({alg:y});S.init(n,i),S.updateString(F);var B=S.sign();U=E.crypto.ECDSA.asn1SigToConcatSig(B)}else if(y!="none"){var S=new d({alg:y});S.init(n,i),S.updateString(F),U=S.sign()}var T=rn(U);return F+"."+T};E.jws.JWS.verify=function(e,t,r){var n=E,i=n.jws,a=i.JWS,s=a.readSafeJSONString,u=n.crypto,c=u.ECDSA,f=u.Mac,h=u.Signature,g;if(typeof rt!==void 0&&(g=rt),!um(e))return!1;var p=e.split(".");if(p.length!==3)return!1;var d=p[0],w=p[1],v=d+"."+w,b=Er(p[2]),m=s(Ts(p[0])),y=null,D=null;if(m.alg===void 0)throw"algorithm not specified in header";if(y=m.alg,D=y.substr(0,2),r!=null&&Object.prototype.toString.call(r)==="[object Array]"&&r.length>0){var C=":"+r.join(":")+":";if(C.indexOf(":"+y+":")==-1)throw"algorithm '"+y+"' not accepted in the list"}if(y!="none"&&t===null)throw"key shall be specified to verify.";if(typeof t=="string"&&t.indexOf("-----BEGIN ")!=-1&&(t=Ct.getKey(t)),(D=="RS"||D=="PS")&&!(t instanceof g))throw"key shall be a RSAKey obj for RS* and PS* algs";if(D=="ES"&&!(t instanceof c))throw"key shall be a ECDSA obj for ES* algs";y=="none";var F=null;if(a.jwsalg2sigalg[m.alg]===void 0)throw"unsupported alg name: "+y;if(F=a.jwsalg2sigalg[y],F=="none")throw"not supported";if(F.substr(0,4)=="Hmac"){var U=null;if(t===void 0)throw"hexadecimal key shall be specified for HMAC";var k=new f({alg:F,pass:t});return k.updateString(v),U=k.doFinal(),b==U}else if(F.indexOf("withECDSA")!=-1){var S=null;try{S=c.concatSigToASN1Sig(b)}catch{return!1}var B=new h({alg:F});return B.init(t),B.updateString(v),B.verify(S)}else{var B=new h({alg:F});return B.init(t),B.updateString(v),B.verify(b)}};E.jws.JWS.parse=function(e){var t=e.split("."),r={},n,i,a;if(t.length!=2&&t.length!=3)throw"malformed sJWS: wrong number of '.' splitted elements";return n=t[0],i=t[1],t.length==3&&(a=t[2]),r.headerObj=E.jws.JWS.readSafeJSONString(Ts(n)),r.payloadObj=E.jws.JWS.readSafeJSONString(Ts(i)),r.headerPP=JSON.stringify(r.headerObj,null,"  "),r.payloadObj==null?r.payloadPP=Ts(i):r.payloadPP=JSON.stringify(r.payloadObj,null,"  "),a!==void 0&&(r.sigHex=Er(a)),r};E.jws.JWS.verifyJWT=function(e,t,r){var n=E,i=n.jws,a=i.JWS,s=a.readSafeJSONString,u=a.inArray,c=a.includedArray;if(!um(e))return!1;var f=e.split(".");if(f.length!=3)return!1;var h=f[0],g=f[1],p=h+"."+g,d=Er(f[2]),w=s(Ts(h)),v=s(Ts(g));if(w.alg===void 0)return!1;if(r.alg===void 0)throw"acceptField.alg shall be specified";if(!u(w.alg,r.alg)||v.iss!==void 0&&typeof r.iss=="object"&&!u(v.iss,r.iss)||v.sub!==void 0&&typeof r.sub=="object"&&!u(v.sub,r.sub))return!1;if(v.aud!==void 0&&typeof r.aud=="object"){if(typeof v.aud=="string"){if(!u(v.aud,r.aud))return!1}else if(typeof v.aud=="object"&&!c(v.aud,r.aud))return!1}var b=i.IntDate.getNow();return r.verifyAt!==void 0&&typeof r.verifyAt=="number"&&(b=r.verifyAt),(r.gracePeriod===void 0||typeof r.gracePeriod!="number")&&(r.gracePeriod=0),!(v.exp!==void 0&&typeof v.exp=="number"&&v.exp+r.gracePeriod<b||v.nbf!==void 0&&typeof v.nbf=="number"&&b<v.nbf-r.gracePeriod||v.iat!==void 0&&typeof v.iat=="number"&&b<v.iat-r.gracePeriod||v.jti!==void 0&&r.jti!==void 0&&v.jti!==r.jti||!a.verify(e,t,r.alg))};E.jws.JWS.includedArray=function(e,t){var r=E.jws.JWS.inArray;if(e===null||typeof e!="object"||typeof e.length!="number")return!1;for(var n=0;n<e.length;n++)if(!r(e[n],t))return!1;return!0};E.jws.JWS.inArray=function(e,t){if(t===null||typeof t!="object"||typeof t.length!="number")return!1;for(var r=0;r<t.length;r++)if(t[r]==e)return!0;return!1};E.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",ES512:"SHA512withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"};E.jws.JWS.isSafeJSONString=function(e,t,r){var n=null;try{return n=Py(e),typeof n!="object"||n.constructor===Array?0:(t&&(t[r]=n),1)}catch{return 0}};E.jws.JWS.readSafeJSONString=function(e){var t=null;try{return t=Py(e),typeof t!="object"||t.constructor===Array?null:t}catch{return null}};E.jws.JWS.getEncodedSignatureValueFromJWS=function(e){var t=e.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(t==null)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return t[1]};E.jws.JWS.getJWKthumbprint=function(e){if(e.kty!=="RSA"&&e.kty!=="EC"&&e.kty!=="oct")throw"unsupported algorithm for JWK Thumprint";var t="{";if(e.kty==="RSA"){if(typeof e.n!="string"||typeof e.e!="string")throw"wrong n and e value for RSA key";t+='"e":"'+e.e+'",',t+='"kty":"'+e.kty+'",',t+='"n":"'+e.n+'"}'}else if(e.kty==="EC"){if(typeof e.crv!="string"||typeof e.x!="string"||typeof e.y!="string")throw"wrong crv, x and y value for EC key";t+='"crv":"'+e.crv+'",',t+='"kty":"'+e.kty+'",',t+='"x":"'+e.x+'",',t+='"y":"'+e.y+'"}'}else if(e.kty==="oct"){if(typeof e.k!="string")throw"wrong k value for oct(symmetric) key";t+='"kty":"'+e.kty+'",',t+='"k":"'+e.k+'"}'}var r=fa(t),n=E.crypto.Util.hashHex(r,"sha256"),i=rn(n);return i};E.jws.IntDate={};E.jws.IntDate.get=function(e){var t=E.jws.IntDate,r=t.getNow,n=t.getZulu;if(e=="now")return r();if(e=="now + 1hour")return r()+60*60;if(e=="now + 1day")return r()+60*60*24;if(e=="now + 1month")return r()+60*60*24*30;if(e=="now + 1year")return r()+60*60*24*365;if(e.match(/Z$/))return n(e);if(e.match(/^[0-9]+$/))return parseInt(e);throw"unsupported format: "+e};E.jws.IntDate.getZulu=function(e){return ky(e)};E.jws.IntDate.getNow=function(){var e=~~(new Date/1e3);return e};E.jws.IntDate.intDate2UTCString=function(e){var t=new Date(e*1e3);return t.toUTCString()};E.jws.IntDate.intDate2Zulu=function(e){var t=new Date(e*1e3),r=("0000"+t.getUTCFullYear()).slice(-4),n=("00"+(t.getUTCMonth()+1)).slice(-2),i=("00"+t.getUTCDate()).slice(-2),a=("00"+t.getUTCHours()).slice(-2),s=("00"+t.getUTCMinutes()).slice(-2),u=("00"+t.getUTCSeconds()).slice(-2);return r+n+i+a+s+u+"Z"};(typeof E>"u"||!E)&&(E={});(typeof E.jws>"u"||!E.jws)&&(E.jws={});E.jws.JWSJS=function(){var e=E,t=e.jws,r=t.JWS,n=r.readSafeJSONString;this.aHeader=[],this.sPayload="",this.aSignature=[],this.init=function(){this.aHeader=[],this.sPayload=void 0,this.aSignature=[]},this.initWithJWS=function(i){this.init();var a=i.split(".");if(a.length!=3)throw"malformed input JWS";this.aHeader.push(a[0]),this.sPayload=a[1],this.aSignature.push(a[2])},this.addSignature=function(i,a,s,u){if(this.sPayload===void 0||this.sPayload===null)throw"there's no JSON-JS signature to add.";var c=this.aHeader.length;if(this.aHeader.length!=this.aSignature.length)throw"aHeader.length != aSignature.length";try{var f=E.jws.JWS.sign(i,a,this.sPayload,s,u),h=f.split("."),g=h[0],p=h[2];this.aHeader.push(h[0]),this.aSignature.push(h[2])}catch(d){throw this.aHeader.length>c&&this.aHeader.pop(),this.aSignature.length>c&&this.aSignature.pop(),"addSignature failed: "+d}},this.verifyAll=function(i){if(this.aHeader.length!==i.length||this.aSignature.length!==i.length)return!1;for(var a=0;a<i.length;a++){var s=i[a];if(s.length!==2)return!1;var u=this.verifyNth(a,s[0],s[1]);if(u===!1)return!1}return!0},this.verifyNth=function(i,a,s){if(this.aHeader.length<=i||this.aSignature.length<=i)return!1;var u=this.aHeader[i],c=this.aSignature[i],f=u+"."+this.sPayload+"."+c,h=!1;try{h=r.verify(f,a,s)}catch{return!1}return h},this.readJWSJS=function(i){if(typeof i=="string"){var a=n(i);if(a==null)throw"argument is not safe JSON object string";this.aHeader=a.headers,this.sPayload=a.payload,this.aSignature=a.signatures}else try{if(i.headers.length>0)this.aHeader=i.headers;else throw"malformed header";if(typeof i.payload=="string")this.sPayload=i.payload;else throw"malformed signatures";if(i.signatures.length>0)this.aSignature=i.signatures;else throw"malformed signatures"}catch(s){throw"malformed JWS-JS JSON object: "+s}},this.getJSON=function(){return{headers:this.aHeader,payload:this.sPayload,signatures:this.aSignature}},this.isEmpty=function(){return this.aHeader.length==0?1:0}};_e.SecureRandom=fl;_e.rng_seed_time=rm;_e.BigInteger=ee;_e.RSAKey=rt;_e.ECDSA=E.crypto.ECDSA;_e.DSA=E.crypto.DSA;_e.Signature=E.crypto.Signature;_e.MessageDigest=E.crypto.MessageDigest;_e.Mac=E.crypto.Mac;_e.KEYUTIL=Ct;_e.ASN1HEX=be;_e.X509=We;_e.X509CRL=PP;_e.CryptoJS=Se;_e.b64tohex=ol;_e.b64toBA=Iy;_e.ECFieldElementFp=nn;_e.ECPointFp=qt;_e.ECCurveFp=au;_e.stoBA=Oy;_e.BAtos=Ty;_e.BAtohex=v0;_e.stohex=Ii;_e.stob64=dP;_e.stob64u=pP;_e.b64utos=gP;_e.b64tob64u=ul;_e.b64utob64=Nf;_e.hex2b64=su;_e.hextob64u=rn;_e.b64utohex=Er;_e.utf8tob64u=Of;_e.b64utoutf8=Ts;_e.utf8tob64=mP;_e.b64toutf8=vP;_e.utf8tohex=w0;_e.hextoutf8=Qt;_e.hextorstr=Bi;_e.rstrtohex=fa;_e.hextob64=nm;_e.hextob64nl=AP;_e.b64nltohex=Ny;_e.hextopem=Gn;_e.pemtohex=Sr;_e.hextoArrayBuffer=_P;_e.ArrayBuffertohex=CP;_e.zulutomsec=im;_e.msectozulu=DP;_e.zulutosec=ky;_e.zulutodate=FP;_e.datetozulu=SP;_e.uricmptohex=A0;_e.hextouricmp=y0;_e.ipv6tohex=Xg;_e.hextoipv6=Jg;_e.hextoip=h0;_e.iptohex=sm;_e.ucs2hextoutf8=am;_e.encodeURIComponentAll=b0;_e.newline_toUnix=IP;_e.newline_toDos=BP;_e.hextoposhex=Zg;_e.intarystrtohex=$P;_e.strdiffidx=RP;_e.oidtohex=jy;_e.hextooid=_0;_e.strpad=d0;_e.bitstrtoint=My;_e.inttobitstr=qy;_e.bitstrtobinstr=Vy;_e.binstrtobitstr=xP;_e.isBase64URLDot=um;_e.namearraytobinstr=p0;_e.extendClass=pe;_e.foldnl=E0;_e.b64topem=yP;_e.pemtob64=bP;_e.timeogen=Ly;_e.aryval=ur;_e.inttohex=Hy;_e.twoscompl=kf;_e.KJUR=E;_e.crypto=E.crypto;_e.asn1=E.asn1;_e.jws=E.jws;_e.lang=E.lang;_e.VERSION=M7;_e.VERSION_FULL=q7});var Jo=ce((QG,Xo)=>{"use strict";function Xy(e){return typeof e>"u"||e===null}function TP(e){return typeof e=="object"&&e!==null}function NP(e){return Array.isArray(e)?e:Xy(e)?[]:[e]}function kP(e,t){var r,n,i,a;if(t)for(a=Object.keys(t),r=0,n=a.length;r<n;r+=1)i=a[r],e[i]=t[i];return e}function LP(e,t){var r="",n;for(n=0;n<t;n+=1)r+=e;return r}function UP(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}Xo.exports.isNothing=Xy;Xo.exports.isObject=TP;Xo.exports.toArray=NP;Xo.exports.repeat=LP;Xo.exports.isNegativeZero=UP;Xo.exports.extend=kP});var hl=ce((eY,Jy)=>{"use strict";function Lf(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=(this.reason||"(unknown reason)")+(this.mark?" "+this.mark.toString():""),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Lf.prototype=Object.create(Error.prototype);Lf.prototype.constructor=Lf;Lf.prototype.toString=function(t){var r=this.name+": ";return r+=this.reason||"(unknown reason)",!t&&this.mark&&(r+=" "+this.mark.toString()),r};Jy.exports=Lf});var eb=ce((tY,Qy)=>{"use strict";var Zy=Jo();function cm(e,t,r,n,i){this.name=e,this.buffer=t,this.position=r,this.line=n,this.column=i}cm.prototype.getSnippet=function(t,r){var n,i,a,s,u;if(!this.buffer)return null;for(t=t||4,r=r||75,n="",i=this.position;i>0&&`\0\r
\x85\u2028\u2029`.indexOf(this.buffer.charAt(i-1))===-1;)if(i-=1,this.position-i>r/2-1){n=" ... ",i+=5;break}for(a="",s=this.position;s<this.buffer.length&&`\0\r
\x85\u2028\u2029`.indexOf(this.buffer.charAt(s))===-1;)if(s+=1,s-this.position>r/2-1){a=" ... ",s-=5;break}return u=this.buffer.slice(i,s),Zy.repeat(" ",t)+n+u+a+`
`+Zy.repeat(" ",t+this.position-i+n.length)+"^"};cm.prototype.toString=function(t){var r,n="";return this.name&&(n+='in "'+this.name+'" '),n+="at line "+(this.line+1)+", column "+(this.column+1),t||(r=this.getSnippet(),r&&(n+=`:
`+r)),n};Qy.exports=cm});var sn=ce((rY,rb)=>{"use strict";var tb=hl(),jP=["kind","resolve","construct","instanceOf","predicate","represent","defaultStyle","styleAliases"],HP=["scalar","sequence","mapping"];function MP(e){var t={};return e!==null&&Object.keys(e).forEach(function(r){e[r].forEach(function(n){t[String(n)]=r})}),t}function qP(e,t){if(t=t||{},Object.keys(t).forEach(function(r){if(jP.indexOf(r)===-1)throw new tb('Unknown option "'+r+'" is met in definition of "'+e+'" YAML type.')}),this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(r){return r},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.defaultStyle=t.defaultStyle||null,this.styleAliases=MP(t.styleAliases||null),HP.indexOf(this.kind)===-1)throw new tb('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}rb.exports=qP});var Zo=ce((nY,ib)=>{"use strict";var nb=Jo(),C0=hl(),VP=sn();function lm(e,t,r){var n=[];return e.include.forEach(function(i){r=lm(i,t,r)}),e[t].forEach(function(i){r.forEach(function(a,s){a.tag===i.tag&&a.kind===i.kind&&n.push(s)}),r.push(i)}),r.filter(function(i,a){return n.indexOf(a)===-1})}function KP(){var e={scalar:{},sequence:{},mapping:{},fallback:{}},t,r;function n(i){e[i.kind][i.tag]=e.fallback[i.tag]=i}for(t=0,r=arguments.length;t<r;t+=1)arguments[t].forEach(n);return e}function dl(e){this.include=e.include||[],this.implicit=e.implicit||[],this.explicit=e.explicit||[],this.implicit.forEach(function(t){if(t.loadKind&&t.loadKind!=="scalar")throw new C0("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.")}),this.compiledImplicit=lm(this,"implicit",[]),this.compiledExplicit=lm(this,"explicit",[]),this.compiledTypeMap=KP(this.compiledImplicit,this.compiledExplicit)}dl.DEFAULT=null;dl.create=function(){var t,r;switch(arguments.length){case 1:t=dl.DEFAULT,r=arguments[0];break;case 2:t=arguments[0],r=arguments[1];break;default:throw new C0("Wrong number of arguments for Schema.create function")}if(t=nb.toArray(t),r=nb.toArray(r),!t.every(function(n){return n instanceof dl}))throw new C0("Specified list of super schemas (or a single Schema object) contains a non-Schema object.");if(!r.every(function(n){return n instanceof VP}))throw new C0("Specified list of YAML types (or a single Type object) contains a non-Type object.");return new dl({include:t,explicit:r})};ib.exports=dl});var ab=ce((iY,sb)=>{"use strict";var zP=sn();sb.exports=new zP("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}})});var ob=ce((sY,ub)=>{"use strict";var GP=sn();ub.exports=new GP("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}})});var lb=ce((aY,cb)=>{"use strict";var YP=sn();cb.exports=new YP("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}})});var D0=ce((uY,fb)=>{"use strict";var WP=Zo();fb.exports=new WP({explicit:[ab(),ob(),lb()]})});var db=ce((oY,hb)=>{"use strict";var XP=sn();function JP(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function ZP(){return null}function QP(e){return e===null}hb.exports=new XP("tag:yaml.org,2002:null",{kind:"scalar",resolve:JP,construct:ZP,predicate:QP,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"}},defaultStyle:"lowercase"})});var gb=ce((cY,pb)=>{"use strict";var eO=sn();function tO(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function rO(e){return e==="true"||e==="True"||e==="TRUE"}function nO(e){return Object.prototype.toString.call(e)==="[object Boolean]"}pb.exports=new eO("tag:yaml.org,2002:bool",{kind:"scalar",resolve:tO,construct:rO,predicate:nO,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"})});var vb=ce((lY,mb)=>{"use strict";var iO=Jo(),sO=sn();function aO(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function uO(e){return 48<=e&&e<=55}function oO(e){return 48<=e&&e<=57}function cO(e){if(e===null)return!1;var t=e.length,r=0,n=!1,i;if(!t)return!1;if(i=e[r],(i==="-"||i==="+")&&(i=e[++r]),i==="0"){if(r+1===t)return!0;if(i=e[++r],i==="b"){for(r++;r<t;r++)if(i=e[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<t;r++)if(i=e[r],i!=="_"){if(!aO(e.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}for(;r<t;r++)if(i=e[r],i!=="_"){if(!uO(e.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="_")return!1;for(;r<t;r++)if(i=e[r],i!=="_"){if(i===":")break;if(!oO(e.charCodeAt(r)))return!1;n=!0}return!n||i==="_"?!1:i!==":"?!0:/^(:[0-5]?[0-9])+$/.test(e.slice(r))}function lO(e){var t=e,r=1,n,i,a=[];return t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),n=t[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),t=t.slice(1),n=t[0]),t==="0"?0:n==="0"?t[1]==="b"?r*parseInt(t.slice(2),2):t[1]==="x"?r*parseInt(t,16):r*parseInt(t,8):t.indexOf(":")!==-1?(t.split(":").forEach(function(s){a.unshift(parseInt(s,10))}),t=0,i=1,a.forEach(function(s){t+=s*i,i*=60}),r*t):r*parseInt(t,10)}function fO(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!iO.isNegativeZero(e)}mb.exports=new sO("tag:yaml.org,2002:int",{kind:"scalar",resolve:cO,construct:lO,predicate:fO,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0"+e.toString(8):"-0"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}})});var Ab=ce((fY,Eb)=>{"use strict";var wb=Jo(),hO=sn(),dO=new RegExp("^(?:[-+]?(?:0|[1-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function pO(e){return!(e===null||!dO.test(e)||e[e.length-1]==="_")}function gO(e){var t,r,n,i;return t=e.replace(/_/g,"").toLowerCase(),r=t[0]==="-"?-1:1,i=[],"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:t.indexOf(":")>=0?(t.split(":").forEach(function(a){i.unshift(parseFloat(a,10))}),t=0,n=1,i.forEach(function(a){t+=a*n,n*=60}),r*t):r*parseFloat(t,10)}var mO=/^[-+]?[0-9]+e/;function vO(e,t){var r;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(wb.isNegativeZero(e))return"-0.0";return r=e.toString(10),mO.test(r)?r.replace("e",".e"):r}function wO(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||wb.isNegativeZero(e))}Eb.exports=new hO("tag:yaml.org,2002:float",{kind:"scalar",resolve:pO,construct:gO,predicate:wO,represent:vO,defaultStyle:"lowercase"})});var fm=ce((hY,yb)=>{"use strict";var EO=Zo();yb.exports=new EO({include:[D0()],implicit:[db(),gb(),vb(),Ab()]})});var hm=ce((dY,bb)=>{"use strict";var AO=Zo();bb.exports=new AO({include:[fm()]})});var Fb=ce((pY,Db)=>{"use strict";var yO=sn(),_b=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Cb=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function bO(e){return e===null?!1:_b.exec(e)!==null||Cb.exec(e)!==null}function _O(e){var t,r,n,i,a,s,u,c=0,f=null,h,g,p;if(t=_b.exec(e),t===null&&(t=Cb.exec(e)),t===null)throw new Error("Date resolve error");if(r=+t[1],n=+t[2]-1,i=+t[3],!t[4])return new Date(Date.UTC(r,n,i));if(a=+t[4],s=+t[5],u=+t[6],t[7]){for(c=t[7].slice(0,3);c.length<3;)c+="0";c=+c}return t[9]&&(h=+t[10],g=+(t[11]||0),f=(h*60+g)*6e4,t[9]==="-"&&(f=-f)),p=new Date(Date.UTC(r,n,i,a,s,u,c)),f&&p.setTime(p.getTime()-f),p}function CO(e){return e.toISOString()}Db.exports=new yO("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:bO,construct:_O,instanceOf:Date,represent:CO})});var Ib=ce((gY,Sb)=>{"use strict";var DO=sn();function FO(e){return e==="<<"||e===null}Sb.exports=new DO("tag:yaml.org,2002:merge",{kind:"scalar",resolve:FO})});var Rb=ce((mY,$b)=>{"use strict";var Qo;try{Bb=ko,Qo=Bb("buffer").Buffer}catch{}var Bb,SO=sn(),dm=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function IO(e){if(e===null)return!1;var t,r,n=0,i=e.length,a=dm;for(r=0;r<i;r++)if(t=a.indexOf(e.charAt(r)),!(t>64)){if(t<0)return!1;n+=6}return n%8===0}function BO(e){var t,r,n=e.replace(/[\r\n=]/g,""),i=n.length,a=dm,s=0,u=[];for(t=0;t<i;t++)t%4===0&&t&&(u.push(s>>16&255),u.push(s>>8&255),u.push(s&255)),s=s<<6|a.indexOf(n.charAt(t));return r=i%4*6,r===0?(u.push(s>>16&255),u.push(s>>8&255),u.push(s&255)):r===18?(u.push(s>>10&255),u.push(s>>2&255)):r===12&&u.push(s>>4&255),Qo?Qo.from?Qo.from(u):new Qo(u):u}function $O(e){var t="",r=0,n,i,a=e.length,s=dm;for(n=0;n<a;n++)n%3===0&&n&&(t+=s[r>>18&63],t+=s[r>>12&63],t+=s[r>>6&63],t+=s[r&63]),r=(r<<8)+e[n];return i=a%3,i===0?(t+=s[r>>18&63],t+=s[r>>12&63],t+=s[r>>6&63],t+=s[r&63]):i===2?(t+=s[r>>10&63],t+=s[r>>4&63],t+=s[r<<2&63],t+=s[64]):i===1&&(t+=s[r>>2&63],t+=s[r<<4&63],t+=s[64],t+=s[64]),t}function RO(e){return Qo&&Qo.isBuffer(e)}$b.exports=new SO("tag:yaml.org,2002:binary",{kind:"scalar",resolve:IO,construct:BO,predicate:RO,represent:$O})});var Pb=ce((wY,xb)=>{"use strict";var xO=sn(),PO=Object.prototype.hasOwnProperty,OO=Object.prototype.toString;function TO(e){if(e===null)return!0;var t=[],r,n,i,a,s,u=e;for(r=0,n=u.length;r<n;r+=1){if(i=u[r],s=!1,OO.call(i)!=="[object Object]")return!1;for(a in i)if(PO.call(i,a))if(!s)s=!0;else return!1;if(!s)return!1;if(t.indexOf(a)===-1)t.push(a);else return!1}return!0}function NO(e){return e!==null?e:[]}xb.exports=new xO("tag:yaml.org,2002:omap",{kind:"sequence",resolve:TO,construct:NO})});var Tb=ce((EY,Ob)=>{"use strict";var kO=sn(),LO=Object.prototype.toString;function UO(e){if(e===null)return!0;var t,r,n,i,a,s=e;for(a=new Array(s.length),t=0,r=s.length;t<r;t+=1){if(n=s[t],LO.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;a[t]=[i[0],n[i[0]]]}return!0}function jO(e){if(e===null)return[];var t,r,n,i,a,s=e;for(a=new Array(s.length),t=0,r=s.length;t<r;t+=1)n=s[t],i=Object.keys(n),a[t]=[i[0],n[i[0]]];return a}Ob.exports=new kO("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:UO,construct:jO})});var kb=ce((AY,Nb)=>{"use strict";var HO=sn(),MO=Object.prototype.hasOwnProperty;function qO(e){if(e===null)return!0;var t,r=e;for(t in r)if(MO.call(r,t)&&r[t]!==null)return!1;return!0}function VO(e){return e!==null?e:{}}Nb.exports=new HO("tag:yaml.org,2002:set",{kind:"mapping",resolve:qO,construct:VO})});var pl=ce((yY,Lb)=>{"use strict";var KO=Zo();Lb.exports=new KO({include:[hm()],implicit:[Fb(),Ib()],explicit:[Rb(),Pb(),Tb(),kb()]})});var jb=ce((bY,Ub)=>{"use strict";var zO=sn();function GO(){return!0}function YO(){}function WO(){return""}function XO(e){return typeof e>"u"}Ub.exports=new zO("tag:yaml.org,2002:js/undefined",{kind:"scalar",resolve:GO,construct:YO,predicate:XO,represent:WO})});var Mb=ce((_Y,Hb)=>{"use strict";var JO=sn();function ZO(e){if(e===null||e.length===0)return!1;var t=e,r=/\/([gim]*)$/.exec(e),n="";return!(t[0]==="/"&&(r&&(n=r[1]),n.length>3||t[t.length-n.length-1]!=="/"))}function QO(e){var t=e,r=/\/([gim]*)$/.exec(e),n="";return t[0]==="/"&&(r&&(n=r[1]),t=t.slice(1,t.length-n.length-1)),new RegExp(t,n)}function eT(e){var t="/"+e.source+"/";return e.global&&(t+="g"),e.multiline&&(t+="m"),e.ignoreCase&&(t+="i"),t}function tT(e){return Object.prototype.toString.call(e)==="[object RegExp]"}Hb.exports=new JO("tag:yaml.org,2002:js/regexp",{kind:"scalar",resolve:ZO,construct:QO,predicate:tT,represent:eT})});var Kb=ce((CY,Vb)=>{"use strict";var F0;try{qb=ko,F0=qb("esprima")}catch{typeof window<"u"&&(F0=window.esprima)}var qb,rT=sn();function nT(e){if(e===null)return!1;try{var t="("+e+")",r=F0.parse(t,{range:!0});return!(r.type!=="Program"||r.body.length!==1||r.body[0].type!=="ExpressionStatement"||r.body[0].expression.type!=="ArrowFunctionExpression"&&r.body[0].expression.type!=="FunctionExpression")}catch{return!1}}function iT(e){var t="("+e+")",r=F0.parse(t,{range:!0}),n=[],i;if(r.type!=="Program"||r.body.length!==1||r.body[0].type!=="ExpressionStatement"||r.body[0].expression.type!=="ArrowFunctionExpression"&&r.body[0].expression.type!=="FunctionExpression")throw new Error("Failed to resolve function");return r.body[0].expression.params.forEach(function(a){n.push(a.name)}),i=r.body[0].expression.body.range,r.body[0].expression.body.type==="BlockStatement"?new Function(n,t.slice(i[0]+1,i[1]-1)):new Function(n,"return "+t.slice(i[0],i[1]))}function sT(e){return e.toString()}function aT(e){return Object.prototype.toString.call(e)==="[object Function]"}Vb.exports=new rT("tag:yaml.org,2002:js/function",{kind:"scalar",resolve:nT,construct:iT,predicate:aT,represent:sT})});var Uf=ce((FY,Gb)=>{"use strict";var zb=Zo();Gb.exports=zb.DEFAULT=new zb({include:[pl()],explicit:[jb(),Mb(),Kb()]})});var h_=ce((SY,jf)=>{"use strict";var uu=Jo(),e_=hl(),uT=eb(),t_=pl(),oT=Uf(),Qu=Object.prototype.hasOwnProperty,S0=1,r_=2,n_=3,I0=4,pm=1,cT=2,Yb=3,lT=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,fT=/[\x85\u2028\u2029]/,hT=/[,\[\]\{\}]/,i_=/^(?:!|!!|![a-z\-]+!)$/i,s_=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Wb(e){return Object.prototype.toString.call(e)}function ha(e){return e===10||e===13}function tc(e){return e===9||e===32}function $i(e){return e===9||e===32||e===10||e===13}function gl(e){return e===44||e===91||e===93||e===123||e===125}function dT(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}function pT(e){return e===120?2:e===117?4:e===85?8:0}function gT(e){return 48<=e&&e<=57?e-48:-1}function Xb(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"\x85":e===95?"\xA0":e===76?"\u2028":e===80?"\u2029":""}function mT(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}var a_=new Array(256),u_=new Array(256);for(ec=0;ec<256;ec++)a_[ec]=Xb(ec)?1:0,u_[ec]=Xb(ec);var ec;function vT(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||oT,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.documents=[]}function o_(e,t){return new e_(t,new uT(e.filename,e.input,e.position,e.line,e.position-e.lineStart))}function Je(e,t){throw o_(e,t)}function B0(e,t){e.onWarning&&e.onWarning.call(null,o_(e,t))}var Jb={YAML:function(t,r,n){var i,a,s;t.version!==null&&Je(t,"duplication of %YAML directive"),n.length!==1&&Je(t,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&Je(t,"ill-formed argument of the YAML directive"),a=parseInt(i[1],10),s=parseInt(i[2],10),a!==1&&Je(t,"unacceptable YAML version of the document"),t.version=n[0],t.checkLineBreaks=s<2,s!==1&&s!==2&&B0(t,"unsupported YAML version of the document")},TAG:function(t,r,n){var i,a;n.length!==2&&Je(t,"TAG directive accepts exactly two arguments"),i=n[0],a=n[1],i_.test(i)||Je(t,"ill-formed tag handle (first argument) of the TAG directive"),Qu.call(t.tagMap,i)&&Je(t,'there is a previously declared suffix for "'+i+'" tag handle'),s_.test(a)||Je(t,"ill-formed tag prefix (second argument) of the TAG directive"),t.tagMap[i]=a}};function Zu(e,t,r,n){var i,a,s,u;if(t<r){if(u=e.input.slice(t,r),n)for(i=0,a=u.length;i<a;i+=1)s=u.charCodeAt(i),s===9||32<=s&&s<=1114111||Je(e,"expected valid JSON character");else lT.test(u)&&Je(e,"the stream contains non-printable characters");e.result+=u}}function Zb(e,t,r,n){var i,a,s,u;for(uu.isObject(r)||Je(e,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),s=0,u=i.length;s<u;s+=1)a=i[s],Qu.call(t,a)||(t[a]=r[a],n[a]=!0)}function ml(e,t,r,n,i,a,s,u){var c,f;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),c=0,f=i.length;c<f;c+=1)Array.isArray(i[c])&&Je(e,"nested arrays are not supported inside keys"),typeof i=="object"&&Wb(i[c])==="[object Object]"&&(i[c]="[object Object]");if(typeof i=="object"&&Wb(i)==="[object Object]"&&(i="[object Object]"),i=String(i),t===null&&(t={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(a))for(c=0,f=a.length;c<f;c+=1)Zb(e,t,a[c],r);else Zb(e,t,a,r);else!e.json&&!Qu.call(r,i)&&Qu.call(t,i)&&(e.line=s||e.line,e.position=u||e.position,Je(e,"duplicated mapping key")),t[i]=a,delete r[i];return t}function gm(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):Je(e,"a line break is expected"),e.line+=1,e.lineStart=e.position}function Jr(e,t,r){for(var n=0,i=e.input.charCodeAt(e.position);i!==0;){for(;tc(i);)i=e.input.charCodeAt(++e.position);if(t&&i===35)do i=e.input.charCodeAt(++e.position);while(i!==10&&i!==13&&i!==0);if(ha(i))for(gm(e),i=e.input.charCodeAt(e.position),n++,e.lineIndent=0;i===32;)e.lineIndent++,i=e.input.charCodeAt(++e.position);else break}return r!==-1&&n!==0&&e.lineIndent<r&&B0(e,"deficient indentation"),n}function $0(e){var t=e.position,r;return r=e.input.charCodeAt(t),!!((r===45||r===46)&&r===e.input.charCodeAt(t+1)&&r===e.input.charCodeAt(t+2)&&(t+=3,r=e.input.charCodeAt(t),r===0||$i(r)))}function mm(e,t){t===1?e.result+=" ":t>1&&(e.result+=uu.repeat(`
`,t-1))}function wT(e,t,r){var n,i,a,s,u,c,f,h,g=e.kind,p=e.result,d;if(d=e.input.charCodeAt(e.position),$i(d)||gl(d)||d===35||d===38||d===42||d===33||d===124||d===62||d===39||d===34||d===37||d===64||d===96||(d===63||d===45)&&(i=e.input.charCodeAt(e.position+1),$i(i)||r&&gl(i)))return!1;for(e.kind="scalar",e.result="",a=s=e.position,u=!1;d!==0;){if(d===58){if(i=e.input.charCodeAt(e.position+1),$i(i)||r&&gl(i))break}else if(d===35){if(n=e.input.charCodeAt(e.position-1),$i(n))break}else{if(e.position===e.lineStart&&$0(e)||r&&gl(d))break;if(ha(d))if(c=e.line,f=e.lineStart,h=e.lineIndent,Jr(e,!1,-1),e.lineIndent>=t){u=!0,d=e.input.charCodeAt(e.position);continue}else{e.position=s,e.line=c,e.lineStart=f,e.lineIndent=h;break}}u&&(Zu(e,a,s,!1),mm(e,e.line-c),a=s=e.position,u=!1),tc(d)||(s=e.position+1),d=e.input.charCodeAt(++e.position)}return Zu(e,a,s,!1),e.result?!0:(e.kind=g,e.result=p,!1)}function ET(e,t){var r,n,i;if(r=e.input.charCodeAt(e.position),r!==39)return!1;for(e.kind="scalar",e.result="",e.position++,n=i=e.position;(r=e.input.charCodeAt(e.position))!==0;)if(r===39)if(Zu(e,n,e.position,!0),r=e.input.charCodeAt(++e.position),r===39)n=e.position,e.position++,i=e.position;else return!0;else ha(r)?(Zu(e,n,i,!0),mm(e,Jr(e,!1,t)),n=i=e.position):e.position===e.lineStart&&$0(e)?Je(e,"unexpected end of the document within a single quoted scalar"):(e.position++,i=e.position);Je(e,"unexpected end of the stream within a single quoted scalar")}function AT(e,t){var r,n,i,a,s,u;if(u=e.input.charCodeAt(e.position),u!==34)return!1;for(e.kind="scalar",e.result="",e.position++,r=n=e.position;(u=e.input.charCodeAt(e.position))!==0;){if(u===34)return Zu(e,r,e.position,!0),e.position++,!0;if(u===92){if(Zu(e,r,e.position,!0),u=e.input.charCodeAt(++e.position),ha(u))Jr(e,!1,t);else if(u<256&&a_[u])e.result+=u_[u],e.position++;else if((s=pT(u))>0){for(i=s,a=0;i>0;i--)u=e.input.charCodeAt(++e.position),(s=dT(u))>=0?a=(a<<4)+s:Je(e,"expected hexadecimal character");e.result+=mT(a),e.position++}else Je(e,"unknown escape sequence");r=n=e.position}else ha(u)?(Zu(e,r,n,!0),mm(e,Jr(e,!1,t)),r=n=e.position):e.position===e.lineStart&&$0(e)?Je(e,"unexpected end of the document within a double quoted scalar"):(e.position++,n=e.position)}Je(e,"unexpected end of the stream within a double quoted scalar")}function yT(e,t){var r=!0,n,i=e.tag,a,s=e.anchor,u,c,f,h,g,p={},d,w,v,b;if(b=e.input.charCodeAt(e.position),b===91)c=93,g=!1,a=[];else if(b===123)c=125,g=!0,a={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=a),b=e.input.charCodeAt(++e.position);b!==0;){if(Jr(e,!0,t),b=e.input.charCodeAt(e.position),b===c)return e.position++,e.tag=i,e.anchor=s,e.kind=g?"mapping":"sequence",e.result=a,!0;r||Je(e,"missed comma between flow collection entries"),w=d=v=null,f=h=!1,b===63&&(u=e.input.charCodeAt(e.position+1),$i(u)&&(f=h=!0,e.position++,Jr(e,!0,t))),n=e.line,vl(e,t,S0,!1,!0),w=e.tag,d=e.result,Jr(e,!0,t),b=e.input.charCodeAt(e.position),(h||e.line===n)&&b===58&&(f=!0,b=e.input.charCodeAt(++e.position),Jr(e,!0,t),vl(e,t,S0,!1,!0),v=e.result),g?ml(e,a,p,w,d,v):f?a.push(ml(e,null,p,w,d,v)):a.push(d),Jr(e,!0,t),b=e.input.charCodeAt(e.position),b===44?(r=!0,b=e.input.charCodeAt(++e.position)):r=!1}Je(e,"unexpected end of the stream within a flow collection")}function bT(e,t){var r,n,i=pm,a=!1,s=!1,u=t,c=0,f=!1,h,g;if(g=e.input.charCodeAt(e.position),g===124)n=!1;else if(g===62)n=!0;else return!1;for(e.kind="scalar",e.result="";g!==0;)if(g=e.input.charCodeAt(++e.position),g===43||g===45)pm===i?i=g===43?Yb:cT:Je(e,"repeat of a chomping mode identifier");else if((h=gT(g))>=0)h===0?Je(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?Je(e,"repeat of an indentation width identifier"):(u=t+h-1,s=!0);else break;if(tc(g)){do g=e.input.charCodeAt(++e.position);while(tc(g));if(g===35)do g=e.input.charCodeAt(++e.position);while(!ha(g)&&g!==0)}for(;g!==0;){for(gm(e),e.lineIndent=0,g=e.input.charCodeAt(e.position);(!s||e.lineIndent<u)&&g===32;)e.lineIndent++,g=e.input.charCodeAt(++e.position);if(!s&&e.lineIndent>u&&(u=e.lineIndent),ha(g)){c++;continue}if(e.lineIndent<u){i===Yb?e.result+=uu.repeat(`
`,a?1+c:c):i===pm&&a&&(e.result+=`
`);break}for(n?tc(g)?(f=!0,e.result+=uu.repeat(`
`,a?1+c:c)):f?(f=!1,e.result+=uu.repeat(`
`,c+1)):c===0?a&&(e.result+=" "):e.result+=uu.repeat(`
`,c):e.result+=uu.repeat(`
`,a?1+c:c),a=!0,s=!0,c=0,r=e.position;!ha(g)&&g!==0;)g=e.input.charCodeAt(++e.position);Zu(e,r,e.position,!1)}return!0}function Qb(e,t){var r,n=e.tag,i=e.anchor,a=[],s,u=!1,c;for(e.anchor!==null&&(e.anchorMap[e.anchor]=a),c=e.input.charCodeAt(e.position);c!==0&&!(c!==45||(s=e.input.charCodeAt(e.position+1),!$i(s)));){if(u=!0,e.position++,Jr(e,!0,-1)&&e.lineIndent<=t){a.push(null),c=e.input.charCodeAt(e.position);continue}if(r=e.line,vl(e,t,n_,!1,!0),a.push(e.result),Jr(e,!0,-1),c=e.input.charCodeAt(e.position),(e.line===r||e.lineIndent>t)&&c!==0)Je(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return u?(e.tag=n,e.anchor=i,e.kind="sequence",e.result=a,!0):!1}function _T(e,t,r){var n,i,a,s,u=e.tag,c=e.anchor,f={},h={},g=null,p=null,d=null,w=!1,v=!1,b;for(e.anchor!==null&&(e.anchorMap[e.anchor]=f),b=e.input.charCodeAt(e.position);b!==0;){if(n=e.input.charCodeAt(e.position+1),a=e.line,s=e.position,(b===63||b===58)&&$i(n))b===63?(w&&(ml(e,f,h,g,p,null),g=p=d=null),v=!0,w=!0,i=!0):w?(w=!1,i=!0):Je(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,b=n;else if(vl(e,r,r_,!1,!0))if(e.line===a){for(b=e.input.charCodeAt(e.position);tc(b);)b=e.input.charCodeAt(++e.position);if(b===58)b=e.input.charCodeAt(++e.position),$i(b)||Je(e,"a whitespace character is expected after the key-value separator within a block mapping"),w&&(ml(e,f,h,g,p,null),g=p=d=null),v=!0,w=!1,i=!1,g=e.tag,p=e.result;else if(v)Je(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=u,e.anchor=c,!0}else if(v)Je(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=u,e.anchor=c,!0;else break;if((e.line===a||e.lineIndent>t)&&(vl(e,t,I0,!0,i)&&(w?p=e.result:d=e.result),w||(ml(e,f,h,g,p,d,a,s),g=p=d=null),Jr(e,!0,-1),b=e.input.charCodeAt(e.position)),e.lineIndent>t&&b!==0)Je(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return w&&ml(e,f,h,g,p,null),v&&(e.tag=u,e.anchor=c,e.kind="mapping",e.result=f),v}function CT(e){var t,r=!1,n=!1,i,a,s;if(s=e.input.charCodeAt(e.position),s!==33)return!1;if(e.tag!==null&&Je(e,"duplication of a tag property"),s=e.input.charCodeAt(++e.position),s===60?(r=!0,s=e.input.charCodeAt(++e.position)):s===33?(n=!0,i="!!",s=e.input.charCodeAt(++e.position)):i="!",t=e.position,r){do s=e.input.charCodeAt(++e.position);while(s!==0&&s!==62);e.position<e.length?(a=e.input.slice(t,e.position),s=e.input.charCodeAt(++e.position)):Je(e,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!$i(s);)s===33&&(n?Je(e,"tag suffix cannot contain exclamation marks"):(i=e.input.slice(t-1,e.position+1),i_.test(i)||Je(e,"named tag handle cannot contain such characters"),n=!0,t=e.position+1)),s=e.input.charCodeAt(++e.position);a=e.input.slice(t,e.position),hT.test(a)&&Je(e,"tag suffix cannot contain flow indicator characters")}return a&&!s_.test(a)&&Je(e,"tag name cannot contain such characters: "+a),r?e.tag=a:Qu.call(e.tagMap,i)?e.tag=e.tagMap[i]+a:i==="!"?e.tag="!"+a:i==="!!"?e.tag="tag:yaml.org,2002:"+a:Je(e,'undeclared tag handle "'+i+'"'),!0}function DT(e){var t,r;if(r=e.input.charCodeAt(e.position),r!==38)return!1;for(e.anchor!==null&&Je(e,"duplication of an anchor property"),r=e.input.charCodeAt(++e.position),t=e.position;r!==0&&!$i(r)&&!gl(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&Je(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function FT(e){var t,r,n;if(n=e.input.charCodeAt(e.position),n!==42)return!1;for(n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!$i(n)&&!gl(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&Je(e,"name of an alias node must contain at least one character"),r=e.input.slice(t,e.position),Qu.call(e.anchorMap,r)||Je(e,'unidentified alias "'+r+'"'),e.result=e.anchorMap[r],Jr(e,!0,-1),!0}function vl(e,t,r,n,i){var a,s,u,c=1,f=!1,h=!1,g,p,d,w,v;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,a=s=u=I0===r||n_===r,n&&Jr(e,!0,-1)&&(f=!0,e.lineIndent>t?c=1:e.lineIndent===t?c=0:e.lineIndent<t&&(c=-1)),c===1)for(;CT(e)||DT(e);)Jr(e,!0,-1)?(f=!0,u=a,e.lineIndent>t?c=1:e.lineIndent===t?c=0:e.lineIndent<t&&(c=-1)):u=!1;if(u&&(u=f||i),(c===1||I0===r)&&(S0===r||r_===r?w=t:w=t+1,v=e.position-e.lineStart,c===1?u&&(Qb(e,v)||_T(e,v,w))||yT(e,w)?h=!0:(s&&bT(e,w)||ET(e,w)||AT(e,w)?h=!0:FT(e)?(h=!0,(e.tag!==null||e.anchor!==null)&&Je(e,"alias node should not have any properties")):wT(e,w,S0===r)&&(h=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):c===0&&(h=u&&Qb(e,v))),e.tag!==null&&e.tag!=="!")if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&Je(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),g=0,p=e.implicitTypes.length;g<p;g+=1)if(d=e.implicitTypes[g],d.resolve(e.result)){e.result=d.construct(e.result),e.tag=d.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else Qu.call(e.typeMap[e.kind||"fallback"],e.tag)?(d=e.typeMap[e.kind||"fallback"][e.tag],e.result!==null&&d.kind!==e.kind&&Je(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+d.kind+'", not "'+e.kind+'"'),d.resolve(e.result)?(e.result=d.construct(e.result),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):Je(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")):Je(e,"unknown tag !<"+e.tag+">");return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||h}function ST(e){var t=e.position,r,n,i,a=!1,s;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap={},e.anchorMap={};(s=e.input.charCodeAt(e.position))!==0&&(Jr(e,!0,-1),s=e.input.charCodeAt(e.position),!(e.lineIndent>0||s!==37));){for(a=!0,s=e.input.charCodeAt(++e.position),r=e.position;s!==0&&!$i(s);)s=e.input.charCodeAt(++e.position);for(n=e.input.slice(r,e.position),i=[],n.length<1&&Je(e,"directive name must not be less than one character in length");s!==0;){for(;tc(s);)s=e.input.charCodeAt(++e.position);if(s===35){do s=e.input.charCodeAt(++e.position);while(s!==0&&!ha(s));break}if(ha(s))break;for(r=e.position;s!==0&&!$i(s);)s=e.input.charCodeAt(++e.position);i.push(e.input.slice(r,e.position))}s!==0&&gm(e),Qu.call(Jb,n)?Jb[n](e,n,i):B0(e,'unknown document directive "'+n+'"')}if(Jr(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,Jr(e,!0,-1)):a&&Je(e,"directives end mark is expected"),vl(e,e.lineIndent-1,I0,!1,!0),Jr(e,!0,-1),e.checkLineBreaks&&fT.test(e.input.slice(t,e.position))&&B0(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&$0(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,Jr(e,!0,-1));return}if(e.position<e.length-1)Je(e,"end of the stream or a document separator is expected");else return}function c_(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var r=new vT(e,t),n=e.indexOf("\0");for(n!==-1&&(r.position=n,Je(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)ST(r);return r.documents}function l_(e,t,r){t!==null&&typeof t=="object"&&typeof r>"u"&&(r=t,t=null);var n=c_(e,r);if(typeof t!="function")return n;for(var i=0,a=n.length;i<a;i+=1)t(n[i])}function f_(e,t){var r=c_(e,t);if(r.length!==0){if(r.length===1)return r[0];throw new e_("expected a single document in the stream, but found more")}}function IT(e,t,r){return typeof t=="object"&&t!==null&&typeof r>"u"&&(r=t,t=null),l_(e,t,uu.extend({schema:t_},r))}function BT(e,t){return f_(e,uu.extend({schema:t_},t))}jf.exports.loadAll=l_;jf.exports.load=f_;jf.exports.safeLoadAll=IT;jf.exports.safeLoad=BT});var T_=ce((IY,Am)=>{"use strict";var Mf=Jo(),qf=hl(),$T=Uf(),RT=pl(),A_=Object.prototype.toString,y_=Object.prototype.hasOwnProperty,xT=9,Hf=10,PT=13,OT=32,TT=33,NT=34,b_=35,kT=37,LT=38,UT=39,jT=42,__=44,HT=45,C_=58,MT=61,qT=62,VT=63,KT=64,D_=91,F_=93,zT=96,S_=123,GT=124,I_=125,Yn={};Yn[0]="\\0";Yn[7]="\\a";Yn[8]="\\b";Yn[9]="\\t";Yn[10]="\\n";Yn[11]="\\v";Yn[12]="\\f";Yn[13]="\\r";Yn[27]="\\e";Yn[34]='\\"';Yn[92]="\\\\";Yn[133]="\\N";Yn[160]="\\_";Yn[8232]="\\L";Yn[8233]="\\P";var YT=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"];function WT(e,t){var r,n,i,a,s,u,c;if(t===null)return{};for(r={},n=Object.keys(t),i=0,a=n.length;i<a;i+=1)s=n[i],u=String(t[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),c=e.compiledTypeMap.fallback[s],c&&y_.call(c.styleAliases,u)&&(u=c.styleAliases[u]),r[s]=u;return r}function d_(e){var t,r,n;if(t=e.toString(16).toUpperCase(),e<=255)r="x",n=2;else if(e<=65535)r="u",n=4;else if(e<=4294967295)r="U",n=8;else throw new qf("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+Mf.repeat("0",n-t.length)+t}function XT(e){this.schema=e.schema||$T,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=Mf.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=WT(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function p_(e,t){for(var r=Mf.repeat(" ",t),n=0,i=-1,a="",s,u=e.length;n<u;)i=e.indexOf(`
`,n),i===-1?(s=e.slice(n),n=u):(s=e.slice(n,i+1),n=i+1),s.length&&s!==`
`&&(a+=r),a+=s;return a}function vm(e,t){return`
`+Mf.repeat(" ",e.indent*t)}function JT(e,t){var r,n,i;for(r=0,n=e.implicitTypes.length;r<n;r+=1)if(i=e.implicitTypes[r],i.resolve(t))return!0;return!1}function Em(e){return e===OT||e===xT}function wl(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==65279||65536<=e&&e<=1114111}function ZT(e){return wl(e)&&!Em(e)&&e!==65279&&e!==PT&&e!==Hf}function g_(e,t){return wl(e)&&e!==65279&&e!==__&&e!==D_&&e!==F_&&e!==S_&&e!==I_&&e!==C_&&(e!==b_||t&&ZT(t))}function QT(e){return wl(e)&&e!==65279&&!Em(e)&&e!==HT&&e!==VT&&e!==C_&&e!==__&&e!==D_&&e!==F_&&e!==S_&&e!==I_&&e!==b_&&e!==LT&&e!==jT&&e!==TT&&e!==GT&&e!==MT&&e!==qT&&e!==UT&&e!==NT&&e!==kT&&e!==KT&&e!==zT}function B_(e){var t=/^\n* /;return t.test(e)}var $_=1,R_=2,x_=3,P_=4,R0=5;function eN(e,t,r,n,i){var a,s,u,c=!1,f=!1,h=n!==-1,g=-1,p=QT(e.charCodeAt(0))&&!Em(e.charCodeAt(e.length-1));if(t)for(a=0;a<e.length;a++){if(s=e.charCodeAt(a),!wl(s))return R0;u=a>0?e.charCodeAt(a-1):null,p=p&&g_(s,u)}else{for(a=0;a<e.length;a++){if(s=e.charCodeAt(a),s===Hf)c=!0,h&&(f=f||a-g-1>n&&e[g+1]!==" ",g=a);else if(!wl(s))return R0;u=a>0?e.charCodeAt(a-1):null,p=p&&g_(s,u)}f=f||h&&a-g-1>n&&e[g+1]!==" "}return!c&&!f?p&&!i(e)?$_:R_:r>9&&B_(e)?R0:f?P_:x_}function tN(e,t,r,n){e.dump=function(){if(t.length===0)return"''";if(!e.noCompatMode&&YT.indexOf(t)!==-1)return"'"+t+"'";var i=e.indent*Math.max(1,r),a=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-i),s=n||e.flowLevel>-1&&r>=e.flowLevel;function u(c){return JT(e,c)}switch(eN(t,s,e.indent,a,u)){case $_:return t;case R_:return"'"+t.replace(/'/g,"''")+"'";case x_:return"|"+m_(t,e.indent)+v_(p_(t,i));case P_:return">"+m_(t,e.indent)+v_(p_(rN(t,a),i));case R0:return'"'+nN(t,a)+'"';default:throw new qf("impossible error: invalid scalar style")}}()}function m_(e,t){var r=B_(e)?String(t):"",n=e[e.length-1]===`
`,i=n&&(e[e.length-2]===`
`||e===`
`),a=i?"+":n?"":"-";return r+a+`
`}function v_(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function rN(e,t){for(var r=/(\n+)([^\n]*)/g,n=function(){var f=e.indexOf(`
`);return f=f!==-1?f:e.length,r.lastIndex=f,w_(e.slice(0,f),t)}(),i=e[0]===`
`||e[0]===" ",a,s;s=r.exec(e);){var u=s[1],c=s[2];a=c[0]===" ",n+=u+(!i&&!a&&c!==""?`
`:"")+w_(c,t),i=a}return n}function w_(e,t){if(e===""||e[0]===" ")return e;for(var r=/ [^ ]/g,n,i=0,a,s=0,u=0,c="";n=r.exec(e);)u=n.index,u-i>t&&(a=s>i?s:u,c+=`
`+e.slice(i,a),i=a+1),s=u;return c+=`
`,e.length-i>t&&s>i?c+=e.slice(i,s)+`
`+e.slice(s+1):c+=e.slice(i),c.slice(1)}function nN(e){for(var t="",r,n,i,a=0;a<e.length;a++){if(r=e.charCodeAt(a),r>=55296&&r<=56319&&(n=e.charCodeAt(a+1),n>=56320&&n<=57343)){t+=d_((r-55296)*1024+n-56320+65536),a++;continue}i=Yn[r],t+=!i&&wl(r)?e[a]:i||d_(r)}return t}function iN(e,t,r){var n="",i=e.tag,a,s;for(a=0,s=r.length;a<s;a+=1)rc(e,t,r[a],!1,!1)&&(a!==0&&(n+=","+(e.condenseFlow?"":" ")),n+=e.dump);e.tag=i,e.dump="["+n+"]"}function sN(e,t,r,n){var i="",a=e.tag,s,u;for(s=0,u=r.length;s<u;s+=1)rc(e,t+1,r[s],!0,!0)&&((!n||s!==0)&&(i+=vm(e,t)),e.dump&&Hf===e.dump.charCodeAt(0)?i+="-":i+="- ",i+=e.dump);e.tag=a,e.dump=i||"[]"}function aN(e,t,r){var n="",i=e.tag,a=Object.keys(r),s,u,c,f,h;for(s=0,u=a.length;s<u;s+=1)h="",s!==0&&(h+=", "),e.condenseFlow&&(h+='"'),c=a[s],f=r[c],rc(e,t,c,!1,!1)&&(e.dump.length>1024&&(h+="? "),h+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),rc(e,t,f,!1,!1)&&(h+=e.dump,n+=h));e.tag=i,e.dump="{"+n+"}"}function uN(e,t,r,n){var i="",a=e.tag,s=Object.keys(r),u,c,f,h,g,p;if(e.sortKeys===!0)s.sort();else if(typeof e.sortKeys=="function")s.sort(e.sortKeys);else if(e.sortKeys)throw new qf("sortKeys must be a boolean or a function");for(u=0,c=s.length;u<c;u+=1)p="",(!n||u!==0)&&(p+=vm(e,t)),f=s[u],h=r[f],rc(e,t+1,f,!0,!0,!0)&&(g=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,g&&(e.dump&&Hf===e.dump.charCodeAt(0)?p+="?":p+="? "),p+=e.dump,g&&(p+=vm(e,t)),rc(e,t+1,h,!0,g)&&(e.dump&&Hf===e.dump.charCodeAt(0)?p+=":":p+=": ",p+=e.dump,i+=p));e.tag=a,e.dump=i||"{}"}function E_(e,t,r){var n,i,a,s,u,c;for(i=r?e.explicitTypes:e.implicitTypes,a=0,s=i.length;a<s;a+=1)if(u=i[a],(u.instanceOf||u.predicate)&&(!u.instanceOf||typeof t=="object"&&t instanceof u.instanceOf)&&(!u.predicate||u.predicate(t))){if(e.tag=r?u.tag:"?",u.represent){if(c=e.styleMap[u.tag]||u.defaultStyle,A_.call(u.represent)==="[object Function]")n=u.represent(t,c);else if(y_.call(u.represent,c))n=u.represent[c](t,c);else throw new qf("!<"+u.tag+'> tag resolver accepts not "'+c+'" style');e.dump=n}return!0}return!1}function rc(e,t,r,n,i,a){e.tag=null,e.dump=r,E_(e,r,!1)||E_(e,r,!0);var s=A_.call(e.dump);n&&(n=e.flowLevel<0||e.flowLevel>t);var u=s==="[object Object]"||s==="[object Array]",c,f;if(u&&(c=e.duplicates.indexOf(r),f=c!==-1),(e.tag!==null&&e.tag!=="?"||f||e.indent!==2&&t>0)&&(i=!1),f&&e.usedDuplicates[c])e.dump="*ref_"+c;else{if(u&&f&&!e.usedDuplicates[c]&&(e.usedDuplicates[c]=!0),s==="[object Object]")n&&Object.keys(e.dump).length!==0?(uN(e,t,e.dump,i),f&&(e.dump="&ref_"+c+e.dump)):(aN(e,t,e.dump),f&&(e.dump="&ref_"+c+" "+e.dump));else if(s==="[object Array]"){var h=e.noArrayIndent&&t>0?t-1:t;n&&e.dump.length!==0?(sN(e,h,e.dump,i),f&&(e.dump="&ref_"+c+e.dump)):(iN(e,h,e.dump),f&&(e.dump="&ref_"+c+" "+e.dump))}else if(s==="[object String]")e.tag!=="?"&&tN(e,e.dump,t,a);else{if(e.skipInvalid)return!1;throw new qf("unacceptable kind of an object to dump "+s)}e.tag!==null&&e.tag!=="?"&&(e.dump="!<"+e.tag+"> "+e.dump)}return!0}function oN(e,t){var r=[],n=[],i,a;for(wm(e,r,n),i=0,a=n.length;i<a;i+=1)t.duplicates.push(r[n[i]]);t.usedDuplicates=new Array(a)}function wm(e,t,r){var n,i,a;if(e!==null&&typeof e=="object")if(i=t.indexOf(e),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(t.push(e),Array.isArray(e))for(i=0,a=e.length;i<a;i+=1)wm(e[i],t,r);else for(n=Object.keys(e),i=0,a=n.length;i<a;i+=1)wm(e[n[i]],t,r)}function O_(e,t){t=t||{};var r=new XT(t);return r.noRefs||oN(e,r),rc(r,0,e,!0,!0)?r.dump+`
`:""}function cN(e,t){return O_(e,Mf.extend({schema:RT},t))}Am.exports.dump=O_;Am.exports.safeDump=cN});var k_=ce((BY,kr)=>{"use strict";var x0=h_(),N_=T_();function P0(e){return function(){throw new Error("Function "+e+" is deprecated and cannot be used.")}}kr.exports.Type=sn();kr.exports.Schema=Zo();kr.exports.FAILSAFE_SCHEMA=D0();kr.exports.JSON_SCHEMA=fm();kr.exports.CORE_SCHEMA=hm();kr.exports.DEFAULT_SAFE_SCHEMA=pl();kr.exports.DEFAULT_FULL_SCHEMA=Uf();kr.exports.load=x0.load;kr.exports.loadAll=x0.loadAll;kr.exports.safeLoad=x0.safeLoad;kr.exports.safeLoadAll=x0.safeLoadAll;kr.exports.dump=N_.dump;kr.exports.safeDump=N_.safeDump;kr.exports.YAMLException=hl();kr.exports.MINIMAL_SCHEMA=D0();kr.exports.SAFE_SCHEMA=pl();kr.exports.DEFAULT_SCHEMA=Uf();kr.exports.scan=P0("scan");kr.exports.parse=P0("parse");kr.exports.compose=P0("compose");kr.exports.addConstructor=P0("addConstructor")});var U_=ce(($Y,L_)=>{"use strict";var lN=k_();L_.exports=lN});var H_=ce((RY,j_)=>{"use strict";var O0=U_();j_.exports={safeLoad:O0.safeLoad,load:O0.load,safeDump:O0.safeDump,dump:O0.dump}});var K_=ce(_m=>{"use strict";_m.toString=function(e){switch(e){case 1:return"A";case 10:return"NULL";case 28:return"AAAA";case 18:return"AFSDB";case 42:return"APL";case 257:return"CAA";case 60:return"CDNSKEY";case 59:return"CDS";case 37:return"CERT";case 5:return"CNAME";case 49:return"DHCID";case 32769:return"DLV";case 39:return"DNAME";case 48:return"DNSKEY";case 43:return"DS";case 55:return"HIP";case 13:return"HINFO";case 45:return"IPSECKEY";case 25:return"KEY";case 36:return"KX";case 29:return"LOC";case 15:return"MX";case 35:return"NAPTR";case 2:return"NS";case 47:return"NSEC";case 50:return"NSEC3";case 51:return"NSEC3PARAM";case 12:return"PTR";case 46:return"RRSIG";case 17:return"RP";case 24:return"SIG";case 6:return"SOA";case 99:return"SPF";case 33:return"SRV";case 44:return"SSHFP";case 32768:return"TA";case 249:return"TKEY";case 52:return"TLSA";case 250:return"TSIG";case 16:return"TXT";case 252:return"AXFR";case 251:return"IXFR";case 41:return"OPT";case 255:return"ANY"}return"UNKNOWN_"+e};_m.toType=function(e){switch(e.toUpperCase()){case"A":return 1;case"NULL":return 10;case"AAAA":return 28;case"AFSDB":return 18;case"APL":return 42;case"CAA":return 257;case"CDNSKEY":return 60;case"CDS":return 59;case"CERT":return 37;case"CNAME":return 5;case"DHCID":return 49;case"DLV":return 32769;case"DNAME":return 39;case"DNSKEY":return 48;case"DS":return 43;case"HIP":return 55;case"HINFO":return 13;case"IPSECKEY":return 45;case"KEY":return 25;case"KX":return 36;case"LOC":return 29;case"MX":return 15;case"NAPTR":return 35;case"NS":return 2;case"NSEC":return 47;case"NSEC3":return 50;case"NSEC3PARAM":return 51;case"PTR":return 12;case"RRSIG":return 46;case"RP":return 17;case"SIG":return 24;case"SOA":return 6;case"SPF":return 99;case"SRV":return 33;case"SSHFP":return 44;case"TA":return 32768;case"TKEY":return 249;case"TLSA":return 52;case"TSIG":return 250;case"TXT":return 16;case"AXFR":return 252;case"IXFR":return 251;case"OPT":return 41;case"ANY":return 255;case"*":return 255}return e.toUpperCase().startsWith("UNKNOWN_")?parseInt(e.slice(8)):0}});var z_=ce(Cm=>{"use strict";Cm.toString=function(e){switch(e){case 0:return"NOERROR";case 1:return"FORMERR";case 2:return"SERVFAIL";case 3:return"NXDOMAIN";case 4:return"NOTIMP";case 5:return"REFUSED";case 6:return"YXDOMAIN";case 7:return"YXRRSET";case 8:return"NXRRSET";case 9:return"NOTAUTH";case 10:return"NOTZONE";case 11:return"RCODE_11";case 12:return"RCODE_12";case 13:return"RCODE_13";case 14:return"RCODE_14";case 15:return"RCODE_15"}return"RCODE_"+e};Cm.toRcode=function(e){switch(e.toUpperCase()){case"NOERROR":return 0;case"FORMERR":return 1;case"SERVFAIL":return 2;case"NXDOMAIN":return 3;case"NOTIMP":return 4;case"REFUSED":return 5;case"YXDOMAIN":return 6;case"YXRRSET":return 7;case"NXRRSET":return 8;case"NOTAUTH":return 9;case"NOTZONE":return 10;case"RCODE_11":return 11;case"RCODE_12":return 12;case"RCODE_13":return 13;case"RCODE_14":return 14;case"RCODE_15":return 15}return 0}});var G_=ce(Dm=>{"use strict";Dm.toString=function(e){switch(e){case 0:return"QUERY";case 1:return"IQUERY";case 2:return"STATUS";case 3:return"OPCODE_3";case 4:return"NOTIFY";case 5:return"UPDATE";case 6:return"OPCODE_6";case 7:return"OPCODE_7";case 8:return"OPCODE_8";case 9:return"OPCODE_9";case 10:return"OPCODE_10";case 11:return"OPCODE_11";case 12:return"OPCODE_12";case 13:return"OPCODE_13";case 14:return"OPCODE_14";case 15:return"OPCODE_15"}return"OPCODE_"+e};Dm.toOpcode=function(e){switch(e.toUpperCase()){case"QUERY":return 0;case"IQUERY":return 1;case"STATUS":return 2;case"OPCODE_3":return 3;case"NOTIFY":return 4;case"UPDATE":return 5;case"OPCODE_6":return 6;case"OPCODE_7":return 7;case"OPCODE_8":return 8;case"OPCODE_9":return 9;case"OPCODE_10":return 10;case"OPCODE_11":return 11;case"OPCODE_12":return 12;case"OPCODE_13":return 13;case"OPCODE_14":return 14;case"OPCODE_15":return 15}return 0}});var Y_=ce(Fm=>{"use strict";Fm.toString=function(e){switch(e){case 1:return"IN";case 2:return"CS";case 3:return"CH";case 4:return"HS";case 255:return"ANY"}return"UNKNOWN_"+e};Fm.toClass=function(e){switch(e.toUpperCase()){case"IN":return 1;case"CS":return 2;case"CH":return 3;case"HS":return 4;case"ANY":return 255}return 0}});var W_=ce(Sm=>{"use strict";Sm.toString=function(e){switch(e){case 1:return"LLQ";case 2:return"UL";case 3:return"NSID";case 5:return"DAU";case 6:return"DHU";case 7:return"N3U";case 8:return"CLIENT_SUBNET";case 9:return"EXPIRE";case 10:return"COOKIE";case 11:return"TCP_KEEPALIVE";case 12:return"PADDING";case 13:return"CHAIN";case 14:return"KEY_TAG";case 26946:return"DEVICEID"}return e<0?null:`OPTION_${e}`};Sm.toCode=function(e){if(typeof e=="number")return e;if(!e)return-1;switch(e.toUpperCase()){case"OPTION_0":return 0;case"LLQ":return 1;case"UL":return 2;case"NSID":return 3;case"OPTION_4":return 4;case"DAU":return 5;case"DHU":return 6;case"N3U":return 7;case"CLIENT_SUBNET":return 8;case"EXPIRE":return 9;case"COOKIE":return 10;case"TCP_KEEPALIVE":return 11;case"PADDING":return 12;case"CHAIN":return 13;case"KEY_TAG":return 14;case"DEVICEID":return 26946;case"OPTION_65535":return 65535}let t=e.match(/_(\d+)$/);return t?parseInt(t[1],10):-1}});var Z_=ce((J_,Im)=>{var X_=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.decode=g,e.encode=h,e.familyOf=f,e.name=void 0,e.sizeOf=c,e.v6=e.v4=void 0;let t=/^(\d{1,3}\.){3,3}\d{1,3}$/,r=4,n=/^(::)?(((\d{1,3}\.){3}(\d{1,3}){1})?([0-9a-f]){0,4}:{0,2}){1,8}(::)?$/i,i=16,a={name:"v4",size:r,isFormat:p=>t.test(p),encode(p,d,w){w=~~w,d=d||new Uint8Array(w+r);let v=p.length,b=0;for(let m=0;m<v;){let y=p.charCodeAt(m++);y===46?(d[w++]=b,b=0):b=b*10+(y-48)}return d[w]=b,d},decode(p,d){return d=~~d,`${p[d++]}.${p[d++]}.${p[d++]}.${p[d]}`}};e.v4=a;let s={name:"v6",size:i,isFormat:p=>p.length>0&&n.test(p),encode(p,d,w){w=~~w;let v=w+i,b=-1,m=0,y=0,D=!0,C=!1;d=d||new Uint8Array(w+i);for(let F=0;F<p.length;F++){let U=p.charCodeAt(F);U===58?(D?b!==-1?(w<v&&(d[w]=0),w<v-1&&(d[w+1]=0),w+=2):w<v&&(b=w):(C===!0?(w<v&&(d[w]=y),w++):(w<v&&(d[w]=m>>8),w<v-1&&(d[w+1]=m&255),w+=2),m=0,y=0),D=!0,C=!1):U===46?(w<v&&(d[w]=y),w++,y=0,m=0,D=!1,C=!0):(D=!1,U>=97?U-=87:U>=65?U-=55:(U-=48,y=y*10+U),m=(m<<4)+U)}if(D===!1)C===!0?(w<v&&(d[w]=y),w++):(w<v&&(d[w]=m>>8),w<v-1&&(d[w+1]=m&255),w+=2);else if(b===0)w<v&&(d[w]=0),w<v-1&&(d[w+1]=0),w+=2;else if(b!==-1){w+=2;for(let F=Math.min(w-1,v-1);F>=b+2;F--)d[F]=d[F-2];d[b]=0,d[b+1]=0,b=w}if(b!==w&&b!==-1)for(w>v-2&&(w=v-2);v>b;)d[--v]=w<v&&w>b?d[--w]:0;else for(;w<v;)d[w++]=0;return d},decode(p,d){d=~~d;let w="";for(let v=0;v<i;v+=2)v!==0&&(w+=":"),w+=(p[d+v]<<8|p[d+v+1]).toString(16);return w.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}};e.v6=s;let u="ip";e.name=u;function c(p){if(a.isFormat(p))return a.size;if(s.isFormat(p))return s.size;throw Error(`Invalid ip address: ${p}`)}function f(p){return c(p)===a.size?1:2}function h(p,d,w){w=~~w;let v=c(p);return typeof d=="function"&&(d=d(w+v)),v===a.size?a.encode(p,d,w):s.encode(p,d,w)}function g(p,d,w){if(d=~~d,w=w||p.length-d,w===a.size)return a.decode(p,d,w);if(w===s.size)return s.decode(p,d,w);throw Error(`Invalid buffer size needs to be ${a.size} for v4 or ${s.size} for v6.`)}return"default"in e?e.default:e}({});typeof define=="function"&&define.amd?define([],function(){return X_}):typeof Im=="object"&&typeof J_=="object"&&(Im.exports=X_)});var tC=ce(Ve=>{"use strict";var Ke=l0().Buffer,vu=K_(),dN=z_(),pN=G_(),U0=Y_(),Bm=W_(),nc=Z_(),gN=0,Q_=32768,$m=32768,mN=~$m,eC=32768,vN=~eC,$e=Ve.name={};$e.encode=function(e,t,r,{mail:n=!1}={}){t||(t=Ke.alloc($e.encodingLength(e))),r||(r=0);let i=r,a=e.replace(/^\.|\.$/gm,"");if(a.length){let s=[];if(n){let u="";a.split(".").forEach(c=>{c.endsWith("\\")?u+=(u.length?".":"")+c.slice(0,-1):s.length===0&&u.length?s.push(u+"."+c):s.push(c)})}else s=a.split(".");for(let u=0;u<s.length;u++){let c=t.write(s[u],r+1);t[r]=c,r+=c+1}}return t[r++]=0,$e.encode.bytes=r-i,t};$e.encode.bytes=0;$e.decode=function(e,t,{mail:r=!1}={}){t||(t=0);let n=[],i=t,a=0,s=0,u=!1;for(;;){if(t>=e.length)throw new Error("Cannot decode name (buffer overflow)");let c=e[t++];if(s+=u?0:1,c===0)break;if(c&192)if((c&192)===192){if(t+1>e.length)throw new Error("Cannot decode name (buffer overflow)");let f=e.readUInt16BE(t-1)-49152;if(f>=i)throw new Error("Cannot decode name (bad pointer)");t=f,i=f,s+=u?0:1,u=!0}else throw new Error("Cannot decode name (bad label)");else{if(t+c>e.length)throw new Error("Cannot decode name (buffer overflow)");if(a+=c+1,a>254)throw new Error("Cannot decode name (name too long)");let f=e.toString("utf-8",t,t+c);r&&(f=f.replace(/\./g,"\\.")),n.push(f),t+=c,s+=u?0:c}}return $e.decode.bytes=s,n.length===0?".":n.join(".")};$e.decode.bytes=0;$e.encodingLength=function(e){return e==="."||e===".."?1:Ke.byteLength(e.replace(/^\.|\.$/gm,""))+2};var _t={};_t.encode=function(e,t,r){t||(t=Ke.alloc(_t.encodingLength(e))),r||(r=0);let n=t.write(e,r+1);return t[r]=n,_t.encode.bytes=n+1,t};_t.encode.bytes=0;_t.decode=function(e,t){t||(t=0);let r=e[t],n=e.toString("utf-8",t+1,t+1+r);return _t.decode.bytes=r+1,n};_t.decode.bytes=0;_t.encodingLength=function(e){return Ke.byteLength(e)+1};var Ls={};Ls.encode=function(e,t,r){t||(t=Ls.encodingLength(e)),r||(r=0);let n=(e.flags||0)&32767,i=e.type==="response"?Q_:gN;return t.writeUInt16BE(e.id||0,r),t.writeUInt16BE(n|i,r+2),t.writeUInt16BE(e.questions.length,r+4),t.writeUInt16BE(e.answers.length,r+6),t.writeUInt16BE(e.authorities.length,r+8),t.writeUInt16BE(e.additionals.length,r+10),t};Ls.encode.bytes=12;Ls.decode=function(e,t){if(t||(t=0),e.length<12)throw new Error("Header must be 12 bytes");let r=e.readUInt16BE(t+2);return{id:e.readUInt16BE(t),type:r&Q_?"response":"query",flags:r&32767,flag_qr:(r>>15&1)===1,opcode:pN.toString(r>>11&15),flag_aa:(r>>10&1)===1,flag_tc:(r>>9&1)===1,flag_rd:(r>>8&1)===1,flag_ra:(r>>7&1)===1,flag_z:(r>>6&1)===1,flag_ad:(r>>5&1)===1,flag_cd:(r>>4&1)===1,rcode:dN.toString(r&15),questions:new Array(e.readUInt16BE(t+4)),answers:new Array(e.readUInt16BE(t+6)),authorities:new Array(e.readUInt16BE(t+8)),additionals:new Array(e.readUInt16BE(t+10))}};Ls.decode.bytes=12;Ls.encodingLength=function(){return 12};var ou=Ve.unknown={};ou.encode=function(e,t,r){return t||(t=Ke.alloc(ou.encodingLength(e))),r||(r=0),t.writeUInt16BE(e.length,r),e.copy(t,r+2),ou.encode.bytes=e.length+2,t};ou.encode.bytes=0;ou.decode=function(e,t){t||(t=0);let r=e.readUInt16BE(t),n=e.slice(t+2,t+2+r);return ou.decode.bytes=r+2,n};ou.decode.bytes=0;ou.encodingLength=function(e){return e.length+2};var cu=Ve.ns={};cu.encode=function(e,t,r){return t||(t=Ke.alloc(cu.encodingLength(e))),r||(r=0),$e.encode(e,t,r+2),t.writeUInt16BE($e.encode.bytes,r),cu.encode.bytes=$e.encode.bytes+2,t};cu.encode.bytes=0;cu.decode=function(e,t){t||(t=0);let r=e.readUInt16BE(t),n=$e.decode(e,t+2);return cu.decode.bytes=r+2,n};cu.decode.bytes=0;cu.encodingLength=function(e){return $e.encodingLength(e)+2};var lu=Ve.soa={};lu.encode=function(e,t,r){t||(t=Ke.alloc(lu.encodingLength(e))),r||(r=0);let n=r;return r+=2,$e.encode(e.mname,t,r),r+=$e.encode.bytes,$e.encode(e.rname,t,r,{mail:!0}),r+=$e.encode.bytes,t.writeUInt32BE(e.serial||0,r),r+=4,t.writeUInt32BE(e.refresh||0,r),r+=4,t.writeUInt32BE(e.retry||0,r),r+=4,t.writeUInt32BE(e.expire||0,r),r+=4,t.writeUInt32BE(e.minimum||0,r),r+=4,t.writeUInt16BE(r-n-2,n),lu.encode.bytes=r-n,t};lu.encode.bytes=0;lu.decode=function(e,t){t||(t=0);let r=t,n={};return t+=2,n.mname=$e.decode(e,t),t+=$e.decode.bytes,n.rname=$e.decode(e,t,{mail:!0}),t+=$e.decode.bytes,n.serial=e.readUInt32BE(t),t+=4,n.refresh=e.readUInt32BE(t),t+=4,n.retry=e.readUInt32BE(t),t+=4,n.expire=e.readUInt32BE(t),t+=4,n.minimum=e.readUInt32BE(t),t+=4,lu.decode.bytes=t-r,n};lu.decode.bytes=0;lu.encodingLength=function(e){return 22+$e.encodingLength(e.mname)+$e.encodingLength(e.rname)};var fu=Ve.txt={};fu.encode=function(e,t,r){Array.isArray(e)||(e=[e]);for(let i=0;i<e.length;i++)if(typeof e[i]=="string"&&(e[i]=Ke.from(e[i])),!Ke.isBuffer(e[i]))throw new Error("Must be a Buffer");t||(t=Ke.alloc(fu.encodingLength(e))),r||(r=0);let n=r;return r+=2,e.forEach(function(i){t[r++]=i.length,i.copy(t,r,0,i.length),r+=i.length}),t.writeUInt16BE(r-n-2,n),fu.encode.bytes=r-n,t};fu.encode.bytes=0;fu.decode=function(e,t){t||(t=0);let r=t,n=e.readUInt16BE(t);t+=2;let i=[];for(;n>0;){let a=e[t++];if(--n,n<a)throw new Error("Buffer overflow");i.push(e.slice(t,t+a)),t+=a,n-=a}return fu.decode.bytes=t-r,i};fu.decode.bytes=0;fu.encodingLength=function(e){Array.isArray(e)||(e=[e]);let t=2;return e.forEach(function(r){typeof r=="string"?t+=Ke.byteLength(r)+1:t+=r.length+1}),t};var hu=Ve.null={};hu.encode=function(e,t,r){t||(t=Ke.alloc(hu.encodingLength(e))),r||(r=0),typeof e=="string"&&(e=Ke.from(e)),e||(e=Ke.alloc(0));let n=r;r+=2;let i=e.length;return e.copy(t,r,0,i),r+=i,t.writeUInt16BE(r-n-2,n),hu.encode.bytes=r-n,t};hu.encode.bytes=0;hu.decode=function(e,t){t||(t=0);let r=t,n=e.readUInt16BE(t);t+=2;let i=e.slice(t,t+n);return t+=n,hu.decode.bytes=t-r,i};hu.decode.bytes=0;hu.encodingLength=function(e){return e?(Ke.isBuffer(e)?e.length:Ke.byteLength(e))+2:2};var du=Ve.hinfo={};du.encode=function(e,t,r){t||(t=Ke.alloc(du.encodingLength(e))),r||(r=0);let n=r;return r+=2,_t.encode(e.cpu,t,r),r+=_t.encode.bytes,_t.encode(e.os,t,r),r+=_t.encode.bytes,t.writeUInt16BE(r-n-2,n),du.encode.bytes=r-n,t};du.encode.bytes=0;du.decode=function(e,t){t||(t=0);let r=t,n={};return t+=2,n.cpu=_t.decode(e,t),t+=_t.decode.bytes,n.os=_t.decode(e,t),t+=_t.decode.bytes,du.decode.bytes=t-r,n};du.decode.bytes=0;du.encodingLength=function(e){return _t.encodingLength(e.cpu)+_t.encodingLength(e.os)+2};var Ns=Ve.ptr={},wN=Ve.cname=Ns,EN=Ve.dname=Ns;Ns.encode=function(e,t,r){return t||(t=Ke.alloc(Ns.encodingLength(e))),r||(r=0),$e.encode(e,t,r+2),t.writeUInt16BE($e.encode.bytes,r),Ns.encode.bytes=$e.encode.bytes+2,t};Ns.encode.bytes=0;Ns.decode=function(e,t){t||(t=0);let r=$e.decode(e,t+2);return Ns.decode.bytes=$e.decode.bytes+2,r};Ns.decode.bytes=0;Ns.encodingLength=function(e){return $e.encodingLength(e)+2};var pu=Ve.srv={};pu.encode=function(e,t,r){t||(t=Ke.alloc(pu.encodingLength(e))),r||(r=0),t.writeUInt16BE(e.priority||0,r+2),t.writeUInt16BE(e.weight||0,r+4),t.writeUInt16BE(e.port||0,r+6),$e.encode(e.target,t,r+8);let n=$e.encode.bytes+6;return t.writeUInt16BE(n,r),pu.encode.bytes=n+2,t};pu.encode.bytes=0;pu.decode=function(e,t){t||(t=0);let r=e.readUInt16BE(t),n={};return n.priority=e.readUInt16BE(t+2),n.weight=e.readUInt16BE(t+4),n.port=e.readUInt16BE(t+6),n.target=$e.decode(e,t+8),pu.decode.bytes=r+2,n};pu.decode.bytes=0;pu.encodingLength=function(e){return 8+$e.encodingLength(e.target)};var Wi=Ve.caa={};Wi.ISSUER_CRITICAL=128;Wi.encode=function(e,t,r){let n=Wi.encodingLength(e);return t||(t=Ke.alloc(Wi.encodingLength(e))),r||(r=0),e.issuerCritical&&(e.flags=Wi.ISSUER_CRITICAL),t.writeUInt16BE(n-2,r),r+=2,t.writeUInt8(e.flags||0,r),r+=1,_t.encode(e.tag,t,r),r+=_t.encode.bytes,t.write(e.value,r),r+=Ke.byteLength(e.value),Wi.encode.bytes=n,t};Wi.encode.bytes=0;Wi.decode=function(e,t){t||(t=0);let r=e.readUInt16BE(t);t+=2;let n=t,i={};return i.flags=e.readUInt8(t),t+=1,i.tag=_t.decode(e,t),t+=_t.decode.bytes,i.value=e.toString("utf-8",t,n+r),i.issuerCritical=!!(i.flags&Wi.ISSUER_CRITICAL),Wi.decode.bytes=r+2,i};Wi.decode.bytes=0;Wi.encodingLength=function(e){return _t.encodingLength(e.tag)+_t.encodingLength(e.value)+2};var eo=Ve.mx={};eo.encode=function(e,t,r){t||(t=Ke.alloc(eo.encodingLength(e))),r||(r=0);let n=r;return r+=2,t.writeUInt16BE(e.preference||0,r),r+=2,$e.encode(e.exchange,t,r),r+=$e.encode.bytes,t.writeUInt16BE(r-n-2,n),eo.encode.bytes=r-n,t};eo.encode.bytes=0;eo.decode=function(e,t){t||(t=0);let r=t,n={};return t+=2,n.preference=e.readUInt16BE(t),t+=2,n.exchange=$e.decode(e,t),t+=$e.decode.bytes,eo.decode.bytes=t-r,n};eo.encodingLength=function(e){return 4+$e.encodingLength(e.exchange)};var gu=Ve.a={};gu.encode=function(e,t,r){return t||(t=Ke.alloc(gu.encodingLength(e))),r||(r=0),t.writeUInt16BE(4,r),r+=2,nc.v4.encode(e,t,r),gu.encode.bytes=6,t};gu.encode.bytes=0;gu.decode=function(e,t){t||(t=0),t+=2;let r=nc.v4.decode(e,t);return gu.decode.bytes=6,r};gu.decode.bytes=0;gu.encodingLength=function(){return 6};var mu=Ve.aaaa={};mu.encode=function(e,t,r){return t||(t=Ke.alloc(mu.encodingLength(e))),r||(r=0),t.writeUInt16BE(16,r),r+=2,nc.v6.encode(e,t,r),mu.encode.bytes=18,t};mu.encode.bytes=0;mu.decode=function(e,t){t||(t=0),t+=2;let r=nc.v6.decode(e,t);return mu.decode.bytes=18,r};mu.decode.bytes=0;mu.encodingLength=function(){return 18};var Ri=Ve.option={};Ri.encode=function(e,t,r){t||(t=Ke.alloc(Ri.encodingLength(e))),r||(r=0);let n=r,i=Bm.toCode(e.code);if(t.writeUInt16BE(i,r),r+=2,e.data)t.writeUInt16BE(e.data.length,r),r+=2,e.data.copy(t,r),r+=e.data.length;else switch(i){case 8:let a=e.sourcePrefixLength||0,s=e.family||nc.familyOf(e.ip),u=nc.encode(e.ip,Ke.alloc),c=Math.ceil(a/8);t.writeUInt16BE(c+4,r),r+=2,t.writeUInt16BE(s,r),r+=2,t.writeUInt8(a,r++),t.writeUInt8(e.scopePrefixLength||0,r++),u.copy(t,r,0,c),r+=c;break;case 11:e.timeout?(t.writeUInt16BE(2,r),r+=2,t.writeUInt16BE(e.timeout,r),r+=2):(t.writeUInt16BE(0,r),r+=2);break;case 12:let f=e.length||0;t.writeUInt16BE(f,r),r+=2,t.fill(0,r,r+f),r+=f;break;case 14:let h=e.tags.length*2;t.writeUInt16BE(h,r),r+=2;for(let g of e.tags)t.writeUInt16BE(g,r),r+=2;break;default:throw new Error(`Unknown roption code: ${e.code}`)}return Ri.encode.bytes=r-n,t};Ri.encode.bytes=0;Ri.decode=function(e,t){t||(t=0);let r={};r.code=e.readUInt16BE(t),r.type=Bm.toString(r.code),t+=2;let n=e.readUInt16BE(t);switch(t+=2,r.data=e.slice(t,t+n),r.code){case 8:r.family=e.readUInt16BE(t),t+=2,r.sourcePrefixLength=e.readUInt8(t++),r.scopePrefixLength=e.readUInt8(t++);let i=Ke.alloc(r.family===1?4:16);e.copy(i,0,t,t+n-4),r.ip=nc.decode(i);break;case 11:n>0&&(r.timeout=e.readUInt16BE(t),t+=2);break;case 14:r.tags=[];for(let a=0;a<n;a+=2)r.tags.push(e.readUInt16BE(t)),t+=2}return Ri.decode.bytes=n+4,r};Ri.decode.bytes=0;Ri.encodingLength=function(e){if(e.data)return e.data.length+4;switch(Bm.toCode(e.code)){case 8:let r=e.sourcePrefixLength||0;return Math.ceil(r/8)+8;case 11:return typeof e.timeout=="number"?6:4;case 12:return e.length+4;case 14:return 4+e.tags.length*2}throw new Error(`Unknown roption code: ${e.code}`)};var Ji=Ve.opt={};Ji.encode=function(e,t,r){t||(t=Ke.alloc(Ji.encodingLength(e))),r||(r=0);let n=r,i=Al(e,Ri);return t.writeUInt16BE(i,r),r=Yf(e,Ri,t,r+2),Ji.encode.bytes=r-n,t};Ji.encode.bytes=0;Ji.decode=function(e,t){t||(t=0);let r=t,n=[],i=e.readUInt16BE(t);t+=2;let a=0;for(;i>0;)n[a++]=Ri.decode(e,t),t+=Ri.decode.bytes,i-=Ri.decode.bytes;return Ji.decode.bytes=t-r,n};Ji.decode.bytes=0;Ji.encodingLength=function(e){return 2+Al(e||[],Ri)};var fi=Ve.dnskey={};fi.PROTOCOL_DNSSEC=3;fi.ZONE_KEY=128;fi.SECURE_ENTRYPOINT=32768;fi.encode=function(e,t,r){t||(t=Ke.alloc(fi.encodingLength(e))),r||(r=0);let n=r,i=e.key;if(!Ke.isBuffer(i))throw new Error("Key must be a Buffer");return r+=2,t.writeUInt16BE(e.flags,r),r+=2,t.writeUInt8(fi.PROTOCOL_DNSSEC,r),r+=1,t.writeUInt8(e.algorithm,r),r+=1,i.copy(t,r,0,i.length),r+=i.length,fi.encode.bytes=r-n,t.writeUInt16BE(fi.encode.bytes-2,n),t};fi.encode.bytes=0;fi.decode=function(e,t){t||(t=0);let r=t;var n={},i=e.readUInt16BE(t);if(t+=2,n.flags=e.readUInt16BE(t),t+=2,e.readUInt8(t)!==fi.PROTOCOL_DNSSEC)throw new Error("Protocol must be 3");return t+=1,n.algorithm=e.readUInt8(t),t+=1,n.key=e.slice(t,r+i+2),t+=n.key.length,fi.decode.bytes=t-r,n};fi.decode.bytes=0;fi.encodingLength=function(e){return 6+Ke.byteLength(e.key)};var pa=Ve.rrsig={};pa.encode=function(e,t,r){t||(t=Ke.alloc(pa.encodingLength(e))),r||(r=0);let n=r,i=e.signature;if(!Ke.isBuffer(i))throw new Error("Signature must be a Buffer");return r+=2,t.writeUInt16BE(vu.toType(e.typeCovered),r),r+=2,t.writeUInt8(e.algorithm,r),r+=1,t.writeUInt8(e.labels,r),r+=1,t.writeUInt32BE(e.originalTTL,r),r+=4,t.writeUInt32BE(e.expiration,r),r+=4,t.writeUInt32BE(e.inception,r),r+=4,t.writeUInt16BE(e.keyTag,r),r+=2,$e.encode(e.signersName,t,r),r+=$e.encode.bytes,i.copy(t,r,0,i.length),r+=i.length,pa.encode.bytes=r-n,t.writeUInt16BE(pa.encode.bytes-2,n),t};pa.encode.bytes=0;pa.decode=function(e,t){t||(t=0);let r=t;var n={},i=e.readUInt16BE(t);return t+=2,n.typeCovered=vu.toString(e.readUInt16BE(t)),t+=2,n.algorithm=e.readUInt8(t),t+=1,n.labels=e.readUInt8(t),t+=1,n.originalTTL=e.readUInt32BE(t),t+=4,n.expiration=e.readUInt32BE(t),t+=4,n.inception=e.readUInt32BE(t),t+=4,n.keyTag=e.readUInt16BE(t),t+=2,n.signersName=$e.decode(e,t),t+=$e.decode.bytes,n.signature=e.slice(t,r+i+2),t+=n.signature.length,pa.decode.bytes=t-r,n};pa.decode.bytes=0;pa.encodingLength=function(e){return 20+$e.encodingLength(e.signersName)+Ke.byteLength(e.signature)};var ga=Ve.rp={};ga.encode=function(e,t,r){t||(t=Ke.alloc(ga.encodingLength(e))),r||(r=0);let n=r;return r+=2,$e.encode(e.mbox||".",t,r,{mail:!0}),r+=$e.encode.bytes,$e.encode(e.txt||".",t,r),r+=$e.encode.bytes,ga.encode.bytes=r-n,t.writeUInt16BE(ga.encode.bytes-2,n),t};ga.encode.bytes=0;ga.decode=function(e,t){t||(t=0);let r=t,n={};return t+=2,n.mbox=$e.decode(e,t,{mail:!0})||".",t+=$e.decode.bytes,n.txt=$e.decode(e,t)||".",t+=$e.decode.bytes,ga.decode.bytes=t-r,n};ga.decode.bytes=0;ga.encodingLength=function(e){return 2+$e.encodingLength(e.mbox||".")+$e.encodingLength(e.txt||".")};var mn={};mn.encode=function(e,t,r){t||(t=Ke.alloc(mn.encodingLength(e))),r||(r=0);let n=r;for(var i=[],a=0;a<e.length;a++){var s=vu.toType(e[a]);i[s>>8]===void 0&&(i[s>>8]=[]),i[s>>8][s>>3&31]|=1<<7-(s&7)}for(a=0;a<i.length;a++)if(i[a]!==void 0){var u=Ke.from(i[a]);t.writeUInt8(a,r),r+=1,t.writeUInt8(u.length,r),r+=1,u.copy(t,r),r+=u.length}return mn.encode.bytes=r-n,t};mn.encode.bytes=0;mn.decode=function(e,t,r){t||(t=0);let n=t;for(var i=[];t-n<r;){var a=e.readUInt8(t);t+=1;var s=e.readUInt8(t);t+=1;for(var u=0;u<s;u++)for(var c=e.readUInt8(t+u),f=0;f<8;f++)if(c&1<<7-f){var h=vu.toString(a<<8|u<<3|f);i.push(h)}t+=s}return mn.decode.bytes=t-n,i};mn.decode.bytes=0;mn.encodingLength=function(e){for(var t=[],r=0;r<e.length;r++){var n=vu.toType(e[r]);t[n>>8]=Math.max(t[n>>8]||0,n&255)}var i=0;for(r=0;r<t.length;r++)t[r]!==void 0&&(i+=2+Math.ceil((t[r]+1)/8));return i};var ma=Ve.nsec={};ma.encode=function(e,t,r){t||(t=Ke.alloc(ma.encodingLength(e))),r||(r=0);let n=r;return r+=2,$e.encode(e.nextDomain,t,r),r+=$e.encode.bytes,mn.encode(e.rrtypes,t,r),r+=mn.encode.bytes,ma.encode.bytes=r-n,t.writeUInt16BE(ma.encode.bytes-2,n),t};ma.encode.bytes=0;ma.decode=function(e,t){t||(t=0);let r=t;var n={},i=e.readUInt16BE(t);return t+=2,n.nextDomain=$e.decode(e,t),t+=$e.decode.bytes,n.rrtypes=mn.decode(e,t,i-(t-r)),t+=mn.decode.bytes,ma.decode.bytes=t-r,n};ma.decode.bytes=0;ma.encodingLength=function(e){return 2+$e.encodingLength(e.nextDomain)+mn.encodingLength(e.rrtypes)};var va=Ve.nsec3={};va.encode=function(e,t,r){t||(t=Ke.alloc(va.encodingLength(e))),r||(r=0);let n=r,i=e.salt;if(!Ke.isBuffer(i))throw new Error("salt must be a Buffer");let a=e.nextDomain;if(!Ke.isBuffer(a))throw new Error("nextDomain must be a Buffer");return r+=2,t.writeUInt8(e.algorithm,r),r+=1,t.writeUInt8(e.flags,r),r+=1,t.writeUInt16BE(e.iterations,r),r+=2,t.writeUInt8(i.length,r),r+=1,i.copy(t,r,0,i.length),r+=i.length,t.writeUInt8(a.length,r),r+=1,a.copy(t,r,0,a.length),r+=a.length,mn.encode(e.rrtypes,t,r),r+=mn.encode.bytes,va.encode.bytes=r-n,t.writeUInt16BE(va.encode.bytes-2,n),t};va.encode.bytes=0;va.decode=function(e,t){t||(t=0);let r=t;var n={},i=e.readUInt16BE(t);t+=2,n.algorithm=e.readUInt8(t),t+=1,n.flags=e.readUInt8(t),t+=1,n.iterations=e.readUInt16BE(t),t+=2;let a=e.readUInt8(t);t+=1,n.salt=e.slice(t,t+a),t+=a;let s=e.readUInt8(t);return t+=1,n.nextDomain=e.slice(t,t+s),t+=s,n.rrtypes=mn.decode(e,t,i-(t-r)),t+=mn.decode.bytes,va.decode.bytes=t-r,n};va.decode.bytes=0;va.encodingLength=function(e){return 8+e.salt.length+e.nextDomain.length+mn.encodingLength(e.rrtypes)};var wa=Ve.ds={};wa.encode=function(e,t,r){t||(t=Ke.alloc(wa.encodingLength(e))),r||(r=0);let n=r,i=e.digest;if(!Ke.isBuffer(i))throw new Error("Digest must be a Buffer");return r+=2,t.writeUInt16BE(e.keyTag,r),r+=2,t.writeUInt8(e.algorithm,r),r+=1,t.writeUInt8(e.digestType,r),r+=1,i.copy(t,r,0,i.length),r+=i.length,wa.encode.bytes=r-n,t.writeUInt16BE(wa.encode.bytes-2,n),t};wa.encode.bytes=0;wa.decode=function(e,t){t||(t=0);let r=t;var n={},i=e.readUInt16BE(t);return t+=2,n.keyTag=e.readUInt16BE(t),t+=2,n.algorithm=e.readUInt8(t),t+=1,n.digestType=e.readUInt8(t),t+=1,n.digest=e.slice(t,r+i+2),t+=n.digest.length,wa.decode.bytes=t-r,n};wa.decode.bytes=0;wa.encodingLength=function(e){return 6+Ke.byteLength(e.digest)};var Xi=Ve.sshfp={};Xi.getFingerprintLengthForHashType=function(t){switch(t){case 1:return 20;case 2:return 32}};Xi.encode=function(t,r,n){r||(r=Ke.alloc(Xi.encodingLength(t))),n||(n=0);let i=n;n+=2,r[n]=t.algorithm,n+=1,r[n]=t.hash,n+=1;let a=Ke.from(t.fingerprint.toUpperCase(),"hex");if(a.length!==Xi.getFingerprintLengthForHashType(t.hash))throw new Error("Invalid fingerprint length");return a.copy(r,n),n+=a.byteLength,Xi.encode.bytes=n-i,r.writeUInt16BE(Xi.encode.bytes-2,i),r};Xi.encode.bytes=0;Xi.decode=function(t,r){r||(r=0);let n=r,i={};r+=2,i.algorithm=t[r],r+=1,i.hash=t[r],r+=1;let a=Xi.getFingerprintLengthForHashType(i.hash);return i.fingerprint=t.slice(r,r+a).toString("hex").toUpperCase(),r+=a,Xi.decode.bytes=r-n,i};Xi.decode.bytes=0;Xi.encodingLength=function(e){return 4+Ke.from(e.fingerprint,"hex").byteLength};var Ea=Ve.naptr={};Ea.encode=function(e,t,r){t||(t=Ke.alloc(Ea.encodingLength(e))),r||(r=0);let n=r;return r+=2,t.writeUInt16BE(e.order||0,r),r+=2,t.writeUInt16BE(e.preference||0,r),r+=2,_t.encode(e.flags,t,r),r+=_t.encode.bytes,_t.encode(e.services,t,r),r+=_t.encode.bytes,_t.encode(e.regexp,t,r),r+=_t.encode.bytes,$e.encode(e.replacement,t,r),r+=$e.encode.bytes,Ea.encode.bytes=r-n,t.writeUInt16BE(Ea.encode.bytes-2,n),t};Ea.encode.bytes=0;Ea.decode=function(e,t){t||(t=0);let r=t,n={};return t+=2,n.order=e.readUInt16BE(t),t+=2,n.preference=e.readUInt16BE(t),t+=2,n.flags=_t.decode(e,t),t+=_t.decode.bytes,n.services=_t.decode(e,t),t+=_t.decode.bytes,n.regexp=_t.decode(e,t),t+=_t.decode.bytes,n.replacement=$e.decode(e,t),t+=$e.decode.bytes,Ea.decode.bytes=t-r,n};Ea.decode.bytes=0;Ea.encodingLength=function(e){return _t.encodingLength(e.flags)+_t.encodingLength(e.services)+_t.encodingLength(e.regexp)+$e.encodingLength(e.replacement)+6};var Aa=Ve.tlsa={};Aa.encode=function(e,t,r){t||(t=Ke.alloc(Aa.encodingLength(e))),r||(r=0);let n=r,i=e.certificate;if(!Ke.isBuffer(i))throw new Error("Certificate must be a Buffer");return r+=2,t.writeUInt8(e.usage,r),r+=1,t.writeUInt8(e.selector,r),r+=1,t.writeUInt8(e.matchingType,r),r+=1,i.copy(t,r,0,i.length),r+=i.length,Aa.encode.bytes=r-n,t.writeUInt16BE(Aa.encode.bytes-2,n),t};Aa.encode.bytes=0;Aa.decode=function(e,t){t||(t=0);let r=t,n={},i=e.readUInt16BE(t);return t+=2,n.usage=e.readUInt8(t),t+=1,n.selector=e.readUInt8(t),t+=1,n.matchingType=e.readUInt8(t),t+=1,n.certificate=e.slice(t,r+i+2),t+=n.certificate.length,Aa.decode.bytes=t-r,n};Aa.decode.bytes=0;Aa.encodingLength=function(e){return 5+Ke.byteLength(e.certificate)};var Rm=Ve.record=function(e){switch(e.toUpperCase()){case"A":return gu;case"PTR":return Ns;case"CNAME":return wN;case"DNAME":return EN;case"TXT":return fu;case"NULL":return hu;case"AAAA":return mu;case"SRV":return pu;case"HINFO":return du;case"CAA":return Wi;case"NS":return cu;case"SOA":return lu;case"MX":return eo;case"OPT":return Ji;case"DNSKEY":return fi;case"RRSIG":return pa;case"RP":return ga;case"NSEC":return ma;case"NSEC3":return va;case"SSHFP":return Xi;case"DS":return wa;case"NAPTR":return Ea;case"TLSA":return Aa}return ou},Rn=Ve.answer={};Rn.encode=function(e,t,r){t||(t=Ke.alloc(Rn.encodingLength(e))),r||(r=0);let n=r;if($e.encode(e.name,t,r),r+=$e.encode.bytes,t.writeUInt16BE(vu.toType(e.type),r),e.type.toUpperCase()==="OPT"){if(e.name!==".")throw new Error("OPT name must be root.");t.writeUInt16BE(e.udpPayloadSize||4096,r+2),t.writeUInt8(e.extendedRcode||0,r+4),t.writeUInt8(e.ednsVersion||0,r+5),t.writeUInt16BE(e.flags||0,r+6),r+=8,Ji.encode(e.options||[],t,r),r+=Ji.encode.bytes}else{let i=U0.toClass(e.class===void 0?"IN":e.class);e.flush&&(i|=$m),t.writeUInt16BE(i,r+2),t.writeUInt32BE(e.ttl||0,r+4),r+=8;let a=Rm(e.type);a.encode(e.data,t,r),r+=a.encode.bytes}return Rn.encode.bytes=r-n,t};Rn.encode.bytes=0;Rn.decode=function(e,t){t||(t=0);let r={},n=t;if(r.name=$e.decode(e,t),t+=$e.decode.bytes,r.type=vu.toString(e.readUInt16BE(t)),r.type==="OPT")r.udpPayloadSize=e.readUInt16BE(t+2),r.extendedRcode=e.readUInt8(t+4),r.ednsVersion=e.readUInt8(t+5),r.flags=e.readUInt16BE(t+6),r.flag_do=(r.flags>>15&1)===1,r.options=Ji.decode(e,t+8),t+=8+Ji.decode.bytes;else{let i=e.readUInt16BE(t+2);r.ttl=e.readUInt32BE(t+4),r.class=U0.toString(i&mN),r.flush=!!(i&$m);let a=Rm(r.type);r.data=a.decode(e,t+8),t+=8+a.decode.bytes}return Rn.decode.bytes=t-n,r};Rn.decode.bytes=0;Rn.encodingLength=function(e){let t=e.data!==null&&e.data!==void 0?e.data:e.options;return $e.encodingLength(e.name)+8+Rm(e.type).encodingLength(t)};var ks=Ve.question={};ks.encode=function(e,t,r){t||(t=Ke.alloc(ks.encodingLength(e))),r||(r=0);let n=r;return $e.encode(e.name,t,r),r+=$e.encode.bytes,t.writeUInt16BE(vu.toType(e.type),r),r+=2,t.writeUInt16BE(U0.toClass(e.class===void 0?"IN":e.class),r),r+=2,ks.encode.bytes=r-n,e};ks.encode.bytes=0;ks.decode=function(e,t){t||(t=0);let r=t,n={};return n.name=$e.decode(e,t),t+=$e.decode.bytes,n.type=vu.toString(e.readUInt16BE(t)),t+=2,n.class=U0.toString(e.readUInt16BE(t)),t+=2,!!(n.class&eC)&&(n.class&=vN),ks.decode.bytes=t-r,n};ks.decode.bytes=0;ks.encodingLength=function(e){return $e.encodingLength(e.name)+4};Ve.AUTHORITATIVE_ANSWER=1024;Ve.TRUNCATED_RESPONSE=512;Ve.RECURSION_DESIRED=256;Ve.RECURSION_AVAILABLE=128;Ve.AUTHENTIC_DATA=32;Ve.CHECKING_DISABLED=16;Ve.DNSSEC_OK=32768;Ve.encode=function(e,t,r){let n=!t;n&&(t=Ke.alloc(Ve.encodingLength(e))),r||(r=0);let i=r;return e.questions||(e.questions=[]),e.answers||(e.answers=[]),e.authorities||(e.authorities=[]),e.additionals||(e.additionals=[]),Ls.encode(e,t,r),r+=Ls.encode.bytes,r=Yf(e.questions,ks,t,r),r=Yf(e.answers,Rn,t,r),r=Yf(e.authorities,Rn,t,r),r=Yf(e.additionals,Rn,t,r),Ve.encode.bytes=r-i,n&&Ve.encode.bytes!==t.length?t.slice(0,Ve.encode.bytes):t};Ve.encode.bytes=0;Ve.decode=function(e,t){t||(t=0);let r=t,n=Ls.decode(e,t);return t+=Ls.decode.bytes,t=L0(n.questions,ks,e,t),t=L0(n.answers,Rn,e,t),t=L0(n.authorities,Rn,e,t),t=L0(n.additionals,Rn,e,t),Ve.decode.bytes=t-r,n};Ve.decode.bytes=0;Ve.encodingLength=function(e){return Ls.encodingLength(e)+Al(e.questions||[],ks)+Al(e.answers||[],Rn)+Al(e.authorities||[],Rn)+Al(e.additionals||[],Rn)};Ve.streamEncode=function(e){let t=Ve.encode(e),r=Ke.alloc(2);r.writeUInt16BE(t.byteLength);let n=Ke.concat([r,t]);return Ve.streamEncode.bytes=n.byteLength,n};Ve.streamEncode.bytes=0;Ve.streamDecode=function(e){let t=e.readUInt16BE(0);if(e.byteLength<t+2)return null;let r=Ve.decode(e.slice(2));return Ve.streamDecode.bytes=Ve.decode.bytes,r};Ve.streamDecode.bytes=0;function Al(e,t){let r=0;for(let n=0;n<e.length;n++)r+=t.encodingLength(e[n]);return r}function Yf(e,t,r,n){for(let i=0;i<e.length;i++)t.encode(e[i],r,n),n+=t.encode.bytes;return n}function L0(e,t,r,n){for(let i=0;i<e.length;i++)e[i]=t.decode(r,n),n+=t.decode.bytes;return n}});var Mm=ce((jW,Hm)=>{var pC=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);pC?(Um=new Uint8Array(16),Hm.exports=function(){return pC(Um),Um}):(jm=new Array(16),Hm.exports=function(){for(var t=0,r;t<16;t++)t&3||(r=Math.random()*4294967296),jm[t]=r>>>((t&3)<<3)&255;return jm});var Um,jm});var qm=ce((HW,mC)=>{var gC=[];for(Xf=0;Xf<256;++Xf)gC[Xf]=(Xf+256).toString(16).substr(1);var Xf;function Fk(e,t){var r=t||0,n=gC;return[n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]]].join("")}mC.exports=Fk});var EC=ce((MW,wC)=>{var Sk=Mm(),Ik=qm(),vC,Vm,Km=0,zm=0;function Bk(e,t,r){var n=t&&r||0,i=t||[];e=e||{};var a=e.node||vC,s=e.clockseq!==void 0?e.clockseq:Vm;if(a==null||s==null){var u=Sk();a==null&&(a=vC=[u[0]|1,u[1],u[2],u[3],u[4],u[5]]),s==null&&(s=Vm=(u[6]<<8|u[7])&16383)}var c=e.msecs!==void 0?e.msecs:new Date().getTime(),f=e.nsecs!==void 0?e.nsecs:zm+1,h=c-Km+(f-zm)/1e4;if(h<0&&e.clockseq===void 0&&(s=s+1&16383),(h<0||c>Km)&&e.nsecs===void 0&&(f=0),f>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Km=c,zm=f,Vm=s,c+=122192928e5;var g=((c&268435455)*1e4+f)%4294967296;i[n++]=g>>>24&255,i[n++]=g>>>16&255,i[n++]=g>>>8&255,i[n++]=g&255;var p=c/4294967296*1e4&268435455;i[n++]=p>>>8&255,i[n++]=p&255,i[n++]=p>>>24&15|16,i[n++]=p>>>16&255,i[n++]=s>>>8|128,i[n++]=s&255;for(var d=0;d<6;++d)i[n+d]=a[d];return t||Ik(i)}wC.exports=Bk});var yC=ce((qW,AC)=>{var $k=Mm(),Rk=qm();function xk(e,t,r){var n=t&&r||0;typeof e=="string"&&(t=e==="binary"?new Array(16):null,e=null),e=e||{};var i=e.random||(e.rng||$k)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,t)for(var a=0;a<16;++a)t[n+a]=i[a];return t||Rk(i)}AC.exports=xk});var CC=ce((VW,_C)=>{var Pk=EC(),bC=yC(),Gm=bC;Gm.v1=Pk;Gm.v4=bC;_C.exports=Gm});var z0=ce((KW,FC)=>{var{v4:Ok}=CC();function DC(){return Ok().replace(/-/g,"")}var Ym=DC;function Wm(){return Ym()}Wm.setFactory=e=>{Ym=e};Wm.reset=()=>{Ym=DC};FC.exports=Wm});var Eu=ce((zW,SC)=>{var Tk=Symbol("_options"),Nk=Symbol("_cache"),kk=Symbol("_state"),Lk=Symbol("_objectId"),Uk=Symbol("_conflicts"),jk=Symbol("_change"),Hk=Symbol("_elemIds");SC.exports={OPTIONS:Tk,CACHE:Nk,STATE:kk,OBJECT_ID:Lk,CONFLICTS:Uk,CHANGE:jk,ELEM_IDS:Hk}});var Us=ce((GW,BC)=>{function IC(e){return typeof e=="object"&&e!==null}function Mk(e){if(!IC(e))return{};let t={};for(let r of Object.keys(e))t[r]=e[r];return t}function qk(e){let t=/^(\d+)@(.*)$/.exec(e||"");if(!t)throw new RangeError(`Not a valid opId: ${e}`);return{counter:parseInt(t[1],10),actorId:t[2]}}function Vk(e,t){if(!(e instanceof Uint8Array)||!(t instanceof Uint8Array))throw new TypeError("equalBytes can only compare Uint8Arrays");if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}function Kk(e){let t=new Array(e);for(let r=0;r<e;r++)t[r]=null;return t}BC.exports={isObject:IC,copyObject:Mk,parseOpId:qk,equalBytes:Vk,createArrayOfNulls:Kk}});var Qf=ce((YW,$C)=>{var{OBJECT_ID:ac}=Eu(),{isObject:zk}=Us(),Zf=class{constructor(t){if(typeof t=="string"){let r=[...t].map(n=>({value:n}));return Jf(void 0,r)}else if(Array.isArray(t)){let r=t.map(n=>({value:n}));return Jf(void 0,r)}else{if(t===void 0)return Jf(void 0,[]);throw new TypeError(`Unsupported initial value for Text: ${t}`)}}get length(){return this.elems.length}get(t){let r=this.elems[t].value;if(this.context&&zk(r)){let n=r[ac],i=this.path.concat([{key:t,objectId:n}]);return this.context.instantiateObject(i,n)}else return r}getElemId(t){return this.elems[t].elemId}[Symbol.iterator](){let t=this.elems,r=-1;return{next(){return r+=1,r<t.length?{done:!1,value:t[r].value}:{done:!0}}}}toString(){let t="";for(let r of this.elems)typeof r.value=="string"&&(t+=r.value);return t}toSpans(){let t=[],r="";for(let n of this.elems)typeof n.value=="string"?r+=n.value:(r.length>0&&(t.push(r),r=""),t.push(n.value));return r.length>0&&t.push(r),t}toJSON(){return this.toString()}getWriteable(t,r){if(!this[ac])throw new RangeError("getWriteable() requires the objectId to be set");let n=Jf(this[ac],this.elems);return n.context=t,n.path=r,n}set(t,r){if(this.context)this.context.setListIndex(this.path,t,r);else if(!this[ac])this.elems[t].value=r;else throw new TypeError("Automerge.Text object cannot be modified outside of a change block");return this}insertAt(t,...r){if(this.context)this.context.splice(this.path,t,0,r);else if(!this[ac])this.elems.splice(t,0,...r.map(n=>({value:n})));else throw new TypeError("Automerge.Text object cannot be modified outside of a change block");return this}deleteAt(t,r=1){if(this.context)this.context.splice(this.path,t,r,[]);else if(!this[ac])this.elems.splice(t,r);else throw new TypeError("Automerge.Text object cannot be modified outside of a change block");return this}};for(let e of["concat","every","filter","find","findIndex","forEach","includes","indexOf","join","lastIndexOf","map","reduce","reduceRight","slice","some","toLocaleString"])Zf.prototype[e]=function(...t){return[...this][e](...t)};function Jf(e,t){let r=Object.create(Zf.prototype);return r[ac]=e,r.elems=t,r}$C.exports={Text:Zf,instantiateText:Jf}});var th=ce((WW,PC)=>{var{OBJECT_ID:uc,CONFLICTS:Gk}=Eu(),{isObject:G0,copyObject:RC}=Us();function Xm(e,t,r){for(let n of e)if(t[n]!==r[n]){if(typeof t[n]=="number"&&typeof r[n]=="number")return t[n]-r[n];{let i=""+t[n],a=""+r[n];if(i===a)continue;return i<a?-1:1}}return 0}var eh=class{constructor(){this.entries=Object.freeze({}),this.opIds=Object.freeze({}),Object.freeze(this)}byId(t){return this.entries[t]}get ids(){return Object.keys(this.entries).filter(t=>{let r=this.entries[t];return G0(r)&&r.id===t})}get count(){return this.ids.length}get rows(){return this.ids.map(t=>this.byId(t))}filter(t,r){return this.rows.filter(t,r)}find(t,r){return this.rows.find(t,r)}map(t,r){return this.rows.map(t,r)}sort(t){if(typeof t=="function")return this.rows.sort(t);if(typeof t=="string")return this.rows.sort((r,n)=>Xm([t],r,n));if(Array.isArray(t))return this.rows.sort((r,n)=>Xm(t,r,n));if(t===void 0)return this.rows.sort((r,n)=>Xm(["id"],r,n));throw new TypeError(`Unsupported sorting argument: ${t}`)}[Symbol.iterator](){let t=this.rows,r=-1;return{next(){return r+=1,r<t.length?{done:!1,value:t[r]}:{done:!0}}}}_clone(){if(!this[uc])throw new RangeError("clone() requires the objectId to be set");return xC(this[uc],RC(this.entries),RC(this.opIds))}_set(t,r,n){if(Object.isFrozen(this.entries))throw new Error("A table can only be modified in a change function");G0(r)&&!Array.isArray(r)&&Object.defineProperty(r,"id",{value:t,enumerable:!0}),this.entries[t]=r,this.opIds[t]=n}remove(t){if(Object.isFrozen(this.entries))throw new Error("A table can only be modified in a change function");delete this.entries[t],delete this.opIds[t]}_freeze(){Object.freeze(this.entries),Object.freeze(this.opIds),Object.freeze(this)}getWriteable(t,r){if(!this[uc])throw new RangeError("getWriteable() requires the objectId to be set");let n=Object.create(Jm.prototype);return n[uc]=this[uc],n.context=t,n.entries=this.entries,n.opIds=this.opIds,n.path=r,n}toJSON(){let t={};for(let r of this.ids)t[r]=this.byId(r);return t}},Jm=class extends eh{byId(t){if(G0(this.entries[t])&&this.entries[t].id===t){let r=this.entries[t][uc],n=this.path.concat([{key:t,objectId:r}]);return this.context.instantiateObject(n,r,["id"])}}add(t){return this.context.addTableRow(this.path,t)}remove(t){if(G0(this.entries[t])&&this.entries[t].id===t)this.context.deleteTableRow(this.path,t,this.opIds[t]);else throw new RangeError(`There is no row with ID ${t} in this table`)}};function xC(e,t,r){let n=Object.create(eh.prototype);if(!e)throw new RangeError("instantiateTable requires an objectId to be given");return n[uc]=e,n[Gk]=Object.freeze({}),n.entries=t||{},n.opIds=r||{},n}PC.exports={Table:eh,instantiateTable:xC}});var W0=ce((XW,OC)=>{var Y0=class{constructor(t){this.value=t||0,Object.freeze(this)}valueOf(){return this.value}toString(){return this.valueOf().toString()}toJSON(){return this.value}},Zm=class extends Y0{increment(t){return t=typeof t=="number"?t:1,this.context.increment(this.path,this.key,t),this.value+=t,this.value}decrement(t){return this.increment(typeof t=="number"?-t:-1)}};function Yk(e,t,r,n,i){let a=Object.create(Zm.prototype);return a.value=e,a.context=t,a.path=r,a.objectId=n,a.key=i,a}OC.exports={Counter:Y0,getWriteableCounter:Yk}});var Qm=ce((JW,LC)=>{var{isObject:Wk,copyObject:TC,parseOpId:J0}=Us(),{OBJECT_ID:rh,CONFLICTS:oc,ELEM_IDS:X0}=Eu(),{instantiateText:Xk}=Qf(),{instantiateTable:Jk}=th(),{Counter:Zk}=W0();function Au(e,t,r){return e.objectId?(t&&t[rh]!==e.objectId&&(t=void 0),kC(e,t,r)):e.datatype==="timestamp"?new Date(e.value):e.datatype==="counter"?new Zk(e.value):e.value}function Qk(e,t){let r=/^(\d+)@(.*)$/,n=r.test(e)?J0(e):{counter:0,actorId:e},i=r.test(t)?J0(t):{counter:0,actorId:t};return n.counter<i.counter?-1:n.counter>i.counter?1:n.actorId<i.actorId?-1:n.actorId>i.actorId?1:0}function eL(e,t,r,n){if(e)for(let i of Object.keys(e)){let a={},s=Object.keys(e[i]).sort(Qk).reverse();for(let u of s){let c=e[i][u];r[i]&&r[i][u]?a[u]=Au(c,r[i][u],n):a[u]=Au(c,void 0,n)}s.length===0?(delete t[i],delete r[i]):(t[i]=a[s[0]],r[i]=a)}}function NC(e,t){let r=TC(e),n=TC(e?e[oc]:void 0);return Object.defineProperty(r,rh,{value:t}),Object.defineProperty(r,oc,{value:n}),r}function tL(e,t,r){let n=e.objectId;r[n]||(r[n]=NC(t,n));let i=r[n];return eL(e.props,i,i[oc],r),i}function rL(e,t,r){let n=e.objectId;r[n]||(r[n]=t?t._clone():Jk(n));let i=r[n];for(let a of Object.keys(e.props||{})){let s=Object.keys(e.props[a]);if(s.length===0)i.remove(a);else if(s.length===1){let u=e.props[a][s[0]];i._set(a,Au(u,i.byId(a),r),s[0])}else throw new RangeError("Conflicts are not supported on properties of a table")}return i}function nL(e,t){let r=e?e.slice():[],n=e&&e[oc]?e[oc].slice():[],i=e&&e[X0]?e[X0].slice():[];return Object.defineProperty(r,rh,{value:t}),Object.defineProperty(r,oc,{value:n}),Object.defineProperty(r,X0,{value:i}),r}function iL(e,t,r){let n=e.objectId;r[n]||(r[n]=nL(t,n));let i=r[n],a=i[oc],s=i[X0];for(let u=0;u<e.edits.length;u++){let c=e.edits[u];if(c.action==="insert"||c.action==="update"){let f=a[c.index]&&a[c.index][c.opId],h=Au(c.value,f,r),g={[c.opId]:h};for(;u<e.edits.length-1&&e.edits[u+1].index===c.index&&e.edits[u+1].action==="update";){u++;let p=e.edits[u],d=a[p.index]&&a[p.index][p.opId];h=Au(p.value,d,r),g[p.opId]=h}c.action==="insert"?(i.splice(c.index,0,h),a.splice(c.index,0,g),s.splice(c.index,0,c.elemId)):(i[c.index]=h,a[c.index]=g)}else if(c.action==="multi-insert"){let f=J0(c.elemId),h=[],g=[],p=[],d=c.datatype;c.values.forEach((w,v)=>{let b=`${f.counter+v}@${f.actorId}`;w=Au({value:w,datatype:d},void 0,r),g.push(w),p.push({[b]:{value:w,datatype:d,type:"value"}}),h.push(b)}),i.splice(c.index,0,...g),a.splice(c.index,0,...p),s.splice(c.index,0,...h)}else c.action==="remove"&&(i.splice(c.index,c.count),a.splice(c.index,c.count),s.splice(c.index,c.count))}return i}function sL(e,t,r){let n=e.objectId,i;r[n]?i=r[n].elems:t?i=t.elems.slice():i=[];for(let a of e.edits)if(a.action==="insert"){let s=Au(a.value,void 0,r),u={elemId:a.elemId,pred:[a.opId],value:s};i.splice(a.index,0,u)}else if(a.action==="multi-insert"){let s=J0(a.elemId),u=a.datatype,c=a.values.map((f,h)=>{f=Au({datatype:u,value:f},void 0,r);let g=`${s.counter+h}@${s.actorId}`;return{elemId:g,pred:[g],value:f}});i.splice(a.index,0,...c)}else if(a.action==="update"){let s=i[a.index].elemId,u=Au(a.value,i[a.index].value,r);i[a.index]={elemId:s,pred:[a.opId],value:u}}else a.action==="remove"&&i.splice(a.index,a.count);return r[n]=Xk(n,i),r[n]}function kC(e,t,r){if(Wk(t)&&(!e.props||Object.keys(e.props).length===0)&&(!e.edits||e.edits.length===0)&&!r[e.objectId])return t;if(e.type==="map")return tL(e,t,r);if(e.type==="table")return rL(e,t,r);if(e.type==="list")return iL(e,t,r);if(e.type==="text")return sL(e,t,r);throw new TypeError(`Unknown object type: ${e.type}`)}function aL(e){if(e[rh]!=="_root")throw new RangeError(`Not the root object: ${e[rh]}`);return NC(e,"_root")}LC.exports={interpretPatch:kC,cloneRootObject:aL}});var HC=ce((ZW,jC)=>{var{OBJECT_ID:cc,CHANGE:Z0,STATE:uL}=Eu(),{createArrayOfNulls:oL}=Us(),{Text:cL}=Qf(),{Table:lL}=th();function _a(e){if(typeof e=="string"&&/^[0-9]+$/.test(e)&&(e=parseInt(e,10)),typeof e!="number")throw new TypeError("A list index must be a number, but you passed "+JSON.stringify(e));if(e<0||isNaN(e)||e===1/0||e===-1/0)throw new RangeError("A list index must be positive, but you passed "+e);return e}function fL(e,t,r){let n={deleteAt(i,a){return e.splice(r,_a(i),a||1,[]),this},fill(i,a,s){let u=e.getObject(t);for(let c=_a(a||0);c<_a(s||u.length);c++)e.setListIndex(r,c,i);return this},indexOf(i,a=0){let s=i[cc];if(s){let u=e.getObject(t);for(let c=a;c<u.length;c++)if(u[c][cc]===s)return c;return-1}else return e.getObject(t).indexOf(i,a)},insertAt(i,...a){return e.splice(r,_a(i),0,a),this},pop(){let i=e.getObject(t);if(i.length==0)return;let a=e.getObjectField(r,t,i.length-1);return e.splice(r,i.length-1,1,[]),a},push(...i){let a=e.getObject(t);return e.splice(r,a.length,0,i),e.getObject(t).length},shift(){if(e.getObject(t).length==0)return;let a=e.getObjectField(r,t,0);return e.splice(r,0,1,[]),a},splice(i,a,...s){let u=e.getObject(t);i=_a(i),(a===void 0||a>u.length-i)&&(a=u.length-i);let c=[];for(let f=0;f<a;f++)c.push(e.getObjectField(r,t,i+f));return e.splice(r,i,a,s),c},unshift(...i){return e.splice(r,0,0,i),e.getObject(t).length}};for(let i of["entries","keys","values"]){let a=e.getObject(t);n[i]=()=>a[i]()}for(let i of["concat","every","filter","find","findIndex","forEach","includes","join","lastIndexOf","map","reduce","reduceRight","slice","some","toLocaleString","toString"])n[i]=(...a)=>e.getObject(t).map((u,c)=>e.getObjectField(r,t,c))[i](...a);return n}var hL={get(e,t){let{context:r,objectId:n,path:i}=e;return t===cc?n:t===Z0?r:t===uL?{actorId:r.actorId}:r.getObjectField(i,n,t)},set(e,t,r){let{context:n,path:i,readonly:a}=e;if(Array.isArray(a)&&a.indexOf(t)>=0)throw new RangeError(`Object property "${t}" cannot be modified`);return n.setMapKey(i,t,r),!0},deleteProperty(e,t){let{context:r,path:n,readonly:i}=e;if(Array.isArray(i)&&i.indexOf(t)>=0)throw new RangeError(`Object property "${t}" cannot be modified`);return r.deleteMapKey(n,t),!0},has(e,t){let{context:r,objectId:n}=e;return[cc,Z0].includes(t)||t in r.getObject(n)},getOwnPropertyDescriptor(e,t){let{context:r,objectId:n}=e,i=r.getObject(n);if(t in i)return{configurable:!0,enumerable:!0,value:r.getObjectField(n,t)}},ownKeys(e){let{context:t,objectId:r}=e;return Object.keys(t.getObject(r))}},dL={get(e,t){let[r,n,i]=e;return t===Symbol.iterator?r.getObject(n)[Symbol.iterator]:t===cc?n:t===Z0?r:t==="length"?r.getObject(n).length:typeof t=="string"&&/^[0-9]+$/.test(t)?r.getObjectField(i,n,_a(t)):fL(r,n,i)[t]},set(e,t,r){let[n,i,a]=e;if(t==="length"){if(typeof r!="number")throw new RangeError("Invalid array length");let s=n.getObject(i).length;s>r?n.splice(a,r,s-r,[]):n.splice(a,s,0,oL(r-s))}else n.setListIndex(a,_a(t),r);return!0},deleteProperty(e,t){let[r,,n]=e;return r.splice(n,_a(t),1,[]),!0},has(e,t){let[r,n]=e;return typeof t=="string"&&/^[0-9]+$/.test(t)?_a(t)<r.getObject(n).length:["length",cc,Z0].includes(t)},getOwnPropertyDescriptor(e,t){let[r,n]=e,i=r.getObject(n);if(t==="length")return{writable:!0,value:i.length};if(t===cc)return{configurable:!1,enumerable:!1,value:n};if(typeof t=="string"&&/^[0-9]+$/.test(t)){let a=_a(t);if(a<i.length)return{configurable:!0,enumerable:!0,value:r.getObjectField(n,a)}}},ownKeys(e){let[t,r]=e,n=t.getObject(r),i=["length"];for(let a of Object.keys(n))i.push(a);return i}};function UC(e,t,r,n){return new Proxy({context:e,objectId:t,path:r,readonly:n},hL)}function pL(e,t,r){return new Proxy([e,t,r],dL)}function gL(e,t,r){let n=this.getObject(t);return Array.isArray(n)?pL(this,t,e):n instanceof cL||n instanceof lL?n.getWriteable(this,e):UC(this,t,e,r)}function mL(e){return e.instantiateObject=gL,UC(e,"_root",[])}jC.exports={rootObjectProxy:mL}});var nv=ce((QW,MC)=>{var ev=class{constructor(t){if(!(Number.isInteger(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER))throw new RangeError(`Value ${t} cannot be a uint`);this.value=t,Object.freeze(this)}},tv=class{constructor(t){if(!(Number.isInteger(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=0))throw new RangeError(`Value ${t} cannot be a uint`);this.value=t,Object.freeze(this)}},rv=class{constructor(t){if(typeof t!="number")throw new RangeError(`Value ${t} cannot be a float64`);this.value=t||0,Object.freeze(this)}};MC.exports={Int:ev,Uint:tv,Float64:rv}});var zC=ce((eX,KC)=>{var{CACHE:vL,OBJECT_ID:Q0,CONFLICTS:lc,ELEM_IDS:qC,STATE:wL}=Eu(),{interpretPatch:EL}=Qm(),{Text:sh}=Qf(),{Table:ah}=th(),{Counter:to,getWriteableCounter:AL}=W0(),{Int:iv,Uint:sv,Float64:av}=nv(),{isObject:nh,parseOpId:VC,createArrayOfNulls:yL}=Us(),bL=z0(),uv=class{constructor(t,r,n){this.actorId=r,this.nextOpNum=t[wL].maxOp+1,this.cache=t[vL],this.updated={},this.ops=[],this.applyPatch=n||EL}addOp(t){this.ops.push(t),t.action==="set"&&t.values?this.nextOpNum+=t.values.length:t.action==="del"&&t.multiOp?this.nextOpNum+=t.multiOp:this.nextOpNum+=1}nextOpId(){return`${this.nextOpNum}@${this.actorId}`}getValueDescription(t){if(!["object","boolean","number","string"].includes(typeof t))throw new TypeError(`Unsupported type of value: ${typeof t}`);if(nh(t)){if(t instanceof Date)return{type:"value",value:t.getTime(),datatype:"timestamp"};if(t instanceof iv)return{type:"value",value:t.value,datatype:"int"};if(t instanceof sv)return{type:"value",value:t.value,datatype:"uint"};if(t instanceof av)return{type:"value",value:t.value,datatype:"float64"};if(t instanceof to)return{type:"value",value:t.value,datatype:"counter"};{let r=t[Q0],n=this.getObjectType(r);if(!r)throw new RangeError(`Object ${JSON.stringify(t)} has no objectId`);return n==="list"||n==="text"?{objectId:r,type:n,edits:[]}:{objectId:r,type:n,props:{}}}}else return typeof t=="number"?Number.isInteger(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER?{type:"value",value:t,datatype:"int"}:{type:"value",value:t,datatype:"float64"}:{type:"value",value:t}}getValuesDescriptions(t,r,n){if(r instanceof ah){let i=r.byId(n),a=r.opIds[n];return i?{[a]:this.getValueDescription(i)}:{}}else if(r instanceof sh){let i=r.get(n),a=r.getElemId(n);return i?{[a]:this.getValueDescription(i)}:{}}else{let i=r[lc][n],a={};if(!i)throw new RangeError(`No children at key ${n} of path ${JSON.stringify(t)}`);for(let s of Object.keys(i))a[s]=this.getValueDescription(i[s]);return a}}getPropertyValue(t,r,n){return t instanceof ah?t.byId(r):t instanceof sh?t.get(r):t[lc][r][n]}getSubpatch(t,r){if(r.length==0)return t;let n=t,i=this.getObject("_root");for(let a of r){let s=this.getValuesDescriptions(r,i,a.key);if(n.props)n.props[a.key]||(n.props[a.key]=s);else if(n.edits)for(let c of Object.keys(s))n.edits.push({action:"update",index:a.key,opId:c,value:s[c]});let u=null;for(let c of Object.keys(s))s[c].objectId===a.objectId&&(u=c);if(!u)throw new RangeError(`Cannot find path object with objectId ${a.objectId}`);n=s[u],i=this.getPropertyValue(i,a.key,u)}return n}getObject(t){let r=this.updated[t]||this.cache[t];if(!r)throw new RangeError(`Target object does not exist: ${t}`);return r}getObjectType(t){if(t==="_root")return"map";let r=this.getObject(t);return r instanceof sh?"text":r instanceof ah?"table":Array.isArray(r)?"list":"map"}getObjectField(t,r,n){if(!["string","number"].includes(typeof n))return;let i=this.getObject(r);if(i[n]instanceof to)return AL(i[n].value,this,t,r,n);if(nh(i[n])){let a=i[n][Q0],s=t.concat([{key:n,objectId:a}]);return this.instantiateObject(s,a)}else return i[n]}createNestedObjects(t,r,n,i,a,s){if(n[Q0])throw new RangeError("Cannot create a reference to an existing document object");let u=this.nextOpId();if(n instanceof sh){this.addOp(s?{action:"makeText",obj:t,elemId:s,insert:i,pred:a}:{action:"makeText",obj:t,key:r,insert:i,pred:a});let c={objectId:u,type:"text",edits:[]};return this.insertListItems(c,0,[...n],!0),c}else if(n instanceof ah){if(n.count>0)throw new RangeError("Assigning a non-empty Table object is not supported");return this.addOp(s?{action:"makeTable",obj:t,elemId:s,insert:i,pred:a}:{action:"makeTable",obj:t,key:r,insert:i,pred:a}),{objectId:u,type:"table",props:{}}}else if(Array.isArray(n)){this.addOp(s?{action:"makeList",obj:t,elemId:s,insert:i,pred:a}:{action:"makeList",obj:t,key:r,insert:i,pred:a});let c={objectId:u,type:"list",edits:[]};return this.insertListItems(c,0,n,!0),c}else{this.addOp(s?{action:"makeMap",obj:t,elemId:s,insert:i,pred:a}:{action:"makeMap",obj:t,key:r,insert:i,pred:a});let c={};for(let f of Object.keys(n).sort()){let h=this.nextOpId(),g=this.setValue(u,f,n[f],!1,[]);c[f]={[h]:g}}return{objectId:u,type:"map",props:c}}}setValue(t,r,n,i,a,s){if(!t)throw new RangeError("setValue needs an objectId");if(r==="")throw new RangeError("The key of a map entry must not be an empty string");if(nh(n)&&!(n instanceof Date)&&!(n instanceof to)&&!(n instanceof iv)&&!(n instanceof sv)&&!(n instanceof av))return this.createNestedObjects(t,r,n,i,a,s);{let u=this.getValueDescription(n),c={action:"set",obj:t,insert:i,value:u.value,pred:a};return s?c.elemId=s:c.key=r,u.datatype&&(c.datatype=u.datatype),this.addOp(c),u}}applyAtPath(t,r){let n={objectId:"_root",type:"map",props:{}};r(this.getSubpatch(n,t)),this.applyPatch(n,this.cache._root,this.updated)}setMapKey(t,r,n){if(typeof r!="string")throw new RangeError(`The key of a map entry must be a string, not ${typeof r}`);let i=t.length===0?"_root":t[t.length-1].objectId,a=this.getObject(i);if(a[r]instanceof to)throw new RangeError("Cannot overwrite a Counter object; use .increment() or .decrement() to change its value.");(a[r]!==n||Object.keys(a[lc][r]||{}).length>1||n===void 0)&&this.applyAtPath(t,s=>{let u=ih(a,r),c=this.nextOpId(),f=this.setValue(i,r,n,!1,u);s.props[r]={[c]:f}})}deleteMapKey(t,r){let n=t.length===0?"_root":t[t.length-1].objectId,i=this.getObject(n);if(i[r]!==void 0){let a=ih(i,r);this.addOp({action:"del",obj:n,key:r,insert:!1,pred:a}),this.applyAtPath(t,s=>{s.props[r]={}})}}insertListItems(t,r,n,i){let a=i?[]:this.getObject(t.objectId);if(r<0||r>a.length)throw new RangeError(`List index ${r} is out of bounds for list of length ${a.length}`);if(n.length===0)return;let s=ep(a,r,!0),u=n.every(h=>typeof h=="string"||typeof h=="number"||typeof h=="boolean"||h===null||nh(h)&&(h instanceof Date||h instanceof to||h instanceof iv||h instanceof sv||h instanceof av)),c=u?n.map(h=>this.getValueDescription(h)):[],f=c.every(h=>h.datatype===c[0].datatype);if(u&&f&&n.length>1){let h=this.nextOpId(),g=c[0].datatype,p=c.map(v=>v.value),d={action:"set",obj:t.objectId,elemId:s,insert:!0,values:p,pred:[]},w={action:"multi-insert",elemId:h,index:r,values:p};g&&(d.datatype=g,w.datatype=g),this.addOp(d),t.edits.push(w)}else for(let h=0;h<n.length;h++){let g=this.nextOpId(),p=this.setValue(t.objectId,r+h,n[h],!0,[],s);s=g,t.edits.push({action:"insert",index:r+h,elemId:s,opId:s,value:p})}}setListIndex(t,r,n){let i=t.length===0?"_root":t[t.length-1].objectId,a=this.getObject(i);if(r>=a.length){let s=yL(r-a.length);return s.push(n),this.splice(t,a.length,0,s)}if(a[r]instanceof to)throw new RangeError("Cannot overwrite a Counter object; use .increment() or .decrement() to change its value.");(a[r]!==n||Object.keys(a[lc][r]||{}).length>1||n===void 0)&&this.applyAtPath(t,s=>{let u=ih(a,r),c=this.nextOpId(),f=this.setValue(i,r,n,!1,u,ep(a,r));s.edits.push({action:"update",index:r,opId:c,value:f})})}splice(t,r,n,i){let a=t.length===0?"_root":t[t.length-1].objectId,s=this.getObject(a);if(r<0||n<0||r>s.length-n)throw new RangeError(`${n} deletions starting at index ${r} are out of bounds for list of length ${s.length}`);if(n===0&&i.length===0)return;let u={diffs:{objectId:"_root",type:"map",props:{}}},c=this.getSubpatch(u.diffs,t);if(n>0){let f,h,g;for(let p=0;p<n;p++){if(this.getObjectField(t,a,r+p)instanceof to)throw new TypeError("Unsupported operation: deleting a counter from a list");let d=ep(s,r+p),w=VC(d),v=ih(s,r+p),b=v.length===1?VC(v[0]):void 0;f&&h&&g&&b&&h.actorId===w.actorId&&h.counter+1===w.counter&&g.actorId===b.actorId&&g.counter+1===b.counter?f.multiOp=(f.multiOp||1)+1:(f&&this.addOp(f),f={action:"del",obj:a,elemId:d,insert:!1,pred:v}),h=w,g=b}this.addOp(f),c.edits.push({action:"remove",index:r,count:n})}i.length>0&&this.insertListItems(c,r,i,!1),this.applyPatch(u.diffs,this.cache._root,this.updated)}addTableRow(t,r){if(!nh(r)||Array.isArray(r))throw new TypeError("A table row must be an object");if(r[Q0])throw new TypeError("Cannot reuse an existing object as table row");if(r.id)throw new TypeError('A table row must not have an "id" property; it is generated automatically');let n=bL(),i=this.setValue(t[t.length-1].objectId,n,r,!1,[]);return this.applyAtPath(t,a=>{a.props[n]={[i.objectId]:i}}),n}deleteTableRow(t,r,n){let i=t[t.length-1].objectId;this.getObject(i).byId(r)&&(this.addOp({action:"del",obj:i,key:r,insert:!1,pred:[n]}),this.applyAtPath(t,s=>{s.props[r]={}}))}increment(t,r,n){let i=t.length===0?"_root":t[t.length-1].objectId,a=this.getObject(i);if(!(a[r]instanceof to))throw new TypeError("Only counter values can be incremented");let s=this.getObjectType(i),u=a[r].value+n,c=this.nextOpId(),f=ih(a,r);if(s==="list"||s==="text"){let h=ep(a,r,!1);this.addOp({action:"inc",obj:i,elemId:h,value:n,insert:!1,pred:f})}else this.addOp({action:"inc",obj:i,key:r,value:n,insert:!1,pred:f});this.applyAtPath(t,h=>{s==="list"||s==="text"?h.edits.push({action:"update",index:r,opId:c,value:{value:u,datatype:"counter"}}):h.props[r]={[c]:{value:u,datatype:"counter"}}})}};function ih(e,t){return e instanceof ah?[e.opIds[t]]:e instanceof sh?e.elems[t].pred:e[lc]?e[lc][t]?Object.keys(e[lc][t]):[]:[]}function ep(e,t,r=!1){if(r){if(t===0)return"_head";t-=1}if(e[qC])return e[qC][t];if(e.getElemId)return e.getElemId(t);throw new RangeError(`Cannot find elemId at list index ${t}`)}KC.exports={Context:uv}});var YC=ce((tX,GC)=>{var{OBJECT_ID:_L,CONFLICTS:hi}=Eu(),ov=class{constructor(){this.observers={}}patchCallback(t,r,n,i,a){this._objectUpdate(t.diffs,r,n,i,a)}_objectUpdate(t,r,n,i,a){if(t.objectId){if(this.observers[t.objectId])for(let s of this.observers[t.objectId])s(t,r,n,i,a);if(t.type==="map"&&t.props)for(let s of Object.keys(t.props))for(let u of Object.keys(t.props[s]))this._objectUpdate(t.props[s][u],r&&r[hi]&&r[hi][s]&&r[hi][s][u],n&&n[hi]&&n[hi][s]&&n[hi][s][u],i,a);else if(t.type==="table"&&t.props)for(let s of Object.keys(t.props))for(let u of Object.keys(t.props[s]))this._objectUpdate(t.props[s][u],r&&r.byId(s),n&&n.byId(s),i,a);else if(t.type==="list"&&t.edits){let s=0;for(let u of t.edits)u.action==="insert"?(s-=1,this._objectUpdate(u.value,void 0,n&&n[hi]&&n[hi][u.index]&&n[hi][u.index][u.elemId],i,a)):u.action==="multi-insert"?s-=u.values.length:u.action==="update"?this._objectUpdate(u.value,r&&r[hi]&&r[hi][u.index+s]&&r[hi][u.index+s][u.opId],n&&n[hi]&&n[hi][u.index]&&n[hi][u.index][u.opId],i,a):u.action==="remove"&&(s+=u.count)}else if(t.type==="text"&&t.edits){let s=0;for(let u of t.edits)u.action==="insert"?(s-=1,this._objectUpdate(u.value,void 0,n&&n.get(u.index),i,a)):u.action==="multi-insert"?s-=u.values.length:u.action==="update"?this._objectUpdate(u.value,r&&r.get(u.index+s),n&&n.get(u.index),i,a):u.action==="remove"&&(s+=u.count)}}}observe(t,r){let n=t[_L];if(!n)throw new TypeError("The observed object must be part of an Automerge document");this.observers[n]||(this.observers[n]=[]),this.observers[n].push(r)}};GC.exports={Observable:ov}});var nD=ce((rX,rD)=>{var{OPTIONS:Ca,CACHE:_l,STATE:Da,OBJECT_ID:Dl,CONFLICTS:Cl,CHANGE:WC,ELEM_IDS:CL}=Eu(),{isObject:fv,copyObject:cv}=Us(),DL=z0(),{interpretPatch:FL,cloneRootObject:SL}=Qm(),{rootObjectProxy:IL}=HC(),{Context:XC}=zC(),{Text:hv}=Qf(),{Table:JC}=th(),{Counter:BL}=W0(),{Float64:$L,Int:RL,Uint:xL}=nv(),{Observable:PL}=YC();function ZC(e){if(typeof e!="string")throw new TypeError(`Unsupported type of actorId: ${typeof e}`);if(!/^[0-9a-f]+$/.test(e))throw new RangeError("actorId must consist only of lowercase hex digits");if(e.length%2!==0)throw new RangeError("actorId must consist of an even number of digits")}function tp(e,t,r){let n=t._root;if(n||(n=SL(e[_l]._root),t._root=n),Object.defineProperty(n,Ca,{value:e[Ca]}),Object.defineProperty(n,_l,{value:t}),Object.defineProperty(n,Da,{value:r}),e[Ca].freeze)for(let i of Object.keys(t))t[i]instanceof JC?t[i]._freeze():t[i]instanceof hv?(Object.freeze(t[i].elems),Object.freeze(t[i])):(Object.freeze(t[i]),Object.freeze(t[i][Cl]));for(let i of Object.keys(e[_l]))t[i]||(t[i]=e[_l][i]);return e[Ca].freeze&&Object.freeze(t),n}function QC(e,t,r){let n=Fl(e);if(!n)throw new Error("Actor ID must be initialized with setActorId() before making a change");let i=cv(e[Da]);i.seq+=1;let a={actor:n,seq:i.seq,startOp:i.maxOp+1,deps:i.deps,time:r&&typeof r.time=="number"?r.time:Math.round(new Date().getTime()/1e3),message:r&&typeof r.message=="string"?r.message:"",ops:t.ops};if(e[Ca].backend){let[s,u,c]=e[Ca].backend.applyLocalChange(i.backendState,a);i.backendState=s,i.lastLocalChange=c;let f=lv(e,u,i,!0),h=r&&r.patchCallback||e[Ca].patchCallback;return h&&h(u,e,f,!0,[c]),[f,a]}else{let s={actor:n,seq:a.seq,before:e};return i.requests=i.requests.concat([s]),i.maxOp=i.maxOp+OL(a.ops),i.deps=[],[tp(e,t?t.updated:{},i),a]}}function OL(e){let t=0;for(let r of e)r.action==="set"&&r.values?t+=r.values.length:t+=1;return t}function TL(e){return e[Da]&&e[Da].lastLocalChange?e[Da].lastLocalChange:null}function lv(e,t,r,n){let i=Fl(e),a={};if(FL(t.diffs,e,a),n){if(!t.clock)throw new RangeError("patch is missing clock field");t.clock[i]&&t.clock[i]>r.seq&&(r.seq=t.clock[i]),r.clock=t.clock,r.deps=t.deps,r.maxOp=Math.max(r.maxOp,t.maxOp)}return tp(e,a,r)}function eD(e){if(typeof e=="string")e={actorId:e};else if(typeof e>"u")e={};else if(!fv(e))throw new TypeError(`Unsupported value for init() options: ${e}`);if(e.deferActorId||(e.actorId===void 0&&(e.actorId=DL()),ZC(e.actorId)),e.observable){let i=e.patchCallback,a=e.observable;e.patchCallback=(s,u,c,f,h)=>{i&&i(s,u,c,f,h),a.patchCallback(s,u,c,f,h)}}let t={},r={_root:t},n={seq:0,maxOp:0,requests:[],clock:{},deps:[]};return e.backend&&(n.backendState=e.backend.init(),n.lastLocalChange=null),Object.defineProperty(t,Dl,{value:"_root"}),Object.defineProperty(t,Ca,{value:Object.freeze(e)}),Object.defineProperty(t,Cl,{value:Object.freeze({})}),Object.defineProperty(t,_l,{value:Object.freeze(r)}),Object.defineProperty(t,Da,{value:Object.freeze(n)}),Object.freeze(t)}function NL(e,t){return tD(eD(t),"Initialization",r=>Object.assign(r,e))}function tD(e,t,r){if(e[Dl]!=="_root")throw new TypeError("The first argument to Automerge.change must be the document root");if(e[WC])throw new TypeError("Calls to Automerge.change cannot be nested");if(typeof t=="function"&&r===void 0&&([t,r]=[r,t]),typeof t=="string"&&(t={message:t}),t!==void 0&&!fv(t))throw new TypeError("Unsupported type of options");let n=Fl(e);if(!n)throw new Error("Actor ID must be initialized with setActorId() before making a change");let i=new XC(e,n);return r(IL(i)),Object.keys(i.updated).length===0?[e,null]:QC(e,i,t)}function kL(e,t){if(e[Dl]!=="_root")throw new TypeError("The first argument to Automerge.emptyChange must be the document root");if(typeof t=="string"&&(t={message:t}),t!==void 0&&!fv(t))throw new TypeError("Unsupported type of options");let r=Fl(e);if(!r)throw new Error("Actor ID must be initialized with setActorId() before making a change");return QC(e,new XC(e,r),t)}function LL(e,t,r=void 0){if(e[Dl]!=="_root")throw new TypeError("The first argument to Frontend.applyPatch must be the document root");let n=cv(e[Da]);if(e[Ca].backend){if(!r)throw new RangeError("applyPatch must be called with the updated backend state");return n.backendState=r,lv(e,t,n,!0)}let i;if(n.requests.length>0)if(i=n.requests[0].before,t.actor===Fl(e)){if(n.requests[0].seq!==t.seq)throw new RangeError(`Mismatched sequence number: patch ${t.seq} does not match next request ${n.requests[0].seq}`);n.requests=n.requests.slice(1)}else n.requests=n.requests.slice();else i=e,n.requests=[];let a=lv(i,t,n,!0);return n.requests.length===0?a:(n.requests[0]=cv(n.requests[0]),n.requests[0].before=a,tp(e,{},n))}function UL(e){return e[Dl]}function jL(e,t){if(e[WC])throw new TypeError("Cannot use getObjectById in a change callback");return e[_l][t]}function Fl(e){return e[Da].actorId||e[Ca].actorId}function HL(e,t){ZC(t);let r=Object.assign({},e[Da],{actorId:t});return tp(e,{},r)}function ML(e,t){if(e[Cl]&&e[Cl][t]&&Object.keys(e[Cl][t]).length>1)return e[Cl][t]}function qL(e,t=null,r="first"){if(e[Dl]!=="_root"){let n=Array.isArray(e)?". Note: Automerge.applyChanges now returns an array.":"";throw t?new TypeError(`The ${r} argument to Automerge.${t} must be the document root${n}`):new TypeError(`Argument is not an Automerge document root${n}`)}return e[Da].backendState}function VL(e){return e instanceof hv?e.elems.map(t=>t.elemId):e[CL]}rD.exports={init:eD,from:NL,change:tD,emptyChange:kL,applyPatch:LL,getObjectId:UL,getObjectById:jL,getActorId:Fl,setActorId:HL,getConflicts:ML,getLastLocalChange:TL,getBackendState:qL,getElementIds:VL,Text:hv,Table:JC,Counter:BL,Observable:PL,Float64:$L,Int:RL,Uint:xL}});var CD=ce((nX,Bl)=>{"use strict";function Il(e){let t=e.length;for(;--t>=0;)e[t]=0}var KL=0,cD=1,zL=2,GL=3,YL=258,Ev=29,hh=256,oh=hh+1+Ev,Sl=30,Av=19,lD=2*oh+1,fc=15,dv=16,WL=7,yv=256,fD=16,hD=17,dD=18,vv=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),rp=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),XL=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),pD=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),JL=512,yu=new Array((oh+2)*2);Il(yu);var uh=new Array(Sl*2);Il(uh);var ch=new Array(JL);Il(ch);var lh=new Array(YL-GL+1);Il(lh);var bv=new Array(Ev);Il(bv);var np=new Array(Sl);Il(np);function pv(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}var gD,mD,vD;function gv(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}var wD=e=>e<256?ch[e]:ch[256+(e>>>7)],fh=(e,t)=>{e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255},xi=(e,t,r)=>{e.bi_valid>dv-r?(e.bi_buf|=t<<e.bi_valid&65535,fh(e,e.bi_buf),e.bi_buf=t>>dv-e.bi_valid,e.bi_valid+=r-dv):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)},Fa=(e,t,r)=>{xi(e,r[t*2],r[t*2+1])},ED=(e,t)=>{let r=0;do r|=e&1,e>>>=1,r<<=1;while(--t>0);return r>>>1},ZL=e=>{e.bi_valid===16?(fh(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},QL=(e,t)=>{let r=t.dyn_tree,n=t.max_code,i=t.stat_desc.static_tree,a=t.stat_desc.has_stree,s=t.stat_desc.extra_bits,u=t.stat_desc.extra_base,c=t.stat_desc.max_length,f,h,g,p,d,w,v=0;for(p=0;p<=fc;p++)e.bl_count[p]=0;for(r[e.heap[e.heap_max]*2+1]=0,f=e.heap_max+1;f<lD;f++)h=e.heap[f],p=r[r[h*2+1]*2+1]+1,p>c&&(p=c,v++),r[h*2+1]=p,!(h>n)&&(e.bl_count[p]++,d=0,h>=u&&(d=s[h-u]),w=r[h*2],e.opt_len+=w*(p+d),a&&(e.static_len+=w*(i[h*2+1]+d)));if(v!==0){do{for(p=c-1;e.bl_count[p]===0;)p--;e.bl_count[p]--,e.bl_count[p+1]+=2,e.bl_count[c]--,v-=2}while(v>0);for(p=c;p!==0;p--)for(h=e.bl_count[p];h!==0;)g=e.heap[--f],!(g>n)&&(r[g*2+1]!==p&&(e.opt_len+=(p-r[g*2+1])*r[g*2],r[g*2+1]=p),h--)}},AD=(e,t,r)=>{let n=new Array(fc+1),i=0,a,s;for(a=1;a<=fc;a++)i=i+r[a-1]<<1,n[a]=i;for(s=0;s<=t;s++){let u=e[s*2+1];u!==0&&(e[s*2]=ED(n[u]++,u))}},eU=()=>{let e,t,r,n,i,a=new Array(fc+1);for(r=0,n=0;n<Ev-1;n++)for(bv[n]=r,e=0;e<1<<vv[n];e++)lh[r++]=n;for(lh[r-1]=n,i=0,n=0;n<16;n++)for(np[n]=i,e=0;e<1<<rp[n];e++)ch[i++]=n;for(i>>=7;n<Sl;n++)for(np[n]=i<<7,e=0;e<1<<rp[n]-7;e++)ch[256+i++]=n;for(t=0;t<=fc;t++)a[t]=0;for(e=0;e<=143;)yu[e*2+1]=8,e++,a[8]++;for(;e<=255;)yu[e*2+1]=9,e++,a[9]++;for(;e<=279;)yu[e*2+1]=7,e++,a[7]++;for(;e<=287;)yu[e*2+1]=8,e++,a[8]++;for(AD(yu,oh+1,a),e=0;e<Sl;e++)uh[e*2+1]=5,uh[e*2]=ED(e,5);gD=new pv(yu,vv,hh+1,oh,fc),mD=new pv(uh,rp,0,Sl,fc),vD=new pv(new Array(0),XL,0,Av,WL)},yD=e=>{let t;for(t=0;t<oh;t++)e.dyn_ltree[t*2]=0;for(t=0;t<Sl;t++)e.dyn_dtree[t*2]=0;for(t=0;t<Av;t++)e.bl_tree[t*2]=0;e.dyn_ltree[yv*2]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},bD=e=>{e.bi_valid>8?fh(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},iD=(e,t,r,n)=>{let i=t*2,a=r*2;return e[i]<e[a]||e[i]===e[a]&&n[t]<=n[r]},mv=(e,t,r)=>{let n=e.heap[r],i=r<<1;for(;i<=e.heap_len&&(i<e.heap_len&&iD(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!iD(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n},sD=(e,t,r)=>{let n,i,a=0,s,u;if(e.sym_next!==0)do n=e.pending_buf[e.sym_buf+a++]&255,n+=(e.pending_buf[e.sym_buf+a++]&255)<<8,i=e.pending_buf[e.sym_buf+a++],n===0?Fa(e,i,t):(s=lh[i],Fa(e,s+hh+1,t),u=vv[s],u!==0&&(i-=bv[s],xi(e,i,u)),n--,s=wD(n),Fa(e,s,r),u=rp[s],u!==0&&(n-=np[s],xi(e,n,u)));while(a<e.sym_next);Fa(e,yv,t)},wv=(e,t)=>{let r=t.dyn_tree,n=t.stat_desc.static_tree,i=t.stat_desc.has_stree,a=t.stat_desc.elems,s,u,c=-1,f;for(e.heap_len=0,e.heap_max=lD,s=0;s<a;s++)r[s*2]!==0?(e.heap[++e.heap_len]=c=s,e.depth[s]=0):r[s*2+1]=0;for(;e.heap_len<2;)f=e.heap[++e.heap_len]=c<2?++c:0,r[f*2]=1,e.depth[f]=0,e.opt_len--,i&&(e.static_len-=n[f*2+1]);for(t.max_code=c,s=e.heap_len>>1;s>=1;s--)mv(e,r,s);f=a;do s=e.heap[1],e.heap[1]=e.heap[e.heap_len--],mv(e,r,1),u=e.heap[1],e.heap[--e.heap_max]=s,e.heap[--e.heap_max]=u,r[f*2]=r[s*2]+r[u*2],e.depth[f]=(e.depth[s]>=e.depth[u]?e.depth[s]:e.depth[u])+1,r[s*2+1]=r[u*2+1]=f,e.heap[1]=f++,mv(e,r,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],QL(e,t),AD(r,c,e.bl_count)},aD=(e,t,r)=>{let n,i=-1,a,s=t[0*2+1],u=0,c=7,f=4;for(s===0&&(c=138,f=3),t[(r+1)*2+1]=65535,n=0;n<=r;n++)a=s,s=t[(n+1)*2+1],!(++u<c&&a===s)&&(u<f?e.bl_tree[a*2]+=u:a!==0?(a!==i&&e.bl_tree[a*2]++,e.bl_tree[fD*2]++):u<=10?e.bl_tree[hD*2]++:e.bl_tree[dD*2]++,u=0,i=a,s===0?(c=138,f=3):a===s?(c=6,f=3):(c=7,f=4))},uD=(e,t,r)=>{let n,i=-1,a,s=t[0*2+1],u=0,c=7,f=4;for(s===0&&(c=138,f=3),n=0;n<=r;n++)if(a=s,s=t[(n+1)*2+1],!(++u<c&&a===s)){if(u<f)do Fa(e,a,e.bl_tree);while(--u!==0);else a!==0?(a!==i&&(Fa(e,a,e.bl_tree),u--),Fa(e,fD,e.bl_tree),xi(e,u-3,2)):u<=10?(Fa(e,hD,e.bl_tree),xi(e,u-3,3)):(Fa(e,dD,e.bl_tree),xi(e,u-11,7));u=0,i=a,s===0?(c=138,f=3):a===s?(c=6,f=3):(c=7,f=4)}},tU=e=>{let t;for(aD(e,e.dyn_ltree,e.l_desc.max_code),aD(e,e.dyn_dtree,e.d_desc.max_code),wv(e,e.bl_desc),t=Av-1;t>=3&&e.bl_tree[pD[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t},rU=(e,t,r,n)=>{let i;for(xi(e,t-257,5),xi(e,r-1,5),xi(e,n-4,4),i=0;i<n;i++)xi(e,e.bl_tree[pD[i]*2+1],3);uD(e,e.dyn_ltree,t-1),uD(e,e.dyn_dtree,r-1)},nU=e=>{let t=4093624447,r;for(r=0;r<=31;r++,t>>>=1)if(t&1&&e.dyn_ltree[r*2]!==0)return 0;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return 1;for(r=32;r<hh;r++)if(e.dyn_ltree[r*2]!==0)return 1;return 0},oD=!1,iU=e=>{oD||(eU(),oD=!0),e.l_desc=new gv(e.dyn_ltree,gD),e.d_desc=new gv(e.dyn_dtree,mD),e.bl_desc=new gv(e.bl_tree,vD),e.bi_buf=0,e.bi_valid=0,yD(e)},_D=(e,t,r,n)=>{xi(e,(KL<<1)+(n?1:0),3),bD(e),fh(e,r),fh(e,~r),r&&e.pending_buf.set(e.window.subarray(t,t+r),e.pending),e.pending+=r},sU=e=>{xi(e,cD<<1,3),Fa(e,yv,yu),ZL(e)},aU=(e,t,r,n)=>{let i,a,s=0;e.level>0?(e.strm.data_type===2&&(e.strm.data_type=nU(e)),wv(e,e.l_desc),wv(e,e.d_desc),s=tU(e),i=e.opt_len+3+7>>>3,a=e.static_len+3+7>>>3,a<=i&&(i=a)):i=a=r+5,r+4<=i&&t!==-1?_D(e,t,r,n):e.strategy===4||a===i?(xi(e,(cD<<1)+(n?1:0),3),sD(e,yu,uh)):(xi(e,(zL<<1)+(n?1:0),3),rU(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),sD(e,e.dyn_ltree,e.dyn_dtree)),yD(e),n&&bD(e)},uU=(e,t,r)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=r,t===0?e.dyn_ltree[r*2]++:(e.matches++,t--,e.dyn_ltree[(lh[r]+hh+1)*2]++,e.dyn_dtree[wD(t)*2]++),e.sym_next===e.sym_end);Bl.exports._tr_init=iU;Bl.exports._tr_stored_block=_D;Bl.exports._tr_flush_block=aU;Bl.exports._tr_tally=uU;Bl.exports._tr_align=sU});var _v=ce((iX,DD)=>{"use strict";var oU=(e,t,r,n)=>{let i=e&65535|0,a=e>>>16&65535|0,s=0;for(;r!==0;){s=r>2e3?2e3:r,r-=s;do i=i+t[n++]|0,a=a+i|0;while(--s);i%=65521,a%=65521}return i|a<<16|0};DD.exports=oU});var Cv=ce((sX,FD)=>{"use strict";var cU=()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=e&1?3988292384^e>>>1:e>>>1;t[r]=e}return t},lU=new Uint32Array(cU()),fU=(e,t,r,n)=>{let i=lU,a=n+r;e^=-1;for(let s=n;s<a;s++)e=e>>>8^i[(e^t[s])&255];return e^-1};FD.exports=fU});var ip=ce((aX,SD)=>{"use strict";SD.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}});var ro=ce((uX,ID)=>{"use strict";ID.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}});var LD=ce((oX,$a)=>{"use strict";var{_tr_init:hU,_tr_stored_block:Sv,_tr_flush_block:dU,_tr_tally:ao,_tr_align:pU}=CD(),xD=_v(),no=Cv(),gU=ip(),{Z_NO_FLUSH:uo,Z_PARTIAL_FLUSH:mU,Z_FULL_FLUSH:vU,Z_FINISH:ys,Z_BLOCK:BD,Z_OK:xn,Z_STREAM_END:$D,Z_STREAM_ERROR:Ia,Z_DATA_ERROR:wU,Z_BUF_ERROR:Dv,Z_DEFAULT_COMPRESSION:EU,Z_FILTERED:AU,Z_HUFFMAN_ONLY:sp,Z_RLE:yU,Z_FIXED:bU,Z_DEFAULT_STRATEGY:_U,Z_UNKNOWN:CU,Z_DEFLATED:ap}=ro(),DU=9,FU=15,SU=8,IU=29,BU=256,Iv=BU+1+IU,$U=30,RU=19,xU=2*Iv+1,PU=15,Tt=3,so=258,Ba=so+Tt+1,OU=32,Rl=42,Ov=57,Bv=69,$v=73,Rv=91,xv=103,hc=113,ph=666,di=1,Pl=2,pc=3,Ol=4,TU=3,dc=(e,t)=>(e.msg=gU[t],t),RD=e=>e*2-(e>4?9:0),io=e=>{let t=e.length;for(;--t>=0;)e[t]=0},NU=e=>{let t,r,n,i=e.w_size;t=e.hash_size,n=t;do r=e.head[--n],e.head[n]=r>=i?r-i:0;while(--t);t=i,n=t;do r=e.prev[--n],e.prev[n]=r>=i?r-i:0;while(--t)},kU=(e,t,r)=>(t<<e.hash_shift^r)&e.hash_mask,oo=kU,Qi=e=>{let t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),r!==0&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+r),e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,t.pending===0&&(t.pending_out=0))},es=(e,t)=>{dU(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Qi(e.strm)},zt=(e,t)=>{e.pending_buf[e.pending++]=t},dh=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255},Pv=(e,t,r,n)=>{let i=e.avail_in;return i>n&&(i=n),i===0?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),r),e.state.wrap===1?e.adler=xD(e.adler,t,i,r):e.state.wrap===2&&(e.adler=no(e.adler,t,i,r)),e.next_in+=i,e.total_in+=i,i)},PD=(e,t)=>{let r=e.max_chain_length,n=e.strstart,i,a,s=e.prev_length,u=e.nice_match,c=e.strstart>e.w_size-Ba?e.strstart-(e.w_size-Ba):0,f=e.window,h=e.w_mask,g=e.prev,p=e.strstart+so,d=f[n+s-1],w=f[n+s];e.prev_length>=e.good_match&&(r>>=2),u>e.lookahead&&(u=e.lookahead);do if(i=t,!(f[i+s]!==w||f[i+s-1]!==d||f[i]!==f[n]||f[++i]!==f[n+1])){n+=2,i++;do;while(f[++n]===f[++i]&&f[++n]===f[++i]&&f[++n]===f[++i]&&f[++n]===f[++i]&&f[++n]===f[++i]&&f[++n]===f[++i]&&f[++n]===f[++i]&&f[++n]===f[++i]&&n<p);if(a=so-(p-n),n=p-so,a>s){if(e.match_start=t,s=a,a>=u)break;d=f[n+s-1],w=f[n+s]}}while((t=g[t&h])>c&&--r!==0);return s<=e.lookahead?s:e.lookahead},xl=e=>{let t=e.w_size,r,n,i;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-Ba)&&(e.window.set(e.window.subarray(t,t+t-n),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),NU(e),n+=t),e.strm.avail_in===0)break;if(r=Pv(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=r,e.lookahead+e.insert>=Tt)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=oo(e,e.ins_h,e.window[i+1]);e.insert&&(e.ins_h=oo(e,e.ins_h,e.window[i+Tt-1]),e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<Tt)););}while(e.lookahead<Ba&&e.strm.avail_in!==0)},OD=(e,t)=>{let r=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,n,i,a,s=0,u=e.strm.avail_in;do{if(n=65535,a=e.bi_valid+42>>3,e.strm.avail_out<a||(a=e.strm.avail_out-a,i=e.strstart-e.block_start,n>i+e.strm.avail_in&&(n=i+e.strm.avail_in),n>a&&(n=a),n<r&&(n===0&&t!==ys||t===uo||n!==i+e.strm.avail_in)))break;s=t===ys&&n===i+e.strm.avail_in?1:0,Sv(e,0,0,s),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,Qi(e.strm),i&&(i>n&&(i=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+i),e.strm.next_out),e.strm.next_out+=i,e.strm.avail_out-=i,e.strm.total_out+=i,e.block_start+=i,n-=i),n&&(Pv(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(s===0);return u-=e.strm.avail_in,u&&(u>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=u&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-u,e.strm.next_in),e.strstart),e.strstart+=u,e.insert+=u>e.w_size-e.insert?e.w_size-e.insert:u),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),s?Ol:t!==uo&&t!==ys&&e.strm.avail_in===0&&e.strstart===e.block_start?Pl:(a=e.window_size-e.strstart,e.strm.avail_in>a&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,a+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),a>e.strm.avail_in&&(a=e.strm.avail_in),a&&(Pv(e.strm,e.window,e.strstart,a),e.strstart+=a,e.insert+=a>e.w_size-e.insert?e.w_size-e.insert:a),e.high_water<e.strstart&&(e.high_water=e.strstart),a=e.bi_valid+42>>3,a=e.pending_buf_size-a>65535?65535:e.pending_buf_size-a,r=a>e.w_size?e.w_size:a,i=e.strstart-e.block_start,(i>=r||(i||t===ys)&&t!==uo&&e.strm.avail_in===0&&i<=a)&&(n=i>a?a:i,s=t===ys&&e.strm.avail_in===0&&n===i?1:0,Sv(e,e.block_start,n,s),e.block_start+=n,Qi(e.strm)),s?pc:di)},Fv=(e,t)=>{let r,n;for(;;){if(e.lookahead<Ba){if(xl(e),e.lookahead<Ba&&t===uo)return di;if(e.lookahead===0)break}if(r=0,e.lookahead>=Tt&&(e.ins_h=oo(e,e.ins_h,e.window[e.strstart+Tt-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),r!==0&&e.strstart-r<=e.w_size-Ba&&(e.match_length=PD(e,r)),e.match_length>=Tt)if(n=ao(e,e.strstart-e.match_start,e.match_length-Tt),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=Tt){e.match_length--;do e.strstart++,e.ins_h=oo(e,e.ins_h,e.window[e.strstart+Tt-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=oo(e,e.ins_h,e.window[e.strstart+1]);else n=ao(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(es(e,!1),e.strm.avail_out===0))return di}return e.insert=e.strstart<Tt-1?e.strstart:Tt-1,t===ys?(es(e,!0),e.strm.avail_out===0?pc:Ol):e.sym_next&&(es(e,!1),e.strm.avail_out===0)?di:Pl},$l=(e,t)=>{let r,n,i;for(;;){if(e.lookahead<Ba){if(xl(e),e.lookahead<Ba&&t===uo)return di;if(e.lookahead===0)break}if(r=0,e.lookahead>=Tt&&(e.ins_h=oo(e,e.ins_h,e.window[e.strstart+Tt-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=Tt-1,r!==0&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-Ba&&(e.match_length=PD(e,r),e.match_length<=5&&(e.strategy===AU||e.match_length===Tt&&e.strstart-e.match_start>4096)&&(e.match_length=Tt-1)),e.prev_length>=Tt&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-Tt,n=ao(e,e.strstart-1-e.prev_match,e.prev_length-Tt),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=oo(e,e.ins_h,e.window[e.strstart+Tt-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=Tt-1,e.strstart++,n&&(es(e,!1),e.strm.avail_out===0))return di}else if(e.match_available){if(n=ao(e,0,e.window[e.strstart-1]),n&&es(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return di}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=ao(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<Tt-1?e.strstart:Tt-1,t===ys?(es(e,!0),e.strm.avail_out===0?pc:Ol):e.sym_next&&(es(e,!1),e.strm.avail_out===0)?di:Pl},LU=(e,t)=>{let r,n,i,a,s=e.window;for(;;){if(e.lookahead<=so){if(xl(e),e.lookahead<=so&&t===uo)return di;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=Tt&&e.strstart>0&&(i=e.strstart-1,n=s[i],n===s[++i]&&n===s[++i]&&n===s[++i])){a=e.strstart+so;do;while(n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&i<a);e.match_length=so-(a-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=Tt?(r=ao(e,1,e.match_length-Tt),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=ao(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(es(e,!1),e.strm.avail_out===0))return di}return e.insert=0,t===ys?(es(e,!0),e.strm.avail_out===0?pc:Ol):e.sym_next&&(es(e,!1),e.strm.avail_out===0)?di:Pl},UU=(e,t)=>{let r;for(;;){if(e.lookahead===0&&(xl(e),e.lookahead===0)){if(t===uo)return di;break}if(e.match_length=0,r=ao(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(es(e,!1),e.strm.avail_out===0))return di}return e.insert=0,t===ys?(es(e,!0),e.strm.avail_out===0?pc:Ol):e.sym_next&&(es(e,!1),e.strm.avail_out===0)?di:Pl};function Sa(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}var gh=[new Sa(0,0,0,0,OD),new Sa(4,4,8,4,Fv),new Sa(4,5,16,8,Fv),new Sa(4,6,32,32,Fv),new Sa(4,4,16,16,$l),new Sa(8,16,32,32,$l),new Sa(8,16,128,128,$l),new Sa(8,32,128,256,$l),new Sa(32,128,258,1024,$l),new Sa(32,258,258,4096,$l)],jU=e=>{e.window_size=2*e.w_size,io(e.head),e.max_lazy_match=gh[e.level].max_lazy,e.good_match=gh[e.level].good_length,e.nice_match=gh[e.level].nice_length,e.max_chain_length=gh[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=Tt-1,e.match_available=0,e.ins_h=0};function HU(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ap,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(xU*2),this.dyn_dtree=new Uint16Array((2*$U+1)*2),this.bl_tree=new Uint16Array((2*RU+1)*2),io(this.dyn_ltree),io(this.dyn_dtree),io(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(PU+1),this.heap=new Uint16Array(2*Iv+1),io(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*Iv+1),io(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var mh=e=>{if(!e)return 1;let t=e.state;return!t||t.strm!==e||t.status!==Rl&&t.status!==Ov&&t.status!==Bv&&t.status!==$v&&t.status!==Rv&&t.status!==xv&&t.status!==hc&&t.status!==ph?1:0},TD=e=>{if(mh(e))return dc(e,Ia);e.total_in=e.total_out=0,e.data_type=CU;let t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap===2?Ov:t.wrap?Rl:hc,e.adler=t.wrap===2?0:1,t.last_flush=-2,hU(t),xn},ND=e=>{let t=TD(e);return t===xn&&jU(e.state),t},MU=(e,t)=>mh(e)||e.state.wrap!==2?Ia:(e.state.gzhead=t,xn),kD=(e,t,r,n,i,a)=>{if(!e)return Ia;let s=1;if(t===EU&&(t=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),i<1||i>DU||r!==ap||n<8||n>15||t<0||t>9||a<0||a>bU||n===8&&s!==1)return dc(e,Ia);n===8&&(n=9);let u=new HU;return e.state=u,u.strm=e,u.status=Rl,u.wrap=s,u.gzhead=null,u.w_bits=n,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=i+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+Tt-1)/Tt),u.window=new Uint8Array(u.w_size*2),u.head=new Uint16Array(u.hash_size),u.prev=new Uint16Array(u.w_size),u.lit_bufsize=1<<i+6,u.pending_buf_size=u.lit_bufsize*4,u.pending_buf=new Uint8Array(u.pending_buf_size),u.sym_buf=u.lit_bufsize,u.sym_end=(u.lit_bufsize-1)*3,u.level=t,u.strategy=a,u.method=r,ND(e)},qU=(e,t)=>kD(e,t,ap,FU,SU,_U),VU=(e,t)=>{if(mh(e)||t>BD||t<0)return e?dc(e,Ia):Ia;let r=e.state;if(!e.output||e.avail_in!==0&&!e.input||r.status===ph&&t!==ys)return dc(e,e.avail_out===0?Dv:Ia);let n=r.last_flush;if(r.last_flush=t,r.pending!==0){if(Qi(e),e.avail_out===0)return r.last_flush=-1,xn}else if(e.avail_in===0&&RD(t)<=RD(n)&&t!==ys)return dc(e,Dv);if(r.status===ph&&e.avail_in!==0)return dc(e,Dv);if(r.status===Rl&&r.wrap===0&&(r.status=hc),r.status===Rl){let i=ap+(r.w_bits-8<<4)<<8,a=-1;if(r.strategy>=sp||r.level<2?a=0:r.level<6?a=1:r.level===6?a=2:a=3,i|=a<<6,r.strstart!==0&&(i|=OU),i+=31-i%31,dh(r,i),r.strstart!==0&&(dh(r,e.adler>>>16),dh(r,e.adler&65535)),e.adler=1,r.status=hc,Qi(e),r.pending!==0)return r.last_flush=-1,xn}if(r.status===Ov){if(e.adler=0,zt(r,31),zt(r,139),zt(r,8),r.gzhead)zt(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),zt(r,r.gzhead.time&255),zt(r,r.gzhead.time>>8&255),zt(r,r.gzhead.time>>16&255),zt(r,r.gzhead.time>>24&255),zt(r,r.level===9?2:r.strategy>=sp||r.level<2?4:0),zt(r,r.gzhead.os&255),r.gzhead.extra&&r.gzhead.extra.length&&(zt(r,r.gzhead.extra.length&255),zt(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=no(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=Bv;else if(zt(r,0),zt(r,0),zt(r,0),zt(r,0),zt(r,0),zt(r,r.level===9?2:r.strategy>=sp||r.level<2?4:0),zt(r,TU),r.status=hc,Qi(e),r.pending!==0)return r.last_flush=-1,xn}if(r.status===Bv){if(r.gzhead.extra){let i=r.pending,a=(r.gzhead.extra.length&65535)-r.gzindex;for(;r.pending+a>r.pending_buf_size;){let u=r.pending_buf_size-r.pending;if(r.pending_buf.set(r.gzhead.extra.subarray(r.gzindex,r.gzindex+u),r.pending),r.pending=r.pending_buf_size,r.gzhead.hcrc&&r.pending>i&&(e.adler=no(e.adler,r.pending_buf,r.pending-i,i)),r.gzindex+=u,Qi(e),r.pending!==0)return r.last_flush=-1,xn;i=0,a-=u}let s=new Uint8Array(r.gzhead.extra);r.pending_buf.set(s.subarray(r.gzindex,r.gzindex+a),r.pending),r.pending+=a,r.gzhead.hcrc&&r.pending>i&&(e.adler=no(e.adler,r.pending_buf,r.pending-i,i)),r.gzindex=0}r.status=$v}if(r.status===$v){if(r.gzhead.name){let i=r.pending,a;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>i&&(e.adler=no(e.adler,r.pending_buf,r.pending-i,i)),Qi(e),r.pending!==0)return r.last_flush=-1,xn;i=0}r.gzindex<r.gzhead.name.length?a=r.gzhead.name.charCodeAt(r.gzindex++)&255:a=0,zt(r,a)}while(a!==0);r.gzhead.hcrc&&r.pending>i&&(e.adler=no(e.adler,r.pending_buf,r.pending-i,i)),r.gzindex=0}r.status=Rv}if(r.status===Rv){if(r.gzhead.comment){let i=r.pending,a;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>i&&(e.adler=no(e.adler,r.pending_buf,r.pending-i,i)),Qi(e),r.pending!==0)return r.last_flush=-1,xn;i=0}r.gzindex<r.gzhead.comment.length?a=r.gzhead.comment.charCodeAt(r.gzindex++)&255:a=0,zt(r,a)}while(a!==0);r.gzhead.hcrc&&r.pending>i&&(e.adler=no(e.adler,r.pending_buf,r.pending-i,i))}r.status=xv}if(r.status===xv){if(r.gzhead.hcrc){if(r.pending+2>r.pending_buf_size&&(Qi(e),r.pending!==0))return r.last_flush=-1,xn;zt(r,e.adler&255),zt(r,e.adler>>8&255),e.adler=0}if(r.status=hc,Qi(e),r.pending!==0)return r.last_flush=-1,xn}if(e.avail_in!==0||r.lookahead!==0||t!==uo&&r.status!==ph){let i=r.level===0?OD(r,t):r.strategy===sp?UU(r,t):r.strategy===yU?LU(r,t):gh[r.level].func(r,t);if((i===pc||i===Ol)&&(r.status=ph),i===di||i===pc)return e.avail_out===0&&(r.last_flush=-1),xn;if(i===Pl&&(t===mU?pU(r):t!==BD&&(Sv(r,0,0,!1),t===vU&&(io(r.head),r.lookahead===0&&(r.strstart=0,r.block_start=0,r.insert=0))),Qi(e),e.avail_out===0))return r.last_flush=-1,xn}return t!==ys?xn:r.wrap<=0?$D:(r.wrap===2?(zt(r,e.adler&255),zt(r,e.adler>>8&255),zt(r,e.adler>>16&255),zt(r,e.adler>>24&255),zt(r,e.total_in&255),zt(r,e.total_in>>8&255),zt(r,e.total_in>>16&255),zt(r,e.total_in>>24&255)):(dh(r,e.adler>>>16),dh(r,e.adler&65535)),Qi(e),r.wrap>0&&(r.wrap=-r.wrap),r.pending!==0?xn:$D)},KU=e=>{if(mh(e))return Ia;let t=e.state.status;return e.state=null,t===hc?dc(e,wU):xn},zU=(e,t)=>{let r=t.length;if(mh(e))return Ia;let n=e.state,i=n.wrap;if(i===2||i===1&&n.status!==Rl||n.lookahead)return Ia;if(i===1&&(e.adler=xD(e.adler,t,r,0)),n.wrap=0,r>=n.w_size){i===0&&(io(n.head),n.strstart=0,n.block_start=0,n.insert=0);let c=new Uint8Array(n.w_size);c.set(t.subarray(r-n.w_size,r),0),t=c,r=n.w_size}let a=e.avail_in,s=e.next_in,u=e.input;for(e.avail_in=r,e.next_in=0,e.input=t,xl(n);n.lookahead>=Tt;){let c=n.strstart,f=n.lookahead-(Tt-1);do n.ins_h=oo(n,n.ins_h,n.window[c+Tt-1]),n.prev[c&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=c,c++;while(--f);n.strstart=c,n.lookahead=Tt-1,xl(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=Tt-1,n.match_available=0,e.next_in=s,e.input=u,e.avail_in=a,n.wrap=i,xn};$a.exports.deflateInit=qU;$a.exports.deflateInit2=kD;$a.exports.deflateReset=ND;$a.exports.deflateResetKeep=TD;$a.exports.deflateSetHeader=MU;$a.exports.deflate=VU;$a.exports.deflateEnd=KU;$a.exports.deflateSetDictionary=zU;$a.exports.deflateInfo="pako deflate (from Nodeca project)"});var Nv=ce((cX,Tv)=>{"use strict";var GU=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);Tv.exports.assign=function(e){let t=Array.prototype.slice.call(arguments,1);for(;t.length;){let r=t.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(let n in r)GU(r,n)&&(e[n]=r[n])}}return e};Tv.exports.flattenChunks=e=>{let t=0;for(let n=0,i=e.length;n<i;n++)t+=e[n].length;let r=new Uint8Array(t);for(let n=0,i=0,a=e.length;n<a;n++){let s=e[n];r.set(s,i),i+=s.length}return r}});var kv=ce((lX,up)=>{"use strict";var UD=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{UD=!1}var vh=new Uint8Array(256);for(let e=0;e<256;e++)vh[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;vh[254]=vh[254]=1;up.exports.string2buf=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,r,n,i,a,s=e.length,u=0;for(i=0;i<s;i++)r=e.charCodeAt(i),(r&64512)===55296&&i+1<s&&(n=e.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),u+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(u),a=0,i=0;a<u;i++)r=e.charCodeAt(i),(r&64512)===55296&&i+1<s&&(n=e.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?t[a++]=r:r<2048?(t[a++]=192|r>>>6,t[a++]=128|r&63):r<65536?(t[a++]=224|r>>>12,t[a++]=128|r>>>6&63,t[a++]=128|r&63):(t[a++]=240|r>>>18,t[a++]=128|r>>>12&63,t[a++]=128|r>>>6&63,t[a++]=128|r&63);return t};var YU=(e,t)=>{if(t<65534&&e.subarray&&UD)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r};up.exports.buf2string=(e,t)=>{let r=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let n,i,a=new Array(r*2);for(i=0,n=0;n<r;){let s=e[n++];if(s<128){a[i++]=s;continue}let u=vh[s];if(u>4){a[i++]=65533,n+=u-1;continue}for(s&=u===2?31:u===3?15:7;u>1&&n<r;)s=s<<6|e[n++]&63,u--;if(u>1){a[i++]=65533;continue}s<65536?a[i++]=s:(s-=65536,a[i++]=55296|s>>10&1023,a[i++]=56320|s&1023)}return YU(a,i)};up.exports.utf8border=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let r=t-1;for(;r>=0&&(e[r]&192)===128;)r--;return r<0||r===0?t:r+vh[e[r]]>t?r:t}});var Lv=ce((fX,jD)=>{"use strict";function WU(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}jD.exports=WU});var VD=ce((hX,Tl)=>{"use strict";var wh=LD(),HD=Nv(),MD=kv(),Uv=ip(),XU=Lv(),qD=Object.prototype.toString,{Z_NO_FLUSH:JU,Z_SYNC_FLUSH:ZU,Z_FULL_FLUSH:QU,Z_FINISH:ej,Z_OK:op,Z_STREAM_END:tj,Z_DEFAULT_COMPRESSION:rj,Z_DEFAULT_STRATEGY:nj,Z_DEFLATED:ij}=ro();function Eh(e){this.options=HD.assign({level:rj,method:ij,chunkSize:16384,windowBits:15,memLevel:8,strategy:nj},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new XU,this.strm.avail_out=0;let r=wh.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==op)throw new Error(Uv[r]);if(t.header&&wh.deflateSetHeader(this.strm,t.header),t.dictionary){let n;if(typeof t.dictionary=="string"?n=MD.string2buf(t.dictionary):qD.call(t.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(t.dictionary):n=t.dictionary,r=wh.deflateSetDictionary(this.strm,n),r!==op)throw new Error(Uv[r]);this._dict_set=!0}}Eh.prototype.push=function(e,t){let r=this.strm,n=this.options.chunkSize,i,a;if(this.ended)return!1;for(t===~~t?a=t:a=t===!0?ej:JU,typeof e=="string"?r.input=MD.string2buf(e):qD.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){if(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),(a===ZU||a===QU)&&r.avail_out<=6){this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;continue}if(i=wh.deflate(r,a),i===tj)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),i=wh.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===op;if(r.avail_out===0){this.onData(r.output);continue}if(a>0&&r.next_out>0){this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;continue}if(r.avail_in===0)break}return!0};Eh.prototype.onData=function(e){this.chunks.push(e)};Eh.prototype.onEnd=function(e){e===op&&(this.result=HD.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function jv(e,t){let r=new Eh(t);if(r.push(e,!0),r.err)throw r.msg||Uv[r.err];return r.result}function sj(e,t){return t=t||{},t.raw=!0,jv(e,t)}function aj(e,t){return t=t||{},t.gzip=!0,jv(e,t)}Tl.exports.Deflate=Eh;Tl.exports.deflate=jv;Tl.exports.deflateRaw=sj;Tl.exports.gzip=aj;Tl.exports.constants=ro()});var zD=ce((dX,KD)=>{"use strict";KD.exports=function(t,r){let n,i,a,s,u,c,f,h,g,p,d,w,v,b,m,y,D,C,F,U,k,S,B,T,P=t.state;n=t.next_in,B=t.input,i=n+(t.avail_in-5),a=t.next_out,T=t.output,s=a-(r-t.avail_out),u=a+(t.avail_out-257),c=P.dmax,f=P.wsize,h=P.whave,g=P.wnext,p=P.window,d=P.hold,w=P.bits,v=P.lencode,b=P.distcode,m=(1<<P.lenbits)-1,y=(1<<P.distbits)-1;e:do{w<15&&(d+=B[n++]<<w,w+=8,d+=B[n++]<<w,w+=8),D=v[d&m];t:for(;;){if(C=D>>>24,d>>>=C,w-=C,C=D>>>16&255,C===0)T[a++]=D&65535;else if(C&16){F=D&65535,C&=15,C&&(w<C&&(d+=B[n++]<<w,w+=8),F+=d&(1<<C)-1,d>>>=C,w-=C),w<15&&(d+=B[n++]<<w,w+=8,d+=B[n++]<<w,w+=8),D=b[d&y];r:for(;;){if(C=D>>>24,d>>>=C,w-=C,C=D>>>16&255,C&16){if(U=D&65535,C&=15,w<C&&(d+=B[n++]<<w,w+=8,w<C&&(d+=B[n++]<<w,w+=8)),U+=d&(1<<C)-1,U>c){t.msg="invalid distance too far back",P.mode=16209;break e}if(d>>>=C,w-=C,C=a-s,U>C){if(C=U-C,C>h&&P.sane){t.msg="invalid distance too far back",P.mode=16209;break e}if(k=0,S=p,g===0){if(k+=f-C,C<F){F-=C;do T[a++]=p[k++];while(--C);k=a-U,S=T}}else if(g<C){if(k+=f+g-C,C-=g,C<F){F-=C;do T[a++]=p[k++];while(--C);if(k=0,g<F){C=g,F-=C;do T[a++]=p[k++];while(--C);k=a-U,S=T}}}else if(k+=g-C,C<F){F-=C;do T[a++]=p[k++];while(--C);k=a-U,S=T}for(;F>2;)T[a++]=S[k++],T[a++]=S[k++],T[a++]=S[k++],F-=3;F&&(T[a++]=S[k++],F>1&&(T[a++]=S[k++]))}else{k=a-U;do T[a++]=T[k++],T[a++]=T[k++],T[a++]=T[k++],F-=3;while(F>2);F&&(T[a++]=T[k++],F>1&&(T[a++]=T[k++]))}}else if(C&64){t.msg="invalid distance code",P.mode=16209;break e}else{D=b[(D&65535)+(d&(1<<C)-1)];continue r}break}}else if(C&64)if(C&32){P.mode=16191;break e}else{t.msg="invalid literal/length code",P.mode=16209;break e}else{D=v[(D&65535)+(d&(1<<C)-1)];continue t}break}}while(n<i&&a<u);F=w>>3,n-=F,w-=F<<3,d&=(1<<w)-1,t.next_in=n,t.next_out=a,t.avail_in=n<i?5+(i-n):5-(n-i),t.avail_out=a<u?257+(u-a):257-(a-u),P.hold=d,P.bits=w}});var YD=ce((pX,GD)=>{"use strict";var uj=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),oj=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),cj=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),lj=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),fj=(e,t,r,n,i,a,s,u)=>{let c=u.bits,f=0,h=0,g=0,p=0,d=0,w=0,v=0,b=0,m=0,y=0,D,C,F,U,k,S=null,B,T=new Uint16Array(16),P=new Uint16Array(16),j=null,Y,M,z;for(f=0;f<=15;f++)T[f]=0;for(h=0;h<n;h++)T[t[r+h]]++;for(d=c,p=15;p>=1&&T[p]===0;p--);if(d>p&&(d=p),p===0)return i[a++]=1<<24|64<<16|0,i[a++]=1<<24|64<<16|0,u.bits=1,0;for(g=1;g<p&&T[g]===0;g++);for(d<g&&(d=g),b=1,f=1;f<=15;f++)if(b<<=1,b-=T[f],b<0)return-1;if(b>0&&(e===0||p!==1))return-1;for(P[1]=0,f=1;f<15;f++)P[f+1]=P[f]+T[f];for(h=0;h<n;h++)t[r+h]!==0&&(s[P[t[r+h]]++]=h);if(e===0?(S=j=s,B=20):e===1?(S=uj,j=oj,B=257):(S=cj,j=lj,B=0),y=0,h=0,f=g,k=a,w=d,v=0,F=-1,m=1<<d,U=m-1,e===1&&m>852||e===2&&m>592)return 1;for(;;){Y=f-v,s[h]+1<B?(M=0,z=s[h]):s[h]>=B?(M=j[s[h]-B],z=S[s[h]-B]):(M=96,z=0),D=1<<f-v,C=1<<w,g=C;do C-=D,i[k+(y>>v)+C]=Y<<24|M<<16|z|0;while(C!==0);for(D=1<<f-1;y&D;)D>>=1;if(D!==0?(y&=D-1,y+=D):y=0,h++,--T[f]===0){if(f===p)break;f=t[r+s[h]]}if(f>d&&(y&U)!==F){for(v===0&&(v=d),k+=g,w=f-v,b=1<<w;w+v<p&&(b-=T[w+v],!(b<=0));)w++,b<<=1;if(m+=1<<w,e===1&&m>852||e===2&&m>592)return 1;F=y&U,i[F]=d<<24|w<<16|k-a|0}}return y!==0&&(i[k+y]=f-v<<24|64<<16|0),u.bits=d,0};GD.exports=fj});var B4=ce((gX,js)=>{"use strict";var zv=_v(),Ra=Cv(),hj=zD(),Ah=YD(),dj=0,A4=1,y4=2,{Z_FINISH:WD,Z_BLOCK:pj,Z_TREES:cp,Z_OK:gc,Z_STREAM_END:gj,Z_NEED_DICT:mj,Z_STREAM_ERROR:bs,Z_DATA_ERROR:b4,Z_MEM_ERROR:Gv,Z_BUF_ERROR:vj,Z_DEFLATED:XD}=ro(),dp=16180,JD=16181,ZD=16182,QD=16183,e4=16184,t4=16185,r4=16186,n4=16187,i4=16188,s4=16189,hp=16190,bu=16191,Hv=16192,a4=16193,Mv=16194,u4=16195,o4=16196,c4=16197,l4=16198,lp=16199,fp=16200,f4=16201,h4=16202,d4=16203,p4=16204,g4=16205,qv=16206,m4=16207,v4=16208,_r=16209,Yv=16210,_4=16211,wj=852,Ej=592,Aj=15,yj=Aj,w4=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function bj(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var mc=e=>{if(!e)return 1;let t=e.state;return!t||t.strm!==e||t.mode<dp||t.mode>_4?1:0},C4=e=>{if(mc(e))return bs;let t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=dp,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(wj),t.distcode=t.distdyn=new Int32Array(Ej),t.sane=1,t.back=-1,gc},D4=e=>{if(mc(e))return bs;let t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,C4(e)},F4=(e,t)=>{let r;if(mc(e))return bs;let n=e.state;return t<0?(r=0,t=-t):(r=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?bs:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,D4(e))},S4=(e,t)=>{if(!e)return bs;let r=new bj;e.state=r,r.strm=e,r.window=null,r.mode=dp;let n=F4(e,t);return n!==gc&&(e.state=null),n},_j=e=>S4(e,yj),E4=!0,Vv,Kv,Cj=e=>{if(E4){Vv=new Int32Array(512),Kv=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Ah(A4,e.lens,0,288,Vv,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Ah(y4,e.lens,0,32,Kv,0,e.work,{bits:5}),E4=!1}e.lencode=Vv,e.lenbits=9,e.distcode=Kv,e.distbits=5},I4=(e,t,r,n)=>{let i,a=e.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),n>=a.wsize?(a.window.set(t.subarray(r-a.wsize,r),0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>n&&(i=n),a.window.set(t.subarray(r-n,r-n+i),a.wnext),n-=i,n?(a.window.set(t.subarray(r-n,r),0),a.wnext=n,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0},Dj=(e,t)=>{let r,n,i,a,s,u,c,f,h,g,p,d,w,v,b=0,m,y,D,C,F,U,k,S,B=new Uint8Array(4),T,P,j=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(mc(e)||!e.output||!e.input&&e.avail_in!==0)return bs;r=e.state,r.mode===bu&&(r.mode=Hv),s=e.next_out,i=e.output,c=e.avail_out,a=e.next_in,n=e.input,u=e.avail_in,f=r.hold,h=r.bits,g=u,p=c,S=gc;e:for(;;)switch(r.mode){case dp:if(r.wrap===0){r.mode=Hv;break}for(;h<16;){if(u===0)break e;u--,f+=n[a++]<<h,h+=8}if(r.wrap&2&&f===35615){r.wbits===0&&(r.wbits=15),r.check=0,B[0]=f&255,B[1]=f>>>8&255,r.check=Ra(r.check,B,2,0),f=0,h=0,r.mode=JD;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((f&255)<<8)+(f>>8))%31){e.msg="incorrect header check",r.mode=_r;break}if((f&15)!==XD){e.msg="unknown compression method",r.mode=_r;break}if(f>>>=4,h-=4,k=(f&15)+8,r.wbits===0&&(r.wbits=k),k>15||k>r.wbits){e.msg="invalid window size",r.mode=_r;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=f&512?s4:bu,f=0,h=0;break;case JD:for(;h<16;){if(u===0)break e;u--,f+=n[a++]<<h,h+=8}if(r.flags=f,(r.flags&255)!==XD){e.msg="unknown compression method",r.mode=_r;break}if(r.flags&57344){e.msg="unknown header flags set",r.mode=_r;break}r.head&&(r.head.text=f>>8&1),r.flags&512&&r.wrap&4&&(B[0]=f&255,B[1]=f>>>8&255,r.check=Ra(r.check,B,2,0)),f=0,h=0,r.mode=ZD;case ZD:for(;h<32;){if(u===0)break e;u--,f+=n[a++]<<h,h+=8}r.head&&(r.head.time=f),r.flags&512&&r.wrap&4&&(B[0]=f&255,B[1]=f>>>8&255,B[2]=f>>>16&255,B[3]=f>>>24&255,r.check=Ra(r.check,B,4,0)),f=0,h=0,r.mode=QD;case QD:for(;h<16;){if(u===0)break e;u--,f+=n[a++]<<h,h+=8}r.head&&(r.head.xflags=f&255,r.head.os=f>>8),r.flags&512&&r.wrap&4&&(B[0]=f&255,B[1]=f>>>8&255,r.check=Ra(r.check,B,2,0)),f=0,h=0,r.mode=e4;case e4:if(r.flags&1024){for(;h<16;){if(u===0)break e;u--,f+=n[a++]<<h,h+=8}r.length=f,r.head&&(r.head.extra_len=f),r.flags&512&&r.wrap&4&&(B[0]=f&255,B[1]=f>>>8&255,r.check=Ra(r.check,B,2,0)),f=0,h=0}else r.head&&(r.head.extra=null);r.mode=t4;case t4:if(r.flags&1024&&(d=r.length,d>u&&(d=u),d&&(r.head&&(k=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(a,a+d),k)),r.flags&512&&r.wrap&4&&(r.check=Ra(r.check,n,d,a)),u-=d,a+=d,r.length-=d),r.length))break e;r.length=0,r.mode=r4;case r4:if(r.flags&2048){if(u===0)break e;d=0;do k=n[a+d++],r.head&&k&&r.length<65536&&(r.head.name+=String.fromCharCode(k));while(k&&d<u);if(r.flags&512&&r.wrap&4&&(r.check=Ra(r.check,n,d,a)),u-=d,a+=d,k)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=n4;case n4:if(r.flags&4096){if(u===0)break e;d=0;do k=n[a+d++],r.head&&k&&r.length<65536&&(r.head.comment+=String.fromCharCode(k));while(k&&d<u);if(r.flags&512&&r.wrap&4&&(r.check=Ra(r.check,n,d,a)),u-=d,a+=d,k)break e}else r.head&&(r.head.comment=null);r.mode=i4;case i4:if(r.flags&512){for(;h<16;){if(u===0)break e;u--,f+=n[a++]<<h,h+=8}if(r.wrap&4&&f!==(r.check&65535)){e.msg="header crc mismatch",r.mode=_r;break}f=0,h=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=bu;break;case s4:for(;h<32;){if(u===0)break e;u--,f+=n[a++]<<h,h+=8}e.adler=r.check=w4(f),f=0,h=0,r.mode=hp;case hp:if(r.havedict===0)return e.next_out=s,e.avail_out=c,e.next_in=a,e.avail_in=u,r.hold=f,r.bits=h,mj;e.adler=r.check=1,r.mode=bu;case bu:if(t===pj||t===cp)break e;case Hv:if(r.last){f>>>=h&7,h-=h&7,r.mode=qv;break}for(;h<3;){if(u===0)break e;u--,f+=n[a++]<<h,h+=8}switch(r.last=f&1,f>>>=1,h-=1,f&3){case 0:r.mode=a4;break;case 1:if(Cj(r),r.mode=lp,t===cp){f>>>=2,h-=2;break e}break;case 2:r.mode=o4;break;case 3:e.msg="invalid block type",r.mode=_r}f>>>=2,h-=2;break;case a4:for(f>>>=h&7,h-=h&7;h<32;){if(u===0)break e;u--,f+=n[a++]<<h,h+=8}if((f&65535)!==(f>>>16^65535)){e.msg="invalid stored block lengths",r.mode=_r;break}if(r.length=f&65535,f=0,h=0,r.mode=Mv,t===cp)break e;case Mv:r.mode=u4;case u4:if(d=r.length,d){if(d>u&&(d=u),d>c&&(d=c),d===0)break e;i.set(n.subarray(a,a+d),s),u-=d,a+=d,c-=d,s+=d,r.length-=d;break}r.mode=bu;break;case o4:for(;h<14;){if(u===0)break e;u--,f+=n[a++]<<h,h+=8}if(r.nlen=(f&31)+257,f>>>=5,h-=5,r.ndist=(f&31)+1,f>>>=5,h-=5,r.ncode=(f&15)+4,f>>>=4,h-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=_r;break}r.have=0,r.mode=c4;case c4:for(;r.have<r.ncode;){for(;h<3;){if(u===0)break e;u--,f+=n[a++]<<h,h+=8}r.lens[j[r.have++]]=f&7,f>>>=3,h-=3}for(;r.have<19;)r.lens[j[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,T={bits:r.lenbits},S=Ah(dj,r.lens,0,19,r.lencode,0,r.work,T),r.lenbits=T.bits,S){e.msg="invalid code lengths set",r.mode=_r;break}r.have=0,r.mode=l4;case l4:for(;r.have<r.nlen+r.ndist;){for(;b=r.lencode[f&(1<<r.lenbits)-1],m=b>>>24,y=b>>>16&255,D=b&65535,!(m<=h);){if(u===0)break e;u--,f+=n[a++]<<h,h+=8}if(D<16)f>>>=m,h-=m,r.lens[r.have++]=D;else{if(D===16){for(P=m+2;h<P;){if(u===0)break e;u--,f+=n[a++]<<h,h+=8}if(f>>>=m,h-=m,r.have===0){e.msg="invalid bit length repeat",r.mode=_r;break}k=r.lens[r.have-1],d=3+(f&3),f>>>=2,h-=2}else if(D===17){for(P=m+3;h<P;){if(u===0)break e;u--,f+=n[a++]<<h,h+=8}f>>>=m,h-=m,k=0,d=3+(f&7),f>>>=3,h-=3}else{for(P=m+7;h<P;){if(u===0)break e;u--,f+=n[a++]<<h,h+=8}f>>>=m,h-=m,k=0,d=11+(f&127),f>>>=7,h-=7}if(r.have+d>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=_r;break}for(;d--;)r.lens[r.have++]=k}}if(r.mode===_r)break;if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block",r.mode=_r;break}if(r.lenbits=9,T={bits:r.lenbits},S=Ah(A4,r.lens,0,r.nlen,r.lencode,0,r.work,T),r.lenbits=T.bits,S){e.msg="invalid literal/lengths set",r.mode=_r;break}if(r.distbits=6,r.distcode=r.distdyn,T={bits:r.distbits},S=Ah(y4,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,T),r.distbits=T.bits,S){e.msg="invalid distances set",r.mode=_r;break}if(r.mode=lp,t===cp)break e;case lp:r.mode=fp;case fp:if(u>=6&&c>=258){e.next_out=s,e.avail_out=c,e.next_in=a,e.avail_in=u,r.hold=f,r.bits=h,hj(e,p),s=e.next_out,i=e.output,c=e.avail_out,a=e.next_in,n=e.input,u=e.avail_in,f=r.hold,h=r.bits,r.mode===bu&&(r.back=-1);break}for(r.back=0;b=r.lencode[f&(1<<r.lenbits)-1],m=b>>>24,y=b>>>16&255,D=b&65535,!(m<=h);){if(u===0)break e;u--,f+=n[a++]<<h,h+=8}if(y&&!(y&240)){for(C=m,F=y,U=D;b=r.lencode[U+((f&(1<<C+F)-1)>>C)],m=b>>>24,y=b>>>16&255,D=b&65535,!(C+m<=h);){if(u===0)break e;u--,f+=n[a++]<<h,h+=8}f>>>=C,h-=C,r.back+=C}if(f>>>=m,h-=m,r.back+=m,r.length=D,y===0){r.mode=g4;break}if(y&32){r.back=-1,r.mode=bu;break}if(y&64){e.msg="invalid literal/length code",r.mode=_r;break}r.extra=y&15,r.mode=f4;case f4:if(r.extra){for(P=r.extra;h<P;){if(u===0)break e;u--,f+=n[a++]<<h,h+=8}r.length+=f&(1<<r.extra)-1,f>>>=r.extra,h-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=h4;case h4:for(;b=r.distcode[f&(1<<r.distbits)-1],m=b>>>24,y=b>>>16&255,D=b&65535,!(m<=h);){if(u===0)break e;u--,f+=n[a++]<<h,h+=8}if(!(y&240)){for(C=m,F=y,U=D;b=r.distcode[U+((f&(1<<C+F)-1)>>C)],m=b>>>24,y=b>>>16&255,D=b&65535,!(C+m<=h);){if(u===0)break e;u--,f+=n[a++]<<h,h+=8}f>>>=C,h-=C,r.back+=C}if(f>>>=m,h-=m,r.back+=m,y&64){e.msg="invalid distance code",r.mode=_r;break}r.offset=D,r.extra=y&15,r.mode=d4;case d4:if(r.extra){for(P=r.extra;h<P;){if(u===0)break e;u--,f+=n[a++]<<h,h+=8}r.offset+=f&(1<<r.extra)-1,f>>>=r.extra,h-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=_r;break}r.mode=p4;case p4:if(c===0)break e;if(d=p-c,r.offset>d){if(d=r.offset-d,d>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=_r;break}d>r.wnext?(d-=r.wnext,w=r.wsize-d):w=r.wnext-d,d>r.length&&(d=r.length),v=r.window}else v=i,w=s-r.offset,d=r.length;d>c&&(d=c),c-=d,r.length-=d;do i[s++]=v[w++];while(--d);r.length===0&&(r.mode=fp);break;case g4:if(c===0)break e;i[s++]=r.length,c--,r.mode=fp;break;case qv:if(r.wrap){for(;h<32;){if(u===0)break e;u--,f|=n[a++]<<h,h+=8}if(p-=c,e.total_out+=p,r.total+=p,r.wrap&4&&p&&(e.adler=r.check=r.flags?Ra(r.check,i,p,s-p):zv(r.check,i,p,s-p)),p=c,r.wrap&4&&(r.flags?f:w4(f))!==r.check){e.msg="incorrect data check",r.mode=_r;break}f=0,h=0}r.mode=m4;case m4:if(r.wrap&&r.flags){for(;h<32;){if(u===0)break e;u--,f+=n[a++]<<h,h+=8}if(r.wrap&4&&f!==(r.total&4294967295)){e.msg="incorrect length check",r.mode=_r;break}f=0,h=0}r.mode=v4;case v4:S=gj;break e;case _r:S=b4;break e;case Yv:return Gv;case _4:default:return bs}return e.next_out=s,e.avail_out=c,e.next_in=a,e.avail_in=u,r.hold=f,r.bits=h,(r.wsize||p!==e.avail_out&&r.mode<_r&&(r.mode<qv||t!==WD))&&I4(e,e.output,e.next_out,p-e.avail_out)?(r.mode=Yv,Gv):(g-=e.avail_in,p-=e.avail_out,e.total_in+=g,e.total_out+=p,r.total+=p,r.wrap&4&&p&&(e.adler=r.check=r.flags?Ra(r.check,i,p,e.next_out-p):zv(r.check,i,p,e.next_out-p)),e.data_type=r.bits+(r.last?64:0)+(r.mode===bu?128:0)+(r.mode===lp||r.mode===Mv?256:0),(g===0&&p===0||t===WD)&&S===gc&&(S=vj),S)},Fj=e=>{if(mc(e))return bs;let t=e.state;return t.window&&(t.window=null),e.state=null,gc},Sj=(e,t)=>{if(mc(e))return bs;let r=e.state;return r.wrap&2?(r.head=t,t.done=!1,gc):bs},Ij=(e,t)=>{let r=t.length,n,i,a;return mc(e)||(n=e.state,n.wrap!==0&&n.mode!==hp)?bs:n.mode===hp&&(i=1,i=zv(i,t,r,0),i!==n.check)?b4:(a=I4(e,t,r,r),a?(n.mode=Yv,Gv):(n.havedict=1,gc))};js.exports.inflateReset=D4;js.exports.inflateReset2=F4;js.exports.inflateResetKeep=C4;js.exports.inflateInit=_j;js.exports.inflateInit2=S4;js.exports.inflate=Dj;js.exports.inflateEnd=Fj;js.exports.inflateGetHeader=Sj;js.exports.inflateSetDictionary=Ij;js.exports.inflateInfo="pako inflate (from Nodeca project)"});var R4=ce((mX,$4)=>{"use strict";function Bj(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}$4.exports=Bj});var T4=ce((vX,Nl)=>{"use strict";var _u=B4(),P4=Nv(),Jv=kv(),Zv=ip(),$j=Lv(),Rj=R4(),O4=Object.prototype.toString,{Z_NO_FLUSH:xj,Z_FINISH:Pj,Z_OK:yh,Z_STREAM_END:Wv,Z_NEED_DICT:Xv,Z_STREAM_ERROR:Oj,Z_DATA_ERROR:x4,Z_MEM_ERROR:Tj}=ro();function bh(e){this.options=P4.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});let t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new $j,this.strm.avail_out=0;let r=_u.inflateInit2(this.strm,t.windowBits);if(r!==yh)throw new Error(Zv[r]);if(this.header=new Rj,_u.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=Jv.string2buf(t.dictionary):O4.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=_u.inflateSetDictionary(this.strm,t.dictionary),r!==yh)))throw new Error(Zv[r])}bh.prototype.push=function(e,t){let r=this.strm,n=this.options.chunkSize,i=this.options.dictionary,a,s,u;if(this.ended)return!1;for(t===~~t?s=t:s=t===!0?Pj:xj,O4.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),a=_u.inflate(r,s),a===Xv&&i&&(a=_u.inflateSetDictionary(r,i),a===yh?a=_u.inflate(r,s):a===x4&&(a=Xv));r.avail_in>0&&a===Wv&&r.state.wrap>0&&e[r.next_in]!==0;)_u.inflateReset(r),a=_u.inflate(r,s);switch(a){case Oj:case x4:case Xv:case Tj:return this.onEnd(a),this.ended=!0,!1}if(u=r.avail_out,r.next_out&&(r.avail_out===0||a===Wv))if(this.options.to==="string"){let c=Jv.utf8border(r.output,r.next_out),f=r.next_out-c,h=Jv.buf2string(r.output,c);r.next_out=f,r.avail_out=n-f,f&&r.output.set(r.output.subarray(c,c+f),0),this.onData(h)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(a===yh&&u===0)){if(a===Wv)return a=_u.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};bh.prototype.onData=function(e){this.chunks.push(e)};bh.prototype.onEnd=function(e){e===yh&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=P4.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function Qv(e,t){let r=new bh(t);if(r.push(e),r.err)throw r.msg||Zv[r.err];return r.result}function Nj(e,t){return t=t||{},t.raw=!0,Qv(e,t)}Nl.exports.Inflate=bh;Nl.exports.inflate=Qv;Nl.exports.inflateRaw=Nj;Nl.exports.ungzip=Qv;Nl.exports.constants=ro()});var N4=ce((wX,xa)=>{"use strict";var{Deflate:kj,deflate:Lj,deflateRaw:Uj,gzip:jj}=VD(),{Inflate:Hj,inflate:Mj,inflateRaw:qj,ungzip:Vj}=T4(),Kj=ro();xa.exports.Deflate=kj;xa.exports.deflate=Lj;xa.exports.deflateRaw=Uj;xa.exports.gzip=jj;xa.exports.Inflate=Hj;xa.exports.inflate=Mj;xa.exports.inflateRaw=qj;xa.exports.ungzip=Vj;xa.exports.constants=Kj});var i2=ce((EX,H4)=>{var zj=new TextEncoder,Gj=new TextDecoder("utf-8");function e2(e){return zj.encode(e)}function t2(e){return Gj.decode(e)}function L4(e){if(typeof e!="string")throw new TypeError("value is not a string");if(!/^([0-9a-f][0-9a-f])*$/.test(e))throw new RangeError("value is not hexadecimal");return e===""?new Uint8Array(0):new Uint8Array(e.match(/../g).map(t=>parseInt(t,16)))}var k4=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],U4=new Array(256);for(let e=0;e<256;e++)U4[e]=`${k4[e>>>4&15]}${k4[e&15]}`;function j4(e){let t="",r=e.byteLength;for(let n=0;n<r;n++)t+=U4[e[n]];return t}var _h=class{constructor(){this.buf=new Uint8Array(16),this.offset=0}get buffer(){return this.finish(),this.buf.subarray(0,this.offset)}grow(t=0){let r=this.buf.byteLength*4;for(;r<t;)r*=2;let n=new Uint8Array(r);return n.set(this.buf,0),this.buf=n,this}appendByte(t){this.offset>=this.buf.byteLength&&this.grow(),this.buf[this.offset]=t,this.offset+=1}appendUint32(t){if(!Number.isInteger(t))throw new RangeError("value is not an integer");if(t<0||t>4294967295)throw new RangeError("number out of range");let r=Math.max(1,Math.ceil((32-Math.clz32(t))/7));this.offset+r>this.buf.byteLength&&this.grow();for(let n=0;n<r;n++)this.buf[this.offset+n]=t&127|(n===r-1?0:128),t>>>=7;return this.offset+=r,r}appendInt32(t){if(!Number.isInteger(t))throw new RangeError("value is not an integer");if(t<-2147483648||t>2147483647)throw new RangeError("number out of range");let r=Math.ceil((33-Math.clz32(t>=0?t:-t-1))/7);this.offset+r>this.buf.byteLength&&this.grow();for(let n=0;n<r;n++)this.buf[this.offset+n]=t&127|(n===r-1?0:128),t>>=7;return this.offset+=r,r}appendUint53(t){if(!Number.isInteger(t))throw new RangeError("value is not an integer");if(t<0||t>Number.MAX_SAFE_INTEGER)throw new RangeError("number out of range");let r=Math.floor(t/4294967296),n=(t&4294967295)>>>0;return this.appendUint64(r,n)}appendInt53(t){if(!Number.isInteger(t))throw new RangeError("value is not an integer");if(t<Number.MIN_SAFE_INTEGER||t>Number.MAX_SAFE_INTEGER)throw new RangeError("number out of range");let r=Math.floor(t/4294967296),n=(t&4294967295)>>>0;return this.appendInt64(r,n)}appendUint64(t,r){if(!Number.isInteger(t)||!Number.isInteger(r))throw new RangeError("value is not an integer");if(t<0||t>4294967295||r<0||r>4294967295)throw new RangeError("number out of range");if(t===0)return this.appendUint32(r);let n=Math.ceil((64-Math.clz32(t))/7);this.offset+n>this.buf.byteLength&&this.grow();for(let i=0;i<4;i++)this.buf[this.offset+i]=r&127|128,r>>>=7;this.buf[this.offset+4]=r&15|(t&7)<<4|(n===5?0:128),t>>>=3;for(let i=5;i<n;i++)this.buf[this.offset+i]=t&127|(i===n-1?0:128),t>>>=7;return this.offset+=n,n}appendInt64(t,r){if(!Number.isInteger(t)||!Number.isInteger(r))throw new RangeError("value is not an integer");if(t<-2147483648||t>2147483647||r<-2147483648||r>4294967295)throw new RangeError("number out of range");if(r>>>=0,t===0&&r<=2147483647)return this.appendInt32(r);if(t===-1&&r>=2147483648)return this.appendInt32(r-4294967296);let n=Math.ceil((65-Math.clz32(t>=0?t:-t-1))/7);this.offset+n>this.buf.byteLength&&this.grow();for(let i=0;i<4;i++)this.buf[this.offset+i]=r&127|128,r>>>=7;this.buf[this.offset+4]=r&15|(t&7)<<4|(n===5?0:128),t>>=3;for(let i=5;i<n;i++)this.buf[this.offset+i]=t&127|(i===n-1?0:128),t>>=7;return this.offset+=n,n}appendRawBytes(t){return this.offset+t.byteLength>this.buf.byteLength&&this.grow(this.offset+t.byteLength),this.buf.set(t,this.offset),this.offset+=t.byteLength,t.byteLength}appendRawString(t){if(typeof t!="string")throw new TypeError("value is not a string");return this.appendRawBytes(e2(t))}appendPrefixedBytes(t){return this.appendUint53(t.byteLength),this.appendRawBytes(t),this}appendPrefixedString(t){if(typeof t!="string")throw new TypeError("value is not a string");return this.appendPrefixedBytes(e2(t)),this}appendHexString(t){return this.appendPrefixedBytes(L4(t)),this}finish(){}},Ch=class{constructor(t){if(!(t instanceof Uint8Array))throw new TypeError(`Not a byte array: ${t}`);this.buf=t,this.offset=0}get done(){return this.offset===this.buf.byteLength}reset(){this.offset=0}skip(t){if(this.offset+t>this.buf.byteLength)throw new RangeError("cannot skip beyond end of buffer");this.offset+=t}readByte(){return this.offset+=1,this.buf[this.offset-1]}readUint32(){let t=0,r=0;for(;this.offset<this.buf.byteLength;){let n=this.buf[this.offset];if(r===28&&n&240)throw new RangeError("number out of range");if(t=(t|(n&127)<<r)>>>0,r+=7,this.offset++,!(n&128))return t}throw new RangeError("buffer ended with incomplete number")}readInt32(){let t=0,r=0;for(;this.offset<this.buf.byteLength;){let n=this.buf[this.offset];if(r===28&&n&128||r===28&&!(n&64)&&n&56||r===28&&n&64&&(n&56)!==56)throw new RangeError("number out of range");if(t|=(n&127)<<r,r+=7,this.offset++,!(n&128))return!(n&64)||r>28?t:t|-1<<r}throw new RangeError("buffer ended with incomplete number")}readUint53(){let{low32:t,high32:r}=this.readUint64();if(r<0||r>2097151)throw new RangeError("number out of range");return r*4294967296+t}readInt53(){let{low32:t,high32:r}=this.readInt64();if(r<-2097152||r===-2097152&&t===0||r>2097151)throw new RangeError("number out of range");return r*4294967296+t}readUint64(){let t=0,r=0,n=0;for(;this.offset<this.buf.byteLength&&n<=28;){let i=this.buf[this.offset];if(t=(t|(i&127)<<n)>>>0,n===28&&(r=(i&112)>>>4),n+=7,this.offset++,!(i&128))return{high32:r,low32:t}}for(n=3;this.offset<this.buf.byteLength;){let i=this.buf[this.offset];if(n===31&&i&254)throw new RangeError("number out of range");if(r=(r|(i&127)<<n)>>>0,n+=7,this.offset++,!(i&128))return{high32:r,low32:t}}throw new RangeError("buffer ended with incomplete number")}readInt64(){let t=0,r=0,n=0;for(;this.offset<this.buf.byteLength&&n<=28;){let i=this.buf[this.offset];if(t=(t|(i&127)<<n)>>>0,n===28&&(r=(i&112)>>>4),n+=7,this.offset++,!(i&128))return i&64&&(n<32&&(t=(t|-1<<n)>>>0),r|=-1<<Math.max(n-32,0)),{high32:r,low32:t}}for(n=3;this.offset<this.buf.byteLength;){let i=this.buf[this.offset];if(n===31&&i!==0&&i!==127)throw new RangeError("number out of range");if(r|=(i&127)<<n,n+=7,this.offset++,!(i&128))return i&64&&n<32&&(r|=-1<<n),{high32:r,low32:t}}throw new RangeError("buffer ended with incomplete number")}readRawBytes(t){let r=this.offset;if(r+t>this.buf.byteLength)throw new RangeError("subarray exceeds buffer size");return this.offset+=t,this.buf.subarray(r,this.offset)}readRawString(t){return t2(this.readRawBytes(t))}readPrefixedBytes(){return this.readRawBytes(this.readUint53())}readPrefixedString(){return t2(this.readPrefixedBytes())}readHexString(){return j4(this.readPrefixedBytes())}},pp=class extends _h{constructor(t){super(),this.type=t,this.state="empty",this.lastValue=void 0,this.count=0,this.literal=[]}appendValue(t,r=1){this._appendValue(t,r)}_appendValue(t,r=1){r<=0||(this.state==="empty"?(this.state=t===null?"nulls":r===1?"loneValue":"repetition",this.lastValue=t,this.count=r):this.state==="loneValue"?t===null?(this.flush(),this.state="nulls",this.count=r):t===this.lastValue?(this.state="repetition",this.count=1+r):r>1?(this.flush(),this.state="repetition",this.count=r,this.lastValue=t):(this.state="literal",this.literal=[this.lastValue],this.lastValue=t):this.state==="repetition"?t===null?(this.flush(),this.state="nulls",this.count=r):t===this.lastValue?this.count+=r:r>1?(this.flush(),this.state="repetition",this.count=r,this.lastValue=t):(this.flush(),this.state="loneValue",this.lastValue=t):this.state==="literal"?t===null?(this.literal.push(this.lastValue),this.flush(),this.state="nulls",this.count=r):t===this.lastValue?(this.flush(),this.state="repetition",this.count=1+r):r>1?(this.literal.push(this.lastValue),this.flush(),this.state="repetition",this.count=r,this.lastValue=t):(this.literal.push(this.lastValue),this.lastValue=t):this.state==="nulls"&&(t===null?this.count+=r:r>1?(this.flush(),this.state="repetition",this.count=r,this.lastValue=t):(this.flush(),this.state="loneValue",this.lastValue=t)))}copyFrom(t,r={}){let{count:n,sumValues:i,sumShift:a}=r;if(!(t instanceof Dh)||t.type!==this.type)throw new TypeError("incompatible type of decoder");let s=typeof n=="number"?n:Number.MAX_SAFE_INTEGER,u=0,c=0;if(n&&s>0&&t.done)throw new RangeError(`cannot copy ${n} values`);if(s===0||t.done)return i?{nonNullValues:u,sum:c}:{nonNullValues:u};let f=t.readValue();if(f===null){let g=Math.min(t.count+1,s);if(s-=g,t.count-=g-1,this.appendValue(null,g),n&&s>0&&t.done)throw new RangeError(`cannot copy ${n} values`);if(s===0||t.done)return i?{nonNullValues:u,sum:c}:{nonNullValues:u};if(f=t.readValue(),f===null)throw new RangeError("null run must be followed by non-null value")}if(this.appendValue(f),s--,u++,i&&(c+=a?f>>>a:f),n&&s>0&&t.done)throw new RangeError(`cannot copy ${n} values`);if(s===0||t.done)return i?{nonNullValues:u,sum:c}:{nonNullValues:u};let h=t.count>0;for(;s>0&&!t.done;){h||t.readRecord();let g=Math.min(t.count,s);if(t.count-=g,t.state==="literal"){u+=g;for(let p=0;p<g;p++){if(t.done)throw new RangeError("incomplete literal");let d=t.readRawValue();if(d===t.lastValue)throw new RangeError("Repetition of values is not allowed in literal");t.lastValue=d,this._appendValue(d),i&&(c+=a?d>>>a:d)}}else if(t.state==="repetition"){u+=g,i&&(c+=g*(a?t.lastValue>>>a:t.lastValue));let p=t.lastValue;if(this._appendValue(p),g>1){if(this._appendValue(p),this.state!=="repetition")throw new RangeError(`Unexpected state ${this.state}`);this.count+=g-2}}else if(t.state==="nulls"){if(this._appendValue(null),this.state!=="nulls")throw new RangeError(`Unexpected state ${this.state}`);this.count+=g-1}h=!1,s-=g}if(n&&s>0&&t.done)throw new RangeError(`cannot copy ${n} values`);return i?{nonNullValues:u,sum:c}:{nonNullValues:u}}flush(){if(this.state==="loneValue")this.appendInt32(-1),this.appendRawValue(this.lastValue);else if(this.state==="repetition")this.appendInt53(this.count),this.appendRawValue(this.lastValue);else if(this.state==="literal"){this.appendInt53(-this.literal.length);for(let t of this.literal)this.appendRawValue(t)}else this.state==="nulls"&&(this.appendInt32(0),this.appendUint53(this.count));this.state="empty"}appendRawValue(t){if(this.type==="int")this.appendInt53(t);else if(this.type==="uint")this.appendUint53(t);else if(this.type==="utf8")this.appendPrefixedString(t);else throw new RangeError(`Unknown RLEEncoder datatype: ${this.type}`)}finish(){this.state==="literal"&&this.literal.push(this.lastValue),(this.state!=="nulls"||this.offset>0)&&this.flush()}},Dh=class extends Ch{constructor(t,r){super(r),this.type=t,this.lastValue=void 0,this.count=0,this.state=void 0}get done(){return this.count===0&&this.offset===this.buf.byteLength}reset(){this.offset=0,this.lastValue=void 0,this.count=0,this.state=void 0}readValue(){if(this.done)return null;if(this.count===0&&this.readRecord(),this.count-=1,this.state==="literal"){let t=this.readRawValue();if(t===this.lastValue)throw new RangeError("Repetition of values is not allowed in literal");return this.lastValue=t,t}else return this.lastValue}skipValues(t){for(;t>0&&!this.done;){this.count===0&&(this.count=this.readInt53(),this.count>0?(this.lastValue=this.count<=t?this.skipRawValues(1):this.readRawValue(),this.state="repetition"):this.count<0?(this.count=-this.count,this.state="literal"):(this.count=this.readUint53(),this.lastValue=null,this.state="nulls"));let r=Math.min(t,this.count);this.state==="literal"&&this.skipRawValues(r),t-=r,this.count-=r}}readRecord(){if(this.count=this.readInt53(),this.count>1){let t=this.readRawValue();if((this.state==="repetition"||this.state==="literal")&&this.lastValue===t)throw new RangeError("Successive repetitions with the same value are not allowed");this.state="repetition",this.lastValue=t}else{if(this.count===1)throw new RangeError("Repetition count of 1 is not allowed, use a literal instead");if(this.count<0){if(this.count=-this.count,this.state==="literal")throw new RangeError("Successive literals are not allowed");this.state="literal"}else{if(this.state==="nulls")throw new RangeError("Successive null runs are not allowed");if(this.count=this.readUint53(),this.count===0)throw new RangeError("Zero-length null runs are not allowed");this.lastValue=null,this.state="nulls"}}}readRawValue(){if(this.type==="int")return this.readInt53();if(this.type==="uint")return this.readUint53();if(this.type==="utf8")return this.readPrefixedString();throw new RangeError(`Unknown RLEDecoder datatype: ${this.type}`)}skipRawValues(t){if(this.type==="utf8")for(let r=0;r<t;r++)this.skip(this.readUint53());else{for(;t>0&&this.offset<this.buf.byteLength;)this.buf[this.offset]&128||t--,this.offset++;if(t>0)throw new RangeError("cannot skip beyond end of buffer")}}},r2=class extends pp{constructor(){super("int"),this.absoluteValue=0}appendValue(t,r=1){r<=0||(typeof t=="number"?(super.appendValue(t-this.absoluteValue,1),this.absoluteValue=t,r>1&&super.appendValue(0,r-1)):super.appendValue(t,r))}copyFrom(t,r={}){if(r.sumValues)throw new RangeError("unsupported options for DeltaEncoder.copyFrom()");if(!(t instanceof gp))throw new TypeError("incompatible type of decoder");let n=r.count;if(n>0&&t.done)throw new RangeError(`cannot copy ${n} values`);if(n===0||t.done)return;let i=t.readValue(),a=0;if(this.appendValue(i),i===null){if(a=t.count+1,n!==void 0&&n<a&&(a=n),t.count-=a-1,this.count+=a-1,n>a&&t.done)throw new RangeError(`cannot copy ${n} values`);if(n===a||t.done)return;t.count===0&&this.appendValue(t.readValue())}n!==void 0&&(n-=a+1);let{nonNullValues:s,sum:u}=super.copyFrom(t,{count:n,sumValues:!0});s>0&&(this.absoluteValue=u,t.absoluteValue=u)}},gp=class extends Dh{constructor(t){super("int",t),this.absoluteValue=0}reset(){this.offset=0,this.lastValue=void 0,this.count=0,this.state=void 0,this.absoluteValue=0}readValue(){let t=super.readValue();return t===null?null:(this.absoluteValue+=t,this.absoluteValue)}skipValues(t){for(;t>0&&!this.done;){this.count===0&&this.readRecord();let r=Math.min(t,this.count);if(this.state==="literal")for(let n=0;n<r;n++)this.lastValue=this.readRawValue(),this.absoluteValue+=this.lastValue;else this.state==="repetition"&&(this.absoluteValue+=r*this.lastValue);t-=r,this.count-=r}}},n2=class extends _h{constructor(){super(),this.lastValue=!1,this.count=0}appendValue(t,r=1){if(t!==!1&&t!==!0)throw new RangeError(`Unsupported value for BooleanEncoder: ${t}`);r<=0||(this.lastValue===t?this.count+=r:(this.appendUint53(this.count),this.lastValue=t,this.count=r))}copyFrom(t,r={}){if(!(t instanceof mp))throw new TypeError("incompatible type of decoder");let{count:n}=r,i=typeof n=="number"?n:Number.MAX_SAFE_INTEGER;if(n&&i>0&&t.done)throw new RangeError(`cannot copy ${n} values`);if(i===0||t.done)return;this.appendValue(t.readValue()),i--;let a=Math.min(t.count,i);for(this.count+=a,t.count-=a,i-=a;i>0&&!t.done;){if(t.count=t.readUint53(),t.count===0)throw new RangeError("Zero-length runs are not allowed");t.lastValue=!t.lastValue,this.appendUint53(this.count);let s=Math.min(t.count,i);this.count=s,this.lastValue=t.lastValue,t.count-=s,i-=s}if(n&&i>0&&t.done)throw new RangeError(`cannot copy ${n} values`)}finish(){this.count>0&&(this.appendUint53(this.count),this.count=0)}},mp=class extends Ch{constructor(t){super(t),this.lastValue=!0,this.firstRun=!0,this.count=0}get done(){return this.count===0&&this.offset===this.buf.byteLength}reset(){this.offset=0,this.lastValue=!0,this.firstRun=!0,this.count=0}readValue(){if(this.done)return!1;for(;this.count===0;){if(this.count=this.readUint53(),this.lastValue=!this.lastValue,this.count===0&&!this.firstRun)throw new RangeError("Zero-length runs are not allowed");this.firstRun=!1}return this.count-=1,this.lastValue}skipValues(t){for(;t>0&&!this.done;){if(this.count===0){if(this.count=this.readUint53(),this.lastValue=!this.lastValue,this.count===0&&!this.firstRun)throw new RangeError("Zero-length runs are not allowed");this.firstRun=!1}this.count<t?(t-=this.count,this.count=0):(this.count-=t,t=0)}}};H4.exports={stringToUtf8:e2,utf8ToString:t2,hexStringToBytes:L4,bytesToHexString:j4,Encoder:_h,Decoder:Ch,RLEEncoder:pp,RLEDecoder:Dh,DeltaEncoder:r2,DeltaDecoder:gp,BooleanEncoder:n2,BooleanDecoder:mp}});var q4=ce((M4,vp)=>{(function(e,t){var r={};t(r);var n=r.default;for(var i in r)n[i]=r[i];typeof vp=="object"&&typeof vp.exports=="object"?vp.exports=n:typeof define=="function"&&define.amd?define(function(){return n}):e.sha256=n})(M4,function(e){"use strict";e.__esModule=!0,e.digestLength=32,e.blockSize=64;var t=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function r(g,p,d,w,v){for(var b,m,y,D,C,F,U,k,S,B,T,P,j;v>=64;){for(b=p[0],m=p[1],y=p[2],D=p[3],C=p[4],F=p[5],U=p[6],k=p[7],B=0;B<16;B++)T=w+B*4,g[B]=(d[T]&255)<<24|(d[T+1]&255)<<16|(d[T+2]&255)<<8|d[T+3]&255;for(B=16;B<64;B++)S=g[B-2],P=(S>>>17|S<<15)^(S>>>19|S<<13)^S>>>10,S=g[B-15],j=(S>>>7|S<<25)^(S>>>18|S<<14)^S>>>3,g[B]=(P+g[B-7]|0)+(j+g[B-16]|0);for(B=0;B<64;B++)P=(((C>>>6|C<<26)^(C>>>11|C<<21)^(C>>>25|C<<7))+(C&F^~C&U)|0)+(k+(t[B]+g[B]|0)|0)|0,j=((b>>>2|b<<30)^(b>>>13|b<<19)^(b>>>22|b<<10))+(b&m^b&y^m&y)|0,k=U,U=F,F=C,C=D+P|0,D=y,y=m,m=b,b=P+j|0;p[0]+=b,p[1]+=m,p[2]+=y,p[3]+=D,p[4]+=C,p[5]+=F,p[6]+=U,p[7]+=k,w+=64,v-=64}return w}var n=function(){function g(){this.digestLength=e.digestLength,this.blockSize=e.blockSize,this.state=new Int32Array(8),this.temp=new Int32Array(64),this.buffer=new Uint8Array(128),this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this.reset()}return g.prototype.reset=function(){return this.state[0]=1779033703,this.state[1]=3144134277,this.state[2]=1013904242,this.state[3]=2773480762,this.state[4]=1359893119,this.state[5]=2600822924,this.state[6]=528734635,this.state[7]=1541459225,this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this},g.prototype.clean=function(){for(var p=0;p<this.buffer.length;p++)this.buffer[p]=0;for(var p=0;p<this.temp.length;p++)this.temp[p]=0;this.reset()},g.prototype.update=function(p,d){if(d===void 0&&(d=p.length),this.finished)throw new Error("SHA256: can't update because hash was finished.");var w=0;if(this.bytesHashed+=d,this.bufferLength>0){for(;this.bufferLength<64&&d>0;)this.buffer[this.bufferLength++]=p[w++],d--;this.bufferLength===64&&(r(this.temp,this.state,this.buffer,0,64),this.bufferLength=0)}for(d>=64&&(w=r(this.temp,this.state,p,w,d),d%=64);d>0;)this.buffer[this.bufferLength++]=p[w++],d--;return this},g.prototype.finish=function(p){if(!this.finished){var d=this.bytesHashed,w=this.bufferLength,v=d/536870912|0,b=d<<3,m=d%64<56?64:128;this.buffer[w]=128;for(var y=w+1;y<m-8;y++)this.buffer[y]=0;this.buffer[m-8]=v>>>24&255,this.buffer[m-7]=v>>>16&255,this.buffer[m-6]=v>>>8&255,this.buffer[m-5]=v>>>0&255,this.buffer[m-4]=b>>>24&255,this.buffer[m-3]=b>>>16&255,this.buffer[m-2]=b>>>8&255,this.buffer[m-1]=b>>>0&255,r(this.temp,this.state,this.buffer,0,m),this.finished=!0}for(var y=0;y<8;y++)p[y*4+0]=this.state[y]>>>24&255,p[y*4+1]=this.state[y]>>>16&255,p[y*4+2]=this.state[y]>>>8&255,p[y*4+3]=this.state[y]>>>0&255;return this},g.prototype.digest=function(){var p=new Uint8Array(this.digestLength);return this.finish(p),p},g.prototype._saveState=function(p){for(var d=0;d<this.state.length;d++)p[d]=this.state[d]},g.prototype._restoreState=function(p,d){for(var w=0;w<this.state.length;w++)this.state[w]=p[w];this.bytesHashed=d,this.finished=!1,this.bufferLength=0},g}();e.Hash=n;var i=function(){function g(p){this.inner=new n,this.outer=new n,this.blockSize=this.inner.blockSize,this.digestLength=this.inner.digestLength;var d=new Uint8Array(this.blockSize);if(p.length>this.blockSize)new n().update(p).finish(d).clean();else for(var w=0;w<p.length;w++)d[w]=p[w];for(var w=0;w<d.length;w++)d[w]^=54;this.inner.update(d);for(var w=0;w<d.length;w++)d[w]^=106;this.outer.update(d),this.istate=new Uint32Array(8),this.ostate=new Uint32Array(8),this.inner._saveState(this.istate),this.outer._saveState(this.ostate);for(var w=0;w<d.length;w++)d[w]=0}return g.prototype.reset=function(){return this.inner._restoreState(this.istate,this.inner.blockSize),this.outer._restoreState(this.ostate,this.outer.blockSize),this},g.prototype.clean=function(){for(var p=0;p<this.istate.length;p++)this.ostate[p]=this.istate[p]=0;this.inner.clean(),this.outer.clean()},g.prototype.update=function(p){return this.inner.update(p),this},g.prototype.finish=function(p){return this.outer.finished?this.outer.finish(p):(this.inner.finish(p),this.outer.update(p,this.digestLength).finish(p)),this},g.prototype.digest=function(){var p=new Uint8Array(this.digestLength);return this.finish(p),p},g}();e.HMAC=i;function a(g){var p=new n().update(g),d=p.digest();return p.clean(),d}e.hash=a,e.default=a;function s(g,p){var d=new i(g).update(p),w=d.digest();return d.clean(),w}e.hmac=s;function u(g,p,d,w){var v=w[0];if(v===0)throw new Error("hkdf: cannot expand more");p.reset(),v>1&&p.update(g),d&&p.update(d),p.update(w),p.finish(g),w[0]++}var c=new Uint8Array(e.digestLength);function f(g,p,d,w){p===void 0&&(p=c),w===void 0&&(w=32);for(var v=new Uint8Array([1]),b=s(p,g),m=new i(b),y=new Uint8Array(m.digestLength),D=y.length,C=new Uint8Array(w),F=0;F<w;F++)D===y.length&&(u(y,m,d,v),D=0),C[F]=y[D++];return m.clean(),y.fill(0),v.fill(0),C}e.hkdf=f;function h(g,p,d,w){for(var v=new i(g),b=v.digestLength,m=new Uint8Array(4),y=new Uint8Array(b),D=new Uint8Array(b),C=new Uint8Array(w),F=0;F*b<w;F++){var U=F+1;m[0]=U>>>24&255,m[1]=U>>>16&255,m[2]=U>>>8&255,m[3]=U>>>0&255,v.reset(),v.update(p),v.update(m),v.finish(D);for(var k=0;k<b;k++)y[k]=D[k];for(var k=2;k<=d;k++){v.reset(),v.update(D).finish(D);for(var S=0;S<b;S++)y[S]^=D[S]}for(var k=0;k<b&&F*b+k<w;k++)C[F*b+k]=y[k]}for(var F=0;F<b;F++)y[F]=D[F]=0;for(var F=0;F<4;F++)m[F]=0;return v.clean(),C}e.pbkdf2=h})});var Bh=ce((AX,p6)=>{var Ap=N4(),{copyObject:V4,parseOpId:Cu,equalBytes:K4}=Us(),{utf8ToString:Yj,hexStringToBytes:J4,bytesToHexString:yp,Encoder:Ul,Decoder:Oi,RLEEncoder:Pi,RLEDecoder:z4,DeltaEncoder:kl,DeltaDecoder:Wj,BooleanEncoder:Z4,BooleanDecoder:Xj}=i2(),{Hash:Q4}=q4(),Ll=new Uint8Array([133,111,74,131]),c2=0,jl=1,Ih=2,e6=256,At={GROUP_CARD:0,ACTOR_ID:1,INT_RLE:2,INT_DELTA:3,BOOLEAN:4,STRING_RLE:5,VALUE_LEN:6,VALUE_RAW:7},Sh=8,or={NULL:0,FALSE:1,TRUE:2,LEB128_UINT:3,LEB128_INT:4,IEEE754:5,UTF8:6,BYTES:7,COUNTER:8,TIMESTAMP:9,MIN_UNKNOWN:10,MAX_UNKNOWN:15},Fh=["makeMap","set","makeList","del","makeText","inc","makeTable","link"],Jj={makeMap:"map",makeList:"list",makeText:"text",makeTable:"table"},t6=[{columnName:"objActor",columnId:0|At.ACTOR_ID},{columnName:"objCtr",columnId:0|At.INT_RLE},{columnName:"keyActor",columnId:16|At.ACTOR_ID},{columnName:"keyCtr",columnId:16|At.INT_DELTA},{columnName:"keyStr",columnId:16|At.STRING_RLE},{columnName:"idActor",columnId:32|At.ACTOR_ID},{columnName:"idCtr",columnId:32|At.INT_DELTA},{columnName:"insert",columnId:48|At.BOOLEAN},{columnName:"action",columnId:64|At.INT_RLE},{columnName:"valLen",columnId:80|At.VALUE_LEN},{columnName:"valRaw",columnId:80|At.VALUE_RAW},{columnName:"chldActor",columnId:96|At.ACTOR_ID},{columnName:"chldCtr",columnId:96|At.INT_DELTA}],l2=t6.concat([{columnName:"predNum",columnId:112|At.GROUP_CARD},{columnName:"predActor",columnId:112|At.ACTOR_ID},{columnName:"predCtr",columnId:112|At.INT_DELTA}]),f2=t6.concat([{columnName:"succNum",columnId:128|At.GROUP_CARD},{columnName:"succActor",columnId:128|At.ACTOR_ID},{columnName:"succCtr",columnId:128|At.INT_DELTA}]),r6=[{columnName:"actor",columnId:0|At.ACTOR_ID},{columnName:"seq",columnId:0|At.INT_DELTA},{columnName:"maxOp",columnId:16|At.INT_DELTA},{columnName:"time",columnId:32|At.INT_DELTA},{columnName:"message",columnId:48|At.STRING_RLE},{columnName:"depsNum",columnId:64|At.GROUP_CARD},{columnName:"depsIndex",columnId:64|At.INT_DELTA},{columnName:"extraLen",columnId:80|At.VALUE_LEN},{columnName:"extraRaw",columnId:80|At.VALUE_RAW}];function wp(e,t){if(!e||!e.actorId)return e;let r=e.counter,n=t.indexOf(e.actorId);if(n<0)throw new RangeError("missing actorId");return{counter:r,actorNum:n,actorId:e.actorId}}function s2(e,t){return e.counter<t.counter?-1:e.counter>t.counter?1:e.actorId<t.actorId?-1:e.actorId>t.actorId?1:0}function Zj(e,t){let r={},n=[];for(let a of e)a=V4(a),r[a.actor]=!0,a.ops=aH(a.ops,a.startOp,a.actor),a.ops=a.ops.map(s=>{s=V4(s),s.obj!=="_root"&&(s.obj=Cu(s.obj)),s.elemId&&s.elemId!=="_head"&&(s.elemId=Cu(s.elemId)),s.child&&(s.child=Cu(s.child)),s.pred&&(s.pred=s.pred.map(Cu)),s.obj.actorId&&(r[s.obj.actorId]=!0),s.elemId&&s.elemId.actorId&&(r[s.elemId.actorId]=!0),s.child&&s.child.actorId&&(r[s.child.actorId]=!0);for(let u of s.pred)r[u.actorId]=!0;return s}),n.push(a);let i=Object.keys(r).sort();t&&(i=[e[0].actor].concat(i.filter(a=>a!==e[0].actor)));for(let a of n){a.actorNum=i.indexOf(a.actor);for(let s=0;s<a.ops.length;s++){let u=a.ops[s];u.id={counter:a.startOp+s,actorNum:a.actorNum,actorId:a.actor},u.obj=wp(u.obj,i),u.elemId=wp(u.elemId,i),u.child=wp(u.child,i),u.pred=u.pred.map(c=>wp(c,i))}}return{changes:n,actorIds:i}}function Qj(e,t){if(e.obj==="_root")t.objActor.appendValue(null),t.objCtr.appendValue(null);else if(e.obj.actorNum>=0&&e.obj.counter>0)t.objActor.appendValue(e.obj.actorNum),t.objCtr.appendValue(e.obj.counter);else throw new RangeError(`Unexpected objectId reference: ${JSON.stringify(e.obj)}`)}function eH(e,t){if(e.key)t.keyActor.appendValue(null),t.keyCtr.appendValue(null),t.keyStr.appendValue(e.key);else if(e.elemId==="_head"&&e.insert)t.keyActor.appendValue(null),t.keyCtr.appendValue(0),t.keyStr.appendValue(null);else if(e.elemId&&e.elemId.actorNum>=0&&e.elemId.counter>0)t.keyActor.appendValue(e.elemId.actorNum),t.keyCtr.appendValue(e.elemId.counter),t.keyStr.appendValue(null);else throw new RangeError(`Unexpected operation key: ${JSON.stringify(e)}`)}function tH(e,t){let r=Fh.indexOf(e.action);if(r>=0)t.action.appendValue(r);else if(typeof e.action=="number")t.action.appendValue(e.action);else throw new RangeError(`Unexpected operation action: ${e.action}`)}function rH(e){switch(e.datatype){case"counter":return[or.COUNTER,e.value];case"timestamp":return[or.TIMESTAMP,e.value];case"uint":return[or.LEB128_UINT,e.value];case"int":return[or.LEB128_INT,e.value];case"float64":{let t=new ArrayBuffer(8);return new DataView(t).setFloat64(0,e.value,!0),[or.IEEE754,new Uint8Array(t)]}default:if(Number.isInteger(e.value)&&e.value<=Number.MAX_SAFE_INTEGER&&e.value>=Number.MIN_SAFE_INTEGER)return[or.LEB128_INT,e.value];{let t=new ArrayBuffer(8);return new DataView(t).setFloat64(0,e.value,!0),[or.IEEE754,new Uint8Array(t)]}}}function nH(e,t){if(e.action!=="set"&&e.action!=="inc"||e.value===null)t.valLen.appendValue(or.NULL);else if(e.value===!1)t.valLen.appendValue(or.FALSE);else if(e.value===!0)t.valLen.appendValue(or.TRUE);else if(typeof e.value=="string"){let r=t.valRaw.appendRawString(e.value);t.valLen.appendValue(r<<4|or.UTF8)}else if(ArrayBuffer.isView(e.value)){let r=t.valRaw.appendRawBytes(new Uint8Array(e.value.buffer));t.valLen.appendValue(r<<4|or.BYTES)}else if(typeof e.value=="number"){let[r,n]=rH(e),i;r===or.LEB128_UINT?i=t.valRaw.appendUint53(n):r===or.IEEE754?i=t.valRaw.appendRawBytes(n):i=t.valRaw.appendInt53(n),t.valLen.appendValue(i<<4|r)}else if(typeof e.datatype=="number"&&e.datatype>=or.MIN_UNKNOWN&&e.datatype<=or.MAX_UNKNOWN&&e.value instanceof Uint8Array){let r=t.valRaw.appendRawBytes(e.value);t.valLen.appendValue(r<<4|e.datatype)}else throw e.datatype?new RangeError(`Unknown datatype ${e.datatype} for value ${e.value}`):new RangeError(`Unsupported value in operation: ${e.value}`)}function n6(e,t){if(e===or.NULL)return{value:null};if(e===or.FALSE)return{value:!1};if(e===or.TRUE)return{value:!0};if(e%16===or.UTF8)return{value:Yj(t)};if(e%16===or.LEB128_UINT)return{value:new Oi(t).readUint53(),datatype:"uint"};if(e%16===or.LEB128_INT)return{value:new Oi(t).readInt53(),datatype:"int"};if(e%16===or.IEEE754){let r=new DataView(t.buffer,t.byteOffset,t.byteLength);if(t.byteLength===8)return{value:r.getFloat64(0,!0),datatype:"float64"};throw new RangeError(`Invalid length for floating point number: ${t.byteLength}`)}else return e%16===or.COUNTER?{value:new Oi(t).readInt53(),datatype:"counter"}:e%16===or.TIMESTAMP?{value:new Oi(t).readInt53(),datatype:"timestamp"}:{value:t,datatype:e%16}}function G4(e,t,r,n){let{columnId:i,columnName:a,decoder:s}=e[t];if(i%8===At.VALUE_LEN&&t+1<e.length&&e[t+1].columnId===i+1){let u=s.readValue(),c=e[t+1].decoder.readRawBytes(u>>4),{value:f,datatype:h}=n6(u,c);return n[a]=f,h&&(n[a+"_datatype"]=h),2}else if(i%8===At.ACTOR_ID){let u=s.readValue();if(u===null)n[a]=null;else{if(!r[u])throw new RangeError(`No actor index ${u}`);n[a]=r[u]}}else n[a]=s.readValue();return 1}function iH(e,t){let r={objActor:new Pi("uint"),objCtr:new Pi("uint"),keyActor:new Pi("uint"),keyCtr:new kl,keyStr:new Pi("utf8"),insert:new Z4,action:new Pi("uint"),valLen:new Pi("uint"),valRaw:new Ul,chldActor:new Pi("uint"),chldCtr:new kl};t?(r.idActor=new Pi("uint"),r.idCtr=new kl,r.succNum=new Pi("uint"),r.succActor=new Pi("uint"),r.succCtr=new kl):(r.predNum=new Pi("uint"),r.predCtr=new kl,r.predActor=new Pi("uint"));for(let i of e)if(Qj(i,r),eH(i,r),r.insert.appendValue(!!i.insert),tH(i,r),nH(i,r),i.child&&i.child.counter?(r.chldActor.appendValue(i.child.actorNum),r.chldCtr.appendValue(i.child.counter)):(r.chldActor.appendValue(null),r.chldCtr.appendValue(null)),t){r.idActor.appendValue(i.id.actorNum),r.idCtr.appendValue(i.id.counter),r.succNum.appendValue(i.succ.length),i.succ.sort(s2);for(let a=0;a<i.succ.length;a++)r.succActor.appendValue(i.succ[a].actorNum),r.succCtr.appendValue(i.succ[a].counter)}else{r.predNum.appendValue(i.pred.length),i.pred.sort(s2);for(let a=0;a<i.pred.length;a++)r.predActor.appendValue(i.pred[a].actorNum),r.predCtr.appendValue(i.pred[a].counter)}let n=[];for(let{columnName:i,columnId:a}of t?f2:l2)r[i]&&n.push({columnId:a,columnName:i,encoder:r[i]});return n.sort((i,a)=>i.columnId-a.columnId)}function sH(e,t){return t===void 0?typeof e=="string"||typeof e=="boolean"||e===null:typeof e=="number"}function aH(e,t,r){let n=t,i=[];for(let a of e)if(a.action==="set"&&a.values&&a.insert){if(a.pred.length!==0)throw new RangeError("multi-insert pred must be empty");let s=a.elemId,u=a.datatype;for(let c of a.values){if(!sH(c,u))throw new RangeError(`Decode failed: bad value/datatype association (${c},${u})`);i.push({action:"set",obj:a.obj,elemId:s,datatype:u,value:c,pred:[],insert:!0}),s=`${n}@${r}`,n+=1}}else if(a.action==="del"&&a.multiOp>1){if(a.pred.length!==1)throw new RangeError("multiOp deletion must have exactly one pred");let s=Cu(a.elemId),u=Cu(a.pred[0]);for(let c=0;c<a.multiOp;c++){let f=`${s.counter+c}@${s.actorId}`,h=[`${u.counter+c}@${u.actorId}`];i.push({action:"del",obj:a.obj,elemId:f,pred:h}),n+=1}}else i.push(a),n+=1;return i}function i6(e,t){let r=[];for(let n of e){let i=n.objCtr===null?"_root":`${n.objCtr}@${n.objActor}`,a=n.keyStr?void 0:n.keyCtr===0?"_head":`${n.keyCtr}@${n.keyActor}`,s=Fh[n.action]||n.action,u=a?{obj:i,elemId:a,action:s}:{obj:i,key:n.keyStr,action:s};if(u.insert=!!n.insert,(Fh[n.action]==="set"||Fh[n.action]==="inc")&&(u.value=n.valLen,n.valLen_datatype&&(u.datatype=n.valLen_datatype)),!!n.chldCtr!=!!n.chldActor)throw new RangeError(`Mismatched child columns: ${n.chldCtr} and ${n.chldActor}`);n.chldCtr!==null&&(u.child=`${n.chldCtr}@${n.chldActor}`),t?(u.id=`${n.idCtr}@${n.idActor}`,u.succ=n.succNum.map(c=>`${c.succCtr}@${c.succActor}`),Y4(n.succNum.map(c=>({counter:c.succCtr,actorId:c.succActor})))):(u.pred=n.predNum.map(c=>`${c.predCtr}@${c.predActor}`),Y4(n.predNum.map(c=>({counter:c.predCtr,actorId:c.predActor})))),r.push(u)}return r}function Y4(e){let t=null;for(let r of e){if(t&&s2(t,r)!==-1)throw new RangeError("operation IDs are not in ascending order");t=r}}function uH(e){return(e&7)===At.INT_DELTA?new kl:(e&7)===At.BOOLEAN?new Z4:(e&7)===At.STRING_RLE?new Pi("utf8"):(e&7)===At.VALUE_RAW?new Ul:new Pi("uint")}function Ep(e,t){return(e&7)===At.INT_DELTA?new Wj(t):(e&7)===At.BOOLEAN?new Xj(t):(e&7)===At.STRING_RLE?new z4("utf8",t):(e&7)===At.VALUE_RAW?new Oi(t):new z4("uint",t)}function s6(e,t){let r=new Uint8Array(0),n=[],i=0,a=0;for(;i<e.length||a<t.length;)if(i===e.length||a<t.length&&t[a].columnId<e[i].columnId){let{columnId:s,columnName:u}=t[a];n.push({columnId:s,columnName:u,decoder:Ep(s,r)}),a++}else if(a===t.length||e[i].columnId<t[a].columnId){let{columnId:s,buffer:u}=e[i];n.push({columnId:s,decoder:Ep(s,u)}),i++}else{let{columnId:s,buffer:u}=e[i],{columnName:c}=t[a];n.push({columnId:s,columnName:c,decoder:Ep(s,u)}),i++,a++}return n}function a2(e,t,r){e=s6(e,r);let n=[];for(;e.some(i=>!i.decoder.done);){let i={},a=0;for(;a<e.length;){let s=e[a].columnId,u=s>>4,c=1;for(;a+c<e.length&&e[a+c].columnId>>4===u;)c++;if(s%8===At.GROUP_CARD){let f=[],h=e[a].decoder.readValue();for(let g=0;g<h;g++){let p={};for(let d=1;d<c;d++)G4(e,a+d,t,p);f.push(p)}i[e[a].columnName]=f,a+=c}else a+=G4(e,a,t,i)}n.push(i)}return n}function u2(e){let t=(-1^Sh)>>>0,r=-1,n=[],i=e.readUint53();for(let a=0;a<i;a++){let s=e.readUint53(),u=e.readUint53();if((s&t)<=(r&t))throw new RangeError("Columns must be in ascending order");r=s,n.push({columnId:s,bufferLen:u})}return n}function o2(e,t){let r=t.filter(n=>n.encoder.buffer.byteLength>0);e.appendUint53(r.length);for(let n of r)e.appendUint53(n.columnId),e.appendUint53(n.encoder.buffer.byteLength)}function a6(e){let t=e.readUint53(),r=[];for(let s=0;s<t;s++)r.push(yp(e.readRawBytes(32)));let n={actor:e.readHexString(),seq:e.readUint53(),startOp:e.readUint53(),time:e.readInt53(),message:e.readPrefixedString(),deps:r},i=[n.actor],a=e.readUint53();for(let s=0;s<a;s++)i.push(e.readHexString());return n.actorIds=i,n}function u6(e,t){let n=Ll.byteLength+4+1+5,i=new Ul;i.appendRawBytes(new Uint8Array(n)),t(i);let a=i.buffer,s=new Ul;s.appendByte(e),s.appendUint53(a.byteLength-n);let u=s.buffer,c=new Q4;c.update(u),c.update(a.subarray(n));let f=c.digest(),h=f.subarray(0,4);return a.set(Ll,n-u.byteLength-4-Ll.byteLength),a.set(h,n-u.byteLength-4),a.set(u,n-u.byteLength),{hash:f,bytes:a.subarray(n-u.byteLength-4-Ll.byteLength)}}function Hl(e,t){if(!K4(e.readRawBytes(Ll.byteLength),Ll))throw new RangeError("Data does not begin with magic bytes 85 6f 4a 83");let r=e.readRawBytes(4),n=e.offset,i=e.readByte(),a=e.readUint53(),s={chunkType:i,chunkLength:a,chunkData:e.readRawBytes(a)};if(t){let u=new Q4;u.update(e.buf.subarray(n,e.offset));let c=u.digest();if(!K4(c.subarray(0,4),r))throw new RangeError("checksum does not match data");s.hash=yp(c)}return s}function o6(e){let{changes:t,actorIds:r}=Zj([e],!0),n=t[0],{hash:i,bytes:a}=u6(jl,u=>{if(!Array.isArray(n.deps))throw new TypeError("deps is not an array");u.appendUint53(n.deps.length);for(let f of n.deps.slice().sort())u.appendRawBytes(J4(f));u.appendHexString(n.actor),u.appendUint53(n.seq),u.appendUint53(n.startOp),u.appendInt53(n.time),u.appendPrefixedString(n.message||""),u.appendUint53(r.length-1);for(let f of r.slice(1))u.appendHexString(f);let c=iH(n.ops,!1);o2(u,c);for(let f of c)u.appendRawBytes(f.encoder.buffer);n.extraBytes&&u.appendRawBytes(n.extraBytes)}),s=yp(i);if(e.hash&&e.hash!==s)throw new RangeError(`Change hash does not match encoding: ${e.hash} != ${s}`);return a.byteLength>=e6?cH(a):a}function c6(e){e[8]===Ih&&(e=l6(e));let t=new Oi(e),r=Hl(t,!0),n=new Oi(r.chunkData);if(!t.done)throw new RangeError("Encoded change has trailing data");if(r.chunkType!==jl)throw new RangeError(`Unexpected chunk type: ${r.chunkType}`);let i=a6(n),a=u2(n);for(let s=0;s<a.length;s++){if(a[s].columnId&Sh)throw new RangeError("change must not contain deflated columns");a[s].buffer=n.readRawBytes(a[s].bufferLen)}if(!n.done){let s=n.buf.byteLength-n.offset;i.extraBytes=n.readRawBytes(s)}return i.columns=a,i.hash=r.hash,i}function h2(e){let t=c6(e);return t.ops=i6(a2(t.columns,t.actorIds,l2),!1),delete t.actorIds,delete t.columns,t}function oH(e,t){e[8]===Ih&&(e=l6(e));let r=Hl(new Oi(e),t);if(r.chunkType!==jl)throw new RangeError("Buffer chunk type is not a change");let n=a6(new Oi(r.chunkData));return n.change=e,t&&(n.hash=r.hash),n}function cH(e){let t=Hl(new Oi(e),!1);if(t.chunkType!==jl)throw new RangeError(`Unexpected chunk type: ${t.chunkType}`);let r=Ap.deflateRaw(t.chunkData),n=new Ul;return n.appendRawBytes(e.subarray(0,8)),n.appendByte(Ih),n.appendUint53(r.byteLength),n.appendRawBytes(r),n.buffer}function l6(e){let t=Hl(new Oi(e),!1);if(t.chunkType!==Ih)throw new RangeError(`Unexpected chunk type: ${t.chunkType}`);let r=Ap.inflateRaw(t.chunkData),n=new Ul;return n.appendRawBytes(e.subarray(0,8)),n.appendByte(jl),n.appendUint53(r.byteLength),n.appendRawBytes(r),n.buffer}function f6(e){let t=new Oi(e),r=[],n=0;for(;!t.done;)Hl(t,!1),r.push(e.subarray(n,t.offset)),n=t.offset;return r}function lH(e){let t=[];for(let r of e)for(let n of f6(r))n[8]===c2?t=t.concat(d6(n)):(n[8]===jl||n[8]===Ih)&&t.push(h2(n));return t}function fH(e,t){if(e===t)return 0;if(e==="_root")return-1;if(t==="_root")return 1;let r=Cu(e),n=Cu(t);return r.counter<n.counter?-1:r.counter>n.counter?1:r.actorId<n.actorId?-1:r.actorId>n.actorId?1:0}function hH(e,t){let r={};for(let i of e){if(i.ops=[],r[i.actor]||(r[i.actor]=[]),i.seq!==r[i.actor].length+1)throw new RangeError(`Expected seq = ${r[i.actor].length+1}, got ${i.seq}`);if(i.seq>1&&r[i.actor][i.seq-2].maxOp>i.maxOp)throw new RangeError("maxOp must increase monotonically per actor");r[i.actor].push(i)}let n={};for(let i of t){if(i.action==="del")throw new RangeError("document should not contain del operations");i.pred=n[i.id]?n[i.id].pred:[],n[i.id]=i;for(let a of i.succ){if(!n[a])if(i.elemId){let s=i.insert?i.id:i.elemId;n[a]={id:a,action:"del",obj:i.obj,elemId:s,pred:[]}}else n[a]={id:a,action:"del",obj:i.obj,key:i.key,pred:[]};n[a].pred.push(i.id)}delete i.succ}for(let i of Object.values(n))i.action==="del"&&t.push(i);for(let i of t){let{counter:a,actorId:s}=Cu(i.id),u=r[s],c=0,f=u.length;for(;c<f;){let h=Math.floor((c+f)/2);u[h].maxOp<a?c=h+1:f=h}if(c>=u.length)throw new RangeError(`Operation ID ${i.id} outside of allowed range`);u[c].ops.push(i)}for(let i of e){i.ops.sort((a,s)=>fH(a.id,s.id)),i.startOp=i.maxOp-i.ops.length+1,delete i.maxOp;for(let a=0;a<i.ops.length;a++){let s=i.ops[a],u=`${i.startOp+a}@${i.actor}`;if(s.id!==u)throw new RangeError(`Expected opId ${u}, got ${s.id}`);delete s.id}}}function dH(e,t){let r={};for(let s=0;s<e.length;s++){let u=e[s];u.deps=[];for(let c of u.depsNum.map(f=>f.depsIndex)){if(!e[c]||!e[c].hash)throw new RangeError(`No hash for index ${c} while processing index ${s}`);let f=e[c].hash;u.deps.push(f),r[f]&&delete r[f]}if(u.deps.sort(),delete u.depsNum,u.extraLen_datatype!==or.BYTES)throw new RangeError(`Bad datatype for extra bytes: ${or.BYTES}`);u.extraBytes=u.extraLen,delete u.extraLen_datatype,e[s]=h2(o6(u)),r[e[s].hash]=!0}let n=Object.keys(r).sort(),i=n.length===t.length,a=0;for(;i&&a<n.length;)i=n[a]===t[a],a++;if(!i)throw new RangeError(`Mismatched heads hashes: expected ${t.join(", ")}, got ${n.join(", ")}`)}function pH(e){let{changesColumns:t,opsColumns:r,actorIds:n,heads:i,headsIndexes:a,extraBytes:s}=e;for(let u of t)W4(u);for(let u of r)W4(u);return u6(c2,u=>{u.appendUint53(n.length);for(let c of n)u.appendHexString(c);u.appendUint53(i.length);for(let c of i.sort())u.appendRawBytes(J4(c));o2(u,t),o2(u,r);for(let c of t)u.appendRawBytes(c.encoder.buffer);for(let c of r)u.appendRawBytes(c.encoder.buffer);for(let c of a)u.appendUint53(c);s&&u.appendRawBytes(s)}).bytes}function h6(e){let t=new Oi(e),r=Hl(t,!0),n=new Oi(r.chunkData);if(!t.done)throw new RangeError("Encoded document has trailing data");if(r.chunkType!==c2)throw new RangeError(`Unexpected chunk type: ${r.chunkType}`);let i=[],a=n.readUint53();for(let p=0;p<a;p++)i.push(n.readHexString());let s=[],u=[],c=n.readUint53();for(let p=0;p<c;p++)s.push(yp(n.readRawBytes(32)));let f=u2(n),h=u2(n);for(let p=0;p<f.length;p++)f[p].buffer=n.readRawBytes(f[p].bufferLen),X4(f[p]);for(let p=0;p<h.length;p++)h[p].buffer=n.readRawBytes(h[p].bufferLen),X4(h[p]);if(!n.done)for(let p=0;p<c;p++)u.push(n.readUint53());let g=n.readRawBytes(n.buf.byteLength-n.offset);return{changesColumns:f,opsColumns:h,actorIds:i,heads:s,headsIndexes:u,extraBytes:g}}function d6(e){let{changesColumns:t,opsColumns:r,actorIds:n,heads:i}=h6(e),a=a2(t,n,r6),s=i6(a2(r,n,f2),!0);return hH(a,s),dH(a,i),a}function W4(e){e.encoder.buffer.byteLength>=e6&&(e.encoder={buffer:Ap.deflateRaw(e.encoder.buffer)},e.columnId|=Sh)}function X4(e){e.columnId&Sh&&(e.buffer=Ap.inflateRaw(e.buffer),e.columnId^=Sh)}p6.exports={COLUMN_TYPE:At,VALUE_TYPE:or,ACTIONS:Fh,OBJECT_TYPE:Jj,DOC_OPS_COLUMNS:f2,CHANGE_COLUMNS:l2,DOCUMENT_COLUMNS:r6,encoderByColumnId:uH,decoderByColumnId:Ep,makeDecoders:s6,decodeValue:n6,splitContainers:f6,encodeChange:o6,decodeChangeColumns:c6,decodeChange:h2,decodeChangeMeta:oH,decodeChanges:lH,encodeDocumentHeader:pH,decodeDocumentHeader:h6,decodeDocument:d6}});var R6=ce((yX,$6)=>{var{parseOpId:Cp,copyObject:Dp}=Us(),{COLUMN_TYPE:Tn,VALUE_TYPE:p2,ACTIONS:Du,OBJECT_TYPE:g6,DOC_OPS_COLUMNS:m6,CHANGE_COLUMNS:er,DOCUMENT_COLUMNS:Hs,encoderByColumnId:zl,decoderByColumnId:b2,makeDecoders:$h,decodeValue:bp,encodeChange:gH,decodeChangeColumns:mH,decodeChangeMeta:vH,decodeChanges:wH,decodeDocumentHeader:EH,encodeDocumentHeader:AH}=Bh(),xh=600,yH=10,b6=7,_6=Math.floor(yH*xh/8),Lr=0,Ir=1,Pn=2,On=3,Ft=4,Wn=5,Ar=6,Xn=7,Zr=8,co=9,vc=10,lo=13,Ml=14,ql=15,Ms=13,g2=14,Vl=15,v6=er.filter(e=>["predNum","predActor","predCtr"].includes(e.columnName)).map(e=>e.columnId);function m2(e,t,r){if(t.length===1)e[t[0]]=r;else{let n=Object.assign({},e[t[0]]);m2(n,t.slice(1),r),e[t[0]]=n}}function w6(e,t,r,n){for(let M of t)M.decoder.reset();let{objActor:i,objCtr:a,keyActor:s,keyCtr:u,keyStr:c,idActor:f,idCtr:h,insert:g}=e,[p,d,,,w,v,b,m,y,,,,,D]=t.map(M=>M.decoder),C=0,F=0,U=!1,k=null,S=null,B=null,T=null,P=null,j=null,Y=0;if(a!==null&&!n)for(;(!d.done||!p.done||!y.done)&&(S=d.readValue(),k=r[p.readValue()],y.skipValues(1),S===null||!k||S<a||S===a&&k<i);)C+=1;if((S!==a||k!==i)&&!n)return{found:!0,skipCount:C,visibleCount:F};if(c!==null){for(w.skipValues(C);!w.done;){let M=p.readValue();if(k=M===null?null:r[M],S=d.readValue(),P=w.readValue(),P!==null&&P<c&&S===a&&k===i)C+=1;else break}return{found:!0,skipCount:C,visibleCount:F}}if(b.skipValues(C),v.skipValues(C),m.skipValues(C),D.skipValues(C),T=b.readValue(),B=r[v.readValue()],j=m.readValue(),Y=D.readValue(),g){if(!n&&u!==null&&u>0&&s!==null){for(C+=1;!b.done&&!v.done&&(T!==u||B!==s)&&(j&&(U=!1),Y===0&&!U&&(F+=1,U=!0),T=b.readValue(),B=r[v.readValue()],S=d.readValue(),k=r[p.readValue()],j=m.readValue(),Y=D.readValue(),S===a&&k===i);)C+=1;if(S!==a||k!==i||T!==u||B!==s||!j)return{found:!1,skipCount:C,visibleCount:F};if(j&&(U=!1),Y===0&&!U&&(F+=1,U=!0),b.done||v.done)return{found:!0,skipCount:C,visibleCount:F};T=b.readValue(),B=r[v.readValue()],S=d.readValue(),k=r[p.readValue()],j=m.readValue(),Y=D.readValue()}for(;(!j||T>h||T===h&&B>f)&&S===a&&k===i&&(C+=1,j&&(U=!1),Y===0&&!U&&(F+=1,U=!0),!b.done&&!v.done);)T=b.readValue(),B=r[v.readValue()],S=d.readValue(),k=r[p.readValue()],j=m.readValue(),Y=D.readValue()}else if(u!==null&&u>0&&s!==null){for(;(!j||T!==u||B!==s)&&S===a&&k===i&&(C+=1,j&&(U=!1),Y===0&&!U&&(F+=1,U=!0),!b.done&&!v.done);)T=b.readValue(),B=r[v.readValue()],S=d.readValue(),k=r[p.readValue()],j=m.readValue(),Y=D.readValue();if(S!==a||k!==i||T!==u||B!==s||!j)return{found:!1,skipCount:C,visibleCount:F}}return{found:!0,skipCount:C,visibleCount:F}}function E6(e,t,r,n){let i=e.blocks[t],a=e.blocks[t+1];return i.lastObjectActor!==r||i.lastObjectCtr!==n||i.numVisible===void 0?0:i.lastVisibleActor===a.firstVisibleActor&&i.lastVisibleActor!==void 0&&i.lastVisibleCtr===a.firstVisibleCtr&&i.lastVisibleCtr!==void 0?i.numVisible-1:i.numVisible}function C6(e,t){let{objActor:r,objActorNum:n,objCtr:i,keyActor:a,keyCtr:s,keyStr:u}=t,c=0,f=0;if(i!==null)for(;c<e.blocks.length-1;){let h=e.blocks[c].lastObjectActor===void 0?void 0:e.actorIds[e.blocks[c].lastObjectActor],g=e.blocks[c].lastObjectCtr;if(g===null||g<i||g===i&&h<r)c++;else break}if(u!==null){for(;c<e.blocks.length-1;){let{lastObjectActor:g,lastObjectCtr:p,lastKey:d}=e.blocks[c];if(i===p&&n===g&&d!==void 0&&d<u)c++;else break}let{skipCount:h}=w6(t,e.blocks[c].columns,e.actorIds,!1);return{blockIndex:c,skipCount:h,visibleCount:0}}else{let h=s===null||s===0||a===null,g=a===null?null:e.actorIds.indexOf(a),p=!1;for(;;){if(!h&&!p)for(;c<e.blocks.length-1&&e.blocks[c].lastObjectActor===n&&e.blocks[c].lastObjectCtr===i&&!F6(e.blocks[c].bloom,g,s);){if(e.blocks[c].lastObjectCtr>i)throw new RangeError(`Reference element not found: ${s}@${a}`);f+=E6(e,c,n,i),c++}let{found:d,skipCount:w,visibleCount:v}=w6(t,e.blocks[c].columns,e.actorIds,p);if(c===e.blocks.length-1||e.blocks[c].lastObjectActor!==n||e.blocks[c].lastObjectCtr!==i){if(d)return{blockIndex:c,skipCount:w,visibleCount:f+v};throw new RangeError(`Reference element not found: ${s}@${a}`)}else if(d&&w<e.blocks[c].numOps)return{blockIndex:c,skipCount:w,visibleCount:f+v};p=d&&t.insert,f+=E6(e,c,n,i),c++}}}function D6(e,t,r){let n=8*e.byteLength,i=r%n,a=t%n,s=((r^t)*16777619>>>0)%n;for(let u=0;u<b6;u++)e[i>>>3]|=1<<(i&7),i=(i+a)%n,a=(a+s)%n}function F6(e,t,r){let n=8*e.byteLength,i=r%n,a=t%n,s=((r^t)*16777619>>>0)%n;for(let u=0;u<b6;u++){if(!(e[i>>>3]&1<<(i&7)))return!1;i=(i+a)%n,a=(a+s)%n}return!0}function S6(e){e.bloom=new Uint8Array(_6),e.numOps=0,e.lastKey=void 0,e.numVisible=void 0,e.lastObjectActor=void 0,e.lastObjectCtr=void 0,e.firstVisibleActor=void 0,e.firstVisibleCtr=void 0,e.lastVisibleActor=void 0,e.lastVisibleCtr=void 0;for(let h of e.columns)h.decoder.reset();let[t,r,n,i,a,s,u,c,,,,,,f]=e.columns.map(h=>h.decoder);for(;!u.done;){e.numOps+=1;let h=t.readValue(),g=r.readValue(),p=n.readValue(),d=i.readValue(),w=a.readValue(),v=s.readValue(),b=u.readValue(),m=c.readValue(),y=f.readValue();if((e.lastObjectActor!==h||e.lastObjectCtr!==g)&&(e.numVisible=0,e.lastObjectActor=h,e.lastObjectCtr=g),w!==null)e.lastKey=w;else if(m||d!==null){e.lastKey=void 0;let D=m?v:p,C=m?b:d;D6(e.bloom,D,C),y===0&&(e.firstVisibleActor===void 0&&(e.firstVisibleActor=D),e.firstVisibleCtr===void 0&&(e.firstVisibleCtr=C),(e.lastVisibleActor!==D||e.lastVisibleCtr!==C)&&(e.numVisible+=1,e.lastVisibleActor=D,e.lastVisibleCtr=C))}}}function d2(e,t,r,n){if(t[Ft]!==null)e.lastObjectCtr===t[Ir]&&e.lastObjectActor===t[Lr]&&(e.lastKey===void 0||e.lastKey<t[Ft])&&(e.lastKey=t[Ft]);else{let i=t[Xn]?t[Wn]:t[Pn],a=t[Xn]?t[Ar]:t[On];D6(e.bloom,i,a),(t[Ms]===0||n)&&(e.firstVisibleActor===void 0&&(e.firstVisibleActor=i),e.firstVisibleCtr===void 0&&(e.firstVisibleCtr=a),e.lastVisibleActor=i,e.lastVisibleCtr=a)}(e.lastObjectCtr===void 0||t[Lr]!==null&&t[Ir]!==null&&(e.lastObjectCtr===null||e.lastObjectCtr<t[Ir]||e.lastObjectCtr===t[Ir]&&r[e.lastObjectActor]<r[t[Lr]]))&&(e.lastObjectActor=t[Lr],e.lastObjectCtr=t[Ir],e.lastKey=t[Ft]!==null?t[Ft]:void 0,e.numVisible=0)}function I6(e){for(let i of e.columns)i.decoder.reset();let t=Math.ceil(e.numOps/(.8*xh)),r=[],n=0;for(let i=1;i<=t;i++){let a=Math.ceil(i*e.numOps/t)-n,s=e.columns.map(f=>({columnId:f.columnId,encoder:zl(f.columnId)}));Gl(s,e.columns,a);let c={columns:s.map(f=>{let h=b2(f.columnId,f.encoder.buffer);return{columnId:f.columnId,decoder:h}})};S6(c),r.push(c),n+=a}return r}function bH(e){let t=e[0].columns.map(r=>({columnId:r.columnId,encoder:zl(r.columnId)}));for(let r of e){for(let n of r.columns)n.decoder.reset();Gl(t,r.columns,r.numOps)}return t}function Gl(e,t,r){if(r===0)return;let n=0,i=-1,a=0,s=-1,u=0;for(let c of e){for(;n<t.length&&t[n].columnId<c.columnId;)n++;let f=null;n<t.length&&t[n].columnId===c.columnId&&t[n].decoder.buf.byteLength>0&&(f=t[n].decoder);let h=c.columnId>>4===i?a:r;if(c.columnId%8===Tn.GROUP_CARD)i=c.columnId>>4,f?a=c.encoder.copyFrom(f,{count:r,sumValues:!0}).sum:(c.encoder.appendValue(0,r),a=0);else if(c.columnId%8===Tn.VALUE_LEN)if(f){if(n+1===t.length||t[n+1].columnId!==c.columnId+1)throw new RangeError("VALUE_LEN column without accompanying VALUE_RAW column");s=c.columnId+1,u=c.encoder.copyFrom(f,{count:h,sumValues:!0,sumShift:4}).sum}else c.encoder.appendValue(null,h),s=c.columnId+1,u=0;else if(c.columnId%8===Tn.VALUE_RAW){if(c.columnId!==s)throw new RangeError("VALUE_RAW column without accompanying VALUE_LEN column");u>0&&c.encoder.appendRawBytes(f.readRawBytes(u))}else if(f)c.encoder.copyFrom(f,{count:h});else{let g=c.columnId%8===Tn.BOOLEAN?!1:null;c.encoder.appendValue(g,h)}}}function v2(e,t){let r=[],n,i=-1,a=0,s=-1,u=0;for(let c of e){if(c.columnId%8===Tn.VALUE_RAW){if(c.columnId!==s)throw new RangeError("unexpected VALUE_RAW column");n=c.decoder.readRawBytes(u)}else if(c.columnId%8===Tn.GROUP_CARD)i=c.columnId>>4,a=c.decoder.readValue()||0,n=a;else if(c.columnId>>4===i){n=[],c.columnId%8===Tn.VALUE_LEN&&(s=c.columnId+1,u=0);for(let f=0;f<a;f++){let h=c.decoder.readValue();c.columnId%8===Tn.ACTOR_ID&&t&&typeof h=="number"&&(h=t[h]),c.columnId%8===Tn.VALUE_LEN&&(u+=n>>>4),n.push(h)}}else n=c.decoder.readValue(),c.columnId%8===Tn.ACTOR_ID&&t&&typeof n=="number"&&(n=t[n]),c.columnId%8===Tn.VALUE_LEN&&(s=c.columnId+1,u=n>>>4);r.push(n)}return r}function _p(e,t,r){let n=0,i=-1,a=0;for(let s of e){for(;n<t.length&&t[n].columnId<s.columnId;)n++;if(n<t.length&&t[n].columnId===s.columnId){let u=r[n];if(s.columnId%8===Tn.GROUP_CARD)i=s.columnId>>4,a=u,s.encoder.appendValue(u);else if(s.columnId>>4===i){if(!Array.isArray(u)||u.length!==a)throw new RangeError("bad group value");for(let c of u)s.encoder.appendValue(c)}else s.columnId%8===Tn.VALUE_RAW?u&&s.encoder.appendRawBytes(u):s.encoder.appendValue(u)}else if(s.columnId%8===Tn.GROUP_CARD)i=s.columnId>>4,a=0,s.encoder.appendValue(0);else if(s.columnId%8!==Tn.VALUE_RAW){let u=s.columnId>>4===i?a:1,c=null;s.columnId%8===Tn.BOOLEAN&&(c=!1),s.columnId%8===Tn.VALUE_LEN&&(c=0),s.encoder.appendValue(c,u)}}}function w2(e,t){let r=e.blocks[t];if(r.columns[Zr].decoder.done){if(t===e.blocks.length-1)return{docOp:null,blockIndex:t};t+=1,r=e.blocks[t];for(let n of r.columns)n.decoder.reset();return{docOp:v2(r.columns),blockIndex:t}}else return{docOp:v2(r.columns),blockIndex:t}}function B6(e,t){for(;t.changeIndex<t.changes.length-1&&(!t.columns||t.columns[Zr].decoder.done);){t.changeIndex+=1;let n=t.changes[t.changeIndex];t.columns=$h(n.columns,er),t.opCtr=n.startOp,t.columns[Zr].decoder.done&&(n.maxOp=n.startOp-1),FH(e,t.columns);let{actorIds:i,actorTable:a}=SH(e.actorIds,n);e.actorIds=i,t.actorTable=a,t.actorIndex=e.actorIds.indexOf(n.actorIds[0])}if(t.columns[Zr].decoder.done){t.done=!0,t.nextOp=null;return}t.nextOp=v2(t.columns,t.actorTable),t.nextOp[Wn]=t.actorIndex,t.nextOp[Ar]=t.opCtr,t.changes[t.changeIndex].maxOp=t.opCtr,t.opCtr>e.maxOp&&(e.maxOp=t.opCtr),t.opCtr+=1;let r=t.nextOp;if(r[Ir]===null&&r[Lr]!==null||r[Ir]!==null&&r[Lr]===null)throw new RangeError(`Mismatched object reference: (${r[Ir]}, ${r[Lr]})`);if(r[On]===null&&r[Pn]!==null||r[On]===0&&r[Pn]!==null||r[On]>0&&r[Pn]===null)throw new RangeError(`Mismatched operation key: (${r[On]}, ${r[Pn]})`)}function Kl(e,t){return t==="list"||t==="text"?{objectId:e,type:t,edits:[]}:{objectId:e,type:t,props:{}}}function A6(e,t,r=1){let n=Cp(e),i=Cp(t);return n.actorId===i.actorId&&n.counter+r===i.counter}function Rh(e,t){if(e.length===0){e.push(t);return}let r=e[e.length-1];r.action==="insert"&&t.action==="insert"&&r.index===t.index-1&&r.value.type==="value"&&t.value.type==="value"&&r.elemId===r.opId&&t.elemId===t.opId&&A6(r.elemId,t.elemId,1)&&r.value.datatype===t.value.datatype&&typeof r.value.value==typeof t.value.value?(r.action="multi-insert",t.value.datatype&&(r.datatype=t.value.datatype),r.values=[r.value.value,t.value.value],delete r.value,delete r.opId):r.action==="multi-insert"&&t.action==="insert"&&r.index+r.values.length===t.index&&t.value.type==="value"&&t.elemId===t.opId&&A6(r.elemId,t.elemId,r.values.length)&&r.datatype===t.value.datatype&&typeof r.values[0]==typeof t.value.value?r.values.push(t.value.value):r.action==="remove"&&t.action==="remove"&&r.index===t.index?r.count+=t.count:e.push(t)}function E2(e,t,r,n,i,a){let s=!1;if(a)for(;!s&&e.length>0;){let u=e[e.length-1];if((u.action==="insert"||u.action==="update")&&u.index===t)e.pop(),s=u.action==="insert";else if(u.action==="multi-insert"&&u.index+u.values.length-1===t)u.values.pop(),s=!0;else break}s?Rh(e,{action:"insert",index:t,elemId:r,opId:n,value:i}):Rh(e,{action:"update",index:t,opId:n,value:i})}function _H(e,t,r){let n=[];for(;e.length>0;){let a=e[e.length-1];if(a.action==="insert"){if(a.index!==t)throw new RangeError("last edit has unexpected index");n.unshift(e.pop());break}else if(a.action==="update"){if(a.index!==t)throw new RangeError("last edit has unexpected index");n.unshift(e.pop())}else throw new RangeError("last edit has unexpected action")}let i=!0;for(let a of n)E2(e,t,r,a.opId,a.value,i),i=!1}function A2(e,t,r,n,i,a,s,u){let c=!t,f=n[Zr]<Du.length?g6[Du[n[Zr]]]:null,h=`${n[Ar]}@${i.actorIds[n[Wn]]}`,g=n[Xn]?n[Wn]:n[Pn],p=n[Xn]?n[Ar]:n[On],d=n[Ft]?n[Ft]:`${p}@${i.actorIds[g]}`;n[Zr]%2===0&&!i.objectMeta[h]&&(i.objectMeta[h]={parentObj:r,parentKey:d,opId:h,type:f,children:{}},m2(i.objectMeta,[r,"children",d,h],{objectId:h,type:f,props:{}}));let w=!a[d];a[d]||(a[d]={visibleOps:[],hasChild:!1});let v=u!==void 0&&n[Ms]>0;v||(a[d].visibleOps.push(n),a[d].hasChild=a[d].hasChild||n[Zr]%2===0);let b=i.objectMeta[r].children[d];if(a[d].hasChild||b&&Object.keys(b).length>0){let C={};for(let F of a[d].visibleOps){let U=`${F[Ar]}@${i.actorIds[F[Wn]]}`;if(Du[F[Zr]]==="set")C[U]=Object.assign({type:"value"},bp(F[co],F[vc]));else if(F[Zr]%2===0){let k=F[Zr]<Du.length?g6[Du[F[Zr]]]:null;C[U]=Kl(U,k)}}m2(i.objectMeta,[r,"children",d],C)}let m,y;if(v&&Du[n[Zr]]==="set"&&(n[co]&15)===p2.COUNTER){a[d]||(a[d]={visibleOps:[],hasChild:!1}),a[d].counterStates||(a[d].counterStates={});let C=a[d].counterStates,F={opId:h,value:bp(n[co],n[vc]).value,succs:{}};for(let U=0;U<n[Ms];U++){let k=`${n[Vl][U]}@${i.actorIds[n[g2][U]]}`;C[k]=F,F.succs[k]=!0}}else if(Du[n[Zr]]==="inc"){if(!a[d]||!a[d].counterStates||!a[d].counterStates[h])throw new RangeError(`increment operation ${h} for unknown counter`);let C=a[d].counterStates[h];C.value+=bp(n[co],n[vc]).value,delete C.succs[h],Object.keys(C.succs).length===0&&(m=C.opId,y={type:"value",datatype:"counter",value:C.value})}else v||(Du[n[Zr]]==="set"?(m=h,y=Object.assign({type:"value"},bp(n[co],n[vc]))):n[Zr]%2===0&&(e[h]||(e[h]=Kl(h,f)),m=h,y=e[h]));e[r]||(e[r]=Kl(r,i.objectMeta[r].type));let D=e[r];if(n[Ft]===null)if(u===0&&!c&&a[d].action==="insert"&&(a[d].action="update",_H(D.edits,s,d),t&&t.lastObjectActor===n[Lr]&&t.lastObjectCtr===n[Ir]&&(t.numVisible-=1)),y)if(!a[d].action&&(u===void 0||c))a[d].action="insert",Rh(D.edits,{action:"insert",index:s,elemId:d,opId:m,value:y}),t&&t.lastObjectActor===n[Lr]&&t.lastObjectCtr===n[Ir]&&(t.numVisible+=1);else if(a[d].action==="remove"){let C=D.edits[D.edits.length-1];if(C.action!=="remove")throw new RangeError("last edit has unexpected type");C.count>1?C.count-=1:D.edits.pop(),a[d].action="update",E2(D.edits,s,d,m,y,!0),t&&t.lastObjectActor===n[Lr]&&t.lastObjectCtr===n[Ir]&&(t.numVisible+=1)}else E2(D.edits,s,d,m,y,!a[d].action),a[d].action||(a[d].action="update");else u===0&&!a[d].action&&(a[d].action="remove",Rh(D.edits,{action:"remove",index:s,count:1}),t&&t.lastObjectActor===n[Lr]&&t.lastObjectCtr===n[Ir]&&(t.numVisible-=1));else(y||!c)&&((w||!D.props[n[Ft]])&&(D.props[n[Ft]]={}),y&&(D.props[n[Ft]][m]=y))}function CH(e,t,r,n,i,a,s){let u=n.nextOp,c=u[Xn],f=u[Lr],h=u[Ir],g=f===null?"_root":`${h}@${i.actorIds[f]}`,p=n.actorIndex,d=i.actorIds[p],w=!1,v=!1,b={},m;({docOp:m,blockIndex:s}=w2(i,s));let y=m===null?0:1,D=m===null?0:m[Ms],C=null,F=[],U=[],k=[],S=null;for(n.objectIds.add(g);;){if(F.length===0){w=!1;let M=n.nextOp;for(;!n.done&&M[Wn]===p&&M[Xn]===c&&M[Lr]===u[Lr]&&M[Ir]===u[Ir];){let z=F.length>0?F[F.length-1]:null,W=!1;for(let ie=0;ie<M[lo];ie++)for(let Ce of F)M[Ml][ie]===Ce[Wn]&&M[ql][ie]===Ce[Ar]&&(W=!0);if(M!==u){if(!(c&&z!==null&&M[Ft]===null&&M[Pn]===z[Wn]&&M[On]===z[Ar])){if(!(!c&&z!==null&&M[Ft]!==null&&M[Ft]===z[Ft]&&!W)){if(!(!c&&z!==null&&M[Ft]===null&&z[Ft]===null&&M[Pn]===z[Pn]&&M[On]===z[On]&&!W)){if(!(!c&&z===null&&M[Ft]===null&&m&&m[Xn]&&m[Ft]===null&&m[Wn]===M[Pn]&&m[Ar]===M[On])){if(!(!c&&z===null&&M[Ft]!==null&&S!==null&&S<M[Ft]))break}}}}}S=M!==null?M[Ft]:null,F.push(n.nextOp),U.push(n.columns),k.push(new Array(n.nextOp[lo])),B6(i,n),M=n.nextOp}}F.length>0&&(C=F[0]);let B=m&&m[Lr]===C[Lr]&&m[Ir]===C[Ir],T=m&&m[Ft]!==null&&m[Ft]===C[Ft],P=m&&m[Ft]===null&&C[Ft]===null&&(!m[Xn]&&m[Pn]===C[Pn]&&m[On]===C[On]||m[Xn]&&m[Wn]===C[Pn]&&m[Ar]===C[On]);if(F.length===0&&!(B&&(T||P)))break;let j=!1,Y=0;if(c||!B||m[Ft]===null&&C[Ft]!==null||m[Ft]!==null&&C[Ft]!==null&&C[Ft]<m[Ft]){if(Y=F.length,!B&&!w&&C[Ft]===null&&!C[Xn])throw new RangeError(`could not find list element with ID: ${C[On]}@${i.actorIds[C[Pn]]}`)}else if(T||P||w){for(let M=0;M<F.length;M++){let z=F[M];for(let W=0;W<z[lo];W++)if(z[Ml][W]===m[Wn]&&z[ql][W]===m[Ar]){let ie=0;for(;ie<m[Ms]&&(m[Vl][ie]<z[Ar]||m[Vl][ie]===z[Ar]&&i.actorIds[m[g2][ie]]<d);)ie++;m[Vl].splice(ie,0,z[Ar]),m[g2].splice(ie,0,p),m[Ms]++,k[M][W]=!0;break}}if(P&&(w=!0),w&&!P)Y=F.length;else if(F.length===0||m[Ar]<C[Ar]||m[Ar]===C[Ar]&&i.actorIds[m[Wn]]<d){j=!0,A2(e,t,g,m,i,b,a,D);for(let M=F.length-1;M>=0;M--){let z=!0;for(let W=0;W<F[M][lo];W++)k[M][W]||(z=!1);Du[F[M][Zr]]==="del"&&z&&(F.splice(M,1),U.splice(M,1),k.splice(M,1))}}else{if(m[Ar]===C[Ar]&&i.actorIds[m[Wn]]===d)throw new RangeError(`duplicate operation ID: ${C[Ar]}@${d}`);Y=1}}else j=!0;if(j&&(_p(r,i.blocks[s].columns,m),d2(t,m,i.actorIds,!1),m[Xn]&&v&&(v=!1,a++),m[Ms]===0&&(v=!0),t.numOps++,{docOp:m,blockIndex:s}=w2(i,s),m!==null&&(y++,D=m[Ms])),Y>0){for(let M=0;M<Y;M++){let z=F[M];for(let W=0;W<z[lo];W++)if(!k[M][W])throw new RangeError(`no matching operation for pred: ${z[ql][W]}@${i.actorIds[z[Ml][W]]}`);_p(r,U[M],z),d2(t,z,i.actorIds,!0),A2(e,t,g,z,i,b,a),z[Xn]?(v=!1,a++):v=!0}Y===F.length?(F.length=0,U.length=0,k.length=0):(F.splice(0,Y),U.splice(0,Y),k.splice(0,Y)),t.numOps+=Y}}return m&&(_p(r,i.blocks[s].columns,m),t.numOps++,d2(t,m,i.actorIds,!1)),{docOpsConsumed:y,blockIndex:s}}function DH(e,t,r){let[n,i,a,s,u,c,f,h]=t.nextOp,g=n===null?null:r.actorIds[n],p=a===null?null:r.actorIds[a],d={objActor:g,objActorNum:n,objCtr:i,keyActor:p,keyActorNum:a,keyCtr:s,keyStr:u,idActor:r.actorIds[c],idCtr:f,insert:h,objId:g===null?"_root":`${i}@${g}`},{blockIndex:w,skipCount:v,visibleCount:b}=C6(r,d),m=r.blocks[w];for(let B of m.columns)B.decoder.reset();let y=v===0||m.firstVisibleActor===void 0||!h&&m.firstVisibleActor===a&&m.firstVisibleCtr===s,D={columns:void 0,bloom:new Uint8Array(m.bloom),numOps:v,lastKey:m.lastKey,numVisible:m.numVisible,lastObjectActor:m.lastObjectActor,lastObjectCtr:m.lastObjectCtr,firstVisibleActor:y?void 0:m.firstVisibleActor,firstVisibleCtr:y?void 0:m.firstVisibleCtr,lastVisibleActor:void 0,lastVisibleCtr:void 0},C=m.columns.map(B=>({columnId:B.columnId,encoder:zl(B.columnId)}));Gl(C,m.columns,v);let{blockIndex:F,docOpsConsumed:U}=CH(e,D,C,t,r,b,w),k=r.blocks[F],S=-v-U;for(let B=w;B<=F;B++)S+=r.blocks[B].numOps;Gl(C,k.columns,S),D.numOps+=S;for(let B of k.columns)if(!B.decoder.done)throw new RangeError(`excess ops in column ${B.columnId}`);if(D.columns=C.map(B=>{let T=b2(B.columnId,B.encoder.buffer);return{columnId:B.columnId,decoder:T}}),w===F&&D.numOps<=xh)S>0&&m.lastVisibleActor!==void 0&&m.lastVisibleCtr!==void 0&&(D.lastVisibleActor=m.lastVisibleActor,D.lastVisibleCtr=m.lastVisibleCtr),r.blocks[w]=D;else{let B=I6(D);r.blocks.splice(w,F-w+1,...B)}}function FH(e,t){if(t[Lr].columnId!==er[Lr].columnId||er[Lr].columnName!=="objActor"||t[Ir].columnId!==er[Ir].columnId||er[Ir].columnName!=="objCtr"||t[Pn].columnId!==er[Pn].columnId||er[Pn].columnName!=="keyActor"||t[On].columnId!==er[On].columnId||er[On].columnName!=="keyCtr"||t[Ft].columnId!==er[Ft].columnId||er[Ft].columnName!=="keyStr"||t[Wn].columnId!==er[Wn].columnId||er[Wn].columnName!=="idActor"||t[Ar].columnId!==er[Ar].columnId||er[Ar].columnName!=="idCtr"||t[Xn].columnId!==er[Xn].columnId||er[Xn].columnName!=="insert"||t[Zr].columnId!==er[Zr].columnId||er[Zr].columnName!=="action"||t[co].columnId!==er[co].columnId||er[co].columnName!=="valLen"||t[vc].columnId!==er[vc].columnId||er[vc].columnName!=="valRaw"||t[lo].columnId!==er[lo].columnId||er[lo].columnName!=="predNum"||t[Ml].columnId!==er[Ml].columnId||er[Ml].columnName!=="predActor"||t[ql].columnId!==er[ql].columnId||er[ql].columnName!=="predCtr")throw new RangeError("unexpected columnId");let r=e.blocks[0].columns;if(!t.every(n=>v6.includes(n.columnId)||r.find(i=>i.columnId===n.columnId))){let n=r.map(i=>({columnId:i.columnId}));for(let i of t){let{columnId:a}=i;!v6.includes(a)&&!r.find(s=>s.columnId===a)&&n.push({columnId:a})}n.sort((i,a)=>i.columnId-a.columnId);for(let i=0;i<e.blocks.length;i++){let a=Dp(e.blocks[i]);a.columns=$h(a.columns.map(s=>({columnId:s.columnId,buffer:s.decoder.buf})),n),e.blocks[i]=a}}}function SH(e,t){if(e.indexOf(t.actorIds[0])<0){if(t.seq!==1)throw new RangeError(`Seq ${t.seq} is the first change for actor ${t.actorIds[0]}`);e=e.concat([t.actorIds[0]])}let r=[];for(let n of t.actorIds){let i=e.indexOf(n);if(i<0)throw new RangeError(`actorId ${n} is not known to document`);r.push(i)}return{actorIds:e,actorTable:r}}function IH(e,t,r){for(let n of t){let i=r.objectMeta[n],a=null,s=!1;for(;;){let u=a&&Object.keys(i.children[a.parentKey]).length>0;if(e[n]||(e[n]=Kl(n,i.type)),a&&u)if(i.type==="list"||i.type==="text"){for(let c of e[n].edits)c.opId&&i.children[a.parentKey][c.opId]&&(s=!0);if(!s){let c=Cp(n),f=Cp(a.parentKey),h={objActor:c.actorId,objCtr:c.counter,keyActor:f.actorId,keyCtr:f.counter,objActorNum:r.actorIds.indexOf(c.actorId),keyActorNum:r.actorIds.indexOf(f.actorId),keyStr:null,insert:!1,objId:n},{visibleCount:g}=C6(r,h);for(let[p,d]of Object.entries(i.children[a.parentKey])){let w=d;d.objectId&&(e[d.objectId]||(e[d.objectId]=Kl(d.objectId,d.type)),w=e[d.objectId]);let v={action:"update",index:g,opId:p,value:w};Rh(e[n].edits,v)}}}else{e[n].props[a.parentKey]||(e[n].props[a.parentKey]={});let c=e[n].props[a.parentKey];for(let[f,h]of Object.entries(i.children[a.parentKey]))c[f]?s=!0:h.objectId?(e[h.objectId]||(e[h.objectId]=Kl(h.objectId,h.type)),c[f]=e[h.objectId]):c[f]=h}if(s||!i.parentObj||a&&!u)break;a=i,n=i.parentObj,i=r.objectMeta[n]}}return e}function BH(e,t,r,n,i){let a=new Set(r.heads),s=new Set,u=Dp(r.clock),c=[],f=[];for(let h of t){if(r.changeIndexByHash[h.hash]!==void 0||s.has(h.hash))continue;let g=(u[h.actor]||0)+1,p=!0;for(let d of h.deps){let w=r.changeIndexByHash[d];(w===void 0||w===-1)&&!s.has(d)&&(p=!1)}if(!p)f.push(h);else if(h.seq<g){if(i)throw new RangeError(`Reuse of sequence number ${h.seq} for actor ${h.actor}`);return[[],t]}else{if(h.seq>g)throw new RangeError(`Skipped sequence number ${g} for actor ${h.actor}`);u[h.actor]=h.seq,s.add(h.hash);for(let d of h.deps)a.delete(d);a.add(h.hash),c.push(h)}}if(c.length>0){let h={changes:c,changeIndex:-1,objectIds:n};for(B6(r,h);!h.done;)DH(e,h,r);r.heads=[...a].sort(),r.clock=u}return[c,f]}function y6(e){for(let h of e.blocks[0].columns)h.decoder.reset();let t={},r=null,n=0,i={_root:{objectId:"_root",type:"map",props:{}}},a=null,s=null,u="_root",c=!1,f=0;for(;{docOp:r,blockIndex:n}=w2(e,n),r!==null;){(r[Lr]!==a||r[Ir]!==s)&&(u=`${r[Ir]}@${e.actorIds[r[Lr]]}`,a=r[Lr],s=r[Ir],t={},f=0,c=!1),r[Xn]&&c&&(c=!1,f++),r[Ms]===0&&(c=!0),r[Ar]>e.maxOp&&(e.maxOp=r[Ar]);for(let h=0;h<r[Ms];h++)r[Vl][h]>e.maxOp&&(e.maxOp=r[Vl][h]);A2(i,null,u,r,e,t,f,r[Ms])}return i._root}function $H(e){let t=$h(e.changesColumns,Hs),r=t[0].decoder,n=t[1].decoder,i=t[5].decoder,a=t[6].decoder;if(t[0].columnId!==Hs[0].columnId||Hs[0].columnName!=="actor"||t[1].columnId!==Hs[1].columnId||Hs[1].columnName!=="seq"||t[5].columnId!==Hs[5].columnId||Hs[5].columnName!=="depsNum"||t[6].columnId!==Hs[6].columnId||Hs[6].columnName!=="depsIndex")throw new RangeError("unexpected columnId");let s=0,u={},c=[],f=new Set;for(;!r.done;){let p=r.readValue(),d=n.readValue(),w=i.readValue(),v=e.actorIds[p];if(d!==1&&d!==u[v]+1)throw new RangeError(`Expected seq ${u[v]+1}, got ${d} for actor ${v}`);c.push(p),u[v]=d,f.add(s);for(let b=0;b<w;b++)f.delete(a.readValue());s++}let h=[...f].map(p=>e.actorIds[c[p]]).sort();for(let p of t)p.decoder.reset();let g=t.map(p=>({columnId:p.columnId,encoder:zl(p.columnId)}));return Gl(g,t,s),{clock:u,headActors:h,encoders:g,numChanges:s}}function RH(e,t,r,n){_p(e,Hs,[r.indexOf(t.actor),t.seq,t.maxOp,t.time,t.message,t.deps.length,t.deps.map(i=>n[i]),t.extraBytes?t.extraBytes.byteLength<<4|p2.BYTES:p2.BYTES,t.extraBytes])}var y2=class e{constructor(t){if(this.maxOp=0,this.haveHashGraph=!1,this.changes=[],this.changeIndexByHash={},this.dependenciesByHash={},this.dependentsByHash={},this.hashesByActor={},this.actorIds=[],this.heads=[],this.clock={},this.queue=[],this.objectMeta={_root:{parentObj:null,parentKey:null,opId:null,type:"map",children:{}}},t){let r=EH(t),{clock:n,headActors:i,encoders:a,numChanges:s}=$H(r);if(this.binaryDoc=t,this.changes=new Array(s),this.actorIds=r.actorIds,this.heads=r.heads,this.clock=n,this.changesEncoders=a,this.extraBytes=r.extraBytes,r.heads.length===1&&i.length===1&&(this.hashesByActor[i[0]]=[],this.hashesByActor[i[0]][n[i[0]]-1]=r.heads[0]),r.heads.length===r.headsIndexes.length)for(let c=0;c<r.heads.length;c++)this.changeIndexByHash[r.heads[c]]=r.headsIndexes[c];else if(r.heads.length===1)this.changeIndexByHash[r.heads[0]]=s-1;else for(let c of r.heads)this.changeIndexByHash[c]=-1;this.blocks=[{columns:$h(r.opsColumns,m6)}],S6(this.blocks[0]),this.blocks[0].numOps>xh&&(this.blocks=I6(this.blocks[0]));let u={blocks:this.blocks,actorIds:this.actorIds,objectMeta:this.objectMeta,maxOp:0};this.initPatch=y6(u),this.maxOp=u.maxOp}else this.haveHashGraph=!0,this.changesEncoders=Hs.map(r=>({columnId:r.columnId,encoder:zl(r.columnId)})),this.blocks=[{columns:$h([],m6),bloom:new Uint8Array(_6),numOps:0,lastKey:void 0,numVisible:void 0,lastObjectActor:void 0,lastObjectCtr:void 0,firstVisibleActor:void 0,firstVisibleCtr:void 0,lastVisibleActor:void 0,lastVisibleCtr:void 0}]}clone(){let t=new e;return t.maxOp=this.maxOp,t.haveHashGraph=this.haveHashGraph,t.changes=this.changes.slice(),t.changeIndexByHash=Dp(this.changeIndexByHash),t.dependenciesByHash=Dp(this.dependenciesByHash),t.dependentsByHash=Object.entries(this.dependentsByHash).reduce((r,[n,i])=>(r[n]=i.slice(),r),{}),t.hashesByActor=Object.entries(this.hashesByActor).reduce((r,[n,i])=>(r[n]=i.slice(),r),{}),t.actorIds=this.actorIds,t.heads=this.heads,t.clock=this.clock,t.blocks=this.blocks,t.objectMeta=this.objectMeta,t.queue=this.queue,t}applyChanges(t,r=!1){let n=t.map(h=>{let g=mH(h);return g.buffer=h,g}),i={_root:{objectId:"_root",type:"map",props:{}}},a={maxOp:this.maxOp,changeIndexByHash:this.changeIndexByHash,actorIds:this.actorIds,heads:this.heads,clock:this.clock,blocks:this.blocks.slice(),objectMeta:Object.assign({},this.objectMeta)},s=this.queue.length===0?n:n.concat(this.queue),u=[],c=new Set;for(;;){let[h,g]=BH(i,s,a,c,this.haveHashGraph);s=g;for(let p=0;p<h.length;p++)a.changeIndexByHash[h[p].hash]=this.changes.length+u.length+p;if(h.length>0&&(u=u.concat(h)),s.length===0)break;if(h.length===0){if(this.haveHashGraph)break;this.computeHashGraph(),a.changeIndexByHash=this.changeIndexByHash}}IH(i,c,a);for(let h of u){this.changes.push(h.buffer),this.hashesByActor[h.actor]||(this.hashesByActor[h.actor]=[]),this.hashesByActor[h.actor][h.seq-1]=h.hash,this.changeIndexByHash[h.hash]=this.changes.length-1,this.dependenciesByHash[h.hash]=h.deps,this.dependentsByHash[h.hash]=[];for(let g of h.deps)this.dependentsByHash[g]||(this.dependentsByHash[g]=[]),this.dependentsByHash[g].push(h.hash);RH(this.changesEncoders,h,a.actorIds,this.changeIndexByHash)}this.maxOp=a.maxOp,this.actorIds=a.actorIds,this.heads=a.heads,this.clock=a.clock,this.blocks=a.blocks,this.objectMeta=a.objectMeta,this.queue=s,this.binaryDoc=null,this.initPatch=null;let f={maxOp:this.maxOp,clock:this.clock,deps:this.heads,pendingChanges:this.queue.length,diffs:i._root};return r&&n.length===1&&(f.actor=n[0].actor,f.seq=n[0].seq),f}computeHashGraph(){let t=this.save();this.haveHashGraph=!0,this.changes=[],this.changeIndexByHash={},this.dependenciesByHash={},this.dependentsByHash={},this.hashesByActor={},this.clock={};for(let r of wH([t])){let n=gH(r);this.changes.push(n),this.changeIndexByHash[r.hash]=this.changes.length-1,this.dependenciesByHash[r.hash]=r.deps,this.dependentsByHash[r.hash]=[];for(let a of r.deps)this.dependentsByHash[a].push(r.hash);r.seq===1&&(this.hashesByActor[r.actor]=[]),this.hashesByActor[r.actor].push(r.hash);let i=(this.clock[r.actor]||0)+1;if(r.seq!==i)throw new RangeError(`Expected seq ${i}, got seq ${r.seq} from actor ${r.actor}`);this.clock[r.actor]=r.seq}}getChanges(t){if(this.haveHashGraph||this.computeHashGraph(),t.length===0)return this.changes.slice();let r=[],n={},i=[];for(let a of t){n[a]=!0;let s=this.dependentsByHash[a];if(!s)throw new RangeError(`hash not found: ${a}`);r.push(...s)}for(;r.length>0;){let a=r.pop();if(n[a]=!0,i.push(a),!this.dependenciesByHash[a].every(s=>n[s]))break;r.push(...this.dependentsByHash[a])}if(r.length===0&&this.heads.every(a=>n[a]))return i.map(a=>this.changes[this.changeIndexByHash[a]]);for(r=t.slice(),n={};r.length>0;){let a=r.pop();if(!n[a]){let s=this.dependenciesByHash[a];if(!s)throw new RangeError(`hash not found: ${a}`);r.push(...s),n[a]=!0}}return this.changes.filter(a=>!n[vH(a,!0).hash])}getChangesAdded(t){this.haveHashGraph||this.computeHashGraph();let r=this.heads.slice(),n={},i=[];for(;r.length>0;){let a=r.pop();!n[a]&&t.changeIndexByHash[a]===void 0&&(n[a]=!0,i.push(a),r.push(...this.dependenciesByHash[a]))}return i.reverse().map(a=>this.changes[this.changeIndexByHash[a]])}getChangeByHash(t){return this.haveHashGraph||this.computeHashGraph(),this.changes[this.changeIndexByHash[t]]}getMissingDeps(t=[]){this.haveHashGraph||this.computeHashGraph();let r=new Set(t),n=new Set;for(let a of this.queue){n.add(a.hash);for(let s of a.deps)r.add(s)}let i=[];for(let a of r)this.changeIndexByHash[a]===void 0&&!n.has(a)&&i.push(a);return i.sort()}save(){if(this.binaryDoc)return this.binaryDoc;let t=this.changesEncoders.map(n=>({columnId:n.columnId,encoder:zl(n.columnId)})),r=this.changesEncoders.map(n=>{let i=b2(n.columnId,n.encoder.buffer);return{columnId:n.columnId,decoder:i}});return Gl(t,r,this.changes.length),this.binaryDoc=AH({changesColumns:this.changesEncoders,opsColumns:bH(this.blocks),actorIds:this.actorIds,heads:this.heads,headsIndexes:this.heads.map(n=>this.changeIndexByHash[n]),extraBytes:this.extraBytes}),this.changesEncoders=t,this.binaryDoc}getPatch(){let t={_root:{parentObj:null,parentKey:null,opId:null,type:"map",children:{}}},r={blocks:this.blocks,actorIds:this.actorIds,objectMeta:t,maxOp:0},n=this.initPatch?this.initPatch:y6(r);return{maxOp:this.maxOp,clock:this.clock,deps:this.heads,pendingChanges:this.queue.length,diffs:n}}};$6.exports={MAX_BLOCK_SIZE:xh,BackendDoc:y2,bloomFilterContains:F6}});var P6=ce((bX,x6)=>{function xH(e){if(e.frozen)throw new Error("Attempting to use an outdated Automerge document that has already been updated. Please use the latest document state, or call Automerge.clone() if you really need to use this old document state.");return e.state}x6.exports={backendState:xH}});var _2=ce((_X,k6)=>{var{encodeChange:PH}=Bh(),{BackendDoc:T6}=R6(),{backendState:qs}=P6();function OH(){return{state:new T6,heads:[]}}function TH(e){return{state:qs(e).clone(),heads:e.heads}}function NH(e){e.state=null,e.frozen=!0}function kH(e,t){let r=qs(e),n=r.applyChanges(t);return e.frozen=!0,[{state:r,heads:r.heads},n]}function O6(e,t,r){if(e.hashesByActor[t]&&e.hashesByActor[t][r]||!e.haveHashGraph&&(e.computeHashGraph(),e.hashesByActor[t]&&e.hashesByActor[t][r]))return e.hashesByActor[t][r];throw new RangeError(`Unknown change: actorId = ${t}, seq = ${r+1}`)}function LH(e,t){let r=qs(e);if(t.seq<=r.clock[t.actor])throw new RangeError("Change request has already been applied");if(t.seq>1){let s=O6(r,t.actor,t.seq-2);if(!s)throw new RangeError(`Cannot find hash of localChange before seq=${t.seq}`);let u={[s]:!0};for(let c of t.deps)u[c]=!0;t.deps=Object.keys(u).sort()}let n=PH(t),i=r.applyChanges([n],!0);e.frozen=!0;let a=O6(r,t.actor,t.seq-1);return i.deps=i.deps.filter(s=>s!==a),[{state:r,heads:r.heads},i,n]}function UH(e){return qs(e).save()}function jH(e){let t=new T6(e);return{state:t,heads:t.heads}}function HH(e,t){let r=qs(e);return r.applyChanges(t),e.frozen=!0,{state:r,heads:r.heads}}function MH(e){return qs(e).getPatch()}function qH(e){return e.heads}function VH(e){return N6(e,[])}function N6(e,t){if(!Array.isArray(t))throw new TypeError("Pass an array of hashes to Backend.getChanges()");return qs(e).getChanges(t)}function KH(e,t){return qs(t).getChangesAdded(qs(e))}function zH(e,t){return qs(e).getChangeByHash(t)}function GH(e,t=[]){return qs(e).getMissingDeps(t)}k6.exports={init:OH,clone:TH,free:NH,applyChanges:kH,applyLocalChange:LH,save:UH,load:jH,loadChanges:HH,getPatch:MH,getHeads:qH,getAllChanges:VH,getChanges:N6,getChangesAdded:KH,getChangeByHash:zH,getMissingDeps:GH}});var K6=ce((CX,V6)=>{var Vs=_2(),{hexStringToBytes:L6,bytesToHexString:YH,Encoder:F2,Decoder:S2}=i2(),{decodeChangeMeta:Ip}=Bh(),{copyObject:WH}=Us(),U6=32,j6=66,H6=67,XH=10,JH=7,Ph=class{constructor(t){if(Array.isArray(t)){this.numEntries=t.length,this.numBitsPerEntry=XH,this.numProbes=JH,this.bits=new Uint8Array(Math.ceil(this.numEntries*this.numBitsPerEntry/8));for(let r of t)this.addHash(r)}else if(t instanceof Uint8Array)if(t.byteLength===0)this.numEntries=0,this.numBitsPerEntry=0,this.numProbes=0,this.bits=t;else{let r=new S2(t);this.numEntries=r.readUint32(),this.numBitsPerEntry=r.readUint32(),this.numProbes=r.readUint32(),this.bits=r.readRawBytes(Math.ceil(this.numEntries*this.numBitsPerEntry/8))}else throw new TypeError("invalid argument")}get bytes(){if(this.numEntries===0)return new Uint8Array(0);let t=new F2;return t.appendUint32(this.numEntries),t.appendUint32(this.numBitsPerEntry),t.appendUint32(this.numProbes),t.appendRawBytes(this.bits),t.buffer}getProbes(t){let r=L6(t),n=8*this.bits.byteLength;if(r.byteLength!==32)throw new RangeError(`Not a 256-bit hash: ${t}`);let i=((r[0]|r[1]<<8|r[2]<<16|r[3]<<24)>>>0)%n,a=((r[4]|r[5]<<8|r[6]<<16|r[7]<<24)>>>0)%n,s=((r[8]|r[9]<<8|r[10]<<16|r[11]<<24)>>>0)%n,u=[i];for(let c=1;c<this.numProbes;c++)i=(i+a)%n,a=(a+s)%n,u.push(i);return u}addHash(t){for(let r of this.getProbes(t))this.bits[r>>>3]|=1<<(r&7)}containsHash(t){if(this.numEntries===0)return!1;for(let r of this.getProbes(t))if(!(this.bits[r>>>3]&1<<(r&7)))return!1;return!0}};function Fp(e,t){if(!Array.isArray(t))throw new TypeError("hashes must be an array");e.appendUint32(t.length);for(let r=0;r<t.length;r++){if(r>0&&t[r-1]>=t[r])throw new RangeError("hashes must be sorted");let n=L6(t[r]);if(n.byteLength!==U6)throw new TypeError("heads hashes must be 256 bits");e.appendRawBytes(n)}}function Sp(e){let t=e.readUint32(),r=[];for(let n=0;n<t;n++)r.push(YH(e.readRawBytes(U6)));return r}function C2(e){let t=new F2;t.appendByte(j6),Fp(t,e.heads),Fp(t,e.need),t.appendUint32(e.have.length);for(let r of e.have)Fp(t,r.lastSync),t.appendPrefixedBytes(r.bloom);t.appendUint32(e.changes.length);for(let r of e.changes)t.appendPrefixedBytes(r);return t.buffer}function M6(e){let t=new S2(e),r=t.readByte();if(r!==j6)throw new RangeError(`Unexpected message type: ${r}`);let n=Sp(t),i=Sp(t),a=t.readUint32(),s={heads:n,need:i,have:[],changes:[]};for(let c=0;c<a;c++){let f=Sp(t),h=t.readPrefixedBytes(t);s.have.push({lastSync:f,bloom:h})}let u=t.readUint32();for(let c=0;c<u;c++){let f=t.readPrefixedBytes();s.changes.push(f)}return s}function ZH(e){let t=new F2;return t.appendByte(H6),Fp(t,e.sharedHeads),t.buffer}function QH(e){let t=new S2(e),r=t.readByte();if(r!==H6)throw new RangeError(`Unexpected record type: ${r}`);let n=Sp(t);return Object.assign(q6(),{sharedHeads:n})}function eM(e,t){let n=Vs.getChanges(e,t).map(i=>Ip(i,!0).hash);return{lastSync:t,bloom:new Ph(n).bytes}}function tM(e,t,r){if(t.length===0)return r.map(g=>Vs.getChangeByHash(e,g)).filter(g=>g!==void 0);let n={},i=[];for(let g of t){for(let p of g.lastSync)n[p]=!0;i.push(new Ph(g.bloom))}let a=Vs.getChanges(e,Object.keys(n)).map(g=>Ip(g,!0)),s={},u={},c={};for(let g of a){s[g.hash]=!0;for(let p of g.deps)u[p]||(u[p]=[]),u[p].push(g.hash);i.every(p=>!p.containsHash(g.hash))&&(c[g.hash]=!0)}let f=Object.keys(c);for(;f.length>0;){let g=f.pop();if(u[g])for(let p of u[g])c[p]||(c[p]=!0,f.push(p))}let h=[];for(let g of r)if(c[g]=!0,!s[g]){let p=Vs.getChangeByHash(e,g);p&&h.push(p)}for(let g of a)c[g.hash]&&h.push(g.change);return h}function q6(){return{sharedHeads:[],lastSentHeads:[],theirHeads:null,theirNeed:null,theirHave:null,sentHashes:{}}}function D2(e,t){return e.length===t.length&&e.every((r,n)=>r===t[n])}function rM(e,t){if(!e)throw new Error("generateSyncMessage called with no Automerge document");if(!t)throw new Error("generateSyncMessage requires a syncState, which can be created with initSyncState()");let{sharedHeads:r,lastSentHeads:n,theirHeads:i,theirNeed:a,theirHave:s,sentHashes:u}=t,c=Vs.getHeads(e),f=Vs.getMissingDeps(e,i||[]),h=[];if((!i||f.every(v=>i.includes(v)))&&(h=[eM(e,r)]),s&&s.length>0&&!s[0].lastSync.every(b=>Vs.getChangeByHash(e,b))){let b={heads:c,need:[],have:[{lastSync:[],bloom:new Uint8Array(0)}],changes:[]};return[t,C2(b)]}let g=Array.isArray(s)&&Array.isArray(a)?tM(e,s,a):[],p=Array.isArray(n)&&D2(c,n),d=Array.isArray(i)&&D2(c,i);if(p&&d&&g.length===0)return[t,null];g=g.filter(v=>!u[Ip(v,!0).hash]);let w={heads:c,have:h,need:f,changes:g};if(g.length>0){u=WH(u);for(let v of g)u[Ip(v,!0).hash]=!0}return t=Object.assign({},t,{lastSentHeads:c,sentHashes:u}),[t,C2(w)]}function nM(e,t,r){let n=t.filter(s=>!e.includes(s)),i=r.filter(s=>t.includes(s));return[...new Set([...n,...i])].sort()}function iM(e,t,r){if(!e)throw new Error("generateSyncMessage called with no Automerge document");if(!t)throw new Error("generateSyncMessage requires a syncState, which can be created with initSyncState()");let{sharedHeads:n,lastSentHeads:i,sentHashes:a}=t,s=null,u=M6(r),c=Vs.getHeads(e);u.changes.length>0&&([e,s]=Vs.applyChanges(e,u.changes),n=nM(c,Vs.getHeads(e),n)),u.changes.length===0&&D2(u.heads,c)&&(i=u.heads);let f=u.heads.filter(g=>Vs.getChangeByHash(e,g));f.length===u.heads.length?(n=u.heads,u.heads.length===0&&(i=[],a=[])):n=[...new Set(f.concat(n))].sort();let h={sharedHeads:n,lastSentHeads:i,theirHave:u.have,theirHeads:u.heads,theirNeed:u.need,sentHashes:a};return[e,h,s]}V6.exports={receiveSyncMessage:iM,generateSyncMessage:rM,encodeSyncMessage:C2,decodeSyncMessage:M6,initSyncState:q6,encodeSyncState:ZH,decodeSyncState:QH,BloomFilter:Ph}});var G6=ce((DX,z6)=>{var{init:sM,clone:aM,free:uM,applyChanges:oM,applyLocalChange:cM,save:lM,load:fM,loadChanges:hM,getPatch:dM,getHeads:pM,getAllChanges:gM,getChanges:mM,getChangesAdded:vM,getChangeByHash:wM,getMissingDeps:EM}=_2(),{receiveSyncMessage:AM,generateSyncMessage:yM,encodeSyncMessage:bM,decodeSyncMessage:_M,encodeSyncState:CM,decodeSyncState:DM,initSyncState:FM}=K6();z6.exports={init:sM,clone:aM,free:uM,applyChanges:oM,applyLocalChange:cM,save:lM,load:fM,loadChanges:hM,getPatch:dM,getHeads:pM,getAllChanges:gM,getChanges:mM,getChangesAdded:vM,getChangeByHash:wM,getMissingDeps:EM,receiveSyncMessage:AM,generateSyncMessage:yM,encodeSyncMessage:bM,decodeSyncMessage:_M,encodeSyncState:CM,decodeSyncState:DM,initSyncState:FM}});var eF=ce((FX,B2)=>{var SM=z0(),an=nD(),{OPTIONS:Y6}=Eu(),{encodeChange:IM,decodeChange:W6}=Bh(),{isObject:I2}=Us(),qr=G6();function Oh(e){if(typeof e=="string")e={actorId:e};else if(typeof e>"u")e={};else if(!I2(e))throw new TypeError(`Unsupported options for init(): ${e}`);return an.init(Object.assign({backend:qr},e))}function BM(e,t){let r={message:"Initialization"};return X6(Oh(t),r,n=>Object.assign(n,e))}function X6(e,t,r){let[n]=an.change(e,t,r);return n}function $M(e,t){let[r]=an.emptyChange(e,t);return r}function RM(e,t={}){let r=qr.clone(an.getBackendState(e,"clone"));return Bp(Oh(t),qr.getPatch(r),r,[],t)}function xM(e){qr.free(an.getBackendState(e,"free"))}function PM(e,t={}){let r=qr.load(e);return Bp(Oh(t),qr.getPatch(r),r,[e],t)}function OM(e){return qr.save(an.getBackendState(e,"save"))}function TM(e,t){let r=an.getBackendState(e,"merge"),n=an.getBackendState(t,"merge","second"),i=qr.getChangesAdded(r,n),[a]=Z6(e,i);return a}function NM(e,t){let r=an.getBackendState(e,"getChanges"),n=an.getBackendState(t,"getChanges","second");return qr.getChanges(n,qr.getHeads(r))}function J6(e){return qr.getAllChanges(an.getBackendState(e,"getAllChanges"))}function Bp(e,t,r,n,i){let a=an.applyPatch(e,t,r),s=i.patchCallback||e[Y6].patchCallback;return s&&s(t,e,a,!1,n),a}function Z6(e,t,r={}){let n=an.getBackendState(e,"applyChanges"),[i,a]=qr.applyChanges(n,t);return[Bp(e,a,i,t,r),a]}function Q6(e,t){if(!I2(e)||!I2(t))return e===t;let r=Object.keys(e).sort(),n=Object.keys(t).sort();if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(r[i]!==n[i]||!Q6(e[r[i]],t[n[i]]))return!1;return!0}function kM(e){let t=an.getActorId(e),r=J6(e);return r.map((n,i)=>({get change(){return W6(n)},get snapshot(){let a=qr.loadChanges(qr.init(),r.slice(0,i+1));return an.applyPatch(Oh(t),qr.getPatch(a),a)}}))}function LM(e,t){let r=an.getBackendState(e,"generateSyncMessage");return qr.generateSyncMessage(r,t)}function UM(e,t,r){let n=an.getBackendState(e,"receiveSyncMessage"),[i,a,s]=qr.receiveSyncMessage(n,t,r);if(!s)return[e,a,s];let u=null;return e[Y6].patchCallback&&(u=qr.decodeSyncMessage(r).changes),[Bp(e,s,i,u,{}),a,s]}function jM(){return qr.initSyncState()}function HM(e){qr=e}B2.exports={init:Oh,from:BM,change:X6,emptyChange:$M,clone:RM,free:xM,load:PM,save:OM,merge:TM,getChanges:NM,getAllChanges:J6,applyChanges:Z6,encodeChange:IM,decodeChange:W6,equals:Q6,getHistory:kM,uuid:SM,Frontend:an,setDefaultBackend:HM,generateSyncMessage:LM,receiveSyncMessage:UM,initSyncState:jM,get Backend(){return qr}};for(let e of["getObjectId","getObjectById","getActorId","setActorId","getConflicts","getLastLocalChange","Text","Table","Counter","Observable","Int","Uint","Float64"])B2.exports[e]=an[e]});var Op=ce((fJ,aF)=>{"use strict";var Eq=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(let r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},x2=class e extends Error{constructor(t,r,n){super(t),Eq(this,e.prototype),this.name="GrammarError",this.location=r,n===void 0&&(n=[]),this.diagnostics=n,this.stage=null,this.problems=[["error",t,r,n]]}toString(){let t=super.toString();this.location&&(t+=`
 at `,this.location.source!==void 0&&this.location.source!==null&&(t+=`${this.location.source}:`),t+=`${this.location.start.line}:${this.location.start.column}`);for(let r of this.diagnostics)t+=`
 from `,r.location.source!==void 0&&r.location.source!==null&&(t+=`${r.location.source}:`),t+=`${r.location.start.line}:${r.location.start.column}: ${r.message}`;return t}format(t){let r=t.map(({source:a,text:s})=>({source:a,text:s.split(/\r\n|\n|\r/g)}));function n(a,s,u=""){let c="",f=r.find(({source:g})=>g===a.source),h=a.start;if(f){let g=a.end,p=f.text[h.line-1],w=(h.line===g.line?g.column:p.length+1)-h.column||1;u&&(c+=`
note: ${u}`),c+=`
 --> ${a.source}:${h.line}:${h.column}
${"".padEnd(s)} |
${h.line.toString().padStart(s)} | ${p}
${"".padEnd(s)} | ${"".padEnd(h.column-1)}${"".padEnd(w,"^")}`}else c+=`
 at ${a.source}:${h.line}:${h.column}`,u&&(c+=`: ${u}`);return c}function i(a,s,u,c=[]){let f;u?f=c.reduce((g,{location:p})=>Math.max(g,p.start.line),u.start.line):f=Math.max.apply(null,c.map(g=>g.location.start.line)),f=f.toString().length;let h=`${a}: ${s}`;u&&(h+=n(u,f));for(let g of c)h+=n(g.location,f,g.message);return h}return this.problems.filter(a=>a[0]!=="info").map(a=>i(...a)).join(`

`)}};aF.exports=x2});var _s=ce((hJ,uF)=>{"use strict";var Aq={build(e){function t(s,...u){return e[s.type](s,...u)}function r(){}function n(s,...u){return t(s.expression,...u)}function i(s){return function(u,...c){u[s].forEach(f=>t(f,...c))}}let a={grammar(s,...u){s.topLevelInitializer&&t(s.topLevelInitializer,...u),s.initializer&&t(s.initializer,...u),s.rules.forEach(c=>t(c,...u))},top_level_initializer:r,initializer:r,rule:n,named:n,choice:i("alternatives"),action:n,sequence:i("elements"),labeled:n,text:n,simple_and:n,simple_not:n,optional:n,zero_or_more:n,one_or_more:n,group:n,semantic_and:r,semantic_not:r,rule_ref:r,literal:r,class:r,any:r};return Object.keys(a).forEach(s=>{Object.prototype.hasOwnProperty.call(e,s)||(e[s]=a[s])}),t}};uF.exports=Aq});var ho=ce((dJ,cF)=>{"use strict";var yq=_s(),oF={findRule(e,t){for(let r=0;r<e.rules.length;r++)if(e.rules[r].name===t)return e.rules[r]},indexOfRule(e,t){for(let r=0;r<e.rules.length;r++)if(e.rules[r].name===t)return r;return-1},alwaysConsumesOnSuccess(e,t){function r(){return!0}function n(){return!1}let i=yq.build({choice(a){return a.alternatives.every(i)},sequence(a){return a.elements.some(i)},simple_and:n,simple_not:n,optional:n,zero_or_more:n,semantic_and:n,semantic_not:n,rule_ref(a){let s=oF.findRule(e,a.name);return s?i(s):void 0},literal(a){return a.value!==""},class:r,any:r});return i(t)}};cF.exports=oF});var P2=ce((pJ,lF)=>{"use strict";var bq={PUSH:0,PUSH_EMPTY_STRING:35,PUSH_UNDEFINED:1,PUSH_NULL:2,PUSH_FAILED:3,PUSH_EMPTY_ARRAY:4,PUSH_CURR_POS:5,POP:6,POP_CURR_POS:7,POP_N:8,NIP:9,APPEND:10,WRAP:11,TEXT:12,PLUCK:36,IF:13,IF_ERROR:14,IF_NOT_ERROR:15,WHILE_NOT_ERROR:16,MATCH_ANY:17,MATCH_STRING:18,MATCH_STRING_IC:19,MATCH_CHAR_CLASS:20,MATCH_REGEXP:20,ACCEPT_N:21,ACCEPT_STRING:22,FAIL:23,LOAD_SAVED_POS:24,UPDATE_SAVED_POS:25,CALL:26,RULE:27,SILENT_FAILS_ON:28,SILENT_FAILS_OFF:29};lF.exports=bq});var O2=ce((gJ,fF)=>{"use strict";var _q=_s(),Cq=ho(),Dq=Op(),Lh=1,wc=0,Uh=-1;function Tp(e){function t(s){return s.match=wc}function r(s){return a(s.expression),s.match=Lh}function n(s){return s.match=a(s.expression)}function i(s,u){let c=s.length,f=0,h=0;for(let g=0;g<c;++g){let p=a(s[g]);p===Lh&&++f,p===Uh&&++h}return f===c?Lh:u?h===c?Uh:wc:h>0?Uh:wc}let a=_q.build({rule(s){let u,c=0;if(typeof s.match>"u"){s.match=wc;do if(u=s.match,s.match=a(s.expression),++c>6)throw new Dq("Infinity cycle detected when trying to evaluate node match result",s.location);while(u!==s.match)}return s.match},named:n,choice(s){return s.match=i(s.alternatives,!0)},action:n,sequence(s){return s.match=i(s.elements,!1)},labeled:n,text:n,simple_and:n,simple_not(s){return s.match=-a(s.expression)},optional:r,zero_or_more:r,one_or_more:n,group:n,semantic_and:t,semantic_not:t,rule_ref(s){let u=Cq.findRule(e,s.name);return s.match=a(u)},literal(s){let u=s.value.length===0?Lh:wc;return s.match=u},class(s){let u=s.parts.length===0?Uh:wc;return s.match=u},any:t});a(e)}Tp.ALWAYS_MATCH=Lh;Tp.SOMETIMES_MATCH=wc;Tp.NEVER_MATCH=Uh;fF.exports=Tp});var dF=ce((mJ,hF)=>{"use strict";var Fq=ho(),Re=P2(),Sq=_s(),{ALWAYS_MATCH:Wl,SOMETIMES_MATCH:T2,NEVER_MATCH:N2}=O2();function Iq(e){let t=[],r=[],n=[],i=[];function a(y){let D=t.indexOf(y);return D===-1?t.push(y)-1:D}function s(y){let D={value:y.parts,inverted:y.inverted,ignoreCase:y.ignoreCase},C=JSON.stringify(D),F=r.findIndex(U=>JSON.stringify(U)===C);return F===-1?r.push(D)-1:F}function u(y){let D=JSON.stringify(y),C=n.findIndex(F=>JSON.stringify(F)===D);return C===-1?n.push(y)-1:C}function c(y,D,C){let F={predicate:y,params:D,body:C.code,location:C.codeLocation},U=JSON.stringify(F),k=i.findIndex(S=>JSON.stringify(S)===U);return k===-1?i.push(F)-1:k}function f(y){let D={};return Object.keys(y).forEach(C=>{D[C]=y[C]}),D}function h(y,...D){return y.concat(...D)}function g(y,D,C,F){return y===Wl?C:y===N2?F:D.concat([C.length,F.length],C,F)}function p(y,D){return y.concat([D.length],D)}function d(y,D,C,F){let U=Object.keys(C).map(k=>F-C[k]);return[Re.CALL,y,D,U.length].concat(U)}function w(y,D,C){let F=y.match|0;return h([Re.PUSH_CURR_POS],[Re.SILENT_FAILS_ON],m(y,{sp:C.sp+1,env:f(C.env),action:null}),[Re.SILENT_FAILS_OFF],g(D?-F:F,[D?Re.IF_ERROR:Re.IF_NOT_ERROR],h([Re.POP],[D?Re.POP:Re.POP_CURR_POS],[Re.PUSH_UNDEFINED]),h([Re.POP],[D?Re.POP_CURR_POS:Re.POP],[Re.PUSH_FAILED])))}function v(y,D,C){let F=c(!0,Object.keys(C.env),y);return h([Re.UPDATE_SAVED_POS],d(F,0,C.env,C.sp),g(y.match|0,[Re.IF],h([Re.POP],D?[Re.PUSH_FAILED]:[Re.PUSH_UNDEFINED]),h([Re.POP],D?[Re.PUSH_UNDEFINED]:[Re.PUSH_FAILED])))}function b(y){return p([Re.WHILE_NOT_ERROR],h([Re.APPEND],y))}let m=Sq.build({grammar(y){y.rules.forEach(m),y.literals=t,y.classes=r,y.expectations=n,y.functions=i},rule(y){y.bytecode=m(y.expression,{sp:-1,env:{},pluck:[],action:null})},named(y,D){let C=y.match|0,F=C===N2?null:u({type:"rule",value:y.name});return h([Re.SILENT_FAILS_ON],m(y.expression,D),[Re.SILENT_FAILS_OFF],g(C,[Re.IF_ERROR],[Re.FAIL,F],[]))},choice(y,D){function C(F,U){let k=F[0].match|0,S=m(F[0],{sp:U.sp,env:f(U.env),action:null});return k===Wl?S:h(S,F.length>1?g(T2,[Re.IF_ERROR],h([Re.POP],C(F.slice(1),U)),[]):[])}return C(y.alternatives,D)},action(y,D){let C=f(D.env),F=y.expression.type!=="sequence"||y.expression.elements.length===0,U=m(y.expression,{sp:D.sp+(F?1:0),env:C,action:y}),k=y.expression.match|0,S=F&&k!==N2?c(!1,Object.keys(C),y):null;return F?h([Re.PUSH_CURR_POS],U,g(k,[Re.IF_NOT_ERROR],h([Re.LOAD_SAVED_POS,1],d(S,1,C,D.sp+2)),[]),[Re.NIP]):U},sequence(y,D){function C(F,U){if(F.length>0){let k=y.elements.length-F.length+1;return h(m(F[0],{sp:U.sp,env:U.env,pluck:U.pluck,action:null}),g(F[0].match|0,[Re.IF_NOT_ERROR],C(F.slice(1),{sp:U.sp+1,env:U.env,pluck:U.pluck,action:U.action}),h(k>1?[Re.POP_N,k]:[Re.POP],[Re.POP_CURR_POS],[Re.PUSH_FAILED])))}else{if(U.pluck.length>0)return h([Re.PLUCK,y.elements.length+1,U.pluck.length],U.pluck.map(k=>U.sp-k));if(U.action){let k=c(!1,Object.keys(U.env),U.action);return h([Re.LOAD_SAVED_POS,y.elements.length],d(k,y.elements.length+1,U.env,U.sp))}else return h([Re.WRAP,y.elements.length],[Re.NIP])}}return h([Re.PUSH_CURR_POS],C(y.elements,{sp:D.sp+1,env:D.env,pluck:[],action:D.action}))},labeled(y,D){let C=D.env,F=y.label,U=D.sp+1;return F&&(C=f(D.env),D.env[y.label]=U),y.pick&&D.pluck.push(U),m(y.expression,{sp:D.sp,env:C,action:null})},text(y,D){return h([Re.PUSH_CURR_POS],m(y.expression,{sp:D.sp+1,env:f(D.env),action:null}),g(y.match|0,[Re.IF_NOT_ERROR],h([Re.POP],[Re.TEXT]),[Re.NIP]))},simple_and(y,D){return w(y.expression,!1,D)},simple_not(y,D){return w(y.expression,!0,D)},optional(y,D){return h(m(y.expression,{sp:D.sp,env:f(D.env),action:null}),g(-(y.expression.match|0),[Re.IF_ERROR],h([Re.POP],[Re.PUSH_NULL]),[]))},zero_or_more(y,D){let C=m(y.expression,{sp:D.sp+1,env:f(D.env),action:null});return h([Re.PUSH_EMPTY_ARRAY],C,b(C),[Re.POP])},one_or_more(y,D){let C=m(y.expression,{sp:D.sp+1,env:f(D.env),action:null});return h([Re.PUSH_EMPTY_ARRAY],C,g(y.expression.match|0,[Re.IF_NOT_ERROR],h(b(C),[Re.POP]),h([Re.POP],[Re.POP],[Re.PUSH_FAILED])))},group(y,D){return m(y.expression,{sp:D.sp,env:f(D.env),action:null})},semantic_and(y,D){return v(y,!1,D)},semantic_not(y,D){return v(y,!0,D)},rule_ref(y){return[Re.RULE,Fq.indexOfRule(e,y.name)]},literal(y){if(y.value.length>0){let D=y.match|0,F=D===T2||D===Wl&&!y.ignoreCase?a(y.ignoreCase?y.value.toLowerCase():y.value):null,U=D!==Wl?u({type:"literal",value:y.value,ignoreCase:y.ignoreCase}):null;return g(D,y.ignoreCase?[Re.MATCH_STRING_IC,F]:[Re.MATCH_STRING,F],y.ignoreCase?[Re.ACCEPT_N,y.value.length]:[Re.ACCEPT_STRING,F],[Re.FAIL,U])}return[Re.PUSH_EMPTY_STRING]},class(y){let D=y.match|0,C=D===T2?s(y):null,F=D!==Wl?u({type:"class",value:y.parts,inverted:y.inverted,ignoreCase:y.ignoreCase}):null;return g(D,[Re.MATCH_CHAR_CLASS,C],[Re.ACCEPT_N,1],[Re.FAIL,F])},any(y){let D=y.match|0,C=D!==Wl?u({type:"any"}):null;return g(D,[Re.MATCH_ANY],[Re.ACCEPT_N,1],[Re.FAIL,C])}});m(e)}hF.exports=Iq});var gF=ce((vJ,pF)=>{"use strict";var k2=class{constructor(t,r,n){this.sp=-1,this.maxSp=-1,this.varName=r,this.ruleName=t,this.type=n}name(t){if(t<0)throw new RangeError(`Rule '${this.ruleName}': The variable stack underflow: attempt to use a variable '${this.varName}<x>' at an index ${t}`);return this.varName+t}push(t){let r=this.name(++this.sp)+" = "+t+";";return this.sp>this.maxSp&&(this.maxSp=this.sp),r}pop(t){return t!==void 0?(this.sp-=t,Array.from({length:t},(r,n)=>this.name(this.sp+1+n))):this.name(this.sp--)}top(){return this.name(this.sp)}index(t){if(t<0)throw new RangeError(`Rule '${this.ruleName}': The variable stack overflow: attempt to get a variable at a negative index ${t}`);return this.name(this.sp-t)}result(){if(this.maxSp<0)throw new RangeError(`Rule '${this.ruleName}': The variable stack is empty, can't get the result'`);return this.name(0)}defines(){return this.maxSp<0?"":this.type+" "+Array.from({length:this.maxSp+1},(t,r)=>this.name(r)).join(", ")+";"}checkedIf(t,r,n){let i=this.sp;if(r(),n){let a=this.sp;if(this.sp=i,n(),a!==this.sp)throw new Error("Rule '"+this.ruleName+"', position "+t+": Branches of a condition can't move the stack pointer differently (before: "+i+", after then: "+a+", after else: "+this.sp+").")}}checkedLoop(t,r){let n=this.sp;if(r(),n!==this.sp)throw new Error("Rule '"+this.ruleName+"', position "+t+": Body of a loop can't move the stack pointer (before: "+n+", after: "+this.sp+").")}};pF.exports=k2});var L2=ce((wJ,mF)=>{"use strict";mF.exports="2.0.1"});var vF=ce(Np=>{"use strict";function Fu(e){return e.charCodeAt(0).toString(16).toUpperCase()}Np.hex=Fu;function Bq(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\v/g,"\\v").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,t=>"\\x0"+Fu(t)).replace(/[\x10-\x1F\x7F-\xFF]/g,t=>"\\x"+Fu(t)).replace(/[\u0100-\u0FFF]/g,t=>"\\u0"+Fu(t)).replace(/[\u1000-\uFFFF]/g,t=>"\\u"+Fu(t))}Np.stringEscape=Bq;function $q(e){return e.replace(/\\/g,"\\\\").replace(/\//g,"\\/").replace(/]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\v/g,"\\v").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,t=>"\\x0"+Fu(t)).replace(/[\x10-\x1F\x7F-\xFF]/g,t=>"\\x"+Fu(t)).replace(/[\u0100-\u0FFF]/g,t=>"\\u0"+Fu(t)).replace(/[\u1000-\uFFFF]/g,t=>"\\u"+Fu(t))}Np.regexpClassEscape=$q});var AF=ce(EF=>{var wF="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");EF.encode=function(e){if(0<=e&&e<wF.length)return wF[e];throw new TypeError("Must be between 0 and 63: "+e)}});var CF=ce(_F=>{var Rq=AF(),yF=5,bF=1<<yF,xq=bF-1,Pq=bF;function Oq(e){return e<0?(-e<<1)+1:(e<<1)+0}_F.encode=function(t){let r="",n,i=Oq(t);do n=i&xq,i>>>=yF,i>0&&(n|=Pq),r+=Rq.encode(n);while(i>0);return r}});var Lp=ce(go=>{function Tq(e,t,r){if(t in e)return e[t];if(arguments.length===3)return r;throw new Error('"'+t+'" is a required argument.')}go.getArg=Tq;var FF=function(){return!("__proto__"in Object.create(null))}();function SF(e){return e}function Nq(e){return IF(e)?"$"+e:e}go.toSetString=FF?SF:Nq;function kq(e){return IF(e)?e.slice(1):e}go.fromSetString=FF?SF:kq;function IF(e){if(!e)return!1;let t=e.length;if(t<9||e.charCodeAt(t-1)!==95||e.charCodeAt(t-2)!==95||e.charCodeAt(t-3)!==111||e.charCodeAt(t-4)!==116||e.charCodeAt(t-5)!==111||e.charCodeAt(t-6)!==114||e.charCodeAt(t-7)!==112||e.charCodeAt(t-8)!==95||e.charCodeAt(t-9)!==95)return!1;for(let r=t-10;r>=0;r--)if(e.charCodeAt(r)!==36)return!1;return!0}function DF(e,t){return e===t?0:e===null?1:t===null?-1:e>t?1:-1}function Lq(e,t){let r=e.generatedLine-t.generatedLine;return r!==0||(r=e.generatedColumn-t.generatedColumn,r!==0)||(r=DF(e.source,t.source),r!==0)||(r=e.originalLine-t.originalLine,r!==0)||(r=e.originalColumn-t.originalColumn,r!==0)?r:DF(e.name,t.name)}go.compareByGeneratedPositionsInflated=Lq;var U2="http:",jh=`${U2}//host`;function BF(e){return t=>{let r=Hh(t),n=j2(t),i=new URL(t,n);e(i);let a=i.toString();return r==="absolute"?a:r==="scheme-relative"?a.slice(U2.length):r==="path-absolute"?a.slice(jh.length):H2(n,a)}}function po(e,t){return new URL(e,t).toString()}function Uq(e,t){let r=0;do{let n=e+r++;if(t.indexOf(n)===-1)return n}while(!0)}function j2(e){let t=e.split("..").length-1,r=Uq("p",e),n=`${jh}/`;for(let i=0;i<t;i++)n+=`${r}/`;return n}var jq=/^[A-Za-z0-9\+\-\.]+:/;function Hh(e){return e[0]==="/"?e[1]==="/"?"scheme-relative":"path-absolute":jq.test(e)?"absolute":"path-relative"}function H2(e,t){typeof e=="string"&&(e=new URL(e)),typeof t=="string"&&(t=new URL(t));let r=t.pathname.split("/"),n=e.pathname.split("/");for(n.length>0&&!n[n.length-1]&&n.pop();r.length>0&&n.length>0&&r[0]===n[0];)r.shift(),n.shift();return n.map(()=>"..").concat(r).join("/")+t.search+t.hash}var Hq=BF(e=>{e.pathname=e.pathname.replace(/\/?$/,"/")}),kp=BF(e=>{});go.normalize=kp;function Mq(e,t){let r=Hh(t),n=Hh(e);if(e=Hq(e),r==="absolute")return po(t,void 0);if(n==="absolute")return po(t,e);if(r==="scheme-relative")return kp(t);if(n==="scheme-relative")return po(t,po(e,jh)).slice(U2.length);if(r==="path-absolute")return kp(t);if(n==="path-absolute")return po(t,po(e,jh)).slice(jh.length);let i=j2(t+e),a=po(t,po(e,i));return H2(i,a)}go.join=Mq;function qq(e,t){let r=Vq(e,t);return typeof r=="string"?r:kp(t)}go.relative=qq;function Vq(e,t){if(Hh(e)!==Hh(t))return null;let n=j2(e+t),i=new URL(e,n),a=new URL(t,n);try{new URL("",a.toString())}catch{return null}return a.protocol!==i.protocol||a.user!==i.user||a.password!==i.password||a.hostname!==i.hostname||a.port!==i.port?null:H2(i,a)}});var RF=ce($F=>{var M2=class e{constructor(){this._array=[],this._set=new Map}static fromArray(t,r){let n=new e;for(let i=0,a=t.length;i<a;i++)n.add(t[i],r);return n}size(){return this._set.size}add(t,r){let n=this.has(t),i=this._array.length;(!n||r)&&this._array.push(t),n||this._set.set(t,i)}has(t){return this._set.has(t)}indexOf(t){let r=this._set.get(t);if(r>=0)return r;throw new Error('"'+t+'" is not in the set.')}at(t){if(t>=0&&t<this._array.length)return this._array[t];throw new Error("No element indexed by "+t)}toArray(){return this._array.slice()}};$F.ArraySet=M2});var OF=ce(PF=>{var xF=Lp();function Kq(e,t){let r=e.generatedLine,n=t.generatedLine,i=e.generatedColumn,a=t.generatedColumn;return n>r||n==r&&a>=i||xF.compareByGeneratedPositionsInflated(e,t)<=0}var q2=class{constructor(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}unsortedForEach(t,r){this._array.forEach(t,r)}add(t){Kq(this._last,t)?(this._last=t,this._array.push(t)):(this._sorted=!1,this._array.push(t))}toArray(){return this._sorted||(this._array.sort(xF.compareByGeneratedPositionsInflated),this._sorted=!0),this._array}};PF.MappingList=q2});var V2=ce(TF=>{var Mh=CF(),Qr=Lp(),Up=RF().ArraySet,zq=OF().MappingList,jp=class e{constructor(t){t||(t={}),this._file=Qr.getArg(t,"file",null),this._sourceRoot=Qr.getArg(t,"sourceRoot",null),this._skipValidation=Qr.getArg(t,"skipValidation",!1),this._sources=new Up,this._names=new Up,this._mappings=new zq,this._sourcesContents=null}static fromSourceMap(t){let r=t.sourceRoot,n=new e({file:t.file,sourceRoot:r});return t.eachMapping(function(i){let a={generated:{line:i.generatedLine,column:i.generatedColumn}};i.source!=null&&(a.source=i.source,r!=null&&(a.source=Qr.relative(r,a.source)),a.original={line:i.originalLine,column:i.originalColumn},i.name!=null&&(a.name=i.name)),n.addMapping(a)}),t.sources.forEach(function(i){let a=i;r!=null&&(a=Qr.relative(r,i)),n._sources.has(a)||n._sources.add(a);let s=t.sourceContentFor(i);s!=null&&n.setSourceContent(i,s)}),n}addMapping(t){let r=Qr.getArg(t,"generated"),n=Qr.getArg(t,"original",null),i=Qr.getArg(t,"source",null),a=Qr.getArg(t,"name",null);this._skipValidation||this._validateMapping(r,n,i,a),i!=null&&(i=String(i),this._sources.has(i)||this._sources.add(i)),a!=null&&(a=String(a),this._names.has(a)||this._names.add(a)),this._mappings.add({generatedLine:r.line,generatedColumn:r.column,originalLine:n&&n.line,originalColumn:n&&n.column,source:i,name:a})}setSourceContent(t,r){let n=t;this._sourceRoot!=null&&(n=Qr.relative(this._sourceRoot,n)),r!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[Qr.toSetString(n)]=r):this._sourcesContents&&(delete this._sourcesContents[Qr.toSetString(n)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))}applySourceMap(t,r,n){let i=r;if(r==null){if(t.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);i=t.file}let a=this._sourceRoot;a!=null&&(i=Qr.relative(a,i));let s=this._mappings.toArray().length>0?new Up:this._sources,u=new Up;this._mappings.unsortedForEach(function(c){if(c.source===i&&c.originalLine!=null){let g=t.originalPositionFor({line:c.originalLine,column:c.originalColumn});g.source!=null&&(c.source=g.source,n!=null&&(c.source=Qr.join(n,c.source)),a!=null&&(c.source=Qr.relative(a,c.source)),c.originalLine=g.line,c.originalColumn=g.column,g.name!=null&&(c.name=g.name))}let f=c.source;f!=null&&!s.has(f)&&s.add(f);let h=c.name;h!=null&&!u.has(h)&&u.add(h)},this),this._sources=s,this._names=u,t.sources.forEach(function(c){let f=t.sourceContentFor(c);f!=null&&(n!=null&&(c=Qr.join(n,c)),a!=null&&(c=Qr.relative(a,c)),this.setSourceContent(c,f))},this)}_validateMapping(t,r,n,i){if(r&&typeof r.line!="number"&&typeof r.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(t&&"line"in t&&"column"in t&&t.line>0&&t.column>=0&&!r&&!n&&!i)){if(!(t&&"line"in t&&"column"in t&&r&&"line"in r&&"column"in r&&t.line>0&&t.column>=0&&r.line>0&&r.column>=0&&n))throw new Error("Invalid mapping: "+JSON.stringify({generated:t,source:n,original:r,name:i}))}}_serializeMappings(){let t=0,r=1,n=0,i=0,a=0,s=0,u="",c,f,h,g,p=this._mappings.toArray();for(let d=0,w=p.length;d<w;d++){if(f=p[d],c="",f.generatedLine!==r)for(t=0;f.generatedLine!==r;)c+=";",r++;else if(d>0){if(!Qr.compareByGeneratedPositionsInflated(f,p[d-1]))continue;c+=","}c+=Mh.encode(f.generatedColumn-t),t=f.generatedColumn,f.source!=null&&(g=this._sources.indexOf(f.source),c+=Mh.encode(g-s),s=g,c+=Mh.encode(f.originalLine-1-i),i=f.originalLine-1,c+=Mh.encode(f.originalColumn-n),n=f.originalColumn,f.name!=null&&(h=this._names.indexOf(f.name),c+=Mh.encode(h-a),a=h)),u+=c}return u}_generateSourcesContent(t,r){return t.map(function(n){if(!this._sourcesContents)return null;r!=null&&(n=Qr.relative(r,n));let i=Qr.toSetString(n);return Object.prototype.hasOwnProperty.call(this._sourcesContents,i)?this._sourcesContents[i]:null},this)}toJSON(){let t={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(t.file=this._file),this._sourceRoot!=null&&(t.sourceRoot=this._sourceRoot),this._sourcesContents&&(t.sourcesContent=this._generateSourcesContent(t.sources,t.sourceRoot)),t}toString(){return JSON.stringify(this.toJSON())}};jp.prototype._version=3;TF.SourceMapGenerator=jp});var kF=ce(NF=>{var Gq=V2().SourceMapGenerator,Hp=Lp(),Yq=/(\r?\n)/,Wq=10,Xl="$$$isSourceNode$$$",K2=class e{constructor(t,r,n,i,a){this.children=[],this.sourceContents={},this.line=t??null,this.column=r??null,this.source=n??null,this.name=a??null,this[Xl]=!0,i!=null&&this.add(i)}static fromStringWithSourceMap(t,r,n){let i=new e,a=t.split(Yq),s=0,u=function(){let d=v(),w=v()||"";return d+w;function v(){return s<a.length?a[s++]:void 0}},c=1,f=0,h=null,g;return r.eachMapping(function(d){if(h!==null)if(c<d.generatedLine)p(h,u()),c++,f=0;else{g=a[s]||"";let w=g.substr(0,d.generatedColumn-f);a[s]=g.substr(d.generatedColumn-f),f=d.generatedColumn,p(h,w),h=d;return}for(;c<d.generatedLine;)i.add(u()),c++;f<d.generatedColumn&&(g=a[s]||"",i.add(g.substr(0,d.generatedColumn)),a[s]=g.substr(d.generatedColumn),f=d.generatedColumn),h=d},this),s<a.length&&(h&&p(h,u()),i.add(a.splice(s).join(""))),r.sources.forEach(function(d){let w=r.sourceContentFor(d);w!=null&&(n!=null&&(d=Hp.join(n,d)),i.setSourceContent(d,w))}),i;function p(d,w){if(d===null||d.source===void 0)i.add(w);else{let v=n?Hp.join(n,d.source):d.source;i.add(new e(d.originalLine,d.originalColumn,v,w,d.name))}}}add(t){if(Array.isArray(t))t.forEach(function(r){this.add(r)},this);else if(t[Xl]||typeof t=="string")t&&this.children.push(t);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+t);return this}prepend(t){if(Array.isArray(t))for(let r=t.length-1;r>=0;r--)this.prepend(t[r]);else if(t[Xl]||typeof t=="string")this.children.unshift(t);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+t);return this}walk(t){let r;for(let n=0,i=this.children.length;n<i;n++)r=this.children[n],r[Xl]?r.walk(t):r!==""&&t(r,{source:this.source,line:this.line,column:this.column,name:this.name})}join(t){let r,n,i=this.children.length;if(i>0){for(r=[],n=0;n<i-1;n++)r.push(this.children[n]),r.push(t);r.push(this.children[n]),this.children=r}return this}replaceRight(t,r){let n=this.children[this.children.length-1];return n[Xl]?n.replaceRight(t,r):typeof n=="string"?this.children[this.children.length-1]=n.replace(t,r):this.children.push("".replace(t,r)),this}setSourceContent(t,r){this.sourceContents[Hp.toSetString(t)]=r}walkSourceContents(t){for(let n=0,i=this.children.length;n<i;n++)this.children[n][Xl]&&this.children[n].walkSourceContents(t);let r=Object.keys(this.sourceContents);for(let n=0,i=r.length;n<i;n++)t(Hp.fromSetString(r[n]),this.sourceContents[r[n]])}toString(){let t="";return this.walk(function(r){t+=r}),t}toStringWithSourceMap(t){let r={code:"",line:1,column:0},n=new Gq(t),i=!1,a=null,s=null,u=null,c=null;return this.walk(function(f,h){r.code+=f,h.source!==null&&h.line!==null&&h.column!==null?((a!==h.source||s!==h.line||u!==h.column||c!==h.name)&&n.addMapping({source:h.source,original:{line:h.line,column:h.column},generated:{line:r.line,column:r.column},name:h.name}),a=h.source,s=h.line,u=h.column,c=h.name,i=!0):i&&(n.addMapping({generated:{line:r.line,column:r.column}}),a=null,i=!1);for(let g=0,p=f.length;g<p;g++)f.charCodeAt(g)===Wq?(r.line++,r.column=0,g+1===p?(a=null,i=!1):i&&n.addMapping({source:h.source,original:{line:h.line,column:h.column},generated:{line:r.line,column:r.column},name:h.name})):r.column++}),this.walkSourceContents(function(f,h){n.setSourceContent(f,h)}),{code:r.code,map:n}}};NF.SourceNode=K2});var LF=ce(z2=>{z2.SourceMapGenerator=V2().SourceMapGenerator;z2.SourceNode=kF().SourceNode});var MF=ce((IJ,HF)=>{"use strict";var Xq=ho(),Gt=P2(),Jq=gF(),Zq=L2(),{stringEscape:ns,regexpClassEscape:G2}=vF(),{SourceNode:Cs}=LF();function jF(e,t,r){let n=t.start.line,i=t.start.column-1,a=e.split(`
`);return a.length===1?new Cs(n,i,t.source,e,r):new Cs(null,null,t.source,a.map((s,u)=>new Cs(n+u,u===0?i:0,t.source,u===a.length-1?s:[s,`
`],r)))}function UF(e,t,r,n,i){return r?new Cs(null,null,r.source,[e,jF(t,r,i),new Cs(r.end.line,r.end.column-1,r.source,n)]):new Cs(null,null,null,[e,t,n])}function Qq(e,t){function r(v){return v instanceof Cs?v:v.replace(/^(.+)$/gm,"  $1")}function n(v){return"peg$c"+v}function i(v){return"peg$r"+v}function a(v){return"peg$e"+v}function s(v){return"peg$f"+v}function u(v){return"peg$parse"+v}function c(){function v(D){return'"'+ns(D)+'"'}function b(D){return"/^["+(D.inverted?"^":"")+D.value.map(C=>Array.isArray(C)?G2(C[0])+"-"+G2(C[1]):G2(C)).join("")+"]/"+(D.ignoreCase?"i":"")}function m(D){switch(D.type){case"rule":return'peg$otherExpectation("'+ns(D.value)+'")';case"literal":return'peg$literalExpectation("'+ns(D.value)+'", '+D.ignoreCase+")";case"class":return"peg$classExpectation(["+D.value.map(F=>Array.isArray(F)?'["'+ns(F[0])+'", "'+ns(F[1])+'"]':'"'+ns(F)+'"').join(", ")+"], "+D.inverted+", "+D.ignoreCase+")";case"any":return"peg$anyExpectation()";default:throw new Error("Unknown expectation type ("+JSON.stringify(D)+")")}}function y(D,C){return UF(`
  var ${s(C)} = function(${D.params.join(", ")}) {`,D.body,D.location,"};")}return new Cs(null,null,t.grammarSource,[e.literals.map((D,C)=>"  var "+n(C)+" = "+v(D)+";").concat("",e.classes.map((D,C)=>"  var "+i(C)+" = "+b(D)+";")).concat("",e.expectations.map((D,C)=>"  var "+a(C)+" = "+m(D)+";")).concat("").join(`
`),e.functions.map(y)])}function f(v,b){let m=[];return m.push(""),t.trace&&m.push("peg$tracer.trace({",'  type: "rule.enter",',"  rule: "+v+",","  location: peg$computeLocation(startPos, startPos)","});",""),t.cache&&(m.push("var key = peg$currPos * "+e.rules.length+" + "+b+";","var cached = peg$resultsCache[key];","","if (cached) {","  peg$currPos = cached.nextPos;",""),t.trace&&m.push("if (cached.result !== peg$FAILED) {","  peg$tracer.trace({",'    type: "rule.match",',"    rule: "+v+",","    result: cached.result,","    location: peg$computeLocation(startPos, peg$currPos)","  });","} else {","  peg$tracer.trace({",'    type: "rule.fail",',"    rule: "+v+",","    location: peg$computeLocation(startPos, startPos)","  });","}",""),m.push("  return cached.result;","}","")),m}function h(v,b){let m=[];return t.cache&&m.push("","peg$resultsCache[key] = { nextPos: peg$currPos, result: "+b+" };"),t.trace&&m.push("","if ("+b+" !== peg$FAILED) {","  peg$tracer.trace({",'    type: "rule.match",',"    rule: "+v+",","    result: "+b+",","    location: peg$computeLocation(startPos, peg$currPos)","  });","} else {","  peg$tracer.trace({",'    type: "rule.fail",',"    rule: "+v+",","    location: peg$computeLocation(startPos, startPos)","  });","}"),m.push("","return "+b+";"),m}function g(v){let b=[],m=new Jq(v.name,"s","var");function y(C){let F=0,U=C.length,k=[],S;function B(j,Y){let M=Y+3,z=C[F+M-2],W=C[F+M-1],ie,Ce;m.checkedIf(F,()=>{F+=M,ie=y(C.slice(F,F+z)),F+=z},W>0?()=>{Ce=y(C.slice(F,F+W)),F+=W}:null),k.push("if ("+j+") {"),k.push(...ie.map(r)),W>0&&(k.push("} else {"),k.push(...Ce.map(r))),k.push("}")}function T(j){let M=C[F+2-1],z;m.checkedLoop(F,()=>{F+=2,z=y(C.slice(F,F+M)),F+=M}),k.push("while ("+j+") {"),k.push(...z.map(r)),k.push("}")}function P(){let Y=C[F+4-1],M=s(C[F+1])+"("+C.slice(F+4,F+4+Y).map(z=>m.index(z)).join(", ")+")";m.pop(C[F+2]),k.push(m.push(M)),F+=4+Y}for(;F<U;)switch(C[F]){case Gt.PUSH_EMPTY_STRING:k.push(m.push("''")),F++;break;case Gt.PUSH_CURR_POS:k.push(m.push("peg$currPos")),F++;break;case Gt.PUSH_UNDEFINED:k.push(m.push("undefined")),F++;break;case Gt.PUSH_NULL:k.push(m.push("null")),F++;break;case Gt.PUSH_FAILED:k.push(m.push("peg$FAILED")),F++;break;case Gt.PUSH_EMPTY_ARRAY:k.push(m.push("[]")),F++;break;case Gt.POP:m.pop(),F++;break;case Gt.POP_CURR_POS:k.push("peg$currPos = "+m.pop()+";"),F++;break;case Gt.POP_N:m.pop(C[F+1]),F+=2;break;case Gt.NIP:S=m.pop(),m.pop(),k.push(m.push(S)),F++;break;case Gt.APPEND:S=m.pop(),k.push(m.top()+".push("+S+");"),F++;break;case Gt.WRAP:k.push(m.push("["+m.pop(C[F+1]).join(", ")+"]")),F+=2;break;case Gt.TEXT:k.push(m.push("input.substring("+m.pop()+", peg$currPos)")),F++;break;case Gt.PLUCK:{let Y=C[F+3-1],M=3+Y;S=C.slice(F+3,F+M),S=Y===1?m.index(S[0]):`[ ${S.map(z=>m.index(z)).join(", ")} ]`,m.pop(C[F+1]),k.push(m.push(S)),F+=M;break}case Gt.IF:B(m.top(),0);break;case Gt.IF_ERROR:B(m.top()+" === peg$FAILED",0);break;case Gt.IF_NOT_ERROR:B(m.top()+" !== peg$FAILED",0);break;case Gt.WHILE_NOT_ERROR:T(m.top()+" !== peg$FAILED");break;case Gt.MATCH_ANY:B("input.length > peg$currPos",0);break;case Gt.MATCH_STRING:B(e.literals[C[F+1]].length>1?"input.substr(peg$currPos, "+e.literals[C[F+1]].length+") === "+n(C[F+1]):"input.charCodeAt(peg$currPos) === "+e.literals[C[F+1]].charCodeAt(0),1);break;case Gt.MATCH_STRING_IC:B("input.substr(peg$currPos, "+e.literals[C[F+1]].length+").toLowerCase() === "+n(C[F+1]),1);break;case Gt.MATCH_CHAR_CLASS:B(i(C[F+1])+".test(input.charAt(peg$currPos))",1);break;case Gt.ACCEPT_N:k.push(m.push(C[F+1]>1?"input.substr(peg$currPos, "+C[F+1]+")":"input.charAt(peg$currPos)")),k.push(C[F+1]>1?"peg$currPos += "+C[F+1]+";":"peg$currPos++;"),F+=2;break;case Gt.ACCEPT_STRING:k.push(m.push(n(C[F+1]))),k.push(e.literals[C[F+1]].length>1?"peg$currPos += "+e.literals[C[F+1]].length+";":"peg$currPos++;"),F+=2;break;case Gt.FAIL:k.push(m.push("peg$FAILED")),k.push("if (peg$silentFails === 0) { peg$fail("+a(C[F+1])+"); }"),F+=2;break;case Gt.LOAD_SAVED_POS:k.push("peg$savedPos = "+m.index(C[F+1])+";"),F+=2;break;case Gt.UPDATE_SAVED_POS:k.push("peg$savedPos = peg$currPos;"),F++;break;case Gt.CALL:P();break;case Gt.RULE:k.push(m.push(u(e.rules[C[F+1]].name)+"()")),F+=2;break;case Gt.SILENT_FAILS_ON:k.push("peg$silentFails++;"),F++;break;case Gt.SILENT_FAILS_OFF:k.push("peg$silentFails--;"),F++;break;default:throw new Error("Invalid opcode: "+C[F]+".")}return k}let D=y(v.bytecode);return b.push(UF("  function ",u(v.name),v.nameLocation,`() {
`,v.name)),t.trace&&b.push("  var startPos = peg$currPos;"),b.push(r(m.defines())),b.push(...f('"'+ns(v.name)+'"',Xq.indexOfRule(e,v.name)).map(r)),b.push(...D.map(r)),b.push(...h('"'+ns(v.name)+'"',m.result()).map(r)),b.push("}"),b}function p(v){return v.codeLocation?jF(v.code,v.codeLocation,"$"+v.type):v.code}function d(){let v=[];e.topLevelInitializer&&(v.push(p(e.topLevelInitializer)),v.push("")),v.push("function peg$subclass(child, parent) {","  function C() { this.constructor = child; }","  C.prototype = parent.prototype;","  child.prototype = new C();","}","","function peg$SyntaxError(message, expected, found, location) {","  var self = Error.call(this, message);","  // istanbul ignore next Check is a necessary evil to support older environments","  if (Object.setPrototypeOf) {","    Object.setPrototypeOf(self, peg$SyntaxError.prototype);","  }","  self.expected = expected;","  self.found = found;","  self.location = location;",'  self.name = "SyntaxError";',"  return self;","}","","peg$subclass(peg$SyntaxError, Error);","","function peg$padEnd(str, targetLength, padString) {",'  padString = padString || " ";',"  if (str.length > targetLength) { return str; }","  targetLength -= str.length;","  padString += padString.repeat(targetLength);","  return str + padString.slice(0, targetLength);","}","","peg$SyntaxError.prototype.format = function(sources) {",'  var str = "Error: " + this.message;',"  if (this.location) {","    var src = null;","    var k;","    for (k = 0; k < sources.length; k++) {","      if (sources[k].source === this.location.source) {","        src = sources[k].text.split(/\\r\\n|\\n|\\r/g);","        break;","      }","    }","    var s = this.location.start;",'    var loc = this.location.source + ":" + s.line + ":" + s.column;',"    if (src) {","      var e = this.location.end;",`      var filler = peg$padEnd("", s.line.toString().length, ' ');`,"      var line = src[s.line - 1];","      var last = s.line === e.line ? e.column : line.length + 1;","      var hatLen = (last - s.column) || 1;",'      str += "\\n --> " + loc + "\\n"','          + filler + " |\\n"','          + s.line + " | " + line + "\\n"',`          + filler + " | " + peg$padEnd("", s.column - 1, ' ')`,'          + peg$padEnd("", hatLen, "^");',"    } else {",'      str += "\\n at " + loc;',"    }","  }","  return str;","};","","peg$SyntaxError.buildMessage = function(expected, found) {","  var DESCRIBE_EXPECTATION_FNS = {","    literal: function(expectation) {",'      return "\\"" + literalEscape(expectation.text) + "\\"";',"    },","","    class: function(expectation) {","      var escapedParts = expectation.parts.map(function(part) {","        return Array.isArray(part)",'          ? classEscape(part[0]) + "-" + classEscape(part[1])',"          : classEscape(part);","      });","",'      return "[" + (expectation.inverted ? "^" : "") + escapedParts.join("") + "]";',"    },","","    any: function() {",'      return "any character";',"    },","","    end: function() {",'      return "end of input";',"    },","","    other: function(expectation) {","      return expectation.description;","    }","  };","","  function hex(ch) {","    return ch.charCodeAt(0).toString(16).toUpperCase();","  }","","  function literalEscape(s) {","    return s",'      .replace(/\\\\/g, "\\\\\\\\")','      .replace(/"/g,  "\\\\\\"")','      .replace(/\\0/g, "\\\\0")','      .replace(/\\t/g, "\\\\t")','      .replace(/\\n/g, "\\\\n")','      .replace(/\\r/g, "\\\\r")','      .replace(/[\\x00-\\x0F]/g,          function(ch) { return "\\\\x0" + hex(ch); })','      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return "\\\\x"  + hex(ch); });',"  }","","  function classEscape(s) {","    return s",'      .replace(/\\\\/g, "\\\\\\\\")','      .replace(/\\]/g, "\\\\]")','      .replace(/\\^/g, "\\\\^")','      .replace(/-/g,  "\\\\-")','      .replace(/\\0/g, "\\\\0")','      .replace(/\\t/g, "\\\\t")','      .replace(/\\n/g, "\\\\n")','      .replace(/\\r/g, "\\\\r")','      .replace(/[\\x00-\\x0F]/g,          function(ch) { return "\\\\x0" + hex(ch); })','      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return "\\\\x"  + hex(ch); });',"  }","","  function describeExpectation(expectation) {","    return DESCRIBE_EXPECTATION_FNS[expectation.type](expectation);","  }","","  function describeExpected(expected) {","    var descriptions = expected.map(describeExpectation);","    var i, j;","","    descriptions.sort();","","    if (descriptions.length > 0) {","      for (i = 1, j = 1; i < descriptions.length; i++) {","        if (descriptions[i - 1] !== descriptions[i]) {","          descriptions[j] = descriptions[i];","          j++;","        }","      }","      descriptions.length = j;","    }","","    switch (descriptions.length) {","      case 1:","        return descriptions[0];","","      case 2:",'        return descriptions[0] + " or " + descriptions[1];',"","      default:",'        return descriptions.slice(0, -1).join(", ")','          + ", or "',"          + descriptions[descriptions.length - 1];","    }","  }","","  function describeFound(found) {",'    return found ? "\\"" + literalEscape(found) + "\\"" : "end of input";',"  }","",'  return "Expected " + describeExpected(expected) + " but " + describeFound(found) + " found.";',"};",""),t.trace&&v.push("function peg$DefaultTracer() {","  this.indentLevel = 0;","}","","peg$DefaultTracer.prototype.trace = function(event) {","  var that = this;","","  function log(event) {","    function repeat(string, n) {",'       var result = "", i;',"","       for (i = 0; i < n; i++) {","         result += string;","       }","","       return result;","    }","","    function pad(string, length) {",'      return string + repeat(" ", length - string.length);',"    }","",'    if (typeof console === "object") {',"      console.log(",'        event.location.start.line + ":" + event.location.start.column + "-"','          + event.location.end.line + ":" + event.location.end.column + " "','          + pad(event.type, 10) + " "','          + repeat("  ", that.indentLevel) + event.rule',"      );","    }","  }","","  switch (event.type) {",'    case "rule.enter":',"      log(event);","      this.indentLevel++;","      break;","",'    case "rule.match":',"      this.indentLevel--;","      log(event);","      break;","",'    case "rule.fail":',"      this.indentLevel--;","      log(event);","      break;","","    default:",'      throw new Error("Invalid event type: " + event.type + ".");',"  }","};","");let b="{ "+t.allowedStartRules.map(y=>y+": "+u(y)).join(", ")+" }",m=u(t.allowedStartRules[0]);return v.push("function peg$parse(input, options) {","  options = options !== undefined ? options : {};","","  var peg$FAILED = {};","  var peg$source = options.grammarSource;","","  var peg$startRuleFunctions = "+b+";","  var peg$startRuleFunction = "+m+";","",c(),"","  var peg$currPos = 0;","  var peg$savedPos = 0;","  var peg$posDetailsCache = [{ line: 1, column: 1 }];","  var peg$maxFailPos = 0;","  var peg$maxFailExpected = [];","  var peg$silentFails = 0;",""),t.cache&&v.push("  var peg$resultsCache = {};",""),t.trace&&v.push('  var peg$tracer = "tracer" in options ? options.tracer : new peg$DefaultTracer();',""),v.push("  var peg$result;","",'  if ("startRule" in options) {',"    if (!(options.startRule in peg$startRuleFunctions)) {",`      throw new Error("Can't start parsing from rule \\"" + options.startRule + "\\".");`,"    }","","    peg$startRuleFunction = peg$startRuleFunctions[options.startRule];","  }","","  function text() {","    return input.substring(peg$savedPos, peg$currPos);","  }","","  function offset() {","    return peg$savedPos;","  }","","  function range() {","    return {","      source: peg$source,","      start: peg$savedPos,","      end: peg$currPos","    };","  }","","  function location() {","    return peg$computeLocation(peg$savedPos, peg$currPos);","  }","","  function expected(description, location) {","    location = location !== undefined","      ? location","      : peg$computeLocation(peg$savedPos, peg$currPos);","","    throw peg$buildStructuredError(","      [peg$otherExpectation(description)],","      input.substring(peg$savedPos, peg$currPos),","      location","    );","  }","","  function error(message, location) {","    location = location !== undefined","      ? location","      : peg$computeLocation(peg$savedPos, peg$currPos);","","    throw peg$buildSimpleError(message, location);","  }","","  function peg$literalExpectation(text, ignoreCase) {",'    return { type: "literal", text: text, ignoreCase: ignoreCase };',"  }","","  function peg$classExpectation(parts, inverted, ignoreCase) {",'    return { type: "class", parts: parts, inverted: inverted, ignoreCase: ignoreCase };',"  }","","  function peg$anyExpectation() {",'    return { type: "any" };',"  }","","  function peg$endExpectation() {",'    return { type: "end" };',"  }","","  function peg$otherExpectation(description) {",'    return { type: "other", description: description };',"  }","","  function peg$computePosDetails(pos) {","    var details = peg$posDetailsCache[pos];","    var p;","","    if (details) {","      return details;","    } else {","      p = pos - 1;","      while (!peg$posDetailsCache[p]) {","        p--;","      }","","      details = peg$posDetailsCache[p];","      details = {","        line: details.line,","        column: details.column","      };","","      while (p < pos) {","        if (input.charCodeAt(p) === 10) {","          details.line++;","          details.column = 1;","        } else {","          details.column++;","        }","","        p++;","      }","","      peg$posDetailsCache[pos] = details;","","      return details;","    }","  }","","  function peg$computeLocation(startPos, endPos) {","    var startPosDetails = peg$computePosDetails(startPos);","    var endPosDetails = peg$computePosDetails(endPos);","","    return {","      source: peg$source,","      start: {","        offset: startPos,","        line: startPosDetails.line,","        column: startPosDetails.column","      },","      end: {","        offset: endPos,","        line: endPosDetails.line,","        column: endPosDetails.column","      }","    };","  }","","  function peg$fail(expected) {","    if (peg$currPos < peg$maxFailPos) { return; }","","    if (peg$currPos > peg$maxFailPos) {","      peg$maxFailPos = peg$currPos;","      peg$maxFailExpected = [];","    }","","    peg$maxFailExpected.push(expected);","  }","","  function peg$buildSimpleError(message, location) {","    return new peg$SyntaxError(message, null, null, location);","  }","","  function peg$buildStructuredError(expected, found, location) {","    return new peg$SyntaxError(","      peg$SyntaxError.buildMessage(expected, found),","      expected,","      found,","      location","    );","  }",""),e.rules.forEach(y=>{v.push(...g(y).map(r)),v.push("")}),e.initializer&&(v.push(p(e.initializer)),v.push("")),v.push("  peg$result = peg$startRuleFunction();","","  if (peg$result !== peg$FAILED && peg$currPos === input.length) {","    return peg$result;","  } else {","    if (peg$result !== peg$FAILED && peg$currPos < input.length) {","      peg$fail(peg$endExpectation());","    }","","    throw peg$buildStructuredError(","      peg$maxFailExpected,","      peg$maxFailPos < input.length ? input.charAt(peg$maxFailPos) : null,","      peg$maxFailPos < input.length","        ? peg$computeLocation(peg$maxFailPos, peg$maxFailPos + 1)","        : peg$computeLocation(peg$maxFailPos, peg$maxFailPos)","    );","  }","}"),new Cs(null,null,t.grammarSource,v.map(y=>y instanceof Cs?y:y+`
`))}function w(v){function b(){return[`// Generated by Peggy ${Zq}.`,"//","// https://peggyjs.org/"]}function m(){return t.trace?["{","  SyntaxError: peg$SyntaxError,","  DefaultTracer: peg$DefaultTracer,","  parse: peg$parse","}"].join(`
`):["{","  SyntaxError: peg$SyntaxError,","  parse: peg$parse","}"].join(`
`)}let D={bare(){return[...b(),"(function() {",'  "use strict";',"",v,"",r("return "+m()+";"),"})()"]},commonjs(){let C=Object.keys(t.dependencies),F=b();return F.push("",'"use strict";',""),C.length>0&&(C.forEach(U=>{F.push("var "+U+' = require("'+ns(t.dependencies[U])+'");')}),F.push("")),F.push(v,"","module.exports = "+m()+";"),F},es(){let C=Object.keys(t.dependencies),F=b();return F.push(""),C.length>0&&(C.forEach(U=>{F.push("import "+U+' from "'+ns(t.dependencies[U])+'";')}),F.push("")),F.push(v,"","export {","  peg$SyntaxError as SyntaxError,",t.trace?"  peg$DefaultTracer as DefaultTracer,":"","  peg$parse as parse","};"),F},amd(){let C=Object.keys(t.dependencies),U="["+C.map(S=>t.dependencies[S]).map(S=>'"'+ns(S)+'"').join(", ")+"]",k=C.join(", ");return[...b(),"define("+U+", function("+k+") {",'  "use strict";',"",v,"",r("return "+m()+";"),"});"]},globals(){return[...b(),"(function(root) {",'  "use strict";',"",v,"",r("root."+t.exportVar+" = "+m()+";"),"})(this);"]},umd(){let C=Object.keys(t.dependencies),F=C.map(T=>t.dependencies[T]),U="["+F.map(T=>'"'+ns(T)+'"').join(", ")+"]",k=F.map(T=>'require("'+ns(T)+'")').join(", "),S=C.join(", "),B=b();return B.push("(function(root, factory) {",'  if (typeof define === "function" && define.amd) {',"    define("+U+", factory);",'  } else if (typeof module === "object" && module.exports) {',"    module.exports = factory("+k+");"),t.exportVar!==null&&B.push("  } else {","    root."+t.exportVar+" = factory();"),B.push("  }","})(this, function("+S+") {",'  "use strict";',"",v,"",r("return "+m()+";"),"});"),B}}[t.format]();return new Cs(null,null,t.grammarSource,D.map(C=>C instanceof Cs?C:C+`
`))}e.code=w(d())}HF.exports=Qq});var VF=ce((BJ,qF)=>{"use strict";var eV=ho(),tV=_s();function rV(e,t,r){function n(s){return s.type==="rule"&&s.expression.type==="rule_ref"}function i(s,u,c){tV.build({rule_ref(h){h.name===u&&(h.name=c,r.info(`Proxy rule "${u}" replaced by the rule "${c}"`,h.location,[{message:"This rule will be used",location:eV.findRule(s,c).nameLocation}]))}})(s)}let a=[];e.rules.forEach((s,u)=>{n(s)&&(i(e,s.name,s.expression.name),t.allowedStartRules.indexOf(s.name)===-1&&a.push(u))}),a.reverse(),a.forEach(s=>{e.rules.splice(s,1)})}qF.exports=rV});var zF=ce(($J,KF)=>{"use strict";var nV=_s();function iV(e,t,r){function n(s){let u={};return Object.keys(s).forEach(c=>{u[c]=s[c]}),u}function i(s,u){a(s.expression,n(u))}let a=nV.build({rule(s){a(s.expression,{})},choice(s,u){s.alternatives.forEach(c=>{a(c,n(u))})},action:i,labeled(s,u){let c=s.label;c&&Object.prototype.hasOwnProperty.call(u,c)&&r.error(`Label "${s.label}" is already defined`,s.labelLocation,[{message:"Original label location",location:u[c]}]),a(s.expression,u),u[s.label]=s.labelLocation},text:i,simple_and:i,simple_not:i,optional:i,zero_or_more:i,one_or_more:i,group:i});a(e)}KF.exports=iV});var YF=ce((RJ,GF)=>{"use strict";var sV=_s();function aV(e,t,r){let n={};sV.build({rule(a){if(Object.prototype.hasOwnProperty.call(n,a.name)){r.error(`Rule "${a.name}" is already defined`,a.nameLocation,[{message:"Original rule location",location:n[a.name]}]);return}n[a.name]=a.nameLocation}})(e)}GF.exports=aV});var JF=ce((xJ,XF)=>{"use strict";var WF=ho(),uV=_s();function oV(e,t,r){let n=[],i=[],a=uV.build({rule(s){n.push(s.name),a(s.expression),n.pop()},sequence(s){s.elements.every(u=>(a(u),!WF.alwaysConsumesOnSuccess(e,u)))},rule_ref(s){i.push(s);let u=WF.findRule(e,s.name);if(n.indexOf(s.name)!==-1){n.push(s.name),r.error("Possible infinite loop when parsing (left recursion: "+n.join(" -> ")+")",u.nameLocation,i.map((c,f,h)=>({message:f+1!==h.length?`Step ${f+1}: call of the rule "${c.name}" without input consumption`:`Step ${f+1}: call itself without input consumption - left recursion`,location:c.location})));return}u&&a(u),i.pop()}});a(e)}XF.exports=oV});var e3=ce((PJ,QF)=>{"use strict";var ZF=ho(),cV=_s();function lV(e,t,r){cV.build({zero_or_more(i){ZF.alwaysConsumesOnSuccess(e,i.expression)||r.error("Possible infinite loop when parsing (repetition used with an expression that may not consume any input)",i.location)},one_or_more(i){ZF.alwaysConsumesOnSuccess(e,i.expression)||r.error("Possible infinite loop when parsing (repetition used with an expression that may not consume any input)",i.location)}})(e)}QF.exports=lV});var r3=ce((OJ,t3)=>{"use strict";var fV=ho(),hV=_s();function dV(e,t,r){hV.build({rule_ref(i){fV.findRule(e,i.name)||r.error(`Rule "${i.name}" is not defined`,i.location)}})(e)}t3.exports=dV});var i3=ce((TJ,n3)=>{"use strict";var pV=_s();function gV(e,t,r){let n=pV.build({action(i){n(i.expression,i)},labeled(i,a){i.pick&&a&&r.error('"@" cannot be used with an action block',i.labelLocation,[{message:"Action block location",location:a.codeLocation}]),n(i.expression)}});n(e)}n3.exports=gV});var a3=ce((NJ,s3)=>{"use strict";var mV=Op(),Y2=class{constructor(t){t=typeof t<"u"?t:{},typeof t.error=="function"&&(this.error=t.error),typeof t.warning=="function"&&(this.warning=t.warning),typeof t.info=="function"&&(this.info=t.info)}error(){}warning(){}info(){}},W2=class{constructor(t){this._callbacks=new Y2(t),this._firstError=null,this.errors=0,this.problems=[],this.stage=null}error(...t){++this.errors,this._firstError===null&&(this._firstError=new mV(...t),this._firstError.stage=this.stage,this._firstError.problems=this.problems),this.problems.push(["error",...t]),this._callbacks.error(this.stage,...t)}warning(...t){this.problems.push(["warning",...t]),this._callbacks.warning(this.stage,...t)}info(...t){this.problems.push(["info",...t]),this._callbacks.info(this.stage,...t)}checkErrors(){if(this.errors!==0)throw this._firstError}};s3.exports=W2});var u3=ce((exports,module)=>{"use strict";var generateBytecode=dF(),generateJS=MF(),inferenceMatchResult=O2(),removeProxyRules=VF(),reportDuplicateLabels=zF(),reportDuplicateRules=YF(),reportInfiniteRecursion=JF(),reportInfiniteRepetition=e3(),reportUndefinedRules=r3(),reportIncorrectPlucking=i3(),Session=a3(),visitor=_s();function processOptions(e,t){let r={};return Object.keys(e).forEach(n=>{r[n]=e[n]}),Object.keys(t).forEach(n=>{Object.prototype.hasOwnProperty.call(r,n)||(r[n]=t[n])}),r}var compiler={visitor,passes:{check:[reportUndefinedRules,reportDuplicateRules,reportDuplicateLabels,reportInfiniteRecursion,reportInfiniteRepetition,reportIncorrectPlucking],transform:[removeProxyRules,inferenceMatchResult],generate:[generateBytecode,generateJS]},compile(ast,passes,options){if(options=options!==void 0?options:{},options=processOptions(options,{allowedStartRules:[ast.rules[0].name],cache:!1,dependencies:{},exportVar:null,format:"bare",output:"parser",trace:!1}),!Array.isArray(options.allowedStartRules))throw new Error("allowedStartRules must be an array");if(options.allowedStartRules.length===0)throw new Error("Must have at least one start rule");let allRules=ast.rules.map(e=>e.name);for(let e of options.allowedStartRules)if(allRules.indexOf(e)===-1)throw new Error(`Unknown start rule "${e}"`);let session=new Session(options);switch(Object.keys(passes).forEach(e=>{session.stage=e,session.info(`Process stage ${e}`),passes[e].forEach(t=>{session.info(`Process pass ${e}.${t.name}`),t(ast,options,session)}),session.checkErrors()}),options.output){case"parser":return eval(ast.code.toString());case"source":return ast.code.toString();case"source-and-map":return ast.code;default:throw new Error("Invalid output format: "+options.output+".")}}};module.exports=compiler});var c3=ce((kJ,o3)=>{"use strict";var vV={$:"text","&":"simple_and","!":"simple_not"},wV={"?":"optional","*":"zero_or_more","+":"one_or_more"},EV={"&":"semantic_and","!":"semantic_not"};function AV(e,t){function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r}function mo(e,t,r,n){var i=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(i,mo.prototype),i.expected=t,i.found=r,i.location=n,i.name="SyntaxError",i}AV(mo,Error);function X2(e,t,r){return r=r||" ",e.length>t?e:(t-=e.length,r+=r.repeat(t),e+r.slice(0,t))}mo.prototype.format=function(e){var t="Error: "+this.message;if(this.location){var r=null,n;for(n=0;n<e.length;n++)if(e[n].source===this.location.source){r=e[n].text.split(/\r\n|\n|\r/g);break}var i=this.location.start,a=this.location.source+":"+i.line+":"+i.column;if(r){var s=this.location.end,u=X2("",i.line.toString().length," "),c=r[i.line-1],f=i.line===s.line?s.column:c.length+1,h=f-i.column||1;t+=`
 --> `+a+`
`+u+` |
`+i.line+" | "+c+`
`+u+" | "+X2("",i.column-1," ")+X2("",h,"^")}else t+=`
 at `+a}return t};mo.buildMessage=function(e,t){var r={literal:function(f){return'"'+i(f.text)+'"'},class:function(f){var h=f.parts.map(function(g){return Array.isArray(g)?a(g[0])+"-"+a(g[1]):a(g)});return"["+(f.inverted?"^":"")+h.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(f){return f.description}};function n(f){return f.charCodeAt(0).toString(16).toUpperCase()}function i(f){return f.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(h){return"\\x0"+n(h)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(h){return"\\x"+n(h)})}function a(f){return f.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(h){return"\\x0"+n(h)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(h){return"\\x"+n(h)})}function s(f){return r[f.type](f)}function u(f){var h=f.map(s),g,p;if(h.sort(),h.length>0){for(g=1,p=1;g<h.length;g++)h[g-1]!==h[g]&&(h[p]=h[g],p++);h.length=p}switch(h.length){case 1:return h[0];case 2:return h[0]+" or "+h[1];default:return h.slice(0,-1).join(", ")+", or "+h[h.length-1]}}function c(f){return f?'"'+i(f)+'"':"end of input"}return"Expected "+u(e)+" but "+c(t)+" found."};function yV(e,t){t=t!==void 0?t:{};var r={},n=t.grammarSource,i={Grammar:_c},a=_c,s="{",u="}",c="=",f="/",h="@",g=":",p="$",d="&",w="!",v="?",b="*",m="+",y="(",D=")",C="	",F="\v",U="\f",k=" ",S="\xA0",B="\uFEFF",T=`
`,P=`\r
`,j="\r",Y="\u2028",M="\u2029",z="/*",W="*/",ie="//",Ce="_",Fe="\\",xe="\u200C",it="\u200D",nt="i",dt='"',pt="'",wn="[",hr="^",St="]",Br="-",gr="0",vt="b",tr="f",st="n",Ge="r",mr="t",qe="v",Ht="x",En="u",cr=".",rr=";",yt=/^[\n\r\u2028\u2029]/,Vr=/^[0-9]/,ki=/^[0-9a-f]/i,An=/^[{}]/,$t=/^[a-z\xB5\xDF-\xF6\xF8-\xFF\u0101\u0103\u0105\u0107\u0109\u010B\u010D\u010F\u0111\u0113\u0115\u0117\u0119\u011B\u011D\u011F\u0121\u0123\u0125\u0127\u0129\u012B\u012D\u012F\u0131\u0133\u0135\u0137-\u0138\u013A\u013C\u013E\u0140\u0142\u0144\u0146\u0148-\u0149\u014B\u014D\u014F\u0151\u0153\u0155\u0157\u0159\u015B\u015D\u015F\u0161\u0163\u0165\u0167\u0169\u016B\u016D\u016F\u0171\u0173\u0175\u0177\u017A\u017C\u017E-\u0180\u0183\u0185\u0188\u018C-\u018D\u0192\u0195\u0199-\u019B\u019E\u01A1\u01A3\u01A5\u01A8\u01AA-\u01AB\u01AD\u01B0\u01B4\u01B6\u01B9-\u01BA\u01BD-\u01BF\u01C6\u01C9\u01CC\u01CE\u01D0\u01D2\u01D4\u01D6\u01D8\u01DA\u01DC-\u01DD\u01DF\u01E1\u01E3\u01E5\u01E7\u01E9\u01EB\u01ED\u01EF-\u01F0\u01F3\u01F5\u01F9\u01FB\u01FD\u01FF\u0201\u0203\u0205\u0207\u0209\u020B\u020D\u020F\u0211\u0213\u0215\u0217\u0219\u021B\u021D\u021F\u0221\u0223\u0225\u0227\u0229\u022B\u022D\u022F\u0231\u0233-\u0239\u023C\u023F-\u0240\u0242\u0247\u0249\u024B\u024D\u024F-\u0293\u0295-\u02AF\u0371\u0373\u0377\u037B-\u037D\u0390\u03AC-\u03CE\u03D0-\u03D1\u03D5-\u03D7\u03D9\u03DB\u03DD\u03DF\u03E1\u03E3\u03E5\u03E7\u03E9\u03EB\u03ED\u03EF-\u03F3\u03F5\u03F8\u03FB-\u03FC\u0430-\u045F\u0461\u0463\u0465\u0467\u0469\u046B\u046D\u046F\u0471\u0473\u0475\u0477\u0479\u047B\u047D\u047F\u0481\u048B\u048D\u048F\u0491\u0493\u0495\u0497\u0499\u049B\u049D\u049F\u04A1\u04A3\u04A5\u04A7\u04A9\u04AB\u04AD\u04AF\u04B1\u04B3\u04B5\u04B7\u04B9\u04BB\u04BD\u04BF\u04C2\u04C4\u04C6\u04C8\u04CA\u04CC\u04CE-\u04CF\u04D1\u04D3\u04D5\u04D7\u04D9\u04DB\u04DD\u04DF\u04E1\u04E3\u04E5\u04E7\u04E9\u04EB\u04ED\u04EF\u04F1\u04F3\u04F5\u04F7\u04F9\u04FB\u04FD\u04FF\u0501\u0503\u0505\u0507\u0509\u050B\u050D\u050F\u0511\u0513\u0515\u0517\u0519\u051B\u051D\u051F\u0521\u0523\u0525\u0527\u0529\u052B\u052D\u052F\u0561-\u0587\u13F8-\u13FD\u1D00-\u1D2B\u1D6B-\u1D77\u1D79-\u1D9A\u1E01\u1E03\u1E05\u1E07\u1E09\u1E0B\u1E0D\u1E0F\u1E11\u1E13\u1E15\u1E17\u1E19\u1E1B\u1E1D\u1E1F\u1E21\u1E23\u1E25\u1E27\u1E29\u1E2B\u1E2D\u1E2F\u1E31\u1E33\u1E35\u1E37\u1E39\u1E3B\u1E3D\u1E3F\u1E41\u1E43\u1E45\u1E47\u1E49\u1E4B\u1E4D\u1E4F\u1E51\u1E53\u1E55\u1E57\u1E59\u1E5B\u1E5D\u1E5F\u1E61\u1E63\u1E65\u1E67\u1E69\u1E6B\u1E6D\u1E6F\u1E71\u1E73\u1E75\u1E77\u1E79\u1E7B\u1E7D\u1E7F\u1E81\u1E83\u1E85\u1E87\u1E89\u1E8B\u1E8D\u1E8F\u1E91\u1E93\u1E95-\u1E9D\u1E9F\u1EA1\u1EA3\u1EA5\u1EA7\u1EA9\u1EAB\u1EAD\u1EAF\u1EB1\u1EB3\u1EB5\u1EB7\u1EB9\u1EBB\u1EBD\u1EBF\u1EC1\u1EC3\u1EC5\u1EC7\u1EC9\u1ECB\u1ECD\u1ECF\u1ED1\u1ED3\u1ED5\u1ED7\u1ED9\u1EDB\u1EDD\u1EDF\u1EE1\u1EE3\u1EE5\u1EE7\u1EE9\u1EEB\u1EED\u1EEF\u1EF1\u1EF3\u1EF5\u1EF7\u1EF9\u1EFB\u1EFD\u1EFF-\u1F07\u1F10-\u1F15\u1F20-\u1F27\u1F30-\u1F37\u1F40-\u1F45\u1F50-\u1F57\u1F60-\u1F67\u1F70-\u1F7D\u1F80-\u1F87\u1F90-\u1F97\u1FA0-\u1FA7\u1FB0-\u1FB4\u1FB6-\u1FB7\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FC7\u1FD0-\u1FD3\u1FD6-\u1FD7\u1FE0-\u1FE7\u1FF2-\u1FF4\u1FF6-\u1FF7\u210A\u210E-\u210F\u2113\u212F\u2134\u2139\u213C-\u213D\u2146-\u2149\u214E\u2184\u2C30-\u2C5E\u2C61\u2C65-\u2C66\u2C68\u2C6A\u2C6C\u2C71\u2C73-\u2C74\u2C76-\u2C7B\u2C81\u2C83\u2C85\u2C87\u2C89\u2C8B\u2C8D\u2C8F\u2C91\u2C93\u2C95\u2C97\u2C99\u2C9B\u2C9D\u2C9F\u2CA1\u2CA3\u2CA5\u2CA7\u2CA9\u2CAB\u2CAD\u2CAF\u2CB1\u2CB3\u2CB5\u2CB7\u2CB9\u2CBB\u2CBD\u2CBF\u2CC1\u2CC3\u2CC5\u2CC7\u2CC9\u2CCB\u2CCD\u2CCF\u2CD1\u2CD3\u2CD5\u2CD7\u2CD9\u2CDB\u2CDD\u2CDF\u2CE1\u2CE3-\u2CE4\u2CEC\u2CEE\u2CF3\u2D00-\u2D25\u2D27\u2D2D\uA641\uA643\uA645\uA647\uA649\uA64B\uA64D\uA64F\uA651\uA653\uA655\uA657\uA659\uA65B\uA65D\uA65F\uA661\uA663\uA665\uA667\uA669\uA66B\uA66D\uA681\uA683\uA685\uA687\uA689\uA68B\uA68D\uA68F\uA691\uA693\uA695\uA697\uA699\uA69B\uA723\uA725\uA727\uA729\uA72B\uA72D\uA72F-\uA731\uA733\uA735\uA737\uA739\uA73B\uA73D\uA73F\uA741\uA743\uA745\uA747\uA749\uA74B\uA74D\uA74F\uA751\uA753\uA755\uA757\uA759\uA75B\uA75D\uA75F\uA761\uA763\uA765\uA767\uA769\uA76B\uA76D\uA76F\uA771-\uA778\uA77A\uA77C\uA77F\uA781\uA783\uA785\uA787\uA78C\uA78E\uA791\uA793-\uA795\uA797\uA799\uA79B\uA79D\uA79F\uA7A1\uA7A3\uA7A5\uA7A7\uA7A9\uA7B5\uA7B7\uA7FA\uAB30-\uAB5A\uAB60-\uAB65\uAB70-\uABBF\uFB00-\uFB06\uFB13-\uFB17\uFF41-\uFF5A]/,He=/^[\u02B0-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0374\u037A\u0559\u0640\u06E5-\u06E6\u07F4-\u07F5\u07FA\u081A\u0824\u0828\u0971\u0E46\u0EC6\u10FC\u17D7\u1843\u1AA7\u1C78-\u1C7D\u1D2C-\u1D6A\u1D78\u1D9B-\u1DBF\u2071\u207F\u2090-\u209C\u2C7C-\u2C7D\u2D6F\u2E2F\u3005\u3031-\u3035\u303B\u309D-\u309E\u30FC-\u30FE\uA015\uA4F8-\uA4FD\uA60C\uA67F\uA69C-\uA69D\uA717-\uA71F\uA770\uA788\uA7F8-\uA7F9\uA9CF\uA9E6\uAA70\uAADD\uAAF3-\uAAF4\uAB5C-\uAB5F\uFF70\uFF9E-\uFF9F]/,De=/^[\xAA\xBA\u01BB\u01C0-\u01C3\u0294\u05D0-\u05EA\u05F0-\u05F2\u0620-\u063F\u0641-\u064A\u066E-\u066F\u0671-\u06D3\u06D5\u06EE-\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u0800-\u0815\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0972-\u0980\u0985-\u098C\u098F-\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC-\u09DD\u09DF-\u09E1\u09F0-\u09F1\u0A05-\u0A0A\u0A0F-\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32-\u0A33\u0A35-\u0A36\u0A38-\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2-\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0-\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F-\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32-\u0B33\u0B35-\u0B39\u0B3D\u0B5C-\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99-\u0B9A\u0B9C\u0B9E-\u0B9F\u0BA3-\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60-\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0-\u0CE1\u0CF1-\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32-\u0E33\u0E40-\u0E45\u0E81-\u0E82\u0E84\u0E87-\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA-\u0EAB\u0EAD-\u0EB0\u0EB2-\u0EB3\u0EBD\u0EC0-\u0EC4\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065-\u1066\u106E-\u1070\u1075-\u1081\u108E\u10D0-\u10FA\u10FD-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17DC\u1820-\u1842\u1844-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE-\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C77\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5-\u1CF6\u2135-\u2138\u2D30-\u2D67\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3006\u303C\u3041-\u3096\u309F\u30A1-\u30FA\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA014\uA016-\uA48C\uA4D0-\uA4F7\uA500-\uA60B\uA610-\uA61F\uA62A-\uA62B\uA66E\uA6A0-\uA6E5\uA78F\uA7F7\uA7FB-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9E0-\uA9E4\uA9E7-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA6F\uAA71-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5-\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADC\uAAE0-\uAAEA\uAAF2\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40-\uFB41\uFB43-\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF66-\uFF6F\uFF71-\uFF9D\uFFA0-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,$r=/^[\u01C5\u01C8\u01CB\u01F2\u1F88-\u1F8F\u1F98-\u1F9F\u1FA8-\u1FAF\u1FBC\u1FCC\u1FFC]/,yn=/^[A-Z\xC0-\xD6\xD8-\xDE\u0100\u0102\u0104\u0106\u0108\u010A\u010C\u010E\u0110\u0112\u0114\u0116\u0118\u011A\u011C\u011E\u0120\u0122\u0124\u0126\u0128\u012A\u012C\u012E\u0130\u0132\u0134\u0136\u0139\u013B\u013D\u013F\u0141\u0143\u0145\u0147\u014A\u014C\u014E\u0150\u0152\u0154\u0156\u0158\u015A\u015C\u015E\u0160\u0162\u0164\u0166\u0168\u016A\u016C\u016E\u0170\u0172\u0174\u0176\u0178-\u0179\u017B\u017D\u0181-\u0182\u0184\u0186-\u0187\u0189-\u018B\u018E-\u0191\u0193-\u0194\u0196-\u0198\u019C-\u019D\u019F-\u01A0\u01A2\u01A4\u01A6-\u01A7\u01A9\u01AC\u01AE-\u01AF\u01B1-\u01B3\u01B5\u01B7-\u01B8\u01BC\u01C4\u01C7\u01CA\u01CD\u01CF\u01D1\u01D3\u01D5\u01D7\u01D9\u01DB\u01DE\u01E0\u01E2\u01E4\u01E6\u01E8\u01EA\u01EC\u01EE\u01F1\u01F4\u01F6-\u01F8\u01FA\u01FC\u01FE\u0200\u0202\u0204\u0206\u0208\u020A\u020C\u020E\u0210\u0212\u0214\u0216\u0218\u021A\u021C\u021E\u0220\u0222\u0224\u0226\u0228\u022A\u022C\u022E\u0230\u0232\u023A-\u023B\u023D-\u023E\u0241\u0243-\u0246\u0248\u024A\u024C\u024E\u0370\u0372\u0376\u037F\u0386\u0388-\u038A\u038C\u038E-\u038F\u0391-\u03A1\u03A3-\u03AB\u03CF\u03D2-\u03D4\u03D8\u03DA\u03DC\u03DE\u03E0\u03E2\u03E4\u03E6\u03E8\u03EA\u03EC\u03EE\u03F4\u03F7\u03F9-\u03FA\u03FD-\u042F\u0460\u0462\u0464\u0466\u0468\u046A\u046C\u046E\u0470\u0472\u0474\u0476\u0478\u047A\u047C\u047E\u0480\u048A\u048C\u048E\u0490\u0492\u0494\u0496\u0498\u049A\u049C\u049E\u04A0\u04A2\u04A4\u04A6\u04A8\u04AA\u04AC\u04AE\u04B0\u04B2\u04B4\u04B6\u04B8\u04BA\u04BC\u04BE\u04C0-\u04C1\u04C3\u04C5\u04C7\u04C9\u04CB\u04CD\u04D0\u04D2\u04D4\u04D6\u04D8\u04DA\u04DC\u04DE\u04E0\u04E2\u04E4\u04E6\u04E8\u04EA\u04EC\u04EE\u04F0\u04F2\u04F4\u04F6\u04F8\u04FA\u04FC\u04FE\u0500\u0502\u0504\u0506\u0508\u050A\u050C\u050E\u0510\u0512\u0514\u0516\u0518\u051A\u051C\u051E\u0520\u0522\u0524\u0526\u0528\u052A\u052C\u052E\u0531-\u0556\u10A0-\u10C5\u10C7\u10CD\u13A0-\u13F5\u1E00\u1E02\u1E04\u1E06\u1E08\u1E0A\u1E0C\u1E0E\u1E10\u1E12\u1E14\u1E16\u1E18\u1E1A\u1E1C\u1E1E\u1E20\u1E22\u1E24\u1E26\u1E28\u1E2A\u1E2C\u1E2E\u1E30\u1E32\u1E34\u1E36\u1E38\u1E3A\u1E3C\u1E3E\u1E40\u1E42\u1E44\u1E46\u1E48\u1E4A\u1E4C\u1E4E\u1E50\u1E52\u1E54\u1E56\u1E58\u1E5A\u1E5C\u1E5E\u1E60\u1E62\u1E64\u1E66\u1E68\u1E6A\u1E6C\u1E6E\u1E70\u1E72\u1E74\u1E76\u1E78\u1E7A\u1E7C\u1E7E\u1E80\u1E82\u1E84\u1E86\u1E88\u1E8A\u1E8C\u1E8E\u1E90\u1E92\u1E94\u1E9E\u1EA0\u1EA2\u1EA4\u1EA6\u1EA8\u1EAA\u1EAC\u1EAE\u1EB0\u1EB2\u1EB4\u1EB6\u1EB8\u1EBA\u1EBC\u1EBE\u1EC0\u1EC2\u1EC4\u1EC6\u1EC8\u1ECA\u1ECC\u1ECE\u1ED0\u1ED2\u1ED4\u1ED6\u1ED8\u1EDA\u1EDC\u1EDE\u1EE0\u1EE2\u1EE4\u1EE6\u1EE8\u1EEA\u1EEC\u1EEE\u1EF0\u1EF2\u1EF4\u1EF6\u1EF8\u1EFA\u1EFC\u1EFE\u1F08-\u1F0F\u1F18-\u1F1D\u1F28-\u1F2F\u1F38-\u1F3F\u1F48-\u1F4D\u1F59\u1F5B\u1F5D\u1F5F\u1F68-\u1F6F\u1FB8-\u1FBB\u1FC8-\u1FCB\u1FD8-\u1FDB\u1FE8-\u1FEC\u1FF8-\u1FFB\u2102\u2107\u210B-\u210D\u2110-\u2112\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u2130-\u2133\u213E-\u213F\u2145\u2183\u2C00-\u2C2E\u2C60\u2C62-\u2C64\u2C67\u2C69\u2C6B\u2C6D-\u2C70\u2C72\u2C75\u2C7E-\u2C80\u2C82\u2C84\u2C86\u2C88\u2C8A\u2C8C\u2C8E\u2C90\u2C92\u2C94\u2C96\u2C98\u2C9A\u2C9C\u2C9E\u2CA0\u2CA2\u2CA4\u2CA6\u2CA8\u2CAA\u2CAC\u2CAE\u2CB0\u2CB2\u2CB4\u2CB6\u2CB8\u2CBA\u2CBC\u2CBE\u2CC0\u2CC2\u2CC4\u2CC6\u2CC8\u2CCA\u2CCC\u2CCE\u2CD0\u2CD2\u2CD4\u2CD6\u2CD8\u2CDA\u2CDC\u2CDE\u2CE0\u2CE2\u2CEB\u2CED\u2CF2\uA640\uA642\uA644\uA646\uA648\uA64A\uA64C\uA64E\uA650\uA652\uA654\uA656\uA658\uA65A\uA65C\uA65E\uA660\uA662\uA664\uA666\uA668\uA66A\uA66C\uA680\uA682\uA684\uA686\uA688\uA68A\uA68C\uA68E\uA690\uA692\uA694\uA696\uA698\uA69A\uA722\uA724\uA726\uA728\uA72A\uA72C\uA72E\uA732\uA734\uA736\uA738\uA73A\uA73C\uA73E\uA740\uA742\uA744\uA746\uA748\uA74A\uA74C\uA74E\uA750\uA752\uA754\uA756\uA758\uA75A\uA75C\uA75E\uA760\uA762\uA764\uA766\uA768\uA76A\uA76C\uA76E\uA779\uA77B\uA77D-\uA77E\uA780\uA782\uA784\uA786\uA78B\uA78D\uA790\uA792\uA796\uA798\uA79A\uA79C\uA79E\uA7A0\uA7A2\uA7A4\uA7A6\uA7A8\uA7AA-\uA7AD\uA7B0-\uA7B4\uA7B6\uFF21-\uFF3A]/,at=/^[\u0903\u093B\u093E-\u0940\u0949-\u094C\u094E-\u094F\u0982-\u0983\u09BE-\u09C0\u09C7-\u09C8\u09CB-\u09CC\u09D7\u0A03\u0A3E-\u0A40\u0A83\u0ABE-\u0AC0\u0AC9\u0ACB-\u0ACC\u0B02-\u0B03\u0B3E\u0B40\u0B47-\u0B48\u0B4B-\u0B4C\u0B57\u0BBE-\u0BBF\u0BC1-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0BD7\u0C01-\u0C03\u0C41-\u0C44\u0C82-\u0C83\u0CBE\u0CC0-\u0CC4\u0CC7-\u0CC8\u0CCA-\u0CCB\u0CD5-\u0CD6\u0D02-\u0D03\u0D3E-\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D57\u0D82-\u0D83\u0DCF-\u0DD1\u0DD8-\u0DDF\u0DF2-\u0DF3\u0F3E-\u0F3F\u0F7F\u102B-\u102C\u1031\u1038\u103B-\u103C\u1056-\u1057\u1062-\u1064\u1067-\u106D\u1083-\u1084\u1087-\u108C\u108F\u109A-\u109C\u17B6\u17BE-\u17C5\u17C7-\u17C8\u1923-\u1926\u1929-\u192B\u1930-\u1931\u1933-\u1938\u1A19-\u1A1A\u1A55\u1A57\u1A61\u1A63-\u1A64\u1A6D-\u1A72\u1B04\u1B35\u1B3B\u1B3D-\u1B41\u1B43-\u1B44\u1B82\u1BA1\u1BA6-\u1BA7\u1BAA\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2-\u1BF3\u1C24-\u1C2B\u1C34-\u1C35\u1CE1\u1CF2-\u1CF3\u302E-\u302F\uA823-\uA824\uA827\uA880-\uA881\uA8B4-\uA8C3\uA952-\uA953\uA983\uA9B4-\uA9B5\uA9BA-\uA9BB\uA9BD-\uA9C0\uAA2F-\uAA30\uAA33-\uAA34\uAA4D\uAA7B\uAA7D\uAAEB\uAAEE-\uAAEF\uAAF5\uABE3-\uABE4\uABE6-\uABE7\uABE9-\uABEA\uABEC]/,Na=/^[\u0300-\u036F\u0483-\u0487\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962-\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2-\u09E3\u0A01-\u0A02\u0A3C\u0A41-\u0A42\u0A47-\u0A48\u0A4B-\u0A4D\u0A51\u0A70-\u0A71\u0A75\u0A81-\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7-\u0AC8\u0ACD\u0AE2-\u0AE3\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B56\u0B62-\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55-\u0C56\u0C62-\u0C63\u0C81\u0CBC\u0CBF\u0CC6\u0CCC-\u0CCD\u0CE2-\u0CE3\u0D01\u0D41-\u0D44\u0D4D\u0D62-\u0D63\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB-\u0EBC\u0EC8-\u0ECD\u0F18-\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86-\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039-\u103A\u103D-\u103E\u1058-\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17B4-\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u18A9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193B\u1A17-\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ABD\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80-\u1B81\u1BA2-\u1BA5\u1BA8-\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8-\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8-\u1CF9\u1DC0-\u1DF5\u1DFC-\u1DFF\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099-\u309A\uA66F\uA674-\uA67D\uA69E-\uA69F\uA6F0-\uA6F1\uA802\uA806\uA80B\uA825-\uA826\uA8C4\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9E5\uAA29-\uAA2E\uAA31-\uAA32\uAA35-\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7-\uAAB8\uAABE-\uAABF\uAAC1\uAAEC-\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/,bn=/^[0-9\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0BE6-\u0BEF\u0C66-\u0C6F\u0CE6-\u0CEF\u0D66-\u0D6F\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F29\u1040-\u1049\u1090-\u1099\u17E0-\u17E9\u1810-\u1819\u1946-\u194F\u19D0-\u19D9\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\uA620-\uA629\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19]/,ge=/^[\u16EE-\u16F0\u2160-\u2182\u2185-\u2188\u3007\u3021-\u3029\u3038-\u303A\uA6E6-\uA6EF]/,Ks=/^[_\u203F-\u2040\u2054\uFE33-\uFE34\uFE4D-\uFE4F\uFF3F]/,Nt=/^[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,on=Ye("{",!1),Fs=Ye("}",!1),Bu=Ye("=",!1),zs=Ye("/",!1),$u=Ye("@",!1),Gs=Ye(":",!1),Ss=Ye("$",!1),Mt=Ye("&",!1),pi=Ye("!",!1),Ru=Ye("?",!1),xu=Ye("*",!1),Pu=Ye("+",!1),Ys=Ye("(",!1),vo=Ye(")",!1),Ws=Nu(),wo=us("whitespace"),ka=Ye("	",!1),re=Ye("\v",!1),fe=Ye("\f",!1),Ue=Ye(" ",!1),Oe=Ye("\xA0",!1),ze=Ye("\uFEFF",!1),ut=Gr([`
`,"\r","\u2028","\u2029"],!1,!1),gt=us("end of line"),Ur=Ye(`
`,!1),Yt=Ye(`\r
`,!1),gi=Ye("\r",!1),ss=Ye("\u2028",!1),_n=Ye("\u2029",!1),Nn=us("comment"),Rr=Ye("/*",!1),Cn=Ye("*/",!1),en=Ye("//",!1),Eo=us("identifier"),Xs=Ye("_",!1),Jn=Ye("\\",!1),Ut=Ye("\u200C",!1),xr=Ye("\u200D",!1),et=us("literal"),vr=Ye("i",!1),cn=us("string"),wr=Ye('"',!1),Wt=Ye("'",!1),Zn=us("character class"),mi=Ye("[",!1),vi=Ye("^",!1),Qn=Ye("]",!1),Kr=Ye("-",!1),yr=Ye("0",!1),ef=Ye("b",!1),Ao=Ye("f",!1),ln=Ye("n",!1),yo=Ye("r",!1),Ac=Ye("t",!1),yc=Ye("v",!1),bo=Ye("x",!1),Js=Ye("u",!1),_o=Gr([["0","9"]],!1,!1),bc=Gr([["0","9"],["a","f"]],!1,!0),Co=Ye(".",!1),Do=us("code block"),ei=Gr(["{","}"],!1,!1),O=Gr([["a","z"],"\xB5",["\xDF","\xF6"],["\xF8","\xFF"],"\u0101","\u0103","\u0105","\u0107","\u0109","\u010B","\u010D","\u010F","\u0111","\u0113","\u0115","\u0117","\u0119","\u011B","\u011D","\u011F","\u0121","\u0123","\u0125","\u0127","\u0129","\u012B","\u012D","\u012F","\u0131","\u0133","\u0135",["\u0137","\u0138"],"\u013A","\u013C","\u013E","\u0140","\u0142","\u0144","\u0146",["\u0148","\u0149"],"\u014B","\u014D","\u014F","\u0151","\u0153","\u0155","\u0157","\u0159","\u015B","\u015D","\u015F","\u0161","\u0163","\u0165","\u0167","\u0169","\u016B","\u016D","\u016F","\u0171","\u0173","\u0175","\u0177","\u017A","\u017C",["\u017E","\u0180"],"\u0183","\u0185","\u0188",["\u018C","\u018D"],"\u0192","\u0195",["\u0199","\u019B"],"\u019E","\u01A1","\u01A3","\u01A5","\u01A8",["\u01AA","\u01AB"],"\u01AD","\u01B0","\u01B4","\u01B6",["\u01B9","\u01BA"],["\u01BD","\u01BF"],"\u01C6","\u01C9","\u01CC","\u01CE","\u01D0","\u01D2","\u01D4","\u01D6","\u01D8","\u01DA",["\u01DC","\u01DD"],"\u01DF","\u01E1","\u01E3","\u01E5","\u01E7","\u01E9","\u01EB","\u01ED",["\u01EF","\u01F0"],"\u01F3","\u01F5","\u01F9","\u01FB","\u01FD","\u01FF","\u0201","\u0203","\u0205","\u0207","\u0209","\u020B","\u020D","\u020F","\u0211","\u0213","\u0215","\u0217","\u0219","\u021B","\u021D","\u021F","\u0221","\u0223","\u0225","\u0227","\u0229","\u022B","\u022D","\u022F","\u0231",["\u0233","\u0239"],"\u023C",["\u023F","\u0240"],"\u0242","\u0247","\u0249","\u024B","\u024D",["\u024F","\u0293"],["\u0295","\u02AF"],"\u0371","\u0373","\u0377",["\u037B","\u037D"],"\u0390",["\u03AC","\u03CE"],["\u03D0","\u03D1"],["\u03D5","\u03D7"],"\u03D9","\u03DB","\u03DD","\u03DF","\u03E1","\u03E3","\u03E5","\u03E7","\u03E9","\u03EB","\u03ED",["\u03EF","\u03F3"],"\u03F5","\u03F8",["\u03FB","\u03FC"],["\u0430","\u045F"],"\u0461","\u0463","\u0465","\u0467","\u0469","\u046B","\u046D","\u046F","\u0471","\u0473","\u0475","\u0477","\u0479","\u047B","\u047D","\u047F","\u0481","\u048B","\u048D","\u048F","\u0491","\u0493","\u0495","\u0497","\u0499","\u049B","\u049D","\u049F","\u04A1","\u04A3","\u04A5","\u04A7","\u04A9","\u04AB","\u04AD","\u04AF","\u04B1","\u04B3","\u04B5","\u04B7","\u04B9","\u04BB","\u04BD","\u04BF","\u04C2","\u04C4","\u04C6","\u04C8","\u04CA","\u04CC",["\u04CE","\u04CF"],"\u04D1","\u04D3","\u04D5","\u04D7","\u04D9","\u04DB","\u04DD","\u04DF","\u04E1","\u04E3","\u04E5","\u04E7","\u04E9","\u04EB","\u04ED","\u04EF","\u04F1","\u04F3","\u04F5","\u04F7","\u04F9","\u04FB","\u04FD","\u04FF","\u0501","\u0503","\u0505","\u0507","\u0509","\u050B","\u050D","\u050F","\u0511","\u0513","\u0515","\u0517","\u0519","\u051B","\u051D","\u051F","\u0521","\u0523","\u0525","\u0527","\u0529","\u052B","\u052D","\u052F",["\u0561","\u0587"],["\u13F8","\u13FD"],["\u1D00","\u1D2B"],["\u1D6B","\u1D77"],["\u1D79","\u1D9A"],"\u1E01","\u1E03","\u1E05","\u1E07","\u1E09","\u1E0B","\u1E0D","\u1E0F","\u1E11","\u1E13","\u1E15","\u1E17","\u1E19","\u1E1B","\u1E1D","\u1E1F","\u1E21","\u1E23","\u1E25","\u1E27","\u1E29","\u1E2B","\u1E2D","\u1E2F","\u1E31","\u1E33","\u1E35","\u1E37","\u1E39","\u1E3B","\u1E3D","\u1E3F","\u1E41","\u1E43","\u1E45","\u1E47","\u1E49","\u1E4B","\u1E4D","\u1E4F","\u1E51","\u1E53","\u1E55","\u1E57","\u1E59","\u1E5B","\u1E5D","\u1E5F","\u1E61","\u1E63","\u1E65","\u1E67","\u1E69","\u1E6B","\u1E6D","\u1E6F","\u1E71","\u1E73","\u1E75","\u1E77","\u1E79","\u1E7B","\u1E7D","\u1E7F","\u1E81","\u1E83","\u1E85","\u1E87","\u1E89","\u1E8B","\u1E8D","\u1E8F","\u1E91","\u1E93",["\u1E95","\u1E9D"],"\u1E9F","\u1EA1","\u1EA3","\u1EA5","\u1EA7","\u1EA9","\u1EAB","\u1EAD","\u1EAF","\u1EB1","\u1EB3","\u1EB5","\u1EB7","\u1EB9","\u1EBB","\u1EBD","\u1EBF","\u1EC1","\u1EC3","\u1EC5","\u1EC7","\u1EC9","\u1ECB","\u1ECD","\u1ECF","\u1ED1","\u1ED3","\u1ED5","\u1ED7","\u1ED9","\u1EDB","\u1EDD","\u1EDF","\u1EE1","\u1EE3","\u1EE5","\u1EE7","\u1EE9","\u1EEB","\u1EED","\u1EEF","\u1EF1","\u1EF3","\u1EF5","\u1EF7","\u1EF9","\u1EFB","\u1EFD",["\u1EFF","\u1F07"],["\u1F10","\u1F15"],["\u1F20","\u1F27"],["\u1F30","\u1F37"],["\u1F40","\u1F45"],["\u1F50","\u1F57"],["\u1F60","\u1F67"],["\u1F70","\u1F7D"],["\u1F80","\u1F87"],["\u1F90","\u1F97"],["\u1FA0","\u1FA7"],["\u1FB0","\u1FB4"],["\u1FB6","\u1FB7"],"\u1FBE",["\u1FC2","\u1FC4"],["\u1FC6","\u1FC7"],["\u1FD0","\u1FD3"],["\u1FD6","\u1FD7"],["\u1FE0","\u1FE7"],["\u1FF2","\u1FF4"],["\u1FF6","\u1FF7"],"\u210A",["\u210E","\u210F"],"\u2113","\u212F","\u2134","\u2139",["\u213C","\u213D"],["\u2146","\u2149"],"\u214E","\u2184",["\u2C30","\u2C5E"],"\u2C61",["\u2C65","\u2C66"],"\u2C68","\u2C6A","\u2C6C","\u2C71",["\u2C73","\u2C74"],["\u2C76","\u2C7B"],"\u2C81","\u2C83","\u2C85","\u2C87","\u2C89","\u2C8B","\u2C8D","\u2C8F","\u2C91","\u2C93","\u2C95","\u2C97","\u2C99","\u2C9B","\u2C9D","\u2C9F","\u2CA1","\u2CA3","\u2CA5","\u2CA7","\u2CA9","\u2CAB","\u2CAD","\u2CAF","\u2CB1","\u2CB3","\u2CB5","\u2CB7","\u2CB9","\u2CBB","\u2CBD","\u2CBF","\u2CC1","\u2CC3","\u2CC5","\u2CC7","\u2CC9","\u2CCB","\u2CCD","\u2CCF","\u2CD1","\u2CD3","\u2CD5","\u2CD7","\u2CD9","\u2CDB","\u2CDD","\u2CDF","\u2CE1",["\u2CE3","\u2CE4"],"\u2CEC","\u2CEE","\u2CF3",["\u2D00","\u2D25"],"\u2D27","\u2D2D","\uA641","\uA643","\uA645","\uA647","\uA649","\uA64B","\uA64D","\uA64F","\uA651","\uA653","\uA655","\uA657","\uA659","\uA65B","\uA65D","\uA65F","\uA661","\uA663","\uA665","\uA667","\uA669","\uA66B","\uA66D","\uA681","\uA683","\uA685","\uA687","\uA689","\uA68B","\uA68D","\uA68F","\uA691","\uA693","\uA695","\uA697","\uA699","\uA69B","\uA723","\uA725","\uA727","\uA729","\uA72B","\uA72D",["\uA72F","\uA731"],"\uA733","\uA735","\uA737","\uA739","\uA73B","\uA73D","\uA73F","\uA741","\uA743","\uA745","\uA747","\uA749","\uA74B","\uA74D","\uA74F","\uA751","\uA753","\uA755","\uA757","\uA759","\uA75B","\uA75D","\uA75F","\uA761","\uA763","\uA765","\uA767","\uA769","\uA76B","\uA76D","\uA76F",["\uA771","\uA778"],"\uA77A","\uA77C","\uA77F","\uA781","\uA783","\uA785","\uA787","\uA78C","\uA78E","\uA791",["\uA793","\uA795"],"\uA797","\uA799","\uA79B","\uA79D","\uA79F","\uA7A1","\uA7A3","\uA7A5","\uA7A7","\uA7A9","\uA7B5","\uA7B7","\uA7FA",["\uAB30","\uAB5A"],["\uAB60","\uAB65"],["\uAB70","\uABBF"],["\uFB00","\uFB06"],["\uFB13","\uFB17"],["\uFF41","\uFF5A"]],!1,!1),L=Gr([["\u02B0","\u02C1"],["\u02C6","\u02D1"],["\u02E0","\u02E4"],"\u02EC","\u02EE","\u0374","\u037A","\u0559","\u0640",["\u06E5","\u06E6"],["\u07F4","\u07F5"],"\u07FA","\u081A","\u0824","\u0828","\u0971","\u0E46","\u0EC6","\u10FC","\u17D7","\u1843","\u1AA7",["\u1C78","\u1C7D"],["\u1D2C","\u1D6A"],"\u1D78",["\u1D9B","\u1DBF"],"\u2071","\u207F",["\u2090","\u209C"],["\u2C7C","\u2C7D"],"\u2D6F","\u2E2F","\u3005",["\u3031","\u3035"],"\u303B",["\u309D","\u309E"],["\u30FC","\u30FE"],"\uA015",["\uA4F8","\uA4FD"],"\uA60C","\uA67F",["\uA69C","\uA69D"],["\uA717","\uA71F"],"\uA770","\uA788",["\uA7F8","\uA7F9"],"\uA9CF","\uA9E6","\uAA70","\uAADD",["\uAAF3","\uAAF4"],["\uAB5C","\uAB5F"],"\uFF70",["\uFF9E","\uFF9F"]],!1,!1),K=Gr(["\xAA","\xBA","\u01BB",["\u01C0","\u01C3"],"\u0294",["\u05D0","\u05EA"],["\u05F0","\u05F2"],["\u0620","\u063F"],["\u0641","\u064A"],["\u066E","\u066F"],["\u0671","\u06D3"],"\u06D5",["\u06EE","\u06EF"],["\u06FA","\u06FC"],"\u06FF","\u0710",["\u0712","\u072F"],["\u074D","\u07A5"],"\u07B1",["\u07CA","\u07EA"],["\u0800","\u0815"],["\u0840","\u0858"],["\u08A0","\u08B4"],["\u0904","\u0939"],"\u093D","\u0950",["\u0958","\u0961"],["\u0972","\u0980"],["\u0985","\u098C"],["\u098F","\u0990"],["\u0993","\u09A8"],["\u09AA","\u09B0"],"\u09B2",["\u09B6","\u09B9"],"\u09BD","\u09CE",["\u09DC","\u09DD"],["\u09DF","\u09E1"],["\u09F0","\u09F1"],["\u0A05","\u0A0A"],["\u0A0F","\u0A10"],["\u0A13","\u0A28"],["\u0A2A","\u0A30"],["\u0A32","\u0A33"],["\u0A35","\u0A36"],["\u0A38","\u0A39"],["\u0A59","\u0A5C"],"\u0A5E",["\u0A72","\u0A74"],["\u0A85","\u0A8D"],["\u0A8F","\u0A91"],["\u0A93","\u0AA8"],["\u0AAA","\u0AB0"],["\u0AB2","\u0AB3"],["\u0AB5","\u0AB9"],"\u0ABD","\u0AD0",["\u0AE0","\u0AE1"],"\u0AF9",["\u0B05","\u0B0C"],["\u0B0F","\u0B10"],["\u0B13","\u0B28"],["\u0B2A","\u0B30"],["\u0B32","\u0B33"],["\u0B35","\u0B39"],"\u0B3D",["\u0B5C","\u0B5D"],["\u0B5F","\u0B61"],"\u0B71","\u0B83",["\u0B85","\u0B8A"],["\u0B8E","\u0B90"],["\u0B92","\u0B95"],["\u0B99","\u0B9A"],"\u0B9C",["\u0B9E","\u0B9F"],["\u0BA3","\u0BA4"],["\u0BA8","\u0BAA"],["\u0BAE","\u0BB9"],"\u0BD0",["\u0C05","\u0C0C"],["\u0C0E","\u0C10"],["\u0C12","\u0C28"],["\u0C2A","\u0C39"],"\u0C3D",["\u0C58","\u0C5A"],["\u0C60","\u0C61"],["\u0C85","\u0C8C"],["\u0C8E","\u0C90"],["\u0C92","\u0CA8"],["\u0CAA","\u0CB3"],["\u0CB5","\u0CB9"],"\u0CBD","\u0CDE",["\u0CE0","\u0CE1"],["\u0CF1","\u0CF2"],["\u0D05","\u0D0C"],["\u0D0E","\u0D10"],["\u0D12","\u0D3A"],"\u0D3D","\u0D4E",["\u0D5F","\u0D61"],["\u0D7A","\u0D7F"],["\u0D85","\u0D96"],["\u0D9A","\u0DB1"],["\u0DB3","\u0DBB"],"\u0DBD",["\u0DC0","\u0DC6"],["\u0E01","\u0E30"],["\u0E32","\u0E33"],["\u0E40","\u0E45"],["\u0E81","\u0E82"],"\u0E84",["\u0E87","\u0E88"],"\u0E8A","\u0E8D",["\u0E94","\u0E97"],["\u0E99","\u0E9F"],["\u0EA1","\u0EA3"],"\u0EA5","\u0EA7",["\u0EAA","\u0EAB"],["\u0EAD","\u0EB0"],["\u0EB2","\u0EB3"],"\u0EBD",["\u0EC0","\u0EC4"],["\u0EDC","\u0EDF"],"\u0F00",["\u0F40","\u0F47"],["\u0F49","\u0F6C"],["\u0F88","\u0F8C"],["\u1000","\u102A"],"\u103F",["\u1050","\u1055"],["\u105A","\u105D"],"\u1061",["\u1065","\u1066"],["\u106E","\u1070"],["\u1075","\u1081"],"\u108E",["\u10D0","\u10FA"],["\u10FD","\u1248"],["\u124A","\u124D"],["\u1250","\u1256"],"\u1258",["\u125A","\u125D"],["\u1260","\u1288"],["\u128A","\u128D"],["\u1290","\u12B0"],["\u12B2","\u12B5"],["\u12B8","\u12BE"],"\u12C0",["\u12C2","\u12C5"],["\u12C8","\u12D6"],["\u12D8","\u1310"],["\u1312","\u1315"],["\u1318","\u135A"],["\u1380","\u138F"],["\u1401","\u166C"],["\u166F","\u167F"],["\u1681","\u169A"],["\u16A0","\u16EA"],["\u16F1","\u16F8"],["\u1700","\u170C"],["\u170E","\u1711"],["\u1720","\u1731"],["\u1740","\u1751"],["\u1760","\u176C"],["\u176E","\u1770"],["\u1780","\u17B3"],"\u17DC",["\u1820","\u1842"],["\u1844","\u1877"],["\u1880","\u18A8"],"\u18AA",["\u18B0","\u18F5"],["\u1900","\u191E"],["\u1950","\u196D"],["\u1970","\u1974"],["\u1980","\u19AB"],["\u19B0","\u19C9"],["\u1A00","\u1A16"],["\u1A20","\u1A54"],["\u1B05","\u1B33"],["\u1B45","\u1B4B"],["\u1B83","\u1BA0"],["\u1BAE","\u1BAF"],["\u1BBA","\u1BE5"],["\u1C00","\u1C23"],["\u1C4D","\u1C4F"],["\u1C5A","\u1C77"],["\u1CE9","\u1CEC"],["\u1CEE","\u1CF1"],["\u1CF5","\u1CF6"],["\u2135","\u2138"],["\u2D30","\u2D67"],["\u2D80","\u2D96"],["\u2DA0","\u2DA6"],["\u2DA8","\u2DAE"],["\u2DB0","\u2DB6"],["\u2DB8","\u2DBE"],["\u2DC0","\u2DC6"],["\u2DC8","\u2DCE"],["\u2DD0","\u2DD6"],["\u2DD8","\u2DDE"],"\u3006","\u303C",["\u3041","\u3096"],"\u309F",["\u30A1","\u30FA"],"\u30FF",["\u3105","\u312D"],["\u3131","\u318E"],["\u31A0","\u31BA"],["\u31F0","\u31FF"],["\u3400","\u4DB5"],["\u4E00","\u9FD5"],["\uA000","\uA014"],["\uA016","\uA48C"],["\uA4D0","\uA4F7"],["\uA500","\uA60B"],["\uA610","\uA61F"],["\uA62A","\uA62B"],"\uA66E",["\uA6A0","\uA6E5"],"\uA78F","\uA7F7",["\uA7FB","\uA801"],["\uA803","\uA805"],["\uA807","\uA80A"],["\uA80C","\uA822"],["\uA840","\uA873"],["\uA882","\uA8B3"],["\uA8F2","\uA8F7"],"\uA8FB","\uA8FD",["\uA90A","\uA925"],["\uA930","\uA946"],["\uA960","\uA97C"],["\uA984","\uA9B2"],["\uA9E0","\uA9E4"],["\uA9E7","\uA9EF"],["\uA9FA","\uA9FE"],["\uAA00","\uAA28"],["\uAA40","\uAA42"],["\uAA44","\uAA4B"],["\uAA60","\uAA6F"],["\uAA71","\uAA76"],"\uAA7A",["\uAA7E","\uAAAF"],"\uAAB1",["\uAAB5","\uAAB6"],["\uAAB9","\uAABD"],"\uAAC0","\uAAC2",["\uAADB","\uAADC"],["\uAAE0","\uAAEA"],"\uAAF2",["\uAB01","\uAB06"],["\uAB09","\uAB0E"],["\uAB11","\uAB16"],["\uAB20","\uAB26"],["\uAB28","\uAB2E"],["\uABC0","\uABE2"],["\uAC00","\uD7A3"],["\uD7B0","\uD7C6"],["\uD7CB","\uD7FB"],["\uF900","\uFA6D"],["\uFA70","\uFAD9"],"\uFB1D",["\uFB1F","\uFB28"],["\uFB2A","\uFB36"],["\uFB38","\uFB3C"],"\uFB3E",["\uFB40","\uFB41"],["\uFB43","\uFB44"],["\uFB46","\uFBB1"],["\uFBD3","\uFD3D"],["\uFD50","\uFD8F"],["\uFD92","\uFDC7"],["\uFDF0","\uFDFB"],["\uFE70","\uFE74"],["\uFE76","\uFEFC"],["\uFF66","\uFF6F"],["\uFF71","\uFF9D"],["\uFFA0","\uFFBE"],["\uFFC2","\uFFC7"],["\uFFCA","\uFFCF"],["\uFFD2","\uFFD7"],["\uFFDA","\uFFDC"]],!1,!1),Q=Gr(["\u01C5","\u01C8","\u01CB","\u01F2",["\u1F88","\u1F8F"],["\u1F98","\u1F9F"],["\u1FA8","\u1FAF"],"\u1FBC","\u1FCC","\u1FFC"],!1,!1),ve=Gr([["A","Z"],["\xC0","\xD6"],["\xD8","\xDE"],"\u0100","\u0102","\u0104","\u0106","\u0108","\u010A","\u010C","\u010E","\u0110","\u0112","\u0114","\u0116","\u0118","\u011A","\u011C","\u011E","\u0120","\u0122","\u0124","\u0126","\u0128","\u012A","\u012C","\u012E","\u0130","\u0132","\u0134","\u0136","\u0139","\u013B","\u013D","\u013F","\u0141","\u0143","\u0145","\u0147","\u014A","\u014C","\u014E","\u0150","\u0152","\u0154","\u0156","\u0158","\u015A","\u015C","\u015E","\u0160","\u0162","\u0164","\u0166","\u0168","\u016A","\u016C","\u016E","\u0170","\u0172","\u0174","\u0176",["\u0178","\u0179"],"\u017B","\u017D",["\u0181","\u0182"],"\u0184",["\u0186","\u0187"],["\u0189","\u018B"],["\u018E","\u0191"],["\u0193","\u0194"],["\u0196","\u0198"],["\u019C","\u019D"],["\u019F","\u01A0"],"\u01A2","\u01A4",["\u01A6","\u01A7"],"\u01A9","\u01AC",["\u01AE","\u01AF"],["\u01B1","\u01B3"],"\u01B5",["\u01B7","\u01B8"],"\u01BC","\u01C4","\u01C7","\u01CA","\u01CD","\u01CF","\u01D1","\u01D3","\u01D5","\u01D7","\u01D9","\u01DB","\u01DE","\u01E0","\u01E2","\u01E4","\u01E6","\u01E8","\u01EA","\u01EC","\u01EE","\u01F1","\u01F4",["\u01F6","\u01F8"],"\u01FA","\u01FC","\u01FE","\u0200","\u0202","\u0204","\u0206","\u0208","\u020A","\u020C","\u020E","\u0210","\u0212","\u0214","\u0216","\u0218","\u021A","\u021C","\u021E","\u0220","\u0222","\u0224","\u0226","\u0228","\u022A","\u022C","\u022E","\u0230","\u0232",["\u023A","\u023B"],["\u023D","\u023E"],"\u0241",["\u0243","\u0246"],"\u0248","\u024A","\u024C","\u024E","\u0370","\u0372","\u0376","\u037F","\u0386",["\u0388","\u038A"],"\u038C",["\u038E","\u038F"],["\u0391","\u03A1"],["\u03A3","\u03AB"],"\u03CF",["\u03D2","\u03D4"],"\u03D8","\u03DA","\u03DC","\u03DE","\u03E0","\u03E2","\u03E4","\u03E6","\u03E8","\u03EA","\u03EC","\u03EE","\u03F4","\u03F7",["\u03F9","\u03FA"],["\u03FD","\u042F"],"\u0460","\u0462","\u0464","\u0466","\u0468","\u046A","\u046C","\u046E","\u0470","\u0472","\u0474","\u0476","\u0478","\u047A","\u047C","\u047E","\u0480","\u048A","\u048C","\u048E","\u0490","\u0492","\u0494","\u0496","\u0498","\u049A","\u049C","\u049E","\u04A0","\u04A2","\u04A4","\u04A6","\u04A8","\u04AA","\u04AC","\u04AE","\u04B0","\u04B2","\u04B4","\u04B6","\u04B8","\u04BA","\u04BC","\u04BE",["\u04C0","\u04C1"],"\u04C3","\u04C5","\u04C7","\u04C9","\u04CB","\u04CD","\u04D0","\u04D2","\u04D4","\u04D6","\u04D8","\u04DA","\u04DC","\u04DE","\u04E0","\u04E2","\u04E4","\u04E6","\u04E8","\u04EA","\u04EC","\u04EE","\u04F0","\u04F2","\u04F4","\u04F6","\u04F8","\u04FA","\u04FC","\u04FE","\u0500","\u0502","\u0504","\u0506","\u0508","\u050A","\u050C","\u050E","\u0510","\u0512","\u0514","\u0516","\u0518","\u051A","\u051C","\u051E","\u0520","\u0522","\u0524","\u0526","\u0528","\u052A","\u052C","\u052E",["\u0531","\u0556"],["\u10A0","\u10C5"],"\u10C7","\u10CD",["\u13A0","\u13F5"],"\u1E00","\u1E02","\u1E04","\u1E06","\u1E08","\u1E0A","\u1E0C","\u1E0E","\u1E10","\u1E12","\u1E14","\u1E16","\u1E18","\u1E1A","\u1E1C","\u1E1E","\u1E20","\u1E22","\u1E24","\u1E26","\u1E28","\u1E2A","\u1E2C","\u1E2E","\u1E30","\u1E32","\u1E34","\u1E36","\u1E38","\u1E3A","\u1E3C","\u1E3E","\u1E40","\u1E42","\u1E44","\u1E46","\u1E48","\u1E4A","\u1E4C","\u1E4E","\u1E50","\u1E52","\u1E54","\u1E56","\u1E58","\u1E5A","\u1E5C","\u1E5E","\u1E60","\u1E62","\u1E64","\u1E66","\u1E68","\u1E6A","\u1E6C","\u1E6E","\u1E70","\u1E72","\u1E74","\u1E76","\u1E78","\u1E7A","\u1E7C","\u1E7E","\u1E80","\u1E82","\u1E84","\u1E86","\u1E88","\u1E8A","\u1E8C","\u1E8E","\u1E90","\u1E92","\u1E94","\u1E9E","\u1EA0","\u1EA2","\u1EA4","\u1EA6","\u1EA8","\u1EAA","\u1EAC","\u1EAE","\u1EB0","\u1EB2","\u1EB4","\u1EB6","\u1EB8","\u1EBA","\u1EBC","\u1EBE","\u1EC0","\u1EC2","\u1EC4","\u1EC6","\u1EC8","\u1ECA","\u1ECC","\u1ECE","\u1ED0","\u1ED2","\u1ED4","\u1ED6","\u1ED8","\u1EDA","\u1EDC","\u1EDE","\u1EE0","\u1EE2","\u1EE4","\u1EE6","\u1EE8","\u1EEA","\u1EEC","\u1EEE","\u1EF0","\u1EF2","\u1EF4","\u1EF6","\u1EF8","\u1EFA","\u1EFC","\u1EFE",["\u1F08","\u1F0F"],["\u1F18","\u1F1D"],["\u1F28","\u1F2F"],["\u1F38","\u1F3F"],["\u1F48","\u1F4D"],"\u1F59","\u1F5B","\u1F5D","\u1F5F",["\u1F68","\u1F6F"],["\u1FB8","\u1FBB"],["\u1FC8","\u1FCB"],["\u1FD8","\u1FDB"],["\u1FE8","\u1FEC"],["\u1FF8","\u1FFB"],"\u2102","\u2107",["\u210B","\u210D"],["\u2110","\u2112"],"\u2115",["\u2119","\u211D"],"\u2124","\u2126","\u2128",["\u212A","\u212D"],["\u2130","\u2133"],["\u213E","\u213F"],"\u2145","\u2183",["\u2C00","\u2C2E"],"\u2C60",["\u2C62","\u2C64"],"\u2C67","\u2C69","\u2C6B",["\u2C6D","\u2C70"],"\u2C72","\u2C75",["\u2C7E","\u2C80"],"\u2C82","\u2C84","\u2C86","\u2C88","\u2C8A","\u2C8C","\u2C8E","\u2C90","\u2C92","\u2C94","\u2C96","\u2C98","\u2C9A","\u2C9C","\u2C9E","\u2CA0","\u2CA2","\u2CA4","\u2CA6","\u2CA8","\u2CAA","\u2CAC","\u2CAE","\u2CB0","\u2CB2","\u2CB4","\u2CB6","\u2CB8","\u2CBA","\u2CBC","\u2CBE","\u2CC0","\u2CC2","\u2CC4","\u2CC6","\u2CC8","\u2CCA","\u2CCC","\u2CCE","\u2CD0","\u2CD2","\u2CD4","\u2CD6","\u2CD8","\u2CDA","\u2CDC","\u2CDE","\u2CE0","\u2CE2","\u2CEB","\u2CED","\u2CF2","\uA640","\uA642","\uA644","\uA646","\uA648","\uA64A","\uA64C","\uA64E","\uA650","\uA652","\uA654","\uA656","\uA658","\uA65A","\uA65C","\uA65E","\uA660","\uA662","\uA664","\uA666","\uA668","\uA66A","\uA66C","\uA680","\uA682","\uA684","\uA686","\uA688","\uA68A","\uA68C","\uA68E","\uA690","\uA692","\uA694","\uA696","\uA698","\uA69A","\uA722","\uA724","\uA726","\uA728","\uA72A","\uA72C","\uA72E","\uA732","\uA734","\uA736","\uA738","\uA73A","\uA73C","\uA73E","\uA740","\uA742","\uA744","\uA746","\uA748","\uA74A","\uA74C","\uA74E","\uA750","\uA752","\uA754","\uA756","\uA758","\uA75A","\uA75C","\uA75E","\uA760","\uA762","\uA764","\uA766","\uA768","\uA76A","\uA76C","\uA76E","\uA779","\uA77B",["\uA77D","\uA77E"],"\uA780","\uA782","\uA784","\uA786","\uA78B","\uA78D","\uA790","\uA792","\uA796","\uA798","\uA79A","\uA79C","\uA79E","\uA7A0","\uA7A2","\uA7A4","\uA7A6","\uA7A8",["\uA7AA","\uA7AD"],["\uA7B0","\uA7B4"],"\uA7B6",["\uFF21","\uFF3A"]],!1,!1),Ae=Gr(["\u0903","\u093B",["\u093E","\u0940"],["\u0949","\u094C"],["\u094E","\u094F"],["\u0982","\u0983"],["\u09BE","\u09C0"],["\u09C7","\u09C8"],["\u09CB","\u09CC"],"\u09D7","\u0A03",["\u0A3E","\u0A40"],"\u0A83",["\u0ABE","\u0AC0"],"\u0AC9",["\u0ACB","\u0ACC"],["\u0B02","\u0B03"],"\u0B3E","\u0B40",["\u0B47","\u0B48"],["\u0B4B","\u0B4C"],"\u0B57",["\u0BBE","\u0BBF"],["\u0BC1","\u0BC2"],["\u0BC6","\u0BC8"],["\u0BCA","\u0BCC"],"\u0BD7",["\u0C01","\u0C03"],["\u0C41","\u0C44"],["\u0C82","\u0C83"],"\u0CBE",["\u0CC0","\u0CC4"],["\u0CC7","\u0CC8"],["\u0CCA","\u0CCB"],["\u0CD5","\u0CD6"],["\u0D02","\u0D03"],["\u0D3E","\u0D40"],["\u0D46","\u0D48"],["\u0D4A","\u0D4C"],"\u0D57",["\u0D82","\u0D83"],["\u0DCF","\u0DD1"],["\u0DD8","\u0DDF"],["\u0DF2","\u0DF3"],["\u0F3E","\u0F3F"],"\u0F7F",["\u102B","\u102C"],"\u1031","\u1038",["\u103B","\u103C"],["\u1056","\u1057"],["\u1062","\u1064"],["\u1067","\u106D"],["\u1083","\u1084"],["\u1087","\u108C"],"\u108F",["\u109A","\u109C"],"\u17B6",["\u17BE","\u17C5"],["\u17C7","\u17C8"],["\u1923","\u1926"],["\u1929","\u192B"],["\u1930","\u1931"],["\u1933","\u1938"],["\u1A19","\u1A1A"],"\u1A55","\u1A57","\u1A61",["\u1A63","\u1A64"],["\u1A6D","\u1A72"],"\u1B04","\u1B35","\u1B3B",["\u1B3D","\u1B41"],["\u1B43","\u1B44"],"\u1B82","\u1BA1",["\u1BA6","\u1BA7"],"\u1BAA","\u1BE7",["\u1BEA","\u1BEC"],"\u1BEE",["\u1BF2","\u1BF3"],["\u1C24","\u1C2B"],["\u1C34","\u1C35"],"\u1CE1",["\u1CF2","\u1CF3"],["\u302E","\u302F"],["\uA823","\uA824"],"\uA827",["\uA880","\uA881"],["\uA8B4","\uA8C3"],["\uA952","\uA953"],"\uA983",["\uA9B4","\uA9B5"],["\uA9BA","\uA9BB"],["\uA9BD","\uA9C0"],["\uAA2F","\uAA30"],["\uAA33","\uAA34"],"\uAA4D","\uAA7B","\uAA7D","\uAAEB",["\uAAEE","\uAAEF"],"\uAAF5",["\uABE3","\uABE4"],["\uABE6","\uABE7"],["\uABE9","\uABEA"],"\uABEC"],!1,!1),Ie=Gr([["\u0300","\u036F"],["\u0483","\u0487"],["\u0591","\u05BD"],"\u05BF",["\u05C1","\u05C2"],["\u05C4","\u05C5"],"\u05C7",["\u0610","\u061A"],["\u064B","\u065F"],"\u0670",["\u06D6","\u06DC"],["\u06DF","\u06E4"],["\u06E7","\u06E8"],["\u06EA","\u06ED"],"\u0711",["\u0730","\u074A"],["\u07A6","\u07B0"],["\u07EB","\u07F3"],["\u0816","\u0819"],["\u081B","\u0823"],["\u0825","\u0827"],["\u0829","\u082D"],["\u0859","\u085B"],["\u08E3","\u0902"],"\u093A","\u093C",["\u0941","\u0948"],"\u094D",["\u0951","\u0957"],["\u0962","\u0963"],"\u0981","\u09BC",["\u09C1","\u09C4"],"\u09CD",["\u09E2","\u09E3"],["\u0A01","\u0A02"],"\u0A3C",["\u0A41","\u0A42"],["\u0A47","\u0A48"],["\u0A4B","\u0A4D"],"\u0A51",["\u0A70","\u0A71"],"\u0A75",["\u0A81","\u0A82"],"\u0ABC",["\u0AC1","\u0AC5"],["\u0AC7","\u0AC8"],"\u0ACD",["\u0AE2","\u0AE3"],"\u0B01","\u0B3C","\u0B3F",["\u0B41","\u0B44"],"\u0B4D","\u0B56",["\u0B62","\u0B63"],"\u0B82","\u0BC0","\u0BCD","\u0C00",["\u0C3E","\u0C40"],["\u0C46","\u0C48"],["\u0C4A","\u0C4D"],["\u0C55","\u0C56"],["\u0C62","\u0C63"],"\u0C81","\u0CBC","\u0CBF","\u0CC6",["\u0CCC","\u0CCD"],["\u0CE2","\u0CE3"],"\u0D01",["\u0D41","\u0D44"],"\u0D4D",["\u0D62","\u0D63"],"\u0DCA",["\u0DD2","\u0DD4"],"\u0DD6","\u0E31",["\u0E34","\u0E3A"],["\u0E47","\u0E4E"],"\u0EB1",["\u0EB4","\u0EB9"],["\u0EBB","\u0EBC"],["\u0EC8","\u0ECD"],["\u0F18","\u0F19"],"\u0F35","\u0F37","\u0F39",["\u0F71","\u0F7E"],["\u0F80","\u0F84"],["\u0F86","\u0F87"],["\u0F8D","\u0F97"],["\u0F99","\u0FBC"],"\u0FC6",["\u102D","\u1030"],["\u1032","\u1037"],["\u1039","\u103A"],["\u103D","\u103E"],["\u1058","\u1059"],["\u105E","\u1060"],["\u1071","\u1074"],"\u1082",["\u1085","\u1086"],"\u108D","\u109D",["\u135D","\u135F"],["\u1712","\u1714"],["\u1732","\u1734"],["\u1752","\u1753"],["\u1772","\u1773"],["\u17B4","\u17B5"],["\u17B7","\u17BD"],"\u17C6",["\u17C9","\u17D3"],"\u17DD",["\u180B","\u180D"],"\u18A9",["\u1920","\u1922"],["\u1927","\u1928"],"\u1932",["\u1939","\u193B"],["\u1A17","\u1A18"],"\u1A1B","\u1A56",["\u1A58","\u1A5E"],"\u1A60","\u1A62",["\u1A65","\u1A6C"],["\u1A73","\u1A7C"],"\u1A7F",["\u1AB0","\u1ABD"],["\u1B00","\u1B03"],"\u1B34",["\u1B36","\u1B3A"],"\u1B3C","\u1B42",["\u1B6B","\u1B73"],["\u1B80","\u1B81"],["\u1BA2","\u1BA5"],["\u1BA8","\u1BA9"],["\u1BAB","\u1BAD"],"\u1BE6",["\u1BE8","\u1BE9"],"\u1BED",["\u1BEF","\u1BF1"],["\u1C2C","\u1C33"],["\u1C36","\u1C37"],["\u1CD0","\u1CD2"],["\u1CD4","\u1CE0"],["\u1CE2","\u1CE8"],"\u1CED","\u1CF4",["\u1CF8","\u1CF9"],["\u1DC0","\u1DF5"],["\u1DFC","\u1DFF"],["\u20D0","\u20DC"],"\u20E1",["\u20E5","\u20F0"],["\u2CEF","\u2CF1"],"\u2D7F",["\u2DE0","\u2DFF"],["\u302A","\u302D"],["\u3099","\u309A"],"\uA66F",["\uA674","\uA67D"],["\uA69E","\uA69F"],["\uA6F0","\uA6F1"],"\uA802","\uA806","\uA80B",["\uA825","\uA826"],"\uA8C4",["\uA8E0","\uA8F1"],["\uA926","\uA92D"],["\uA947","\uA951"],["\uA980","\uA982"],"\uA9B3",["\uA9B6","\uA9B9"],"\uA9BC","\uA9E5",["\uAA29","\uAA2E"],["\uAA31","\uAA32"],["\uAA35","\uAA36"],"\uAA43","\uAA4C","\uAA7C","\uAAB0",["\uAAB2","\uAAB4"],["\uAAB7","\uAAB8"],["\uAABE","\uAABF"],"\uAAC1",["\uAAEC","\uAAED"],"\uAAF6","\uABE5","\uABE8","\uABED","\uFB1E",["\uFE00","\uFE0F"],["\uFE20","\uFE2F"]],!1,!1),Pe=Gr([["0","9"],["\u0660","\u0669"],["\u06F0","\u06F9"],["\u07C0","\u07C9"],["\u0966","\u096F"],["\u09E6","\u09EF"],["\u0A66","\u0A6F"],["\u0AE6","\u0AEF"],["\u0B66","\u0B6F"],["\u0BE6","\u0BEF"],["\u0C66","\u0C6F"],["\u0CE6","\u0CEF"],["\u0D66","\u0D6F"],["\u0DE6","\u0DEF"],["\u0E50","\u0E59"],["\u0ED0","\u0ED9"],["\u0F20","\u0F29"],["\u1040","\u1049"],["\u1090","\u1099"],["\u17E0","\u17E9"],["\u1810","\u1819"],["\u1946","\u194F"],["\u19D0","\u19D9"],["\u1A80","\u1A89"],["\u1A90","\u1A99"],["\u1B50","\u1B59"],["\u1BB0","\u1BB9"],["\u1C40","\u1C49"],["\u1C50","\u1C59"],["\uA620","\uA629"],["\uA8D0","\uA8D9"],["\uA900","\uA909"],["\uA9D0","\uA9D9"],["\uA9F0","\uA9F9"],["\uAA50","\uAA59"],["\uABF0","\uABF9"],["\uFF10","\uFF19"]],!1,!1),nr=Gr([["\u16EE","\u16F0"],["\u2160","\u2182"],["\u2185","\u2188"],"\u3007",["\u3021","\u3029"],["\u3038","\u303A"],["\uA6E6","\uA6EF"]],!1,!1),Pr=Gr(["_",["\u203F","\u2040"],"\u2054",["\uFE33","\uFE34"],["\uFE4D","\uFE4F"],"\uFF3F"],!1,!1),Dn=Gr([" ","\xA0","\u1680",["\u2000","\u200A"],"\u202F","\u205F","\u3000"],!1,!1),Fn=Ye(";",!1),Li=function(_,H,J){return{type:"grammar",topLevelInitializer:_,initializer:H,rules:J,location:Cr()}},Ou=function(_){return{type:"top_level_initializer",code:_[0],codeLocation:_[1],location:Cr()}},ti=function(_){return{type:"initializer",code:_[0],codeLocation:_[1],location:Cr()}},Sn=function(_,H,J){return{type:"rule",name:_[0],nameLocation:_[1],expression:H!==null?{type:"named",name:H,expression:J,location:Cr()}:J,location:Cr()}},Tu=function(_,H){return H.length>0?{type:"choice",alternatives:[_].concat(H),location:Cr()}:_},as=function(_,H){return H!==null?{type:"action",expression:_,code:H[0],codeLocation:H[1],location:Cr()}:_},Fo=function(_,H){return H.length>0||_.type==="labeled"&&_.pick?{type:"sequence",elements:[_].concat(H),location:Cr()}:_},Zp=function(_,H,J){return J.type.startsWith("semantic_")&&sf('"@" cannot be used on a semantic predicate',_),{type:"labeled",label:H!==null?H[0]:null,labelLocation:H!==null?H[1]:_,pick:!0,expression:J,location:Cr()}},Qp=function(_,H){return{type:"labeled",label:_[0],labelLocation:_[1],expression:H,location:Cr()}},lr=function(){return Cr()},ar=function(_){return Tc.indexOf(_[0])>=0&&sf(`Label can't be a reserved word "${_[0]}"`,_[1]),_},e1=function(_,H){return{type:vV[_],expression:H,location:Cr()}},t1=function(_,H){return{type:wV[H],expression:_,location:Cr()}},r1=function(_){return _.type==="labeled"||_.type==="sequence"?{type:"group",expression:_,location:Cr()}:_},n1=function(_){return{type:"rule_ref",name:_[0],location:Cr()}},i1=function(_,H){return{type:EV[_],code:H[0],codeLocation:H[1],location:Cr()}},s1=function(_,H){return[_+H.join(""),Cr()]},zh=function(_,H){return{type:"literal",value:_,ignoreCase:H!==null,location:Cr()}},a1=function(_){return _.join("")},zr=function(_){return _.join("")},tf=function(_,H,J){return{type:"class",parts:H.filter(G=>G!==""),inverted:_!==null,ignoreCase:J!==null,location:Cr()}},La=function(_,H){return _.charCodeAt(0)>H.charCodeAt(0)&&sf("Invalid character range: "+nf()+"."),[_,H]},Gh=function(){return""},rf=function(){return"\0"},wi=function(){return"\b"},Yh=function(){return"\f"},Wh=function(){return`
`},Xh=function(){return"\r"},Jh=function(){return"	"},Zh=function(){return"\v"},Qh=function(_){return String.fromCharCode(parseInt(_,16))},ri=function(_){return String.fromCharCode(parseInt(_,16))},u1=function(){return{type:"any",location:Cr()}},Ei=function(_){return[_,Cr()]},x=0,ot=0,Ui=[{line:1,column:1}],ni=0,So=[],te=0,ji;if("startRule"in t){if(!(t.startRule in i))throw new Error(`Can't start parsing from rule "`+t.startRule+'".');a=i[t.startRule]}function nf(){return e.substring(ot,x)}function Pw(){return ot}function ed(){return{source:n,start:ot,end:x}}function Cr(){return Ua(ot,x)}function Ow(_,H){throw H=H!==void 0?H:Ua(ot,x),rd([us(_)],e.substring(ot,x),H)}function sf(_,H){throw H=H!==void 0?H:Ua(ot,x),td(_,H)}function Ye(_,H){return{type:"literal",text:_,ignoreCase:H}}function Gr(_,H,J){return{type:"class",parts:_,inverted:H,ignoreCase:J}}function Nu(){return{type:"any"}}function o1(){return{type:"end"}}function us(_){return{type:"other",description:_}}function af(_){var H=Ui[_],J;if(H)return H;for(J=_-1;!Ui[J];)J--;for(H=Ui[J],H={line:H.line,column:H.column};J<_;)e.charCodeAt(J)===10?(H.line++,H.column=1):H.column++,J++;return Ui[_]=H,H}function Ua(_,H){var J=af(_),G=af(H);return{source:n,start:{offset:_,line:J.line,column:J.column},end:{offset:H,line:G.line,column:G.column}}}function me(_){x<ni||(x>ni&&(ni=x,So=[]),So.push(_))}function td(_,H){return new mo(_,null,null,H)}function rd(_,H,J){return new mo(mo.buildMessage(_,H),_,H,J)}function _c(){var _,H,J,G,ae,le,sr,Or;if(_=x,H=Vt(),J=x,G=uf(),G!==r?(ae=Vt(),J=G):(x=J,J=r),J===r&&(J=null),G=x,ae=c1(),ae!==r?(le=Vt(),G=ae):(x=G,G=r),G===r&&(G=null),ae=[],le=x,sr=of(),sr!==r?(Or=Vt(),le=sr):(x=le,le=r),le!==r)for(;le!==r;)ae.push(le),le=x,sr=of(),sr!==r?(Or=Vt(),le=sr):(x=le,le=r);else ae=r;return ae!==r?(ot=_,_=Li(J,G,ae)):(x=_,_=r),_}function uf(){var _,H,J,G,ae;return _=x,e.charCodeAt(x)===123?(H=s,x++):(H=r,te===0&&me(on)),H!==r?(J=kt(),J!==r?(e.charCodeAt(x)===125?(G=u,x++):(G=r,te===0&&me(Fs)),G!==r?(ae=qa(),ae!==r?(ot=_,_=Ou(J)):(x=_,_=r)):(x=_,_=r)):(x=_,_=r)):(x=_,_=r),_}function c1(){var _,H,J;return _=x,H=kt(),H!==r?(J=qa(),J!==r?(ot=_,_=ti(H)):(x=_,_=r)):(x=_,_=r),_}function of(){var _,H,J,G,ae,le,sr,Or;return _=x,H=Fc(),H!==r?(J=Vt(),G=x,ae=os(),ae!==r?(le=Vt(),G=ae):(x=G,G=r),G===r&&(G=null),e.charCodeAt(x)===61?(ae=c,x++):(ae=r,te===0&&me(Bu)),ae!==r?(le=Vt(),sr=kn(),sr!==r?(Or=qa(),Or!==r?(ot=_,_=Sn(H,G,sr)):(x=_,_=r)):(x=_,_=r)):(x=_,_=r)):(x=_,_=r),_}function kn(){var _,H,J,G,ae,le,sr,Or;if(_=x,H=Io(),H!==r){for(J=[],G=x,ae=Vt(),e.charCodeAt(x)===47?(le=f,x++):(le=r,te===0&&me(zs)),le!==r?(sr=Vt(),Or=Io(),Or!==r?G=Or:(x=G,G=r)):(x=G,G=r);G!==r;)J.push(G),G=x,ae=Vt(),e.charCodeAt(x)===47?(le=f,x++):(le=r,te===0&&me(zs)),le!==r?(sr=Vt(),Or=Io(),Or!==r?G=Or:(x=G,G=r)):(x=G,G=r);ot=_,_=Tu(H,J)}else x=_,_=r;return _}function Io(){var _,H,J,G,ae;return _=x,H=Bo(),H!==r?(J=x,G=Vt(),ae=kt(),ae!==r?J=ae:(x=J,J=r),J===r&&(J=null),ot=_,_=as(H,J)):(x=_,_=r),_}function Bo(){var _,H,J,G,ae,le;if(_=x,H=Cc(),H!==r){for(J=[],G=x,ae=Vt(),le=Cc(),le!==r?G=le:(x=G,G=r);G!==r;)J.push(G),G=x,ae=Vt(),le=Cc(),le!==r?G=le:(x=G,G=r);ot=_,_=Fo(H,J)}else x=_,_=r;return _}function Cc(){var _,H,J,G;return _=x,H=nd(),H!==r?(J=sd(),J===r&&(J=null),G=cf(),G!==r?(ot=_,_=Zp(H,J,G)):(x=_,_=r)):(x=_,_=r),_===r&&(_=x,H=sd(),H!==r?(J=Vt(),G=cf(),G!==r?(ot=_,_=Qp(H,G)):(x=_,_=r)):(x=_,_=r),_===r&&(_=cf())),_}function nd(){var _,H;return _=x,e.charCodeAt(x)===64?(H=h,x++):(H=r,te===0&&me($u)),H!==r&&(ot=_,H=lr()),_=H,_}function sd(){var _,H,J,G;return _=x,H=Fc(),H!==r?(J=Vt(),e.charCodeAt(x)===58?(G=g,x++):(G=r,te===0&&me(Gs)),G!==r?(ot=_,_=ar(H)):(x=_,_=r)):(x=_,_=r),_}function cf(){var _,H,J,G;return _=x,H=l1(),H!==r?(J=Vt(),G=ad(),G!==r?(ot=_,_=e1(H,G)):(x=_,_=r)):(x=_,_=r),_===r&&(_=ad()),_}function l1(){var _;return e.charCodeAt(x)===36?(_=p,x++):(_=r,te===0&&me(Ss)),_===r&&(e.charCodeAt(x)===38?(_=d,x++):(_=r,te===0&&me(Mt)),_===r&&(e.charCodeAt(x)===33?(_=w,x++):(_=r,te===0&&me(pi)))),_}function ad(){var _,H,J,G;return _=x,H=ja(),H!==r?(J=Vt(),G=f1(),G!==r?(ot=_,_=t1(H,G)):(x=_,_=r)):(x=_,_=r),_===r&&(_=ja()),_}function f1(){var _;return e.charCodeAt(x)===63?(_=v,x++):(_=r,te===0&&me(Ru)),_===r&&(e.charCodeAt(x)===42?(_=b,x++):(_=r,te===0&&me(xu)),_===r&&(e.charCodeAt(x)===43?(_=m,x++):(_=r,te===0&&me(Pu)))),_}function ja(){var _,H,J,G,ae,le;return _=v1(),_===r&&(_=oe(),_===r&&(_=Bc(),_===r&&(_=h1(),_===r&&(_=d1(),_===r&&(_=x,e.charCodeAt(x)===40?(H=y,x++):(H=r,te===0&&me(Ys)),H!==r?(J=Vt(),G=kn(),G!==r?(ae=Vt(),e.charCodeAt(x)===41?(le=D,x++):(le=r,te===0&&me(vo)),le!==r?(ot=_,_=r1(G)):(x=_,_=r)):(x=_,_=r)):(x=_,_=r)))))),_}function h1(){var _,H,J,G,ae,le,sr,Or;return _=x,H=Fc(),H!==r?(J=x,te++,G=x,ae=Vt(),le=x,sr=os(),sr!==r?(Or=Vt(),sr=[sr,Or],le=sr):(x=le,le=r),le===r&&(le=null),e.charCodeAt(x)===61?(sr=c,x++):(sr=r,te===0&&me(Bu)),sr!==r?(ae=[ae,le,sr],G=ae):(x=G,G=r),te--,G===r?J=void 0:(x=J,J=r),J!==r?(ot=_,_=n1(H)):(x=_,_=r)):(x=_,_=r),_}function d1(){var _,H,J,G;return _=x,H=lf(),H!==r?(J=Vt(),G=kt(),G!==r?(ot=_,_=i1(H,G)):(x=_,_=r)):(x=_,_=r),_}function lf(){var _;return e.charCodeAt(x)===38?(_=d,x++):(_=r,te===0&&me(Mt)),_===r&&(e.charCodeAt(x)===33?(_=w,x++):(_=r,te===0&&me(pi))),_}function In(){var _;return e.length>x?(_=e.charAt(x),x++):(_=r,te===0&&me(Ws)),_}function Hi(){var _,H;return te++,e.charCodeAt(x)===9?(_=C,x++):(_=r,te===0&&me(ka)),_===r&&(e.charCodeAt(x)===11?(_=F,x++):(_=r,te===0&&me(re)),_===r&&(e.charCodeAt(x)===12?(_=U,x++):(_=r,te===0&&me(fe)),_===r&&(e.charCodeAt(x)===32?(_=k,x++):(_=r,te===0&&me(Ue)),_===r&&(e.charCodeAt(x)===160?(_=S,x++):(_=r,te===0&&me(Oe)),_===r&&(e.charCodeAt(x)===65279?(_=B,x++):(_=r,te===0&&me(ze)),_===r&&(_=dd())))))),te--,_===r&&(H=r,te===0&&me(wo)),_}function Mi(){var _;return yt.test(e.charAt(x))?(_=e.charAt(x),x++):(_=r,te===0&&me(ut)),_}function Dc(){var _,H;return te++,e.charCodeAt(x)===10?(_=T,x++):(_=r,te===0&&me(Ur)),_===r&&(e.substr(x,2)===P?(_=P,x+=2):(_=r,te===0&&me(Yt)),_===r&&(e.charCodeAt(x)===13?(_=j,x++):(_=r,te===0&&me(gi)),_===r&&(e.charCodeAt(x)===8232?(_=Y,x++):(_=r,te===0&&me(ss)),_===r&&(e.charCodeAt(x)===8233?(_=M,x++):(_=r,te===0&&me(_n)))))),te--,_===r&&(H=r,te===0&&me(gt)),_}function ud(){var _,H;return te++,_=p1(),_===r&&(_=Ai()),te--,_===r&&(H=r,te===0&&me(Nn)),_}function p1(){var _,H,J,G,ae,le;if(_=x,e.substr(x,2)===z?(H=z,x+=2):(H=r,te===0&&me(Rr)),H!==r){for(J=[],G=x,ae=x,te++,e.substr(x,2)===W?(le=W,x+=2):(le=r,te===0&&me(Cn)),te--,le===r?ae=void 0:(x=ae,ae=r),ae!==r?(le=In(),le!==r?(ae=[ae,le],G=ae):(x=G,G=r)):(x=G,G=r);G!==r;)J.push(G),G=x,ae=x,te++,e.substr(x,2)===W?(le=W,x+=2):(le=r,te===0&&me(Cn)),te--,le===r?ae=void 0:(x=ae,ae=r),ae!==r?(le=In(),le!==r?(ae=[ae,le],G=ae):(x=G,G=r)):(x=G,G=r);e.substr(x,2)===W?(G=W,x+=2):(G=r,te===0&&me(Cn)),G!==r?(H=[H,J,G],_=H):(x=_,_=r)}else x=_,_=r;return _}function Ha(){var _,H,J,G,ae,le;if(_=x,e.substr(x,2)===z?(H=z,x+=2):(H=r,te===0&&me(Rr)),H!==r){for(J=[],G=x,ae=x,te++,e.substr(x,2)===W?(le=W,x+=2):(le=r,te===0&&me(Cn)),le===r&&(le=Mi()),te--,le===r?ae=void 0:(x=ae,ae=r),ae!==r?(le=In(),le!==r?(ae=[ae,le],G=ae):(x=G,G=r)):(x=G,G=r);G!==r;)J.push(G),G=x,ae=x,te++,e.substr(x,2)===W?(le=W,x+=2):(le=r,te===0&&me(Cn)),le===r&&(le=Mi()),te--,le===r?ae=void 0:(x=ae,ae=r),ae!==r?(le=In(),le!==r?(ae=[ae,le],G=ae):(x=G,G=r)):(x=G,G=r);e.substr(x,2)===W?(G=W,x+=2):(G=r,te===0&&me(Cn)),G!==r?(H=[H,J,G],_=H):(x=_,_=r)}else x=_,_=r;return _}function Ai(){var _,H,J,G,ae,le;if(_=x,e.substr(x,2)===ie?(H=ie,x+=2):(H=r,te===0&&me(en)),H!==r){for(J=[],G=x,ae=x,te++,le=Mi(),te--,le===r?ae=void 0:(x=ae,ae=r),ae!==r?(le=In(),le!==r?(ae=[ae,le],G=ae):(x=G,G=r)):(x=G,G=r);G!==r;)J.push(G),G=x,ae=x,te++,le=Mi(),te--,le===r?ae=void 0:(x=ae,ae=r),ae!==r?(le=In(),le!==r?(ae=[ae,le],G=ae):(x=G,G=r)):(x=G,G=r);H=[H,J],_=H}else x=_,_=r;return _}function Fc(){var _,H,J,G;if(te++,_=x,H=od(),H!==r){for(J=[],G=cd();G!==r;)J.push(G),G=cd();ot=_,_=s1(H,J)}else x=_,_=r;return te--,_===r&&(H=r,te===0&&me(Eo)),_}function od(){var _,H,J;return _=g1(),_===r&&(e.charCodeAt(x)===36?(_=p,x++):(_=r,te===0&&me(Ss)),_===r&&(e.charCodeAt(x)===95?(_=Ce,x++):(_=r,te===0&&me(Xs)),_===r&&(_=x,e.charCodeAt(x)===92?(H=Fe,x++):(H=r,te===0&&me(Jn)),H!==r?(J=ld(),J!==r?_=J:(x=_,_=r)):(x=_,_=r)))),_}function cd(){var _;return _=od(),_===r&&(_=m1(),_===r&&(_=fd(),_===r&&(_=hd(),_===r&&(e.charCodeAt(x)===8204?(_=xe,x++):(_=r,te===0&&me(Ut)),_===r&&(e.charCodeAt(x)===8205?(_=it,x++):(_=r,te===0&&me(xr))))))),_}function g1(){var _;return _=xc(),_===r&&(_=Rc(),_===r&&(_=b1(),_===r&&(_=A1(),_===r&&(_=y1(),_===r&&(_=Oc()))))),_}function m1(){var _;return _=Pc(),_===r&&(_=Zs()),_}function v1(){var _,H,J;return te++,_=x,H=os(),H!==r?(e.charCodeAt(x)===105?(J=nt,x++):(J=r,te===0&&me(vr)),J===r&&(J=null),ot=_,_=zh(H,J)):(x=_,_=r),te--,_===r&&(H=r,te===0&&me(et)),_}function os(){var _,H,J,G;if(te++,_=x,e.charCodeAt(x)===34?(H=dt,x++):(H=r,te===0&&me(wr)),H!==r){for(J=[],G=ne();G!==r;)J.push(G),G=ne();e.charCodeAt(x)===34?(G=dt,x++):(G=r,te===0&&me(wr)),G!==r?(ot=_,_=a1(J)):(x=_,_=r)}else x=_,_=r;if(_===r)if(_=x,e.charCodeAt(x)===39?(H=pt,x++):(H=r,te===0&&me(Wt)),H!==r){for(J=[],G=he();G!==r;)J.push(G),G=he();e.charCodeAt(x)===39?(G=pt,x++):(G=r,te===0&&me(Wt)),G!==r?(ot=_,_=zr(J)):(x=_,_=r)}else x=_,_=r;return te--,_===r&&(H=r,te===0&&me(cn)),_}function ne(){var _,H,J,G;return _=x,H=x,J=x,te++,e.charCodeAt(x)===34?(G=dt,x++):(G=r,te===0&&me(wr)),G===r&&(e.charCodeAt(x)===92?(G=Fe,x++):(G=r,te===0&&me(Jn)),G===r&&(G=Mi())),te--,G===r?J=void 0:(x=J,J=r),J!==r?(G=In(),G!==r?(J=[J,G],H=J):(x=H,H=r)):(x=H,H=r),H!==r?_=e.substring(_,x):_=H,_===r&&(_=x,e.charCodeAt(x)===92?(H=Fe,x++):(H=r,te===0&&me(Jn)),H!==r?(J=Dr(),J!==r?_=J:(x=_,_=r)):(x=_,_=r),_===r&&(_=Rt())),_}function he(){var _,H,J,G;return _=x,H=x,J=x,te++,e.charCodeAt(x)===39?(G=pt,x++):(G=r,te===0&&me(Wt)),G===r&&(e.charCodeAt(x)===92?(G=Fe,x++):(G=r,te===0&&me(Jn)),G===r&&(G=Mi())),te--,G===r?J=void 0:(x=J,J=r),J!==r?(G=In(),G!==r?(J=[J,G],H=J):(x=H,H=r)):(x=H,H=r),H!==r?_=e.substring(_,x):_=H,_===r&&(_=x,e.charCodeAt(x)===92?(H=Fe,x++):(H=r,te===0&&me(Jn)),H!==r?(J=Dr(),J!==r?_=J:(x=_,_=r)):(x=_,_=r),_===r&&(_=Rt())),_}function oe(){var _,H,J,G,ae,le;if(te++,_=x,e.charCodeAt(x)===91?(H=wn,x++):(H=r,te===0&&me(mi)),H!==r){for(e.charCodeAt(x)===94?(J=hr,x++):(J=r,te===0&&me(vi)),J===r&&(J=null),G=[],ae=Ne(),ae===r&&(ae=tt());ae!==r;)G.push(ae),ae=Ne(),ae===r&&(ae=tt());e.charCodeAt(x)===93?(ae=St,x++):(ae=r,te===0&&me(Qn)),ae!==r?(e.charCodeAt(x)===105?(le=nt,x++):(le=r,te===0&&me(vr)),le===r&&(le=null),ot=_,_=tf(J,G,le)):(x=_,_=r)}else x=_,_=r;return te--,_===r&&(H=r,te===0&&me(Zn)),_}function Ne(){var _,H,J,G;return _=x,H=tt(),H!==r?(e.charCodeAt(x)===45?(J=Br,x++):(J=r,te===0&&me(Kr)),J!==r?(G=tt(),G!==r?(ot=_,_=La(H,G)):(x=_,_=r)):(x=_,_=r)):(x=_,_=r),_}function tt(){var _,H,J,G;return _=x,H=x,J=x,te++,e.charCodeAt(x)===93?(G=St,x++):(G=r,te===0&&me(Qn)),G===r&&(e.charCodeAt(x)===92?(G=Fe,x++):(G=r,te===0&&me(Jn)),G===r&&(G=Mi())),te--,G===r?J=void 0:(x=J,J=r),J!==r?(G=In(),G!==r?(J=[J,G],H=J):(x=H,H=r)):(x=H,H=r),H!==r?_=e.substring(_,x):_=H,_===r&&(_=x,e.charCodeAt(x)===92?(H=Fe,x++):(H=r,te===0&&me(Jn)),H!==r?(J=Dr(),J!==r?_=J:(x=_,_=r)):(x=_,_=r),_===r&&(_=Rt())),_}function Rt(){var _,H,J;return _=x,e.charCodeAt(x)===92?(H=Fe,x++):(H=r,te===0&&me(Jn)),H!==r?(J=Dc(),J!==r?(ot=_,_=Gh()):(x=_,_=r)):(x=_,_=r),_}function Dr(){var _,H,J,G;return _=ir(),_===r&&(_=x,e.charCodeAt(x)===48?(H=gr,x++):(H=r,te===0&&me(yr)),H!==r?(J=x,te++,G=Ma(),te--,G===r?J=void 0:(x=J,J=r),J!==r?(ot=_,_=rf()):(x=_,_=r)):(x=_,_=r),_===r&&(_=Ic(),_===r&&(_=ld()))),_}function ir(){var _;return _=Sc(),_===r&&(_=w1()),_}function Sc(){var _,H;return e.charCodeAt(x)===39?(_=pt,x++):(_=r,te===0&&me(Wt)),_===r&&(e.charCodeAt(x)===34?(_=dt,x++):(_=r,te===0&&me(wr)),_===r&&(e.charCodeAt(x)===92?(_=Fe,x++):(_=r,te===0&&me(Jn)),_===r&&(_=x,e.charCodeAt(x)===98?(H=vt,x++):(H=r,te===0&&me(ef)),H!==r&&(ot=_,H=wi()),_=H,_===r&&(_=x,e.charCodeAt(x)===102?(H=tr,x++):(H=r,te===0&&me(Ao)),H!==r&&(ot=_,H=Yh()),_=H,_===r&&(_=x,e.charCodeAt(x)===110?(H=st,x++):(H=r,te===0&&me(ln)),H!==r&&(ot=_,H=Wh()),_=H,_===r&&(_=x,e.charCodeAt(x)===114?(H=Ge,x++):(H=r,te===0&&me(yo)),H!==r&&(ot=_,H=Xh()),_=H,_===r&&(_=x,e.charCodeAt(x)===116?(H=mr,x++):(H=r,te===0&&me(Ac)),H!==r&&(ot=_,H=Jh()),_=H,_===r&&(_=x,e.charCodeAt(x)===118?(H=qe,x++):(H=r,te===0&&me(yc)),H!==r&&(ot=_,H=Zh()),_=H)))))))),_}function w1(){var _,H,J,G;return _=x,H=x,J=x,te++,G=yi(),G===r&&(G=Mi()),te--,G===r?J=void 0:(x=J,J=r),J!==r?(G=In(),G!==r?(J=[J,G],H=J):(x=H,H=r)):(x=H,H=r),H!==r?_=e.substring(_,x):_=H,_}function yi(){var _;return _=Sc(),_===r&&(_=Ma(),_===r&&(e.charCodeAt(x)===120?(_=Ht,x++):(_=r,te===0&&me(bo)),_===r&&(e.charCodeAt(x)===117?(_=En,x++):(_=r,te===0&&me(Js))))),_}function Ic(){var _,H,J,G,ae,le;return _=x,e.charCodeAt(x)===120?(H=Ht,x++):(H=r,te===0&&me(bo)),H!==r?(J=x,G=x,ae=Is(),ae!==r?(le=Is(),le!==r?(ae=[ae,le],G=ae):(x=G,G=r)):(x=G,G=r),G!==r?J=e.substring(J,x):J=G,J!==r?(ot=_,_=Qh(J)):(x=_,_=r)):(x=_,_=r),_}function ld(){var _,H,J,G,ae,le,sr,Or;return _=x,e.charCodeAt(x)===117?(H=En,x++):(H=r,te===0&&me(Js)),H!==r?(J=x,G=x,ae=Is(),ae!==r?(le=Is(),le!==r?(sr=Is(),sr!==r?(Or=Is(),Or!==r?(ae=[ae,le,sr,Or],G=ae):(x=G,G=r)):(x=G,G=r)):(x=G,G=r)):(x=G,G=r),G!==r?J=e.substring(J,x):J=G,J!==r?(ot=_,_=ri(J)):(x=_,_=r)):(x=_,_=r),_}function Ma(){var _;return Vr.test(e.charAt(x))?(_=e.charAt(x),x++):(_=r,te===0&&me(_o)),_}function Is(){var _;return ki.test(e.charAt(x))?(_=e.charAt(x),x++):(_=r,te===0&&me(bc)),_}function Bc(){var _,H;return _=x,e.charCodeAt(x)===46?(H=cr,x++):(H=r,te===0&&me(Co)),H!==r&&(ot=_,H=u1()),_=H,_}function kt(){var _,H,J,G;return te++,_=x,e.charCodeAt(x)===123?(H=s,x++):(H=r,te===0&&me(on)),H!==r?(J=E1(),e.charCodeAt(x)===125?(G=u,x++):(G=r,te===0&&me(Fs)),G!==r?_=J:(x=_,_=r)):(x=_,_=r),te--,_===r&&(H=r,te===0&&me(Do)),_}function E1(){var _,H;return _=x,H=$c(),ot=_,H=Ei(H),_=H,_}function $c(){var _,H,J,G,ae,le;if(_=x,H=[],J=[],G=x,ae=x,te++,An.test(e.charAt(x))?(le=e.charAt(x),x++):(le=r,te===0&&me(ei)),te--,le===r?ae=void 0:(x=ae,ae=r),ae!==r?(le=In(),le!==r?(ae=[ae,le],G=ae):(x=G,G=r)):(x=G,G=r),G!==r)for(;G!==r;)J.push(G),G=x,ae=x,te++,An.test(e.charAt(x))?(le=e.charAt(x),x++):(le=r,te===0&&me(ei)),te--,le===r?ae=void 0:(x=ae,ae=r),ae!==r?(le=In(),le!==r?(ae=[ae,le],G=ae):(x=G,G=r)):(x=G,G=r);else J=r;for(J===r&&(J=x,e.charCodeAt(x)===123?(G=s,x++):(G=r,te===0&&me(on)),G!==r?(ae=$c(),e.charCodeAt(x)===125?(le=u,x++):(le=r,te===0&&me(Fs)),le!==r?(G=[G,ae,le],J=G):(x=J,J=r)):(x=J,J=r));J!==r;){if(H.push(J),J=[],G=x,ae=x,te++,An.test(e.charAt(x))?(le=e.charAt(x),x++):(le=r,te===0&&me(ei)),te--,le===r?ae=void 0:(x=ae,ae=r),ae!==r?(le=In(),le!==r?(ae=[ae,le],G=ae):(x=G,G=r)):(x=G,G=r),G!==r)for(;G!==r;)J.push(G),G=x,ae=x,te++,An.test(e.charAt(x))?(le=e.charAt(x),x++):(le=r,te===0&&me(ei)),te--,le===r?ae=void 0:(x=ae,ae=r),ae!==r?(le=In(),le!==r?(ae=[ae,le],G=ae):(x=G,G=r)):(x=G,G=r);else J=r;J===r&&(J=x,e.charCodeAt(x)===123?(G=s,x++):(G=r,te===0&&me(on)),G!==r?(ae=$c(),e.charCodeAt(x)===125?(le=u,x++):(le=r,te===0&&me(Fs)),le!==r?(G=[G,ae,le],J=G):(x=J,J=r)):(x=J,J=r))}return _=e.substring(_,x),_}function Rc(){var _;return $t.test(e.charAt(x))?(_=e.charAt(x),x++):(_=r,te===0&&me(O)),_}function A1(){var _;return He.test(e.charAt(x))?(_=e.charAt(x),x++):(_=r,te===0&&me(L)),_}function y1(){var _;return De.test(e.charAt(x))?(_=e.charAt(x),x++):(_=r,te===0&&me(K)),_}function b1(){var _;return $r.test(e.charAt(x))?(_=e.charAt(x),x++):(_=r,te===0&&me(Q)),_}function xc(){var _;return yn.test(e.charAt(x))?(_=e.charAt(x),x++):(_=r,te===0&&me(ve)),_}function Zs(){var _;return at.test(e.charAt(x))?(_=e.charAt(x),x++):(_=r,te===0&&me(Ae)),_}function Pc(){var _;return Na.test(e.charAt(x))?(_=e.charAt(x),x++):(_=r,te===0&&me(Ie)),_}function fd(){var _;return bn.test(e.charAt(x))?(_=e.charAt(x),x++):(_=r,te===0&&me(Pe)),_}function Oc(){var _;return ge.test(e.charAt(x))?(_=e.charAt(x),x++):(_=r,te===0&&me(nr)),_}function hd(){var _;return Ks.test(e.charAt(x))?(_=e.charAt(x),x++):(_=r,te===0&&me(Pr)),_}function dd(){var _;return Nt.test(e.charAt(x))?(_=e.charAt(x),x++):(_=r,te===0&&me(Dn)),_}function Vt(){var _,H;for(_=[],H=Hi(),H===r&&(H=Dc(),H===r&&(H=ud()));H!==r;)_.push(H),H=Hi(),H===r&&(H=Dc(),H===r&&(H=ud()));return _}function pd(){var _,H;for(_=[],H=Hi(),H===r&&(H=Ha());H!==r;)_.push(H),H=Hi(),H===r&&(H=Ha());return _}function qa(){var _,H,J,G;return _=x,H=Vt(),e.charCodeAt(x)===59?(J=rr,x++):(J=r,te===0&&me(Fn)),J!==r?(H=[H,J],_=H):(x=_,_=r),_===r&&(_=x,H=pd(),J=Ai(),J===r&&(J=null),G=Dc(),G!==r?(H=[H,J,G],_=H):(x=_,_=r),_===r&&(_=x,H=Vt(),J=Va(),J!==r?(H=[H,J],_=H):(x=_,_=r))),_}function Va(){var _,H;return _=x,te++,e.length>x?(H=e.charAt(x),x++):(H=r,te===0&&me(Ws)),te--,H===r?_=void 0:(x=_,_=r),_}let Tc=t.reservedWords||[];if(ji=a(),ji!==r&&x===e.length)return ji;throw ji!==r&&x<e.length&&me(o1()),rd(So,ni<e.length?e.charAt(ni):null,ni<e.length?Ua(ni,ni+1):Ua(ni,ni))}o3.exports={SyntaxError:mo,parse:yV}});var Vh=ce((LJ,l3)=>{"use strict";var bV=Op(),_V=u3(),CV=c3(),DV=L2(),FV=["break","case","catch","class","const","continue","debugger","default","delete","do","else","export","extends","finally","for","function","if","import","in","instanceof","new","return","super","switch","this","throw","try","typeof","var","void","while","with","null","true","false","enum","implements","interface","let","package","private","protected","public","static","yield","await"],qh={VERSION:DV,RESERVED_WORDS:FV,GrammarError:bV,parser:CV,compiler:_V,generate(e,t){t=t!==void 0?t:{};function r(a){let s={};return Object.keys(a).forEach(u=>{s[u]=a[u].slice()}),s}let n="plugins"in t?t.plugins:[],i={parser:qh.parser,passes:r(qh.compiler.passes),reservedWords:qh.RESERVED_WORDS.slice()};return n.forEach(a=>{a.use(i,t)}),qh.compiler.compile(i.parser.parse(e,{grammarSource:t.grammarSource,reservedWords:i.reservedWords}),i.passes,t)}};l3.exports=qh});var iw=ce((rw,nw)=>{(function(e,t){typeof rw=="object"&&typeof nw<"u"?nw.exports=t():typeof define=="function"&&define.amd?define(t):e.JSON5=t()})(rw,function(){"use strict";function e(re,fe){return fe={exports:{}},re(fe,fe.exports),fe.exports}var t=e(function(re){var fe=re.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=fe)}),r=e(function(re){var fe=re.exports={version:"2.6.5"};typeof __e=="number"&&(__e=fe)}),n=r.version,i=function(re){return typeof re=="object"?re!==null:typeof re=="function"},a=function(re){if(!i(re))throw TypeError(re+" is not an object!");return re},s=function(re){try{return!!re()}catch{return!0}},u=!s(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7}),c=t.document,f=i(c)&&i(c.createElement),h=function(re){return f?c.createElement(re):{}},g=!u&&!s(function(){return Object.defineProperty(h("div"),"a",{get:function(){return 7}}).a!=7}),p=function(re,fe){if(!i(re))return re;var Ue,Oe;if(fe&&typeof(Ue=re.toString)=="function"&&!i(Oe=Ue.call(re))||typeof(Ue=re.valueOf)=="function"&&!i(Oe=Ue.call(re))||!fe&&typeof(Ue=re.toString)=="function"&&!i(Oe=Ue.call(re)))return Oe;throw TypeError("Can't convert object to primitive value")},d=Object.defineProperty,w=u?Object.defineProperty:function(fe,Ue,Oe){if(a(fe),Ue=p(Ue,!0),a(Oe),g)try{return d(fe,Ue,Oe)}catch{}if("get"in Oe||"set"in Oe)throw TypeError("Accessors not supported!");return"value"in Oe&&(fe[Ue]=Oe.value),fe},v={f:w},b=function(re,fe){return{enumerable:!(re&1),configurable:!(re&2),writable:!(re&4),value:fe}},m=u?function(re,fe,Ue){return v.f(re,fe,b(1,Ue))}:function(re,fe,Ue){return re[fe]=Ue,re},y={}.hasOwnProperty,D=function(re,fe){return y.call(re,fe)},C=0,F=Math.random(),U=function(re){return"Symbol(".concat(re===void 0?"":re,")_",(++C+F).toString(36))},k=!1,S=e(function(re){var fe="__core-js_shared__",Ue=t[fe]||(t[fe]={});(re.exports=function(Oe,ze){return Ue[Oe]||(Ue[Oe]=ze!==void 0?ze:{})})("versions",[]).push({version:r.version,mode:k?"pure":"global",copyright:"\xA9 2019 Denis Pushkarev (zloirock.ru)"})}),B=S("native-function-to-string",Function.toString),T=e(function(re){var fe=U("src"),Ue="toString",Oe=(""+B).split(Ue);r.inspectSource=function(ze){return B.call(ze)},(re.exports=function(ze,ut,gt,Ur){var Yt=typeof gt=="function";Yt&&(D(gt,"name")||m(gt,"name",ut)),ze[ut]!==gt&&(Yt&&(D(gt,fe)||m(gt,fe,ze[ut]?""+ze[ut]:Oe.join(String(ut)))),ze===t?ze[ut]=gt:Ur?ze[ut]?ze[ut]=gt:m(ze,ut,gt):(delete ze[ut],m(ze,ut,gt)))})(Function.prototype,Ue,function(){return typeof this=="function"&&this[fe]||B.call(this)})}),P=function(re){if(typeof re!="function")throw TypeError(re+" is not a function!");return re},j=function(re,fe,Ue){if(P(re),fe===void 0)return re;switch(Ue){case 1:return function(Oe){return re.call(fe,Oe)};case 2:return function(Oe,ze){return re.call(fe,Oe,ze)};case 3:return function(Oe,ze,ut){return re.call(fe,Oe,ze,ut)}}return function(){return re.apply(fe,arguments)}},Y="prototype",M=function(re,fe,Ue){var Oe=re&M.F,ze=re&M.G,ut=re&M.S,gt=re&M.P,Ur=re&M.B,Yt=ze?t:ut?t[fe]||(t[fe]={}):(t[fe]||{})[Y],gi=ze?r:r[fe]||(r[fe]={}),ss=gi[Y]||(gi[Y]={}),_n,Nn,Rr,Cn;ze&&(Ue=fe);for(_n in Ue)Nn=!Oe&&Yt&&Yt[_n]!==void 0,Rr=(Nn?Yt:Ue)[_n],Cn=Ur&&Nn?j(Rr,t):gt&&typeof Rr=="function"?j(Function.call,Rr):Rr,Yt&&T(Yt,_n,Rr,re&M.U),gi[_n]!=Rr&&m(gi,_n,Cn),gt&&ss[_n]!=Rr&&(ss[_n]=Rr)};t.core=r,M.F=1,M.G=2,M.S=4,M.P=8,M.B=16,M.W=32,M.U=64,M.R=128;var z=M,W=Math.ceil,ie=Math.floor,Ce=function(re){return isNaN(re=+re)?0:(re>0?ie:W)(re)},Fe=function(re){if(re==null)throw TypeError("Can't call method on  "+re);return re},xe=function(re){return function(fe,Ue){var Oe=String(Fe(fe)),ze=Ce(Ue),ut=Oe.length,gt,Ur;return ze<0||ze>=ut?re?"":void 0:(gt=Oe.charCodeAt(ze),gt<55296||gt>56319||ze+1===ut||(Ur=Oe.charCodeAt(ze+1))<56320||Ur>57343?re?Oe.charAt(ze):gt:re?Oe.slice(ze,ze+2):(gt-55296<<10)+(Ur-56320)+65536)}},it=xe(!1);z(z.P,"String",{codePointAt:function(fe){return it(this,fe)}});var nt=r.String.codePointAt,dt=Math.max,pt=Math.min,wn=function(re,fe){return re=Ce(re),re<0?dt(re+fe,0):pt(re,fe)},hr=String.fromCharCode,St=String.fromCodePoint;z(z.S+z.F*(!!St&&St.length!=1),"String",{fromCodePoint:function(fe){for(var Ue=arguments,Oe=[],ze=arguments.length,ut=0,gt;ze>ut;){if(gt=+Ue[ut++],wn(gt,1114111)!==gt)throw RangeError(gt+" is not a valid code point");Oe.push(gt<65536?hr(gt):hr(((gt-=65536)>>10)+55296,gt%1024+56320))}return Oe.join("")}});var Br=r.String.fromCodePoint,gr=/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,vt=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,tr=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/,st={Space_Separator:gr,ID_Start:vt,ID_Continue:tr},Ge={isSpaceSeparator:function(fe){return typeof fe=="string"&&st.Space_Separator.test(fe)},isIdStartChar:function(fe){return typeof fe=="string"&&(fe>="a"&&fe<="z"||fe>="A"&&fe<="Z"||fe==="$"||fe==="_"||st.ID_Start.test(fe))},isIdContinueChar:function(fe){return typeof fe=="string"&&(fe>="a"&&fe<="z"||fe>="A"&&fe<="Z"||fe>="0"&&fe<="9"||fe==="$"||fe==="_"||fe==="\u200C"||fe==="\u200D"||st.ID_Continue.test(fe))},isDigit:function(fe){return typeof fe=="string"&&/[0-9]/.test(fe)},isHexDigit:function(fe){return typeof fe=="string"&&/[0-9A-Fa-f]/.test(fe)}},mr,qe,Ht,En,cr,rr,yt,Vr,ki,An=function(fe,Ue){mr=String(fe),qe="start",Ht=[],En=0,cr=1,rr=0,yt=void 0,Vr=void 0,ki=void 0;do yt=Na(),$u[qe]();while(yt.type!=="eof");return typeof Ue=="function"?$t({"":ki},"",Ue):ki};function $t(re,fe,Ue){var Oe=re[fe];if(Oe!=null&&typeof Oe=="object")if(Array.isArray(Oe))for(var ze=0;ze<Oe.length;ze++){var ut=String(ze),gt=$t(Oe,ut,Ue);gt===void 0?delete Oe[ut]:Object.defineProperty(Oe,ut,{value:gt,writable:!0,enumerable:!0,configurable:!0})}else for(var Ur in Oe){var Yt=$t(Oe,Ur,Ue);Yt===void 0?delete Oe[Ur]:Object.defineProperty(Oe,Ur,{value:Yt,writable:!0,enumerable:!0,configurable:!0})}return Ue.call(re,fe,Oe)}var He,De,$r,yn,at;function Na(){for(He="default",De="",$r=!1,yn=1;;){at=bn();var re=Ks[He]();if(re)return re}}function bn(){if(mr[En])return String.fromCodePoint(mr.codePointAt(En))}function ge(){var re=bn();return re===`
`?(cr++,rr=0):re?rr+=re.length:rr++,re&&(En+=re.length),re}var Ks={default:function(){switch(at){case"	":case"\v":case"\f":case" ":case"\xA0":case"\uFEFF":case`
`:case"\r":case"\u2028":case"\u2029":ge();return;case"/":ge(),He="comment";return;case void 0:return ge(),Nt("eof")}if(Ge.isSpaceSeparator(at)){ge();return}return Ks[qe]()},comment:function(){switch(at){case"*":ge(),He="multiLineComment";return;case"/":ge(),He="singleLineComment";return}throw Mt(ge())},multiLineComment:function(){switch(at){case"*":ge(),He="multiLineCommentAsterisk";return;case void 0:throw Mt(ge())}ge()},multiLineCommentAsterisk:function(){switch(at){case"*":ge();return;case"/":ge(),He="default";return;case void 0:throw Mt(ge())}ge(),He="multiLineComment"},singleLineComment:function(){switch(at){case`
`:case"\r":case"\u2028":case"\u2029":ge(),He="default";return;case void 0:return ge(),Nt("eof")}ge()},value:function(){switch(at){case"{":case"[":return Nt("punctuator",ge());case"n":return ge(),on("ull"),Nt("null",null);case"t":return ge(),on("rue"),Nt("boolean",!0);case"f":return ge(),on("alse"),Nt("boolean",!1);case"-":case"+":ge()==="-"&&(yn=-1),He="sign";return;case".":De=ge(),He="decimalPointLeading";return;case"0":De=ge(),He="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":De=ge(),He="decimalInteger";return;case"I":return ge(),on("nfinity"),Nt("numeric",1/0);case"N":return ge(),on("aN"),Nt("numeric",NaN);case'"':case"'":$r=ge()==='"',De="",He="string";return}throw Mt(ge())},identifierNameStartEscape:function(){if(at!=="u")throw Mt(ge());ge();var fe=zs();switch(fe){case"$":case"_":break;default:if(!Ge.isIdStartChar(fe))throw Ru();break}De+=fe,He="identifierName"},identifierName:function(){switch(at){case"$":case"_":case"\u200C":case"\u200D":De+=ge();return;case"\\":ge(),He="identifierNameEscape";return}if(Ge.isIdContinueChar(at)){De+=ge();return}return Nt("identifier",De)},identifierNameEscape:function(){if(at!=="u")throw Mt(ge());ge();var fe=zs();switch(fe){case"$":case"_":case"\u200C":case"\u200D":break;default:if(!Ge.isIdContinueChar(fe))throw Ru();break}De+=fe,He="identifierName"},sign:function(){switch(at){case".":De=ge(),He="decimalPointLeading";return;case"0":De=ge(),He="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":De=ge(),He="decimalInteger";return;case"I":return ge(),on("nfinity"),Nt("numeric",yn*(1/0));case"N":return ge(),on("aN"),Nt("numeric",NaN)}throw Mt(ge())},zero:function(){switch(at){case".":De+=ge(),He="decimalPoint";return;case"e":case"E":De+=ge(),He="decimalExponent";return;case"x":case"X":De+=ge(),He="hexadecimal";return}return Nt("numeric",yn*0)},decimalInteger:function(){switch(at){case".":De+=ge(),He="decimalPoint";return;case"e":case"E":De+=ge(),He="decimalExponent";return}if(Ge.isDigit(at)){De+=ge();return}return Nt("numeric",yn*Number(De))},decimalPointLeading:function(){if(Ge.isDigit(at)){De+=ge(),He="decimalFraction";return}throw Mt(ge())},decimalPoint:function(){switch(at){case"e":case"E":De+=ge(),He="decimalExponent";return}if(Ge.isDigit(at)){De+=ge(),He="decimalFraction";return}return Nt("numeric",yn*Number(De))},decimalFraction:function(){switch(at){case"e":case"E":De+=ge(),He="decimalExponent";return}if(Ge.isDigit(at)){De+=ge();return}return Nt("numeric",yn*Number(De))},decimalExponent:function(){switch(at){case"+":case"-":De+=ge(),He="decimalExponentSign";return}if(Ge.isDigit(at)){De+=ge(),He="decimalExponentInteger";return}throw Mt(ge())},decimalExponentSign:function(){if(Ge.isDigit(at)){De+=ge(),He="decimalExponentInteger";return}throw Mt(ge())},decimalExponentInteger:function(){if(Ge.isDigit(at)){De+=ge();return}return Nt("numeric",yn*Number(De))},hexadecimal:function(){if(Ge.isHexDigit(at)){De+=ge(),He="hexadecimalInteger";return}throw Mt(ge())},hexadecimalInteger:function(){if(Ge.isHexDigit(at)){De+=ge();return}return Nt("numeric",yn*Number(De))},string:function(){switch(at){case"\\":ge(),De+=Fs();return;case'"':if($r)return ge(),Nt("string",De);De+=ge();return;case"'":if(!$r)return ge(),Nt("string",De);De+=ge();return;case`
`:case"\r":throw Mt(ge());case"\u2028":case"\u2029":xu(at);break;case void 0:throw Mt(ge())}De+=ge()},start:function(){switch(at){case"{":case"[":return Nt("punctuator",ge())}He="value"},beforePropertyName:function(){switch(at){case"$":case"_":De=ge(),He="identifierName";return;case"\\":ge(),He="identifierNameStartEscape";return;case"}":return Nt("punctuator",ge());case'"':case"'":$r=ge()==='"',He="string";return}if(Ge.isIdStartChar(at)){De+=ge(),He="identifierName";return}throw Mt(ge())},afterPropertyName:function(){if(at===":")return Nt("punctuator",ge());throw Mt(ge())},beforePropertyValue:function(){He="value"},afterPropertyValue:function(){switch(at){case",":case"}":return Nt("punctuator",ge())}throw Mt(ge())},beforeArrayValue:function(){if(at==="]")return Nt("punctuator",ge());He="value"},afterArrayValue:function(){switch(at){case",":case"]":return Nt("punctuator",ge())}throw Mt(ge())},end:function(){throw Mt(ge())}};function Nt(re,fe){return{type:re,value:fe,line:cr,column:rr}}function on(re){for(var fe=0,Ue=re;fe<Ue.length;fe+=1){var Oe=Ue[fe],ze=bn();if(ze!==Oe)throw Mt(ge());ge()}}function Fs(){var re=bn();switch(re){case"b":return ge(),"\b";case"f":return ge(),"\f";case"n":return ge(),`
`;case"r":return ge(),"\r";case"t":return ge(),"	";case"v":return ge(),"\v";case"0":if(ge(),Ge.isDigit(bn()))throw Mt(ge());return"\0";case"x":return ge(),Bu();case"u":return ge(),zs();case`
`:case"\u2028":case"\u2029":return ge(),"";case"\r":return ge(),bn()===`
`&&ge(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":throw Mt(ge());case void 0:throw Mt(ge())}return ge()}function Bu(){var re="",fe=bn();if(!Ge.isHexDigit(fe)||(re+=ge(),fe=bn(),!Ge.isHexDigit(fe)))throw Mt(ge());return re+=ge(),String.fromCodePoint(parseInt(re,16))}function zs(){for(var re="",fe=4;fe-- >0;){var Ue=bn();if(!Ge.isHexDigit(Ue))throw Mt(ge());re+=ge()}return String.fromCodePoint(parseInt(re,16))}var $u={start:function(){if(yt.type==="eof")throw pi();Gs()},beforePropertyName:function(){switch(yt.type){case"identifier":case"string":Vr=yt.value,qe="afterPropertyName";return;case"punctuator":Ss();return;case"eof":throw pi()}},afterPropertyName:function(){if(yt.type==="eof")throw pi();qe="beforePropertyValue"},beforePropertyValue:function(){if(yt.type==="eof")throw pi();Gs()},beforeArrayValue:function(){if(yt.type==="eof")throw pi();if(yt.type==="punctuator"&&yt.value==="]"){Ss();return}Gs()},afterPropertyValue:function(){if(yt.type==="eof")throw pi();switch(yt.value){case",":qe="beforePropertyName";return;case"}":Ss()}},afterArrayValue:function(){if(yt.type==="eof")throw pi();switch(yt.value){case",":qe="beforeArrayValue";return;case"]":Ss()}},end:function(){}};function Gs(){var re;switch(yt.type){case"punctuator":switch(yt.value){case"{":re={};break;case"[":re=[];break}break;case"null":case"boolean":case"numeric":case"string":re=yt.value;break}if(ki===void 0)ki=re;else{var fe=Ht[Ht.length-1];Array.isArray(fe)?fe.push(re):Object.defineProperty(fe,Vr,{value:re,writable:!0,enumerable:!0,configurable:!0})}if(re!==null&&typeof re=="object")Ht.push(re),Array.isArray(re)?qe="beforeArrayValue":qe="beforePropertyName";else{var Ue=Ht[Ht.length-1];Ue==null?qe="end":Array.isArray(Ue)?qe="afterArrayValue":qe="afterPropertyValue"}}function Ss(){Ht.pop();var re=Ht[Ht.length-1];re==null?qe="end":Array.isArray(re)?qe="afterArrayValue":qe="afterPropertyValue"}function Mt(re){return Ys(re===void 0?"JSON5: invalid end of input at "+cr+":"+rr:"JSON5: invalid character '"+Pu(re)+"' at "+cr+":"+rr)}function pi(){return Ys("JSON5: invalid end of input at "+cr+":"+rr)}function Ru(){return rr-=5,Ys("JSON5: invalid identifier character at "+cr+":"+rr)}function xu(re){console.warn("JSON5: '"+Pu(re)+"' in strings is not valid ECMAScript; consider escaping")}function Pu(re){var fe={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(fe[re])return fe[re];if(re<" "){var Ue=re.charCodeAt(0).toString(16);return"\\x"+("00"+Ue).substring(Ue.length)}return re}function Ys(re){var fe=new SyntaxError(re);return fe.lineNumber=cr,fe.columnNumber=rr,fe}var vo=function(fe,Ue,Oe){var ze=[],ut="",gt,Ur,Yt="",gi;if(Ue!=null&&typeof Ue=="object"&&!Array.isArray(Ue)&&(Oe=Ue.space,gi=Ue.quote,Ue=Ue.replacer),typeof Ue=="function")Ur=Ue;else if(Array.isArray(Ue)){gt=[];for(var ss=0,_n=Ue;ss<_n.length;ss+=1){var Nn=_n[ss],Rr=void 0;typeof Nn=="string"?Rr=Nn:(typeof Nn=="number"||Nn instanceof String||Nn instanceof Number)&&(Rr=String(Nn)),Rr!==void 0&&gt.indexOf(Rr)<0&&gt.push(Rr)}}return Oe instanceof Number?Oe=Number(Oe):Oe instanceof String&&(Oe=String(Oe)),typeof Oe=="number"?Oe>0&&(Oe=Math.min(10,Math.floor(Oe)),Yt="          ".substr(0,Oe)):typeof Oe=="string"&&(Yt=Oe.substr(0,10)),Cn("",{"":fe});function Cn(Ut,xr){var et=xr[Ut];switch(et!=null&&(typeof et.toJSON5=="function"?et=et.toJSON5(Ut):typeof et.toJSON=="function"&&(et=et.toJSON(Ut))),Ur&&(et=Ur.call(xr,Ut,et)),et instanceof Number?et=Number(et):et instanceof String?et=String(et):et instanceof Boolean&&(et=et.valueOf()),et){case null:return"null";case!0:return"true";case!1:return"false"}if(typeof et=="string")return en(et,!1);if(typeof et=="number")return String(et);if(typeof et=="object")return Array.isArray(et)?Jn(et):Eo(et)}function en(Ut){for(var xr={"'":.1,'"':.2},et={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"},vr="",cn=0;cn<Ut.length;cn++){var wr=Ut[cn];switch(wr){case"'":case'"':xr[wr]++,vr+=wr;continue;case"\0":if(Ge.isDigit(Ut[cn+1])){vr+="\\x00";continue}}if(et[wr]){vr+=et[wr];continue}if(wr<" "){var Wt=wr.charCodeAt(0).toString(16);vr+="\\x"+("00"+Wt).substring(Wt.length);continue}vr+=wr}var Zn=gi||Object.keys(xr).reduce(function(mi,vi){return xr[mi]<xr[vi]?mi:vi});return vr=vr.replace(new RegExp(Zn,"g"),et[Zn]),Zn+vr+Zn}function Eo(Ut){if(ze.indexOf(Ut)>=0)throw TypeError("Converting circular structure to JSON5");ze.push(Ut);var xr=ut;ut=ut+Yt;for(var et=gt||Object.keys(Ut),vr=[],cn=0,wr=et;cn<wr.length;cn+=1){var Wt=wr[cn],Zn=Cn(Wt,Ut);if(Zn!==void 0){var mi=Xs(Wt)+":";Yt!==""&&(mi+=" "),mi+=Zn,vr.push(mi)}}var vi;if(vr.length===0)vi="{}";else{var Qn;if(Yt==="")Qn=vr.join(","),vi="{"+Qn+"}";else{var Kr=`,
`+ut;Qn=vr.join(Kr),vi=`{
`+ut+Qn+`,
`+xr+"}"}}return ze.pop(),ut=xr,vi}function Xs(Ut){if(Ut.length===0)return en(Ut,!0);var xr=String.fromCodePoint(Ut.codePointAt(0));if(!Ge.isIdStartChar(xr))return en(Ut,!0);for(var et=xr.length;et<Ut.length;et++)if(!Ge.isIdContinueChar(String.fromCodePoint(Ut.codePointAt(et))))return en(Ut,!0);return Ut}function Jn(Ut){if(ze.indexOf(Ut)>=0)throw TypeError("Converting circular structure to JSON5");ze.push(Ut);var xr=ut;ut=ut+Yt;for(var et=[],vr=0;vr<Ut.length;vr++){var cn=Cn(String(vr),Ut);et.push(cn!==void 0?cn:"null")}var wr;if(et.length===0)wr="[]";else if(Yt===""){var Wt=et.join(",");wr="["+Wt+"]"}else{var Zn=`,
`+ut,mi=et.join(Zn);wr=`[
`+ut+mi+`,
`+xr+"]"}return ze.pop(),ut=xr,wr}},Ws={parse:An,stringify:vo},wo=Ws,ka=wo;return ka})});var Ew=ce((fee,$3)=>{var wz=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};$3.exports=wz});var Aw=ce((hee,R3)=>{var Ez="2.0.0",Az=Number.MAX_SAFE_INTEGER||9007199254740991,yz=16,bz=250,_z=["major","premajor","minor","preminor","patch","prepatch","prerelease"];R3.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:yz,MAX_SAFE_BUILD_LENGTH:bz,MAX_SAFE_INTEGER:Az,RELEASE_TYPES:_z,SEMVER_SPEC_VERSION:Ez,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var _w=ce((Iu,x3)=>{var{MAX_SAFE_COMPONENT_LENGTH:yw,MAX_SAFE_BUILD_LENGTH:Cz,MAX_LENGTH:Dz}=Aw(),Fz=Ew();Iu=x3.exports={};var Sz=Iu.re=[],Iz=Iu.safeRe=[],ke=Iu.src=[],Le=Iu.t={},Bz=0,bw="[a-zA-Z0-9-]",$z=[["\\s",1],["\\d",Dz],[bw,Cz]],Rz=e=>{for(let[t,r]of $z)e=e.split(`${t}*`).join(`${t}{0,${r}}`).split(`${t}+`).join(`${t}{1,${r}}`);return e},ht=(e,t,r)=>{let n=Rz(t),i=Bz++;Fz(e,i,t),Le[e]=i,ke[i]=t,Sz[i]=new RegExp(t,r?"g":void 0),Iz[i]=new RegExp(n,r?"g":void 0)};ht("NUMERICIDENTIFIER","0|[1-9]\\d*");ht("NUMERICIDENTIFIERLOOSE","\\d+");ht("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${bw}*`);ht("MAINVERSION",`(${ke[Le.NUMERICIDENTIFIER]})\\.(${ke[Le.NUMERICIDENTIFIER]})\\.(${ke[Le.NUMERICIDENTIFIER]})`);ht("MAINVERSIONLOOSE",`(${ke[Le.NUMERICIDENTIFIERLOOSE]})\\.(${ke[Le.NUMERICIDENTIFIERLOOSE]})\\.(${ke[Le.NUMERICIDENTIFIERLOOSE]})`);ht("PRERELEASEIDENTIFIER",`(?:${ke[Le.NUMERICIDENTIFIER]}|${ke[Le.NONNUMERICIDENTIFIER]})`);ht("PRERELEASEIDENTIFIERLOOSE",`(?:${ke[Le.NUMERICIDENTIFIERLOOSE]}|${ke[Le.NONNUMERICIDENTIFIER]})`);ht("PRERELEASE",`(?:-(${ke[Le.PRERELEASEIDENTIFIER]}(?:\\.${ke[Le.PRERELEASEIDENTIFIER]})*))`);ht("PRERELEASELOOSE",`(?:-?(${ke[Le.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${ke[Le.PRERELEASEIDENTIFIERLOOSE]})*))`);ht("BUILDIDENTIFIER",`${bw}+`);ht("BUILD",`(?:\\+(${ke[Le.BUILDIDENTIFIER]}(?:\\.${ke[Le.BUILDIDENTIFIER]})*))`);ht("FULLPLAIN",`v?${ke[Le.MAINVERSION]}${ke[Le.PRERELEASE]}?${ke[Le.BUILD]}?`);ht("FULL",`^${ke[Le.FULLPLAIN]}$`);ht("LOOSEPLAIN",`[v=\\s]*${ke[Le.MAINVERSIONLOOSE]}${ke[Le.PRERELEASELOOSE]}?${ke[Le.BUILD]}?`);ht("LOOSE",`^${ke[Le.LOOSEPLAIN]}$`);ht("GTLT","((?:<|>)?=?)");ht("XRANGEIDENTIFIERLOOSE",`${ke[Le.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);ht("XRANGEIDENTIFIER",`${ke[Le.NUMERICIDENTIFIER]}|x|X|\\*`);ht("XRANGEPLAIN",`[v=\\s]*(${ke[Le.XRANGEIDENTIFIER]})(?:\\.(${ke[Le.XRANGEIDENTIFIER]})(?:\\.(${ke[Le.XRANGEIDENTIFIER]})(?:${ke[Le.PRERELEASE]})?${ke[Le.BUILD]}?)?)?`);ht("XRANGEPLAINLOOSE",`[v=\\s]*(${ke[Le.XRANGEIDENTIFIERLOOSE]})(?:\\.(${ke[Le.XRANGEIDENTIFIERLOOSE]})(?:\\.(${ke[Le.XRANGEIDENTIFIERLOOSE]})(?:${ke[Le.PRERELEASELOOSE]})?${ke[Le.BUILD]}?)?)?`);ht("XRANGE",`^${ke[Le.GTLT]}\\s*${ke[Le.XRANGEPLAIN]}$`);ht("XRANGELOOSE",`^${ke[Le.GTLT]}\\s*${ke[Le.XRANGEPLAINLOOSE]}$`);ht("COERCEPLAIN",`(^|[^\\d])(\\d{1,${yw}})(?:\\.(\\d{1,${yw}}))?(?:\\.(\\d{1,${yw}}))?`);ht("COERCE",`${ke[Le.COERCEPLAIN]}(?:$|[^\\d])`);ht("COERCEFULL",ke[Le.COERCEPLAIN]+`(?:${ke[Le.PRERELEASE]})?(?:${ke[Le.BUILD]})?(?:$|[^\\d])`);ht("COERCERTL",ke[Le.COERCE],!0);ht("COERCERTLFULL",ke[Le.COERCEFULL],!0);ht("LONETILDE","(?:~>?)");ht("TILDETRIM",`(\\s*)${ke[Le.LONETILDE]}\\s+`,!0);Iu.tildeTrimReplace="$1~";ht("TILDE",`^${ke[Le.LONETILDE]}${ke[Le.XRANGEPLAIN]}$`);ht("TILDELOOSE",`^${ke[Le.LONETILDE]}${ke[Le.XRANGEPLAINLOOSE]}$`);ht("LONECARET","(?:\\^)");ht("CARETTRIM",`(\\s*)${ke[Le.LONECARET]}\\s+`,!0);Iu.caretTrimReplace="$1^";ht("CARET",`^${ke[Le.LONECARET]}${ke[Le.XRANGEPLAIN]}$`);ht("CARETLOOSE",`^${ke[Le.LONECARET]}${ke[Le.XRANGEPLAINLOOSE]}$`);ht("COMPARATORLOOSE",`^${ke[Le.GTLT]}\\s*(${ke[Le.LOOSEPLAIN]})$|^$`);ht("COMPARATOR",`^${ke[Le.GTLT]}\\s*(${ke[Le.FULLPLAIN]})$|^$`);ht("COMPARATORTRIM",`(\\s*)${ke[Le.GTLT]}\\s*(${ke[Le.LOOSEPLAIN]}|${ke[Le.XRANGEPLAIN]})`,!0);Iu.comparatorTrimReplace="$1$2$3";ht("HYPHENRANGE",`^\\s*(${ke[Le.XRANGEPLAIN]})\\s+-\\s+(${ke[Le.XRANGEPLAIN]})\\s*$`);ht("HYPHENRANGELOOSE",`^\\s*(${ke[Le.XRANGEPLAINLOOSE]})\\s+-\\s+(${ke[Le.XRANGEPLAINLOOSE]})\\s*$`);ht("STAR","(<|>)?=?\\s*\\*");ht("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");ht("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var O3=ce((dee,P3)=>{var xz=Object.freeze({loose:!0}),Pz=Object.freeze({}),Oz=e=>e?typeof e!="object"?xz:e:Pz;P3.exports=Oz});var L3=ce((pee,k3)=>{var T3=/^[0-9]+$/,N3=(e,t)=>{let r=T3.test(e),n=T3.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1},Tz=(e,t)=>N3(t,e);k3.exports={compareIdentifiers:N3,rcompareIdentifiers:Tz}});var Wp=ce((gee,M3)=>{var Gp=Ew(),{MAX_LENGTH:U3,MAX_SAFE_INTEGER:Yp}=Aw(),{safeRe:j3,t:H3}=_w(),Nz=O3(),{compareIdentifiers:Jl}=L3(),Cw=class e{constructor(t,r){if(r=Nz(r),t instanceof e){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>U3)throw new TypeError(`version is longer than ${U3} characters`);Gp("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=t.trim().match(r.loose?j3[H3.LOOSE]:j3[H3.FULL]);if(!n)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Yp||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Yp||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Yp||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let a=+i;if(a>=0&&a<Yp)return a}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(Gp("SemVer.compare",this.version,this.options,t),!(t instanceof e)){if(typeof t=="string"&&t===this.version)return 0;t=new e(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof e||(t=new e(t,this.options)),Jl(this.major,t.major)||Jl(this.minor,t.minor)||Jl(this.patch,t.patch)}comparePre(t){if(t instanceof e||(t=new e(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],i=t.prerelease[r];if(Gp("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return Jl(n,i)}while(++r)}compareBuild(t){t instanceof e||(t=new e(t,this.options));let r=0;do{let n=this.build[r],i=t.build[r];if(Gp("build compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return Jl(n,i)}while(++r)}inc(t,r,n){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(n)?1:0;if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let a=this.prerelease.length;for(;--a>=0;)typeof this.prerelease[a]=="number"&&(this.prerelease[a]++,a=-2);if(a===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(r){let a=[r,i];n===!1&&(a=[r]),Jl(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=a):this.prerelease=a}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};M3.exports=Cw});var K3=ce((mee,V3)=>{var q3=Wp(),kz=(e,t,r)=>new q3(e,r).compare(new q3(t,r));V3.exports=kz});var G3=ce((vee,z3)=>{var Lz=K3(),Uz=(e,t,r)=>Lz(e,t,r)>=0;z3.exports=Uz});var X3=ce((wee,W3)=>{var Y3=Wp(),jz=(e,t,r=!1)=>{if(e instanceof Y3)return e;try{return new Y3(e,t)}catch(n){if(!r)return null;throw n}};W3.exports=jz});var Z3=ce((Eee,J3)=>{var Hz=Wp(),Mz=X3(),{safeRe:Xp,t:Jp}=_w(),qz=(e,t)=>{if(e instanceof Hz)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};let r=null;if(!t.rtl)r=e.match(t.includePrerelease?Xp[Jp.COERCEFULL]:Xp[Jp.COERCE]);else{let c=t.includePrerelease?Xp[Jp.COERCERTLFULL]:Xp[Jp.COERCERTL],f;for(;(f=c.exec(e))&&(!r||r.index+r[0].length!==e.length);)(!r||f.index+f[0].length!==r.index+r[0].length)&&(r=f),c.lastIndex=f.index+f[1].length+f[2].length;c.lastIndex=-1}if(r===null)return null;let n=r[2],i=r[3]||"0",a=r[4]||"0",s=t.includePrerelease&&r[5]?`-${r[5]}`:"",u=t.includePrerelease&&r[6]?`+${r[6]}`:"";return Mz(`${n}.${i}.${a}${s}${u}`,t)};J3.exports=qz});var jd="2.20.24";var oG=Yr(AA());var FA="3.7.7",o$=FA,Kc=typeof Buffer=="function",yA=typeof TextDecoder=="function"?new TextDecoder:void 0,bA=typeof TextEncoder=="function"?new TextEncoder:void 0,c$="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Cf=Array.prototype.slice.call(c$),Hd=(e=>{let t={};return e.forEach((r,n)=>t[r]=n),t})(Cf),l$=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,$n=String.fromCharCode.bind(String),_A=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),SA=e=>e.replace(/=/g,"").replace(/[+\/]/g,t=>t=="+"?"-":"_"),IA=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),BA=e=>{let t,r,n,i,a="",s=e.length%3;for(let u=0;u<e.length;){if((r=e.charCodeAt(u++))>255||(n=e.charCodeAt(u++))>255||(i=e.charCodeAt(u++))>255)throw new TypeError("invalid character found");t=r<<16|n<<8|i,a+=Cf[t>>18&63]+Cf[t>>12&63]+Cf[t>>6&63]+Cf[t&63]}return s?a.slice(0,s-3)+"===".substring(s):a},vg=typeof btoa=="function"?e=>btoa(e):Kc?e=>Buffer.from(e,"binary").toString("base64"):BA,gg=Kc?e=>Buffer.from(e).toString("base64"):e=>{let r=[];for(let n=0,i=e.length;n<i;n+=4096)r.push($n.apply(null,e.subarray(n,n+4096)));return vg(r.join(""))},Md=(e,t=!1)=>t?SA(gg(e)):gg(e),f$=e=>{if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?$n(192|t>>>6)+$n(128|t&63):$n(224|t>>>12&15)+$n(128|t>>>6&63)+$n(128|t&63)}else{var t=65536+(e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320);return $n(240|t>>>18&7)+$n(128|t>>>12&63)+$n(128|t>>>6&63)+$n(128|t&63)}},h$=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,$A=e=>e.replace(h$,f$),CA=Kc?e=>Buffer.from(e,"utf8").toString("base64"):bA?e=>gg(bA.encode(e)):e=>vg($A(e)),Vc=(e,t=!1)=>t?SA(CA(e)):CA(e),DA=e=>Vc(e,!0),d$=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,p$=e=>{switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),r=t-65536;return $n((r>>>10)+55296)+$n((r&1023)+56320);case 3:return $n((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return $n((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},RA=e=>e.replace(d$,p$),xA=e=>{if(e=e.replace(/\s+/g,""),!l$.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(e.length&3));let t,r="",n,i;for(let a=0;a<e.length;)t=Hd[e.charAt(a++)]<<18|Hd[e.charAt(a++)]<<12|(n=Hd[e.charAt(a++)])<<6|(i=Hd[e.charAt(a++)]),r+=n===64?$n(t>>16&255):i===64?$n(t>>16&255,t>>8&255):$n(t>>16&255,t>>8&255,t&255);return r},wg=typeof atob=="function"?e=>atob(IA(e)):Kc?e=>Buffer.from(e,"base64").toString("binary"):xA,PA=Kc?e=>_A(Buffer.from(e,"base64")):e=>_A(wg(e).split("").map(t=>t.charCodeAt(0))),OA=e=>PA(TA(e)),g$=Kc?e=>Buffer.from(e,"base64").toString("utf8"):yA?e=>yA.decode(PA(e)):e=>RA(wg(e)),TA=e=>IA(e.replace(/[-_]/g,t=>t=="-"?"+":"/")),mg=e=>g$(TA(e)),m$=e=>{if(typeof e!="string")return!1;let t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},NA=e=>({value:e,enumerable:!1,writable:!0,configurable:!0}),kA=function(){let e=(t,r)=>Object.defineProperty(String.prototype,t,NA(r));e("fromBase64",function(){return mg(this)}),e("toBase64",function(t){return Vc(this,t)}),e("toBase64URI",function(){return Vc(this,!0)}),e("toBase64URL",function(){return Vc(this,!0)}),e("toUint8Array",function(){return OA(this)})},LA=function(){let e=(t,r)=>Object.defineProperty(Uint8Array.prototype,t,NA(r));e("toBase64",function(t){return Md(this,t)}),e("toBase64URI",function(){return Md(this,!0)}),e("toBase64URL",function(){return Md(this,!0)})},v$=()=>{kA(),LA()},ft={version:FA,VERSION:o$,atob:wg,atobPolyfill:xA,btoa:vg,btoaPolyfill:BA,fromBase64:mg,toBase64:Vc,encode:Vc,encodeURI:DA,encodeURL:DA,utob:$A,btou:RA,decode:mg,isValid:m$,fromUint8Array:Md,toUint8Array:OA,extendString:kA,extendUint8Array:LA,extendBuiltins:v$};var Mu=typeof $task<"u",eu=typeof $loon<"u",qu=typeof $httpClient<"u"&&!eu,ra=eval('typeof process !== "undefined"'),UA=typeof $environment<"u"&&$environment["stash-version"],jA=typeof $rocket<"u",w$=typeof egern=="object",E$=typeof $native<"u",Vu=typeof $Plugins<"u";function qd(e){return e!==null&&typeof e=="object"&&[null,Object.prototype].includes(Object.getPrototypeOf(e))}function A$(e){let[t,r,n,i,a,s,u]=e.match(/^socks5:\/\/(?:(.*?):(.*?)@)?(.*?)(?::(\d+?))?(\?.*?)?(?:#(.*?))?$/);if(a)a=parseInt(a,10);else throw $.error(`port is not present in line: ${e}`),new Error(`port is not present in line: ${e}`);return{type:5,host:i,port:a,userId:r!=null?decodeURIComponent(r):void 0,password:n!=null?decodeURIComponent(n):void 0}}var Vd=class{constructor(name="untitled",debug=!1){if(this.name=name,this.debug=debug,this.http=xs(),this.env=hn(),ra){let dotenv=require("dotenv");dotenv.config()}this.node=(()=>{if(ra){let fs=require('fs');return{fs}}else return null})(),this.initCache();let delay=(e,t)=>new Promise(function(r){setTimeout(r.bind(null,t),e)});Promise.prototype.delay=async function(e){let t=await this;return await delay(e,t)}}initCache(){if(Mu&&(this.cache=JSON.parse($prefs.valueForKey(this.name)||"{}")),(eu||qu)&&(this.cache=JSON.parse($persistentStore.read(this.name)||"{}")),Vu&&(this.cache=JSON.parse($Plugins.SubStoreCache.get(this.name)||"{}")),ra){let basePath=eval("process.env.SUB_STORE_DATA_BASE_PATH")||".",rootPath=`${basePath}/root.json`,backupRootPath=`${basePath}/root_${Date.now()}.json`;if(this.log(`Root path: ${rootPath}`),this.node.fs.existsSync(rootPath))try{this.root=JSON.parse(this.node.fs.readFileSync(`${rootPath}`))}catch(e){this.node.fs.copyFileSync(rootPath,backupRootPath),this.error(`Failed to parse ${rootPath}: ${e.message}. Backup created at ${backupRootPath}`)}qd(this.root)||(this.node.fs.writeFileSync(rootPath,JSON.stringify({}),{flag:"w"}),this.root={});let fpath=`${basePath}/${this.name}.json`,backupPath=`${basePath}/${this.name}_${Date.now()}.json`;if(this.log(`Data path: ${fpath}`),this.node.fs.existsSync(fpath))try{if(this.cache=JSON.parse(this.node.fs.readFileSync(`${fpath}`,"utf-8")),!qd(this.cache))throw new Error("Invalid Data")}catch{try{let t=ft.decode(this.node.fs.readFileSync(`${fpath}`,"utf-8"));if(this.cache=JSON.parse(t),this.node.fs.writeFileSync(fpath,t,{flag:"w"}),!qd(this.cache))throw new Error("Invalid Data")}catch(t){this.node.fs.copyFileSync(fpath,backupPath),this.error(`Failed to parse ${fpath}: ${t.message}. Backup created at ${backupPath}`)}}qd(this.cache)||(this.node.fs.writeFileSync(fpath,JSON.stringify({}),{flag:"w"}),this.cache={})}}persistCache(){let data=JSON.stringify(this.cache,null,2);if(Mu&&$prefs.setValueForKey(data,this.name),(eu||qu)&&$persistentStore.write(data,this.name),Vu&&$Plugins.SubStoreCache.set(this.name,data),ra){let basePath=eval("process.env.SUB_STORE_DATA_BASE_PATH")||".";this.node.fs.writeFileSync(`${basePath}/${this.name}.json`,data,{flag:"w"},e=>console.log(e)),this.node.fs.writeFileSync(`${basePath}/root.json`,JSON.stringify(this.root,null,2),{flag:"w"},e=>console.log(e))}}write(e,t){if(this.log(`SET ${t}`),t.indexOf("#")!==-1){if(t=t.substr(1),qu||eu)return $persistentStore.write(e,t);if(Mu)return $prefs.setValueForKey(e,t);if(ra&&(this.root[t]=e),Vu)return $Plugins.SubStoreCache.set(t,e)}else this.cache[t]=e;this.persistCache()}read(e){if(this.log(`READ ${e}`),e.indexOf("#")!==-1){if(e=e.substr(1),qu||eu)return $persistentStore.read(e);if(Mu)return $prefs.valueForKey(e);if(ra)return this.root[e];if(Vu)return $Plugins.SubStoreCache.get(e)}else return this.cache[e]}delete(e){if(this.log(`DELETE ${e}`),e.indexOf("#")!==-1){if(e=e.substr(1),qu||eu)return $persistentStore.write(null,e);if(Mu)return $prefs.removeValueForKey(e);if(ra&&delete this.root[e],Vu)return $Plugins.SubStoreCache.remove(e)}else delete this.cache[e];this.persistCache()}notify(title,subtitle="",content="",options={}){let openURL=options["open-url"],mediaURL=options["media-url"];if(Mu&&$notify(title,subtitle,content,options),qu&&$notification.post(title,subtitle,content+`${mediaURL?`
\u591A\u5A92\u4F53:`+mediaURL:""}`,{url:openURL}),eu){let e={};openURL&&(e.openUrl=openURL),mediaURL&&(e.mediaUrl=mediaURL),JSON.stringify(e)==="{}"?$notification.post(title,subtitle,content):$notification.post(title,subtitle,content,e)}if(ra){let content_=content+(openURL?`
\u70B9\u51FB\u8DF3\u8F6C: ${openURL}`:"")+(mediaURL?`
\u591A\u5A92\u4F53: ${mediaURL}`:"");console.log(`${title}
${subtitle}
${content_}

`);let push=eval("process.env.SUB_STORE_PUSH_SERVICE");if(push)if(/^https?:\/\//.test(push)){let e=push.replace("[\u63A8\u9001\u6807\u9898]",encodeURIComponent(title||"Sub-Store")).replace("[\u63A8\u9001\u5185\u5BB9]",encodeURIComponent([subtitle,content_].map(r=>r).join(`
`)));xs().get({url:e}).then(r=>{console.log(`[Push Service] URL: ${e}
RES: ${r.statusCode} ${r.body}`)}).catch(r=>{console.log(`[Push Service] URL: ${e}
ERROR: ${r}`)})}else{let{execFile}=require("child_process");execFile("shoutrrr",["send","--url",push,"--message",`${title}
${subtitle}
${content_}`],(e,t,r)=>{if(e){console.log(`[Push Service] URL: ${push}
ERROR: ${e}`);return}r&&console.log(`[Push Service] URL: ${push}
stderr: ${r}`),console.log(`[Push Service] URL: ${push}
stdout: ${t}`)})}}Vu&&$Plugins.Notify(title,subtitle+`
`+content)}log(e){this.debug&&console.log(`[${this.name}] LOG: ${e}`)}info(e){console.log(`[${this.name}] INFO: ${e}`)}error(e){console.log(`[${this.name}] ERROR: ${e}`)}wait(e){return new Promise(t=>setTimeout(t,e))}done(e={}){Mu||eu||qu||Vu?$done(e):ra&&typeof $context<"u"&&($context.headers=e.headers,$context.statusCode=e.statusCode,$context.body=e.body)}};function hn(){return{isQX:Mu,isLoon:eu,isSurge:qu,isNode:ra,isStash:UA,isShadowRocket:jA,isEgern:w$,isLanceX:E$,isGUIforCores:Vu}}function xs(defaultOptions={baseURL:""}){let{isQX,isLoon,isSurge,isNode,isGUIforCores}=hn(),methods=["GET","POST","PUT","DELETE","HEAD","OPTIONS","PATCH"],URL_REGEX=/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/;function send(method,options){options=typeof options=="string"?{url:options}:options;let baseURL=defaultOptions.baseURL;baseURL&&!URL_REGEX.test(options.url||"")&&(options.url=baseURL?baseURL+options.url:options.url),options={...defaultOptions,...options};let timeout=options.timeout,events={onRequest:()=>{},onResponse:e=>e,onTimeout:()=>{},...options.events};if(events.onRequest(method,options),options.node&&isSurge){let e=$environment["surge-build"];e&&parseInt(e)>=2407&&(options["policy-descriptor"]=options.node,delete options.node)}let worker;isQX?worker=$task.fetch({method,url:options.url,headers:options.headers,body:options.body,opts:options.opts}):isLoon||isSurge||isNode?worker=new Promise(async(resolve,reject)=>{let body=options.body,opts=JSON.parse(JSON.stringify(options));if(opts.body=body,opts.timeout=opts.timeout||8e3,opts.timeout&&(opts.timeout++,isNaN(opts.timeout)&&(opts.timeout=8e3),!isNode)){let e="ms";(isSurge||UA||jA)&&(opts.timeout=Math.ceil(opts.timeout/1e3),e="s")}if(isNode){let undici=require('undici'),{socksDispatcher}=require('fetch-socks'),{ProxyAgent,EnvHttpProxyAgent,request,interceptors}=undici,agentOpts={connect:{rejectUnauthorized:!(opts.strictSSL===!1||opts.insecure===!0)},bodyTimeout:opts.timeout,headersTimeout:opts.timeout};try{let url=new URL(opts.url);(url.username||url.password)&&(opts.headers={...opts.headers||{},Authorization:`Basic ${Buffer.from(`${url.username||""}:${url.password||""}`).toString("base64")}`});let dispatcher;if(!opts.proxy){let allProxy=eval("process.env.all_proxy")||eval("process.env.ALL_PROXY");allProxy&&/^socks5:\/\//.test(allProxy)&&(opts.proxy=allProxy)}opts.proxy?/^socks5:\/\//.test(opts.proxy)?dispatcher=socksDispatcher(A$(opts.proxy),agentOpts):dispatcher=new ProxyAgent({...agentOpts,uri:opts.proxy}):dispatcher=new EnvHttpProxyAgent(agentOpts);let response=await request(opts.url,{...opts,method:method.toUpperCase(),dispatcher:dispatcher.compose(interceptors.redirect({maxRedirections:3,throwOnMaxRedirects:!0}))});resolve({statusCode:response.statusCode,headers:response.headers,body:opts.encoding===null?await response.body.arrayBuffer():await response.body.text()})}catch(e){reject(e)}}else $httpClient[method.toLowerCase()](opts,(e,t,r)=>{e?reject(e):resolve({statusCode:t.status||t.statusCode,headers:t.headers,body:r})})}):isGUIforCores&&(worker=new Promise(async(e,t)=>{try{let r=await $Plugins.Requests({method,url:options.url,headers:options.headers,body:options.body,autoTransformBody:!1,options:{Proxy:options.proxy,Timeout:options.timeout?options.timeout/1e3:15}});e({statusCode:r.status,headers:r.headers,body:r.body})}catch(r){t(r)}}));let timeoutid,timer=timeout?new Promise((e,t)=>{timeoutid=setTimeout(()=>(events.onTimeout(),t(`${method} URL: ${options.url} exceeds the timeout ${timeout} ms`)),timeout)}):null;return(timer?Promise.race([timer,worker]).then(e=>(typeof clearTimeout<"u"&&clearTimeout(timeoutid),e)):worker).then(e=>events.onResponse(e))}let http={};return methods.forEach(e=>http[e.toLowerCase()]=t=>send(e,t)),http}var y$=new Vd("sub-store"),R=y$;var Eg="schemaVersion",Kt="settings",Jt="subs",Zt="collections",Lt="files",jn="modules",Bt="artifacts",Df="rules",ui="tokens",HA="Auto Generated Sub-Store Backup",Kd="Sub-Store",Lo="Sub-Store Artifacts Repository",Uo="#sub-store-cached-resource",jo="#sub-store-cached-headers-resource",zd="#sub-store-chr-expiration-time";var Ho="#sub-store-cached-script-resource",Gd="#sub-store-csr-expiration-time";function Ku(){b$()}function b$(){let e=R.read(Eg);e||_$(),e!=="2.0"&&R.write("2.0",Eg)}function _$(){R.info("Start migrating...");let e=R.read(Jt)||{},t=Object.values(e).map(w=>(w.source=w.source||"remote",p(w),d(w),w));R.write(t,Jt);let r=R.read(Zt)||{},n=Object.values(r).map(w=>(delete w.ua,p(w),d(w),w));R.write(n,Zt);let i=R.read(Bt)||{},a=Object.values(i);R.write(a,Bt);let s=R.read(Df)||{},u=Object.values(s);R.write(u,Df);let c=R.read(Lt)||{},f=Object.values(c);R.write(f,Lt);let h=R.read(ui)||{},g=Object.values(h);R.write(g,ui),delete R.cache.builtin,R.info("Migration complete!");function p(w){let v=w["display-name"];v&&(w.displayName=v,delete w["display-name"])}function d(w){let v=w.process;if(!v||v.length===0)return;let b=[],m={type:"Quick Setting Operator",args:{udp:"DEFAULT",tfo:"DEFAULT",scert:"DEFAULT","vmess aead":"DEFAULT",useless:"DEFAULT"}};for(let y of v)if(y.type){if(y.type==="Useless Filter")m.args.useless="ENABLED";else if(y.type==="Set Property Operator"){let{key:D,value:C}=y.args;switch(D){case"udp":m.args.udp=C?"ENABLED":"DISABLED";break;case"tfo":m.args.tfo=C?"ENABLED":"DISABLED";break;case"skip-cert-verify":m.args.scert=C?"ENABLED":"DISABLED";break;case"aead":m.args["vmess aead"]=C?"ENABLED":"DISABLED";break}}else if(y.type.indexOf("Keyword")===-1)if(y.type==="Flag Operator"){let D=typeof y.args>"u"?!0:y.args;y.args={mode:D?"add":"remove"},b.push(y)}else b.push(y)}b.unshift(m),w.process=b}}var tG=Yr(Sf());function Ag({substore:$,port,host}){let{isNode}=hn(),DEFAULT_HEADERS={"Content-Type":"text/plain;charset=UTF-8","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"POST,GET,OPTIONS,PATCH,PUT,DELETE","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept","X-Powered-By":"Sub-Store"};if(isNode){let express_=require("express"),bodyParser=require("body-parser"),app=express_(),limit=eval("process.env.SUB_STORE_BODY_JSON_LIMIT")||"1mb";return $.info(`[BACKEND] body JSON limit: ${limit}`),app.use(bodyParser.json({verify:rawBodySaver,limit})),app.use(bodyParser.urlencoded({verify:rawBodySaver,extended:!0})),app.use(bodyParser.raw({verify:rawBodySaver,type:"*/*"})),app.use((e,t,r)=>{t.set(DEFAULT_HEADERS),r()}),app.start=()=>{app.get("*",function(t,r){r.status(404).end()});let e=app.listen(port,host,()=>{let{address:t,port:r}=e.address();$.info(`[BACKEND] listening on ${t}:${r}`)})},app}let handlers=[],METHODS_NAMES=["GET","POST","PUT","DELETE","PATCH","OPTIONS","HEAD'","ALL"],dispatch=(e,t=0)=>{let{method:r,url:n,headers:i,body:a}=e;i=C$(i),/json/i.test(i["content-type"])&&(a=JSON.parse(a)),r=r.toUpperCase();let{path:s,query:u}=F$(n),c=null,f,h=0;for(f=t;f<handlers.length;f++)if(handlers[f].method==="ALL"||r===handlers[f].method){let{pattern:g}=handlers[f];D$(g,s)&&g.split("/").length>h&&(c=handlers[f],h=g.split("/").length)}if(c){let g=()=>{dispatch(r,n,f)},p={method:r,url:n,path:s,query:u,params:MA(c.pattern,s),headers:i,body:a},d=Response(),w=c.callback,v=b=>{d.status(500).json({status:"failed",message:`Internal Server Error: ${b}`})};if(w.constructor.name==="AsyncFunction")w(p,d,g).catch(v);else try{w(p,d,g)}catch(b){v(b)}}else Response().status(404).json({status:"failed",message:"ERROR: 404 not found"})},app={};return METHODS_NAMES.forEach(e=>{app[e.toLowerCase()]=(t,r)=>{handlers.push({method:e,pattern:t,callback:r})}}),app.route=e=>{let t={};return METHODS_NAMES.forEach(r=>{t[r.toLowerCase()]=n=>(handlers.push({method:r,pattern:e,callback:n}),t)}),t},app.start=()=>{dispatch($request)},app;function rawBodySaver(e,t,r,n){r&&r.length&&(e.rawBody=r.toString(n||"utf8"))}function Response(){let e=200,{isQX:t,isLoon:r,isSurge:n,isGUIforCores:i}=hn(),a=DEFAULT_HEADERS,s={200:"HTTP/1.1 200 OK",201:"HTTP/1.1 201 Created",302:"HTTP/1.1 302 Found",307:"HTTP/1.1 307 Temporary Redirect",308:"HTTP/1.1 308 Permanent Redirect",404:"HTTP/1.1 404 Not Found",500:"HTTP/1.1 500 Internal Server Error"};return new class{status(u){return e=u,this}send(u=""){let c={status:t?s[e]:e,body:u,headers:a};t||i?$done(c):(r||n)&&$done({response:c})}end(){this.send()}html(u){this.set("Content-Type","text/html;charset=UTF-8"),this.send(u)}json(u){this.set("Content-Type","application/json;charset=UTF-8"),this.send(JSON.stringify(u))}set(u,c){return a[u]=c,this}}}}function C$(e){let t={};for(let r of Object.keys(e))t[r.toLowerCase()]=e[r];return t}function D$(e,t){if(e instanceof RegExp&&e.test(t))return!0;if(e==="/")return!0;if(e.indexOf(":")===-1){let r=t.split("/"),n=e.split("/");for(let i=0;i<n.length;i++)if(r[i]!==n[i])return!1;return!0}else if(MA(e,t))return!0;return!1}function F$(e){let r=(e.match(/https?:\/\/[^/]+(\/[^?]*)/)||[])[1]||"/",n=e.indexOf("?"),i={};if(n!==-1){let a=e.slice(e.indexOf("?")+1).split("&");for(let s=0;s<a.length;s++){let u=a[s].split("=");i[u[0]]=decodeURIComponent(u[1])}}return{path:r,query:i}}function MA(e,t){if(e.indexOf(":")===-1)return null;{let r={};for(let n=0,i=0;n<e.length;n++,i++)if(e[n]===":"){let a=[],s=[];for(;e[++n]!=="/"&&n<e.length;)a.push(e[n]);for(;t[i]!=="/"&&i<t.length;)s.push(t[i++]);r[a.join("")]=decodeURIComponent(s.join(""))}else if(e[n]!==t[i])return null;return r}}var yg=0;function Gi(e){return I$(S$(B$(e)))}function S$(e){return R$(x$($$(e),e.length*8))}function I$(e){try{}catch{yg=0}for(var t=yg?"0123456789ABCDEF":"0123456789abcdef",r="",n,i=0;i<e.length;i++)n=e.charCodeAt(i),r+=t.charAt(n>>>4&15)+t.charAt(n&15);return r}function B$(e){for(var t="",r=-1,n,i;++r<e.length;)n=e.charCodeAt(r),i=r+1<e.length?e.charCodeAt(r+1):0,55296<=n&&n<=56319&&56320<=i&&i<=57343&&(n=65536+((n&1023)<<10)+(i&1023),r++),n<=127?t+=String.fromCharCode(n):n<=2047?t+=String.fromCharCode(192|n>>>6&31,128|n&63):n<=65535?t+=String.fromCharCode(224|n>>>12&15,128|n>>>6&63,128|n&63):n<=2097151&&(t+=String.fromCharCode(240|n>>>18&7,128|n>>>12&63,128|n>>>6&63,128|n&63));return t}function $$(e){for(var t=Array(e.length>>2),r=0;r<t.length;r++)t[r]=0;for(var r=0;r<e.length*8;r+=8)t[r>>5]|=(e.charCodeAt(r/8)&255)<<r%32;return t}function R$(e){for(var t="",r=0;r<e.length*32;r+=8)t+=String.fromCharCode(e[r>>5]>>>r%32&255);return t}function x$(e,t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;for(var r=1732584193,n=-271733879,i=-1732584194,a=271733878,s=0;s<e.length;s+=16){var u=r,c=n,f=i,h=a;r=Hn(r,n,i,a,e[s+0],7,-680876936),a=Hn(a,r,n,i,e[s+1],12,-389564586),i=Hn(i,a,r,n,e[s+2],17,606105819),n=Hn(n,i,a,r,e[s+3],22,-1044525330),r=Hn(r,n,i,a,e[s+4],7,-176418897),a=Hn(a,r,n,i,e[s+5],12,1200080426),i=Hn(i,a,r,n,e[s+6],17,-1473231341),n=Hn(n,i,a,r,e[s+7],22,-45705983),r=Hn(r,n,i,a,e[s+8],7,1770035416),a=Hn(a,r,n,i,e[s+9],12,-1958414417),i=Hn(i,a,r,n,e[s+10],17,-42063),n=Hn(n,i,a,r,e[s+11],22,-1990404162),r=Hn(r,n,i,a,e[s+12],7,1804603682),a=Hn(a,r,n,i,e[s+13],12,-40341101),i=Hn(i,a,r,n,e[s+14],17,-1502002290),n=Hn(n,i,a,r,e[s+15],22,1236535329),r=Mn(r,n,i,a,e[s+1],5,-165796510),a=Mn(a,r,n,i,e[s+6],9,-1069501632),i=Mn(i,a,r,n,e[s+11],14,643717713),n=Mn(n,i,a,r,e[s+0],20,-373897302),r=Mn(r,n,i,a,e[s+5],5,-701558691),a=Mn(a,r,n,i,e[s+10],9,38016083),i=Mn(i,a,r,n,e[s+15],14,-660478335),n=Mn(n,i,a,r,e[s+4],20,-405537848),r=Mn(r,n,i,a,e[s+9],5,568446438),a=Mn(a,r,n,i,e[s+14],9,-1019803690),i=Mn(i,a,r,n,e[s+3],14,-187363961),n=Mn(n,i,a,r,e[s+8],20,1163531501),r=Mn(r,n,i,a,e[s+13],5,-1444681467),a=Mn(a,r,n,i,e[s+2],9,-51403784),i=Mn(i,a,r,n,e[s+7],14,1735328473),n=Mn(n,i,a,r,e[s+12],20,-1926607734),r=qn(r,n,i,a,e[s+5],4,-378558),a=qn(a,r,n,i,e[s+8],11,-2022574463),i=qn(i,a,r,n,e[s+11],16,1839030562),n=qn(n,i,a,r,e[s+14],23,-35309556),r=qn(r,n,i,a,e[s+1],4,-1530992060),a=qn(a,r,n,i,e[s+4],11,1272893353),i=qn(i,a,r,n,e[s+7],16,-155497632),n=qn(n,i,a,r,e[s+10],23,-1094730640),r=qn(r,n,i,a,e[s+13],4,681279174),a=qn(a,r,n,i,e[s+0],11,-358537222),i=qn(i,a,r,n,e[s+3],16,-722521979),n=qn(n,i,a,r,e[s+6],23,76029189),r=qn(r,n,i,a,e[s+9],4,-640364487),a=qn(a,r,n,i,e[s+12],11,-421815835),i=qn(i,a,r,n,e[s+15],16,530742520),n=qn(n,i,a,r,e[s+2],23,-995338651),r=Vn(r,n,i,a,e[s+0],6,-198630844),a=Vn(a,r,n,i,e[s+7],10,1126891415),i=Vn(i,a,r,n,e[s+14],15,-1416354905),n=Vn(n,i,a,r,e[s+5],21,-57434055),r=Vn(r,n,i,a,e[s+12],6,1700485571),a=Vn(a,r,n,i,e[s+3],10,-1894986606),i=Vn(i,a,r,n,e[s+10],15,-1051523),n=Vn(n,i,a,r,e[s+1],21,-2054922799),r=Vn(r,n,i,a,e[s+8],6,1873313359),a=Vn(a,r,n,i,e[s+15],10,-30611744),i=Vn(i,a,r,n,e[s+6],15,-1560198380),n=Vn(n,i,a,r,e[s+13],21,1309151649),r=Vn(r,n,i,a,e[s+4],6,-145523070),a=Vn(a,r,n,i,e[s+11],10,-1120210379),i=Vn(i,a,r,n,e[s+2],15,718787259),n=Vn(n,i,a,r,e[s+9],21,-343485551),r=zu(r,u),n=zu(n,c),i=zu(i,f),a=zu(a,h)}return Array(r,n,i,a)}function Yd(e,t,r,n,i,a){return zu(P$(zu(zu(t,e),zu(n,a)),i),r)}function Hn(e,t,r,n,i,a,s){return Yd(t&r|~t&n,e,t,i,a,s)}function Mn(e,t,r,n,i,a,s){return Yd(t&n|r&~n,e,t,i,a,s)}function qn(e,t,r,n,i,a,s){return Yd(t^r^n,e,t,i,a,s)}function Vn(e,t,r,n,i,a,s){return Yd(r^(t|~n),e,t,i,a,s)}function zu(e,t){var r=(e&65535)+(t&65535),n=(e>>16)+(t>>16)+(r>>16);return n<<16|r&65535}function P$(e,t){return e<<t|e>>>32-t}var n0=Yr(ty()),s7=/^((25[0-5]|(2[0-4]|1\d|[1-9]|)\d)(\.(?!$)|$)){4}$/,a7=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/;function Wr(e){return s7.test(e)}function Mr(e){return a7.test(e)}function ry(e){return/^((6553[0-5])|(655[0-2][0-9])|(65[0-4][0-9]{2})|(6[0-4][0-9]{3})|([1-5][0-9]{4})|([0-5]{0,5})|([0-9]{1,4}))$/.test(e)}function oa(e){return typeof e=="string"&&e.trim().length>0}function fr(e,t){return oa(e)?e:t}function Xc(e){return typeof e<"u"&&e!==null}function Jc(e,t){return Xc(e)?e:t}function ru(e){return e?/^.+?\s*?=\s*?.+?\s*?,.+?/.test(e)?{"policy-descriptor":e}:{policy:e}:{}}function u7(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}function $f(e){let t=e.split(/,|\//),r=t[Math.floor(Math.random()*t.length)];if(r.includes("-")){let[n,i]=r.split("-").map(Number);return u7(n,i)}else return Number(r)}function ny(e){return Number.isSafeInteger(e)?String(e):BigInt(e).toString()}function i0(e){return typeof e=="string"&&/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/.test(e)}function Gu(e,t="YYYY-MM-DD_HH-mm-ss"){let r=e instanceof Date?e:new Date(e);if(isNaN(r.getTime()))return"";let n=a=>String(a).padStart(2,"0"),i={YYYY:r.getFullYear(),MM:n(r.getMonth()+1),DD:n(r.getDate()),HH:n(r.getHours()),mm:n(r.getMinutes()),ss:n(r.getSeconds())};return t.replace(/YYYY|MM|DD|HH|mm|ss/g,a=>i[a])}var Pg=class{constructor(t){this.expires=t,R.read(Uo)||R.write("{}",Uo);try{this.resourceCache=JSON.parse(R.read(Uo))}catch(r){R.error(`\u89E3\u6790\u6301\u4E45\u5316\u7F13\u5B58\u4E2D\u7684 ${Uo} \u5931\u8D25, \u91CD\u7F6E\u4E3A {}, \u9519\u8BEF: ${r?.message??r}`),this.resourceCache={},R.write("{}",Uo)}this._cleanup()}_cleanup(){let t=!1;Object.entries(this.resourceCache).forEach(r=>{let[n,i]=r;i.time||(delete this.resourceCache[n],R.delete(`#${n}`),t=!0),new Date().getTime()-i.time>this.expires&&(delete this.resourceCache[n],t=!0)}),t&&this._persist()}revokeAll(){this.resourceCache={},this._persist()}_persist(){R.write(JSON.stringify(this.resourceCache),Uo)}get(t){let r=this.resourceCache[t]&&this.resourceCache[t].time;return r&&new Date().getTime()-r<=this.expires?this.resourceCache[t].data:null}set(t,r){this.resourceCache[t]={time:new Date().getTime(),data:r},this._persist()}},Xr=new Pg(36e5);var Og=class{constructor(){this.expires=c7(),R.read(jo)||R.write("{}",jo);try{this.resourceCache=JSON.parse(R.read(jo))}catch(t){R.error(`\u89E3\u6790\u6301\u4E45\u5316\u7F13\u5B58\u4E2D\u7684 ${jo} \u5931\u8D25, \u91CD\u7F6E\u4E3A {}, \u9519\u8BEF: ${t?.message??t}`),this.resourceCache={},R.write("{}",jo)}this._cleanup()}_cleanup(){let t=!1;Object.entries(this.resourceCache).forEach(r=>{let[n,i]=r;i.time||(delete this.resourceCache[n],R.delete(`#${n}`),t=!0),new Date().getTime()-i.time>this.expires&&(delete this.resourceCache[n],t=!0)}),t&&this._persist()}revokeAll(){this.resourceCache={},this._persist()}_persist(){R.write(JSON.stringify(this.resourceCache),jo)}get(t){let r=this.resourceCache[t]&&this.resourceCache[t].time;return r&&new Date().getTime()-r<=this.expires?this.resourceCache[t].data:null}gettime(t){let r=this.resourceCache[t]&&this.resourceCache[t].time;return r&&new Date().getTime()-r<=this.expires?this.resourceCache[t].time:null}set(t,r){this.resourceCache[t]={time:new Date().getTime(),data:r},this._persist()}};function c7(){R.read(zd)||R.write("6e4",zd);let e=6e4;if(R.env.isLoon){let t={"1\u5206\u949F":6e4,"5\u5206\u949F":3e5,"10\u5206\u949F":6e5,"30\u5206\u949F":18e5,"1\u5C0F\u65F6":36e5,"2\u5C0F\u65F6":72e5,"3\u5C0F\u65F6":108e5,"6\u5C0F\u65F6":216e5,"12\u5C0F\u65F6":432e5,"24\u5C0F\u65F6":864e5,"48\u5C0F\u65F6":1728e5,"72\u5C0F\u65F6":2592e5,\u53C2\u6570\u4F20\u5165:"readcachets"},r=R.read("#\u54CD\u5E94\u5934\u7F13\u5B58\u6709\u6548\u671F");return r in t&&(e=t[r],e==="readcachets"&&(e=r)),e}else return e=R.read(zd),e}var Vo=new Og;function Zc(e){let t=Object.keys(e),r="",n="";for(let i of t){let a=i.toLowerCase();a==="subscription-userinfo"?r=e[i]:a==="profile-web-page-url"&&(n=e[i])}return`${r||""}${n?`; app_url=${encodeURIComponent(n)}`:""}`}async function zn(rawUrl,ua,timeout,customProxy,flowUrl){let url=flowUrl||rawUrl||"",$arguments={},rawArgs=url.split("#");if(url=url.split("#")[0],rawArgs.length>1)try{$arguments=JSON.parse(decodeURIComponent(rawArgs[1]))}catch{for(let t of rawArgs[1].split("&")){let r=t.split("=")[0],n=t.split("=")[1];$arguments[r]=n==null||n===""?!0:decodeURIComponent(n)}}if($arguments?.noFlow||!/^https?/.test(url))return;let{isStash,isLoon,isShadowRocket,isQX}=hn(),insecure=$arguments?.insecure?R.env.isNode?{strictSSL:!1}:{insecure:!0}:void 0,{defaultProxy,defaultFlowUserAgent,defaultTimeout}=R.read(Kt),proxy=customProxy||defaultProxy;R.env.isNode&&(proxy=proxy||eval("process.env.SUB_STORE_BACKEND_DEFAULT_PROXY"));let userAgent=ua||defaultFlowUserAgent||"clash",requestTimeout=timeout||defaultTimeout||8e3,id=Gi(userAgent+url),cached=Vo.get(id),flowInfo;if(!$arguments?.noCache&&cached)R.info(`\u4F7F\u7528\u7F13\u5B58\u7684\u6D41\u91CF\u4FE1\u606F: ${url}, ${userAgent}`),flowInfo=cached;else{let e=xs();if(flowUrl){R.info(`\u4F7F\u7528 GET \u65B9\u6CD5\u4ECE\u54CD\u5E94\u4F53\u83B7\u53D6\u6D41\u91CF\u4FE1\u606F: ${flowUrl}, User-Agent: ${userAgent||""}, Insecure: ${!!insecure}, Proxy: ${proxy}`);let{body:t}=await e.get({url:flowUrl,headers:{"User-Agent":userAgent},timeout:requestTimeout,...proxy?{proxy}:{},...isLoon&&proxy?{node:proxy}:{},...isQX&&proxy?{opts:{policy:proxy}}:{},...proxy?ru(proxy):{},...insecure||{}});flowInfo=t}else{try{R.info(`\u4F7F\u7528 HEAD \u65B9\u6CD5\u4ECE\u54CD\u5E94\u5934\u83B7\u53D6\u6D41\u91CF\u4FE1\u606F: ${url}, User-Agent: ${userAgent||""}, Insecure: ${!!insecure}, Proxy: ${proxy}`);let{headers:t}=await e.head({url:url.split(/[\r\n]+/).map(r=>r.trim()).filter(r=>r.length)[0],headers:{"User-Agent":userAgent,...isStash&&proxy?{"X-Stash-Selected-Proxy":encodeURIComponent(proxy)}:{},...isShadowRocket&&proxy?{"X-Surge-Policy":proxy}:{}},timeout:requestTimeout,...proxy?{proxy}:{},...isLoon&&proxy?{node:proxy}:{},...isQX&&proxy?{opts:{policy:proxy}}:{},...proxy?ru(proxy):{},...insecure||{}});flowInfo=Zc(t)}catch(t){R.error(`\u4F7F\u7528 HEAD \u65B9\u6CD5\u4ECE\u54CD\u5E94\u5934\u83B7\u53D6\u6D41\u91CF\u4FE1\u606F\u5931\u8D25: ${url}, User-Agent: ${userAgent||""}, Insecure: ${!!insecure}, Proxy: ${proxy}: ${t.message??t}`)}if(!flowInfo){R.info(`\u4F7F\u7528 GET \u65B9\u6CD5\u83B7\u53D6\u6D41\u91CF\u4FE1\u606F: ${url}, User-Agent: ${userAgent||""}, Insecure: ${!!insecure}, Proxy: ${proxy}`);let{headers:t}=await e.get({url:url.split(/[\r\n]+/).map(r=>r.trim()).filter(r=>r.length)[0],headers:{"User-Agent":userAgent,...isStash&&proxy?{"X-Stash-Selected-Proxy":encodeURIComponent(proxy)}:{},...isShadowRocket&&proxy?{"X-Surge-Policy":proxy}:{}},timeout:requestTimeout,...proxy?{proxy}:{},...isLoon&&proxy?{node:proxy}:{},...isQX&&proxy?{opts:{policy:proxy}}:{},...proxy?ru(proxy):{},...insecure||{}});flowInfo=Zc(t)}}flowInfo&&(flowInfo=flowInfo.trim()),flowInfo&&Vo.set(id,flowInfo)}return flowInfo}function Ko(e){if(!e)return;let t=e.match(/upload=([-+]?)([0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?)/),r=Number(t[1]+t[2]),n=e.match(/download=([-+]?)([0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?)/),i=Number(n[1]+n[2]),a=e.match(/total=([-+]?)([0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?)/),s=Number(a[1]+a[2]),u=e.match(/expire=([-+]?)([0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?)/),c=u?Number(u[1]+u[2]):void 0,f=e.match(/reset_day=([0-9]+)/),h=f?Number(f[1]):void 0,g=e.match(/app_url=(.*?)\s*?(;|$)/),p=g?decodeURIComponent(g[1]):void 0,d=e.match(/plan_name=(.*?)\s*?(;|$)/),w=d?decodeURIComponent(d[1]):void 0;return{expires:c,total:s,usage:{upload:r,download:i},remainingDays:h,appUrl:p,planName:w}}function Rf(e,t="B"){let r=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],n=r.indexOf(t);return e<1024||n===r.length-1?{value:(Math.round(e*100)/100).toString(),unit:t}:Rf(e/1024,r[++n])}function s0(e){if(!e)throw new Error("\u6CA1\u6709\u6D41\u91CF\u4FE1\u606F");if(e?.expires&&e.expires*1e3<Date.now()){let t=new Date(e.expires*1e3).toLocaleDateString();throw new Error(`\u8BA2\u9605\u5DF2\u8FC7\u671F: ${t}`)}if(e?.total){let t=e.usage?.upload||0,r=e.usage?.download||0;if(e.total-t-r<0){let n=t+r,i=Rf(Math.abs(n));i.value=n<0?"-"+i.value:i.value;let a=Rf(e.total);throw new Error(`\u6D41\u91CF\u5DF2\u7528\u5B8C: ${i.value} ${i.unit} / ${a.value} ${a.unit}`)}}}function a0(e={}){try{let{resetDay:t,startDate:r,cycleDays:n}=e;if(["string","number"].includes(typeof e)&&(t=e),r&&n){if(n=parseInt(n),isNaN(n)||n<=0)throw new Error("\u91CD\u7F6E\u5468\u671F\u5E94\u4E3A\u6B63\u6574\u6570");if(!r||!Date.parse(r))throw new Error("\u5F00\u59CB\u65E5\u671F\u4E0D\u5408\u6CD5");let i=new Date(r),a=new Date;if(i.setHours(0,0,0,0),a.setHours(0,0,0,0),i.getTime()>a.getTime())throw new Error("\u5F00\u59CB\u65E5\u671F\u5E94\u65E9\u4E8E\u73B0\u5728");let s=new Date(r);for(s.setDate(s.getDate()+n);s<a;)s.setDate(s.getDate()+n);s.setHours(0,0,0,0);let u=s.getTime()-a.getTime();return Math.ceil(u/(1e3*3600*24))}else{if(!t)return;if(t=parseInt(t),isNaN(t)||t<=0||t>31)throw new Error("\u6708\u91CD\u7F6E\u65E5\u5E94\u4E3A 1-31 \u4E4B\u95F4\u7684\u6574\u6570");let i=new Date,a=i.getDate(),s=i.getMonth(),u=i.getFullYear(),c;return t>a?c=0:c=new Date(u,s+1,0).getDate(),c-a+t}}catch(t){R.error(`getRmainingDays failed: ${t.message??t}`)}}function Yu(e){try{let t=new Map;return e.split(";").map(r=>r.trim()).filter(Boolean).forEach(r=>{let n=r.indexOf("=");if(n===-1)return;let i=r.slice(0,n).trim(),a=r.slice(n+1).trim();if(!t.has(i))try{let s=decodeURIComponent(a);if(["upload","download","total","expire"].includes(i))try{s=Number(s).toFixed(0),["expire"].includes(i)&&s<=0&&(s="")}catch(u){R.error(`Failed to convert value for key "${i}=${a}": ${u.message??u}`)}t.set(i,s)}catch{t.set(i,a)}}),Array.from(t.entries()).map(([r,n])=>`${r}=${encodeURIComponent(n)}`).join("; ")}catch(t){return R.error(`normalizeFlowHeader failed: ${t.message??t}`),e}}function ct(e,t,r="name"){return e.find(n=>n[r]===t)}function iy(e,t,r="name"){return e.findIndex(n=>n[r]===t)}function gs(e,t,r="name"){let n=iy(e,t,r);e.splice(n,1)}function Os(e,t,r,n="name"){let i=iy(e,t,n);e[i]=r}function je(e,t,r){e.status(r||200).json({status:"success",data:t})}function Te(e,t,r){e.status(r||500).json({status:"failed",error:{code:t.code,type:t.type,message:t.message,details:e.req?.route?.path?.startsWith("/share/")?"\u8BE6\u60C5\u8BF7\u67E5\u770B\u65E5\u5FD7":t.details}})}var Qc=class{constructor(t,r,n){this.code=t,this.message=r,this.details=n}},pr=class extends Qc{constructor(t,r,n){super(t,r,n),this.type="InternalServerError"}},jt=class extends Qc{constructor(t,r,n){super(t,r,n),this.type="RequestInvalidError"}},br=class extends Qc{constructor(t,r,n){super(t,r,n),this.type="ResourceNotFoundError"}},el=class extends Qc{constructor(t,r,n){super(t,r,n),this.type="NetworkError"}};var Mp=Yr(l0());var om=Yr(Yy());function OP(e){let t=om.default.pemtohex(e);return om.default.KJUR.crypto.Util.hashHex(t,"sha256").match(/.{2}/g).join(":").toUpperCase()}var Wy={generateFingerprint:OP};var Kf=Yr(H_());function q_(e,t,...r){try{return e(t,...r)}catch{return e(V_(e(t.replace(/!<str>\s*/g,"__SubStoreJSYAMLString__"),...r)).replace(/__SubStoreJSYAMLString__/g,""),...r)}}function Vf(e,...t){return q_(Kf.default.safeLoad,JSON.parse(JSON.stringify(e)),...t)}function fN(e,...t){return q_(Kf.default.load,JSON.parse(JSON.stringify(e)),...t)}function M_(e,...t){return Kf.default.safeDump(JSON.parse(JSON.stringify(e)),...t)}function V_(e,...t){return Kf.default.dump(JSON.parse(JSON.stringify(e)),...t)}var da={safeLoad:Vf,load:fN,safeDump:M_,dump:V_,parse:Vf,stringify:M_};var ym=class{constructor(){this.expires=hN(),R.read(Ho)||R.write("{}",Ho);try{this.resourceCache=JSON.parse(R.read(Ho))}catch(t){R.error(`\u89E3\u6790\u6301\u4E45\u5316\u7F13\u5B58\u4E2D\u7684 ${Ho} \u5931\u8D25, \u91CD\u7F6E\u4E3A {}, \u9519\u8BEF: ${t?.message??t}`),this.resourceCache={},R.write("{}",Ho)}this._cleanup()}_cleanup(t,r){let n=!1;Object.entries(this.resourceCache).forEach(i=>{let[a,s]=i;s.time||(delete this.resourceCache[a],R.delete(`#${a}`),n=!0),(new Date().getTime()-s.time>(r??this.expires)||t&&a.startsWith(t))&&(delete this.resourceCache[a],n=!0)}),n&&this._persist()}revokeAll(){this.resourceCache={},this._persist()}_persist(){R.write(JSON.stringify(this.resourceCache),Ho)}get(t,r,n){let i=this.resourceCache[t]&&this.resourceCache[t].time;if(i){if(new Date().getTime()-i<=(r??this.expires))return this.resourceCache[t].data;n&&(delete this.resourceCache[t],this._persist())}return null}gettime(t){let r=this.resourceCache[t]&&this.resourceCache[t].time;return r&&new Date().getTime()-r<=this.expires?this.resourceCache[t].time:null}set(t,r){this.resourceCache[t]={time:new Date().getTime(),data:r},this._persist()}};function hN(){R.read(Gd)||R.write("1728e5",Gd);let e=1728e5;if(R.env.isLoon){let t={"1\u5206\u949F":6e4,"5\u5206\u949F":3e5,"10\u5206\u949F":6e5,"30\u5206\u949F":18e5,"1\u5C0F\u65F6":36e5,"2\u5C0F\u65F6":72e5,"3\u5C0F\u65F6":108e5,"6\u5C0F\u65F6":216e5,"12\u5C0F\u65F6":432e5,"24\u5C0F\u65F6":864e5,"48\u5C0F\u65F6":1728e5,"72\u5C0F\u65F6":2592e5,\u53C2\u6570\u4F20\u5165:"readcachets"},r=R.read("#\u8282\u70B9\u7F13\u5B58\u6709\u6548\u671F");return r in t&&(e=t[r],e==="readcachets"&&(e=r)),e}else return e=R.read(Gd),e}var zf=new ym;function T0(e,t){return[...Array(e).keys()].map(()=>t)}var bm={"\u{1F3F3}\uFE0F\u200D\u{1F308}":["EXP","BAND"],"\u{1F1F8}\u{1F1F1}":["TEST","SOS"],"\u{1F1E6}\u{1F1E9}":["AD","AND"],"\u{1F1E6}\u{1F1EA}":["AE","ARE"],"\u{1F1E6}\u{1F1EB}":["AF","AFG"],"\u{1F1E6}\u{1F1F1}":["AL","ALB"],"\u{1F1E6}\u{1F1F2}":["AM","ARM"],"\u{1F1E6}\u{1F1F7}":["AR","ARG"],"\u{1F1E6}\u{1F1F9}":["AT","AUT"],"\u{1F1E6}\u{1F1FA}":["AU","AUS"],"\u{1F1E6}\u{1F1FF}":["AZ","AZE"],"\u{1F1E7}\u{1F1E6}":["BA","BIH"],"\u{1F1E7}\u{1F1E9}":["BD","BGD"],"\u{1F1E7}\u{1F1EA}":["BE","BEL"],"\u{1F1E7}\u{1F1EC}":["BG","BGR"],"\u{1F1E7}\u{1F1ED}":["BH","BHR"],"\u{1F1E7}\u{1F1F4}":["BO","BOL"],"\u{1F1E7}\u{1F1F3}":["BN","BRN"],"\u{1F1E7}\u{1F1F7}":["BR","BRA"],"\u{1F1E7}\u{1F1F9}":["BT","BTN"],"\u{1F1E7}\u{1F1FE}":["BY","BLR"],"\u{1F1E8}\u{1F1E6}":["CA","CAN"],"\u{1F1E8}\u{1F1ED}":["CH","CHE"],"\u{1F1E8}\u{1F1F1}":["CL","CHL"],"\u{1F1E8}\u{1F1F4}":["CO","COL"],"\u{1F1E8}\u{1F1F7}":["CR","CRI"],"\u{1F1E8}\u{1F1FE}":["CY","CYP"],"\u{1F1E8}\u{1F1FF}":["CZ","CZE"],"\u{1F1E9}\u{1F1EA}":["DE","DEU"],"\u{1F1E9}\u{1F1F0}":["DK","DNK"],"\u{1F1E9}\u{1F1FF}":["DZ","DZA"],"\u{1F1EA}\u{1F1E8}":["EC","ECU"],"\u{1F1EA}\u{1F1EA}":["EE","EST"],"\u{1F1EA}\u{1F1EC}":["EG","EGY"],"\u{1F1EA}\u{1F1F8}":["ES","ESP"],"\u{1F1EA}\u{1F1FA}":["EU"],"\u{1F1EB}\u{1F1EE}":["FI","FIN"],"\u{1F1EB}\u{1F1F7}":["FR","FRA"],"\u{1F1EC}\u{1F1E7}":["GB","GBR","UK"],"\u{1F1EC}\u{1F1EA}":["GE","GEO"],"\u{1F1EC}\u{1F1F7}":["GR","GRC"],"\u{1F1EC}\u{1F1F9}":["GT","GTM"],"\u{1F1EC}\u{1F1FA}":["GU","GUM"],"\u{1F1ED}\u{1F1F0}":["HK","HKG","HKT","HKBN","HGC","WTT","CMI"],"\u{1F1ED}\u{1F1F7}":["HR","HRV"],"\u{1F1ED}\u{1F1FA}":["HU","HUN"],"\u{1F1EE}\u{1F1F6}":["IQ","IRQ"],"\u{1F1EF}\u{1F1F4}":["JO","JOR"],"\u{1F1EF}\u{1F1F5}":["JP","JPN","TYO"],"\u{1F1F0}\u{1F1EA}":["KE","KEN"],"\u{1F1F0}\u{1F1EC}":["KG","KGZ"],"\u{1F1F0}\u{1F1ED}":["KH","KGZ"],"\u{1F1F0}\u{1F1F5}":["KP","PRK"],"\u{1F1F0}\u{1F1F7}":["KR","KOR","SEL"],"\u{1F1F0}\u{1F1FF}":["KZ","KAZ"],"\u{1F1EE}\u{1F1E9}":["ID","IDN"],"\u{1F1EE}\u{1F1EA}":["IE","IRL"],"\u{1F1EE}\u{1F1F1}":["IL","ISR"],"\u{1F1EE}\u{1F1F2}":["IM","IMN"],"\u{1F1EE}\u{1F1F3}":["IN","IND"],"\u{1F1EE}\u{1F1F7}":["IR","IRN"],"\u{1F1EE}\u{1F1F8}":["IS","ISL"],"\u{1F1EE}\u{1F1F9}":["IT","ITA"],"\u{1F1F1}\u{1F1E6}":["LA","LAO"],"\u{1F1F1}\u{1F1F0}":["LK","LKA"],"\u{1F1F1}\u{1F1F9}":["LT","LTU"],"\u{1F1F1}\u{1F1FA}":["LU","LUX"],"\u{1F1F1}\u{1F1FB}":["LV","LVA"],"\u{1F1F2}\u{1F1E6}":["MA","MAR"],"\u{1F1F2}\u{1F1E9}":["MD","MDA"],"\u{1F1F3}\u{1F1EC}":["NG","NGA"],"\u{1F1F2}\u{1F1F2}":["MM","MMR"],"\u{1F1F2}\u{1F1F0}":["MK","MKD"],"\u{1F1F2}\u{1F1F3}":["MN","MNG"],"\u{1F1F2}\u{1F1F4}":["MO","MAC","CTM"],"\u{1F1F2}\u{1F1F9}":["MT","MLT"],"\u{1F1F2}\u{1F1FD}":["MX","MEX"],"\u{1F1F2}\u{1F1FE}":["MY","MYS"],"\u{1F1F3}\u{1F1F1}":["NL","NLD","AMS"],"\u{1F1F3}\u{1F1F4}":["NO","NOR"],"\u{1F1F3}\u{1F1F5}":["NP","NPL"],"\u{1F1F3}\u{1F1FF}":["NZ","NZL"],"\u{1F1F5}\u{1F1E6}":["PA","PAN"],"\u{1F1F5}\u{1F1EA}":["PE","PER"],"\u{1F1F5}\u{1F1ED}":["PH","PHL"],"\u{1F1F5}\u{1F1F0}":["PK","PAK"],"\u{1F1F5}\u{1F1F1}":["PL","POL"],"\u{1F1F5}\u{1F1F7}":["PR","PRI"],"\u{1F1F5}\u{1F1F9}":["PT","PRT"],"\u{1F1F5}\u{1F1FE}":["PY","PRY"],"\u{1F1F5}\u{1F1EC}":["PG","PNG"],"\u{1F1F7}\u{1F1F4}":["RO","ROU"],"\u{1F1F7}\u{1F1F8}":["RS","SRB"],"\u{1F1F7}\u{1F1EA}":["RE","REU"],"\u{1F1F7}\u{1F1FA}":["RU","RUS"],"\u{1F1F8}\u{1F1E6}":["SA","SAU"],"\u{1F1F8}\u{1F1EA}":["SE","SWE"],"\u{1F1F8}\u{1F1EC}":["SG","SGP"],"\u{1F1F8}\u{1F1EE}":["SI","SVN"],"\u{1F1F8}\u{1F1F0}":["SK","SVK"],"\u{1F1F9}\u{1F1EC}":["TG","TGO"],"\u{1F1F9}\u{1F1ED}":["TH","THA"],"\u{1F1F9}\u{1F1F3}":["TN","TUN"],"\u{1F1F9}\u{1F1F7}":["TR","TUR"],"\u{1F1F9}\u{1F1FC}":["TW","TWN","CHT","HINET","ROC"],"\u{1F1FA}\u{1F1E6}":["UA","UKR"],"\u{1F1FA}\u{1F1F8}":["US","USA","LAX","SFO","SJC"],"\u{1F1FA}\u{1F1FE}":["UY","URY"],"\u{1F1FB}\u{1F1E6}":["VA","VAT"],"\u{1F1FB}\u{1F1EA}":["VE","VEN"],"\u{1F1FB}\u{1F1F3}":["VN","VNM"],"\u{1F1FF}\u{1F1E6}":["ZA","ZAF","JNB"],"\u{1F1E8}\u{1F1F3}":["CN","CHN","BACK"]};function El(e){let t={"\u{1F3F3}\uFE0F\u200D\u{1F308}":["\u6D41\u91CF","\u65F6\u95F4","\u8FC7\u671F","Bandwidth","Expire"],"\u{1F1F8}\u{1F1F1}":["\u5E94\u6025","\u6D4B\u8BD5\u8282\u70B9"],"\u{1F1E6}\u{1F1E9}":["Andorra","\u5B89\u9053\u5C14"],"\u{1F1E6}\u{1F1EA}":["United Arab Emirates","\u963F\u8054\u914B","\u8FEA\u62DC","Dubai"],"\u{1F1E6}\u{1F1EB}":["Afghanistan","\u963F\u5BCC\u6C57"],"\u{1F1E6}\u{1F1F1}":["Albania","\u963F\u5C14\u5DF4\u5C3C\u4E9A","\u963F\u723E\u5DF4\u5C3C\u4E9E"],"\u{1F1E6}\u{1F1F2}":["Armenia","\u4E9A\u7F8E\u5C3C\u4E9A"],"\u{1F1E6}\u{1F1F7}":["Argentina","\u963F\u6839\u5EF7"],"\u{1F1E6}\u{1F1F9}":["Austria","\u5965\u5730\u5229","\u5967\u5730\u5229","\u7EF4\u4E5F\u7EB3"],"\u{1F1E6}\u{1F1FA}":["Australia","\u6FB3\u5927\u5229\u4E9A","\u6FB3\u6D32","\u58A8\u5C14\u672C","\u6089\u5C3C","\u571F\u6FB3","\u4EAC\u6FB3","\u5EE3\u6FB3","\u6EEC\u6FB3","\u6CAA\u6FB3","\u5E7F\u6FB3","Sydney"],"\u{1F1E6}\u{1F1FF}":["Azerbaijan","\u963F\u585E\u62DC\u7586"],"\u{1F1E7}\u{1F1E6}":["Bosnia and Herzegovina","\u6CE2\u9ED1\u5171\u548C\u56FD","\u6CE2\u9ED1"],"\u{1F1E7}\u{1F1E9}":["Bangladesh","\u5B5F\u52A0\u62C9\u56FD","\u5B5F\u52A0\u62C9"],"\u{1F1E7}\u{1F1EA}":["Belgium","\u6BD4\u5229\u65F6","\u6BD4\u5229\u6642"],"\u{1F1E7}\u{1F1EC}":["Bulgaria","\u4FDD\u52A0\u5229\u4E9A","\u4FDD\u52A0\u5229\u4E9E"],"\u{1F1E7}\u{1F1ED}":["Bahrain","\u5DF4\u6797"],"\u{1F1E7}\u{1F1F7}":["Brazil","\u5DF4\u897F","\u5723\u4FDD\u7F57"],"\u{1F1E7}\u{1F1F3}":["Brunei","\u6587\u83B1","\u6C76\u840A"],"\u{1F1E7}\u{1F1FE}":["Belarus","\u767D\u4FC4\u7F57\u65AF","\u767D\u4FC4"],"\u{1F1E7}\u{1F1F4}":["Bolivia","\u73BB\u5229\u7EF4\u4E9A"],"\u{1F1E7}\u{1F1F9}":["Bhutan","\u4E0D\u4E39","\u4E0D\u4E39\u738B\u56FD"],"\u{1F1E8}\u{1F1E6}":["Canada","\u52A0\u62FF\u5927","\u8499\u7279\u5229\u5C14","\u6E29\u54E5\u534E","\u6953\u8449","\u67AB\u53F6","\u6ED1\u94C1\u5362","\u591A\u4F26\u591A","Waterloo","Toronto"],"\u{1F1E8}\u{1F1ED}":["Switzerland","\u745E\u58EB","\u82CF\u9ECE\u4E16","Zurich"],"\u{1F1E8}\u{1F1F1}":["Chile","\u667A\u5229"],"\u{1F1E8}\u{1F1F4}":["Colombia","\u54E5\u4F26\u6BD4\u4E9A"],"\u{1F1E8}\u{1F1F7}":["Costa Rica","\u54E5\u65AF\u8FBE\u9ECE\u52A0"],"\u{1F1E8}\u{1F1FE}":["Cyprus","\u585E\u6D66\u8DEF\u65AF"],"\u{1F1E8}\u{1F1FF}":["Czechia","\u6377\u514B","Czech","Czech Republic"],"\u{1F1E9}\u{1F1EA}":["German","\u5FB7\u56FD","\u5FB7\u570B","\u4EAC\u5FB7","\u6EEC\u5FB7","\u5EE3\u5FB7","\u6CAA\u5FB7","\u5E7F\u5FB7","\u6CD5\u5170\u514B\u798F","Frankfurt","\u5FB7\u610F\u5FD7"],"\u{1F1E9}\u{1F1F0}":["Denmark","\u4E39\u9EA6","\u4E39\u9EA5"],"\u{1F1E9}\u{1F1FF}":["Algeria","\u963F\u5C14\u53CA\u5229\u4E9A","\u963F\u723E\u53CA\u5229\u4E9E"],"\u{1F1EA}\u{1F1E8}":["Ecuador","\u5384\u74DC\u591A\u5C14"],"\u{1F1EA}\u{1F1EA}":["Estonia","\u7231\u6C99\u5C3C\u4E9A"],"\u{1F1EA}\u{1F1EC}":["Egypt","\u57C3\u53CA"],"\u{1F1EA}\u{1F1F8}":["Spain","\u897F\u73ED\u7259"],"\u{1F1EA}\u{1F1FA}":["European Union","\u6B27\u76DF","\u6B27\u7F57\u5DF4"],"\u{1F1EB}\u{1F1EE}":["Finland","\u82AC\u5170","\u82AC\u862D","\u8D6B\u5C14\u8F9B\u57FA"],"\u{1F1EB}\u{1F1F7}":["France","\u6CD5\u56FD","\u6CD5\u570B","\u5DF4\u9ECE"],"\u{1F1EC}\u{1F1E7}":["Great Britain","\u82F1\u56FD","England","United Kingdom","\u4F26\u6566","\u82F1","London"],"\u{1F1EC}\u{1F1EA}":["Georgia","\u683C\u9C81\u5409\u4E9A","\u683C\u9B6F\u5409\u4E9E"],"\u{1F1EC}\u{1F1F7}":["Greece","\u5E0C\u814A","\u5E0C\u81D8"],"\u{1F1EC}\u{1F1FA}":["Guam","\u5173\u5C9B","\u95DC\u5CF6"],"\u{1F1EC}\u{1F1F9}":["Guatemala","\u5371\u5730\u9A6C\u62C9"],"\u{1F1ED}\u{1F1F0}":["Hongkong","\u9999\u6E2F","Hong Kong","HongKong","HONG KONG","\u6DF1\u6E2F","\u6CAA\u6E2F","\u547C\u6E2F","\u7A57\u6E2F","\u4EAC\u6E2F","\u6E2F"],"\u{1F1ED}\u{1F1F7}":["Croatia","\u514B\u7F57\u5730\u4E9A","\u514B\u7F85\u5730\u4E9E"],"\u{1F1ED}\u{1F1FA}":["Hungary","\u5308\u7259\u5229"],"\u{1F1EE}\u{1F1F6}":["Iraq","\u4F0A\u62C9\u514B","\u5DF4\u683C\u8FBE","Baghdad"],"\u{1F1EF}\u{1F1F4}":["Jordan","\u7EA6\u65E6"],"\u{1F1EF}\u{1F1F5}":["Japan","\u65E5\u672C","\u4E1C\u4EAC","\u5927\u962A","\u57FC\u7389","\u6CAA\u65E5","\u7A57\u65E5","\u5DDD\u65E5","\u4E2D\u65E5","\u6CC9\u65E5","\u676D\u65E5","\u6DF1\u65E5","\u8FBD\u65E5","\u5E7F\u65E5","\u5927\u5742","Osaka","Tokyo"],"\u{1F1F0}\u{1F1EA}":["Kenya","\u80AF\u5C3C\u4E9A"],"\u{1F1F0}\u{1F1EC}":["Kyrgyzstan","\u5409\u5C14\u5409\u65AF\u65AF\u5766"],"\u{1F1F0}\u{1F1ED}":["Cambodia","\u67EC\u57D4\u5BE8"],"\u{1F1F0}\u{1F1F5}":["North Korea","\u671D\u9C9C"],"\u{1F1F0}\u{1F1F7}":["Korea","\u97E9\u56FD","\u97D3\u570B","\u97E9","\u97D3","\u9996\u5C14","\u6625\u5DDD","Chuncheon","Seoul"],"\u{1F1F0}\u{1F1FF}":["Kazakhstan","\u54C8\u8428\u514B\u65AF\u5766","\u54C8\u8428\u514B"],"\u{1F1EE}\u{1F1E9}":["Indonesia","\u5370\u5C3C","\u5370\u5EA6\u5C3C\u897F\u4E9A","\u96C5\u52A0\u8FBE"],"\u{1F1EE}\u{1F1EA}":["Ireland","\u7231\u5C14\u5170","\u611B\u723E\u862D","\u90FD\u67CF\u6797"],"\u{1F1EE}\u{1F1F1}":["Israel","\u4EE5\u8272\u5217"],"\u{1F1EE}\u{1F1F2}":["Isle of Man","\u9A6C\u6069\u5C9B","\u99AC\u6069\u5CF6"],"\u{1F1EE}\u{1F1F3}":["India","\u5370\u5EA6","\u5B5F\u4E70","MFumbai","Mumbai"],"\u{1F1EE}\u{1F1F7}":["Iran","\u4F0A\u6717"],"\u{1F1EE}\u{1F1F8}":["Iceland","\u51B0\u5C9B","\u51B0\u5CF6"],"\u{1F1EE}\u{1F1F9}":["Italy","\u610F\u5927\u5229","\u7FA9\u5927\u5229","\u7C73\u5170","Nachash"],"\u{1F1F1}\u{1F1F0}":["Sri Lanka","\u65AF\u91CC\u5170\u5361","\u65AF\u91CC\u862D\u5361"],"\u{1F1F1}\u{1F1E6}":["Laos","\u8001\u631D","\u8001\u64BE"],"\u{1F1F1}\u{1F1F9}":["Lithuania","\u7ACB\u9676\u5B9B"],"\u{1F1F1}\u{1F1FA}":["Luxembourg","\u5362\u68EE\u5821"],"\u{1F1F1}\u{1F1FB}":["Latvia","\u62C9\u8131\u7EF4\u4E9A","Latvija"],"\u{1F1F2}\u{1F1E6}":["Morocco","\u6469\u6D1B\u54E5"],"\u{1F1F2}\u{1F1E9}":["Moldova","\u6469\u5C14\u591A\u74E6","\u6469\u723E\u591A\u74E6"],"\u{1F1F2}\u{1F1F2}":["Myanmar","\u7F05\u7538","\u7DEC\u7538"],"\u{1F1F3}\u{1F1EC}":["Nigeria","\u5C3C\u65E5\u5229\u4E9A","\u5C3C\u65E5\u5229\u4E9E"],"\u{1F1F2}\u{1F1F0}":["Macedonia","\u9A6C\u5176\u987F","\u99AC\u5176\u9813"],"\u{1F1F2}\u{1F1F3}":["Mongolia","\u8499\u53E4"],"\u{1F1F2}\u{1F1F4}":["Macao","\u6FB3\u95E8","\u6FB3\u9580","CTM"],"\u{1F1F2}\u{1F1F9}":["Malta","\u9A6C\u8033\u4ED6"],"\u{1F1F2}\u{1F1FD}":["Mexico","\u58A8\u897F\u54E5"],"\u{1F1F2}\u{1F1FE}":["Malaysia","\u9A6C\u6765","\u99AC\u4F86","\u5409\u9686\u5761","\u5927\u99AC"],"\u{1F1F3}\u{1F1F1}":["Netherlands","\u8377\u5170","\u8377\u862D","\u5C3C\u5FB7\u862D","\u963F\u59C6\u65AF\u7279\u4E39","Amsterdam"],"\u{1F1F3}\u{1F1F4}":["Norway","\u632A\u5A01"],"\u{1F1F3}\u{1F1F5}":["Nepal","\u5C3C\u6CCA\u5C14"],"\u{1F1F3}\u{1F1FF}":["New Zealand","\u65B0\u897F\u5170","\u65B0\u897F\u862D"],"\u{1F1F5}\u{1F1E6}":["Panama","\u5DF4\u62FF\u9A6C"],"\u{1F1F5}\u{1F1EA}":["Peru","\u79D8\u9C81","\u7955\u9B6F"],"\u{1F1F5}\u{1F1ED}":["Philippines","\u83F2\u5F8B\u5BBE","\u83F2\u5F8B\u8CD3"],"\u{1F1F5}\u{1F1F0}":["Pakistan","\u5DF4\u57FA\u65AF\u5766"],"\u{1F1F5}\u{1F1F1}":["Poland","\u6CE2\u5170","\u6CE2\u862D","\u534E\u6C99","Warsaw"],"\u{1F1F5}\u{1F1F7}":["Puerto Rico","\u6CE2\u591A\u9ECE\u5404"],"\u{1F1F5}\u{1F1F9}":["Portugal","\u8461\u8404\u7259"],"\u{1F1F5}\u{1F1EC}":["Papua New Guinea","\u5DF4\u5E03\u4E9A\u65B0\u51E0\u5185\u4E9A"],"\u{1F1F5}\u{1F1FE}":["Paraguay","\u5DF4\u62C9\u572D"],"\u{1F1F7}\u{1F1F4}":["Romania","\u7F57\u9A6C\u5C3C\u4E9A"],"\u{1F1F7}\u{1F1F8}":["Serbia","\u585E\u5C14\u7EF4\u4E9A"],"\u{1F1F7}\u{1F1EA}":["R\xE9union","\u7559\u5C3C\u6C6A","\u6CD5\u5C5E\u7559\u5C3C\u6C6A"],"\u{1F1F7}\u{1F1FA}":["Russia","\u4FC4\u7F57\u65AF","\u4FC4\u56FD","\u4FC4\u7F85\u65AF","\u4F2F\u529B","\u83AB\u65AF\u79D1","\u5723\u5F7C\u5F97\u5821","\u897F\u4F2F\u5229\u4E9A","\u4EAC\u4FC4","\u676D\u4FC4","\u5EE3\u4FC4","\u6EEC\u4FC4","\u5E7F\u4FC4","\u6CAA\u4FC4","Moscow"],"\u{1F1F8}\u{1F1E6}":["Saudi","\u6C99\u7279\u963F\u62C9\u4F2F","\u6C99\u7279","Riyadh","\u5229\u96C5\u5F97"],"\u{1F1F8}\u{1F1EA}":["Sweden","\u745E\u5178","\u65AF\u5FB7\u54E5\u5C14\u6469","Stockholm"],"\u{1F1F8}\u{1F1EC}":["Singapore","\u65B0\u52A0\u5761","\u72EE\u57CE","\u6CAA\u65B0","\u4EAC\u65B0","\u4E2D\u65B0","\u6CC9\u65B0","\u7A57\u65B0","\u6DF1\u65B0","\u676D\u65B0","\u5E7F\u65B0","\u5EE3\u65B0","\u6EEC\u65B0"],"\u{1F1F8}\u{1F1EE}":["Slovenia","\u65AF\u6D1B\u6587\u5C3C\u4E9A"],"\u{1F1F8}\u{1F1F0}":["Slovakia","\u65AF\u6D1B\u4F10\u514B"],"\u{1F1F9}\u{1F1EC}":["Togo","\u591A\u54E5","\u6D1B\u7F8E","Lom\xE9","Lome"],"\u{1F1F9}\u{1F1ED}":["Thailand","\u6CF0\u56FD","\u6CF0\u570B","\u66FC\u8C37"],"\u{1F1F9}\u{1F1F3}":["Tunisia","\u7A81\u5C3C\u65AF"],"\u{1F1F9}\u{1F1F7}":["Turkey","\u571F\u8033\u5176","\u4F0A\u65AF\u5766\u5E03\u5C14","Istanbul"],"\u{1F1F9}\u{1F1FC}":["Taiwan","\u53F0\u6E7E","\u81FA\u7063","\u53F0\u7063","\u4E2D\u83EF\u6C11\u570B","\u4E2D\u534E\u6C11\u56FD","\u53F0\u5317","\u53F0\u4E2D","\u65B0\u5317","\u5F70\u5316","\u53F0","\u81FA","Taipei","Tai Wan"],"\u{1F1FA}\u{1F1E6}":["Ukraine","\u4E4C\u514B\u5170","\u70CF\u514B\u862D"],"\u{1F1FA}\u{1F1F8}":["United States","\u7F8E\u56FD","America","\u7F8E","\u4EAC\u7F8E","\u6CE2\u7279\u5170","\u8FBE\u62C9\u65AF","\u4FC4\u52D2\u5188","Oregon","\u51E4\u51F0\u57CE","\u8D39\u5229\u8499","\u7845\u8C37","\u77FD\u8C37","\u62C9\u65AF\u7EF4\u52A0\u65AF","\u6D1B\u6749\u77F6","\u5723\u4F55\u585E","\u5723\u514B\u62C9\u62C9","\u897F\u96C5\u56FE","\u829D\u52A0\u54E5","\u6CAA\u7F8E","\u54E5\u4F26\u5E03","\u7EBD\u7EA6","New York","Los Angeles","San Jose","Sillicon Valley","Michigan","\u4FC4\u4EA5\u4FC4","Ohio","\u9A6C\u7EB3\u8428\u65AF","Manassas","\u5F17\u5409\u5C3C\u4E9A","Virginia"],"\u{1F1FA}\u{1F1FE}":["Uruguay","\u4E4C\u62C9\u572D"],"\u{1F1FB}\u{1F1E6}":["Vatican","Vatican City","Holy See","\u68B5\u8482\u5188","\u68B5\u8482\u5CA1"],"\u{1F1FB}\u{1F1EA}":["Venezuela","\u59D4\u5185\u745E\u62C9"],"\u{1F1FB}\u{1F1F3}":["Vietnam","\u8D8A\u5357","\u80E1\u5FD7\u660E"],"\u{1F1FF}\u{1F1E6}":["South Africa","\u5357\u975E"],"\u{1F1E8}\u{1F1F3}":["China","\u4E2D\u56FD","\u4E2D\u570B","\u56DE\u56FD","\u56DE\u570B","\u56FD\u5185","\u570B\u5167","\u534E\u4E1C","\u534E\u897F","\u534E\u5357","\u534E\u5317","\u534E\u4E2D","\u6C5F\u82CF","\u5317\u4EAC","\u4E0A\u6D77","\u5E7F\u5DDE","\u6DF1\u5733","\u676D\u5DDE","\u5F90\u5DDE","\u9752\u5C9B","\u5B81\u6CE2","\u9547\u6C5F"]},r=e.match(/[\uD83C][\uDDE6-\uDDFF][\uD83C][\uDDE6-\uDDFF]/)?.[0]||"\u{1F3F4}\u200D\u2620\uFE0F";for(let n of Object.keys(t))if(t[n].some(a=>RegExp(`${a}`,"i").test(e)))return/内蒙古/.test(e)&&["\u{1F1F2}\u{1F1F3}"].includes(n)?r="\u{1F1E8}\u{1F1F3}":r=n;for(let n of Object.keys(bm))if(bm[n].some(a=>RegExp(`(^|[^a-zA-Z])${a}([^a-zA-Z]|$)`).test(e))&&!(n=="\u{1F1E8}\u{1F1F3}"&&RegExp("(^|[^a-zA-Z])CN2([^a-zA-Z]|$)").test(e)))return r=n;return r}function k0(e){return bm[El(e)]?.[0]}function Gf(e){return e.replace(/[\uD83C][\uDDE6-\uDDFF][\uD83C][\uDDE6-\uDDFF]|🏴‍☠️|🏳️‍🌈/g,"").trim()}var N0=class{constructor({country,asn}={}){if(R.env.isNode){let Reader=require("@maxmind/geoip2-node").Reader,fs=require('fs'),countryFile=country||eval("process.env.SUB_STORE_MMDB_COUNTRY_PATH"),asnFile=asn||eval("process.env.SUB_STORE_MMDB_ASN_PATH");if(countryFile&&(this.countryReader=Reader.openBuffer(fs.readFileSync(countryFile))),asnFile){if(!fs.existsSync(asnFile))throw new Error("GeoLite2 ASN MMDB does not exist");this.asnReader=Reader.openBuffer(fs.readFileSync(asnFile))}}}geoip(e){return this.countryReader?.country(e)?.country?.isoCode}ipaso(e){return this.asnReader?.asn(e)?.autonomousSystemOrganization}ipasn(e){return this.asnReader?.asn(e)?.autonomousSystemNumber}};var j0=Yr(tC()),xm=Yr(l0());async function yl({url:e,domain:t,type:r="A",timeout:n,edns:i}){let a=j0.default.encode({type:"query",id:0,flags:j0.default.RECURSION_DESIRED,questions:[{type:r,name:t}],additionals:[{type:"OPT",name:".",udpPayloadSize:4096,flags:0,options:[{code:"CLIENT_SUBNET",ip:i,sourcePrefixLength:Wr(i)?24:56,scopePrefixLength:0}]}]}),u=xm.Buffer.from(a).toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""),c=await R.http.get({url:`${e}?dns=${encodeURIComponent(u)}`,headers:{Accept:"application/dns-message"},"binary-mode":!0,encoding:null,timeout:n});return j0.default.decode(xm.Buffer.from(R.env.isQX?c.bodyBytes:c.body))}var Om=Yr(Sf());var{isNode:rC,isQX:AN,isLoon:yN,isSurge:bN,isStash:_N,isShadowRocket:CN,isLanceX:DN,isEgern:FN,isGUIforCores:SN}=hn(),ya="Node";rC&&(ya="Node");AN&&(ya="QX");yN&&(ya="Loon");bN&&(ya="Surge");_N&&(ya="Stash");CN&&(ya="ShadowRocket");FN&&(ya="Egern");DN&&(ya="LanceX");SN&&(ya="GUI.for.Cores");var ic={},IN={};try{if(typeof $environment<"u"&&(ic.env=$environment),typeof $loon<"u"&&(ic.loon=$loon),typeof $script<"u"&&(ic.script=$script),typeof $Plugin<"u"&&(ic.plugin=$Plugin),rC){ic.node={version:eval("process.version"),argv:eval("process.argv"),filename:eval("__filename"),dirname:eval("__dirname"),env:{}};let env=eval("process.env");for(let e in env)/^SUB_STORE_/.test(e)&&(ic.node.env[e]=env[e])}}catch(e){}var ba={backend:ya,version:jd,feature:IN,meta:ic};function BN(e){return e&&typeof e=="object"&&!Array.isArray(e)}function Wf(e){return e.startsWith("<")&&e.endsWith(">")?e.slice(1,-1):e}function iC(e,t){let r=typeof t=="string"?JSON.parse(t):t;for(let n in r)if(BN(r[n]))if(n.endsWith("!")){let i=Wf(n.slice(0,-1));e[i]=r[n]}else{let i=Wf(n);e[i]||Object.assign(e,{[i]:{}}),iC(e[i],r[i])}else if(Array.isArray(r[n]))if(n.startsWith("+")){let i=Wf(n.slice(1));e[i]||Object.assign(e,{[i]:[]}),e[i]=[...r[n],...e[i]]}else if(n.endsWith("+")){let i=Wf(n.slice(0,-1));e[i]||Object.assign(e,{[i]:[]}),e[i]=[...e[i],...r[n]]}else{let i=Wf(n);Object.assign(e,{[i]:r[n]})}else Object.assign(e,{[n]:r[n]});return e}function $N({rule:e}){return{name:"Conditional Filter",func:t=>t.map(r=>H0(e,r))}}function H0(e,t){if(!e.operator)switch(e.proposition){case"IN":return e.value.indexOf(t[e.attr])!==-1;case"CONTAINS":return typeof t[e.attr]!="string"?!1:t[e.attr].indexOf(e.value)!==-1;case"EQUALS":return t[e.attr]===e.value;case"EXISTS":return t[e.attr]!==null||typeof t[e.attr]<"u";default:throw new Error(`Unknown proposition: ${e.proposition}`)}switch(e.operator){case"AND":return e.child.every(r=>H0(r,t));case"OR":return e.child.some(r=>H0(r,t));case"NOT":return!H0(e.child,t);default:throw new Error(`Unknown operator: ${e.operator}`)}}function RN(e){return{name:"Quick Setting Operator",func:r=>{if(t(e.useless)){let i=oC().func(r);r=r.filter((a,s)=>i[s]&&a.port>0&&a.port<=65535)}return r.map(n=>(n.udp=t(e.udp,n.udp),n.tfo=t(e.tfo,n.tfo),n["fast-open"]=t(e.tfo,n["fast-open"]),n["skip-cert-verify"]=t(e.scert,n["skip-cert-verify"]),n.type==="vmess"&&(n.aead=t(e["vmess aead"],n.aead)),n))}};function t(r,n){switch(r){case"ENABLED":return!0;case"DISABLED":return!1;default:return n}}}function xN({mode:e,tw:t}){return{name:"Flag Operator",func:r=>r.map(n=>{if(e==="remove")n.name=Gf(n.name);else{let i=El(n.name);n.name=Gf(n.name),n.name=i+" "+n.name,t=="ws"?n.name=n.name.replace(/🇹🇼/g,"\u{1F1FC}\u{1F1F8}"):t=="tw"||(n.name=n.name.replace(/🇹🇼/g,"\u{1F1E8}\u{1F1F3}"))}return n})}}function PN(e){let{action:t,template:r,link:n,position:i}={action:"rename",template:"0 1 2 3 4 5 6 7 8 9",link:"-",position:"back",...e};return{name:"Handle Duplicate Operator",func:a=>{if(t==="delete"){let s={};return a.filter(u=>s[u.name]?!1:(s[u.name]=!0,!0))}else if(t==="rename"){let s=r.split(" "),u={},c=0;a.forEach(h=>{typeof u[h.name]>"u"?u[h.name]=1:u[h.name]++,c=Math.max(u[h.name].toString().length,c)});let f={};return a.map(h=>{if(u[h.name]>1){typeof f[h.name]>"u"&&(f[h.name]=1);let g="",p=f[h.name]++,d=0;for(;p>0;)g=s[p%10]+g,p=parseInt(p/10),d++;for(;d++<c;)g=s[0]+g;i==="front"?h.name=g+n+h.name:i==="back"&&(h.name=h.name+n+g)}return h})}}}}function ON(e="asc"){return{name:"Sort Operator",func:t=>{switch(e){case"asc":case"desc":return t.sort((r,n)=>{let i=r.name>n.name?1:-1;return i*=e==="desc"?-1:1,i});case"random":return KN(t);default:throw new Error("Unknown sort option: "+e)}}}}function TN(e){let t=e.order||"asc",r=e.expressions;return Array.isArray(e)&&(r=e),Array.isArray(r)||(r=[]),{name:"Regex Sort Operator",func:n=>(r=r.map(i=>Tm(i)),n.sort((i,a)=>{let s=nC(r,i.name),u=nC(r,a.name);return s&&!u?-1:u&&!s?1:s&&u?s<u?-1:1:t==="original"?0:t==="desc"?i.name<a.name?1:-1:i.name<a.name?-1:1}))}}function nC(e,t){let r=null;for(let n=0;n<e.length;n++)if(e[n].test(t)){r=n+1;break}return r}function sC(e){return{name:"Regex Rename Operator",func:t=>t.map(r=>{for(let{expr:n,now:i}of e)r.name=r.name.replace(Tm(n,"g"),i).trim();return r})}}function NN(e){let t=e.map(r=>({expr:r,now:""}));return{name:"Regex Delete Operator",func:sC(t).func}}function kN(e,t,r,n,i){return{name:"Script Operator",func:async a=>{let s=a;if(s?.$file?.type==="mihomoProfile")try{let u=da.safeLoad(e),c;if(s?.$content)try{c=da.safeLoad(s?.$content)}catch(f){R.error(f.message??f)}if(typeof u!="object")throw new Error("patch is not an object");return s.$content=Ot.yaml.safeDump(iC(c||(s?.$file?.sourceType==="none"?{}:{proxies:await vn({type:s?.$file?.sourceType||"collection",name:s?.$file?.sourceName,platform:"mihomo",produceType:"internal",produceOpts:{"delete-underscore-fields":!0}})}),u)),s}catch{}return await async function(){s=M0("operator",e,r,i)(a,t,{source:n,...ba})}(),s},nodeFunc:async a=>{let s=a;return await async function(){s=M0("operator",`async function operator(input = []) {
                        if (input && (input.$files || input.$content)) {
                            let { $content, $files, $options, $file } = input
                            if($file.type === 'mihomoProfile') {
                                ${e}
                                if(typeof main === 'function') {
                                    let config;
                                    if ($content) {
                                        try {
                                            config = ProxyUtils.yaml.safeLoad($content);
                                        } catch (e) {
                                            console.log(e.message ?? e);
                                        }
                                    }
                                    $content = ProxyUtils.yaml.safeDump(await main(config || ($file.sourceType === 'none' ? {} : {
                                        proxies: await produceArtifact({
                                            type: $file.sourceType || 'collection',
                                            name: $file.sourceName,
                                            platform: 'mihomo',
                                            produceType: 'internal',
                                            produceOpts: {
                                                'delete-underscore-fields': true
                                            }
                                        }),
                                    })))
                                }
                            } else {
                                ${e}
                            }
                            return { $content, $files, $options, $file }
                        } else {
                            let proxies = input
                            let list = []
                            for await (let $server of proxies) {
                                ${e}
                                list.push($server)
                            }
                            return list
                        }
                      }`,r,i)(a,t,{source:n,...ba})}(),s}}}function LN(e){let t,r;try{let n=e.split(":");r=parseInt(n[2],16);let i=parseInt(n[3],16),a=parseInt(n[4],16),s=i>>8,u=i&255,c=a>>8,f=a&255;if(t=`${s}.${u}.${c}.${f}`,r<=0||r>65535)throw new Error(`Invalid port number: ${r}`);if(!Wr(t))throw new Error(`Invalid IP address: ${t}`)}catch(n){R.error(`IP4P \u89E3\u6790\u5931\u8D25: ${n}`)}return{server:t,port:r}}var aC={Custom:async function(e,t,r,n,i,a){let s=Gi(`CUSTOM:${a}:${e}:${t}`),u=Xr.get(s);if(!r&&u)return u;let c=t==="IPv6"?"AAAA":"A",f=await yl({url:a,domain:e,type:c,timeout:n,edns:i}),{answers:h}=f;if(!Array.isArray(h)||h.length===0)throw new Error("No answers");let g=h.filter(p=>p?.type===c).map(p=>p?.data).filter(p=>p);if(g.length===0)throw new Error("No answers");return Xr.set(s,g),g},Google:async function(e,t,r,n,i){let a=Gi(`GOOGLE:${e}:${t}`),s=Xr.get(a);if(!r&&s)return s;let u=t==="IPv6"?"AAAA":"A",c=await yl({url:"https://8.8.4.4/dns-query",domain:e,type:u,timeout:n,edns:i}),{answers:f}=c;if(!Array.isArray(f)||f.length===0)throw new Error("No answers");let h=f.filter(g=>g?.type===u).map(g=>g?.data).filter(g=>g);if(h.length===0)throw new Error("No answers");return Xr.set(a,h),h},"IP-API":async function(e,t,r,n){if(["IPv6"].includes(t))throw new Error(`\u57DF\u540D\u89E3\u6790\u670D\u52A1\u63D0\u4F9B\u65B9 IP-API \u4E0D\u652F\u6301 ${t}`);let i=Gi(`IP-API:${e}`),a=Xr.get(i);if(!r&&a)return a;let s=await R.http.get({url:`http://ip-api.com/json/${encodeURIComponent(e)}?lang=zh-CN`,timeout:n}),u=JSON.parse(s.body);if(u.status!=="success")throw new Error(`Status is ${u.status}`);if(!u.query||u.query===0)throw new Error("No answers");let c=[u.query];if(c.length===0)throw new Error("No answers");return Xr.set(i,c),c},Cloudflare:async function(e,t,r,n,i){let a=Gi(`CLOUDFLARE:${e}:${t}`),s=Xr.get(a);if(!r&&s)return s;let u=t==="IPv6"?"AAAA":"A",c=await yl({url:"https://1.0.0.1/dns-query",domain:e,type:u,timeout:n,edns:i}),{answers:f}=c;if(!Array.isArray(f)||f.length===0)throw new Error("No answers");let h=f.filter(g=>g?.type===u).map(g=>g?.data).filter(g=>g);if(h.length===0)throw new Error("No answers");return Xr.set(a,h),h},Ali:async function(e,t,r,n,i){let a=Gi(`ALI:${e}:${t}`),s=Xr.get(a);if(!r&&s)return s;let u=await R.http.get({url:`http://223.6.6.6/resolve?edns_client_subnet=${i}/${Wr(i)?24:56}&name=${encodeURIComponent(e)}&type=${t==="IPv6"?"AAAA":"A"}&short=1`,headers:{accept:"application/dns-json"},timeout:n}),c=JSON.parse(u.body);if(!Array.isArray(c)||c.length===0)throw new Error("No answers");let f=c;if(f.length===0)throw new Error("No answers");return Xr.set(a,f),f},Tencent:async function(e,t,r,n,i){let a=Gi(`TENCENT:${e}:${t}`),s=Xr.get(a);if(!r&&s)return s;let c=(await R.http.get({url:`http://119.28.28.28/d?ip=${i}&type=${t==="IPv6"?"AAAA":"A"}&dn=${encodeURIComponent(e)}`,headers:{accept:"application/dns-json"},timeout:n})).body.split(";").map(h=>h.split(",")[0]);if(c.length===0||String(c)==="0")throw new Error("No answers");let f=c;if(f.length===0)throw new Error("No answers");return Xr.set(a,f),f}};function uC({provider:e,type:t,filter:r,cache:n,url:i,timeout:a,edns:s}){if(["IPv6","IP4P"].includes(t)&&["IP-API"].includes(e))throw new Error(`\u57DF\u540D\u89E3\u6790\u670D\u52A1\u63D0\u4F9B\u65B9 ${e} \u4E0D\u652F\u6301 ${t}`);let{defaultTimeout:u}=R.read(Kt),c=a||u||8e3,f=["IPv6","IP4P"].includes(t)?"IPv6":"IPv4",h=aC[e];if(!h)throw new Error(`\u627E\u4E0D\u5230\u57DF\u540D\u89E3\u6790\u670D\u52A1\u63D0\u4F9B\u65B9: ${e}`);let g=s||"223.6.6.6";if(!sc(g))throw new Error("\u57DF\u540D\u89E3\u6790 EDNS \u5E94\u4E3A IP");return R.info(`Domain Resolver: [${t}] ${e} ${g||""} ${i||""}`),{name:"Resolve Domain Operator",func:async p=>{p.forEach((m,y)=>{!m["_no-resolve"]&&m["no-resolve"]&&(p[y]["_no-resolve"]=m["no-resolve"])});let d={},w=15,v=[...new Set(p.filter(m=>!sc(m.server)&&!m["_no-resolve"]).map(m=>m.server))],b=Math.ceil(v.length/w);for(let m=0;m<b;m++){let y=[];for(let D of v.splice(0,w))y.push(h(D,f,n==="disabled",c,g,i).then(C=>{d[D]=C,R.info(`Successfully resolved domain: ${D} \u279F ${C}`)}).catch(C=>{R.error(`Failed to resolve domain: ${D} with resolver [${e}]: ${C}`)}));await Promise.all(y)}return p.forEach(m=>{if(!m["_no-resolve"])if(d[m.server]){m._resolved_ips=d[m.server];let y=Array.isArray(d[m.server])?d[m.server][Math.floor(Math.random()*d[m.server].length)]:d[m.server];if(f==="IPv6"&&Mr(y)){try{y=new n0.Address6(y).correctForm()}catch(D){R.error(`Failed to parse IPv6 address: ${y}: ${D}`)}if(/^2001::[^:]+:[^:]+:[^:]+$/.test(y)){m._IP4P=y;let{server:D,port:C}=LN(y);D&&C?(m._domain=m.server,m.server=D,m.port=C,m.resolved=!0,m._IPv4=m.server,sc(m._IP)||(m._IP=m.server)):m.resolved||(m.resolved=!1)}else m._domain=m.server,m.server=y,m.resolved=!0,m[`_${f}`]=m.server,sc(m._IP)||(m._IP=m.server)}else m._domain=m.server,m.server=y,m.resolved=!0,m[`_${f}`]=m.server,sc(m._IP)||(m._IP=m.server)}else m.resolved||(m.resolved=!1)}),p.filter(m=>r==="removeFailed"?sc(m.server)||m["_no-resolve"]||m.resolved:r==="IPOnly"?sc(m.server):r==="IPv4Only"?Wr(m.server):r==="IPv6Only"?Mr(m.server):!0)}}}function sc(e){return Wr(e)||Mr(e)}uC.resolver=aC;function Pm(e){var t=/^[\x00-\x7F]+$/;return t.test(e)}function oC(){return{name:"Useless Filter",func:e=>e.map(t=>{if(t.cipher&&!Pm(t.cipher))return!1;if(t.password&&!Pm(t.password))return!1;if(t.network){let r=t[`${t.network}-opts`]?.headers?.Host||t[`${t.network}-opts`]?.headers?.host;if(r=Array.isArray(r)?r:[r],r.some(n=>n&&!Pm(n)))return!1}return!/网址|流量|时间|应急|过期|Bandwidth|expire/.test(t.name)})}}function UN(e){let t=e?.value||e;Array.isArray(t)||(t=[]);let r=e?.keep??!0,n={HK:"\u{1F1ED}\u{1F1F0}",TW:"\u{1F1F9}\u{1F1FC}",US:"\u{1F1FA}\u{1F1F8}",SG:"\u{1F1F8}\u{1F1EC}",JP:"\u{1F1EF}\u{1F1F5}",UK:"\u{1F1EC}\u{1F1E7}",DE:"\u{1F1E9}\u{1F1EA}",KR:"\u{1F1F0}\u{1F1F7}"};return{name:"Region Filter",func:i=>i.map(a=>{let s=El(a.name),u=t.some(c=>n[c]===s);return r?u:!u})}}function jN({regex:e=[],keep:t=!0}){return{name:"Regex Filter",func:r=>r.map(n=>{let i=e.some(a=>Tm(a).test(n.name));return t?i:!i})}}function Tm(e,...t){return t=t.join(""),e.startsWith("(?i)")?(e=e.substring(4),new RegExp(e,"i"+t)):new RegExp(e,t)}function HN(e){let t=e?.value||e;Array.isArray(t)||(t=[]);let r=e?.keep??!0;return{name:"Type Filter",func:n=>n.map(i=>{let a=t.some(s=>i.type===s);return r?a:!a})}}function MN(e,t,r,n,i){return{name:"Script Filter",func:async a=>{let s=T0(a.length,!0);return await async function(){s=M0("filter",e,r,i)(a,t,{source:n,...ba})}(),s},nodeFunc:async a=>{let s=T0(a.length,!0);return await async function(){s=M0("filter",`async function filter(input = []) {
                        let proxies = input
                        let list = []
                        const fn = async ($server) => {
                            ${e}
                        }
                        for await (let $server of proxies) {
                            list.push(await fn($server))
                        }
                        return list
                      }`,r,i)(a,t,{source:n,...ba})}(),s}}}var q0={"Useless Filter":oC,"Region Filter":UN,"Regex Filter":jN,"Type Filter":HN,"Script Filter":MN,"Conditional Filter":$N,"Quick Setting Operator":RN,"Flag Operator":xN,"Sort Operator":ON,"Regex Sort Operator":TN,"Regex Rename Operator":sC,"Regex Delete Operator":NN,"Script Operator":kN,"Handle Duplicate Operator":PN,"Resolve Domain Operator":uC};async function qN(e,t){let r=T0(t.length,!0);try{r=await e.func(t)}catch(n){let i="",a=`${n.message??n}`;a.includes("$server is not defined")?i="":(R.error(`Cannot apply filter ${e.name}(function filter)! Reason: ${n}`),i=`\u6267\u884C function filter \u5931\u8D25 ${a}; `);try{r=await e.nodeFunc(t)}catch(s){R.error(`Cannot apply filter ${e.name}(shortcut script)! Reason: ${s}`);let u="",c=`${s.message??s}`;throw i&&c===a?(u="",i=`\u6267\u884C\u5931\u8D25 ${a}`):u=`\u6267\u884C\u5FEB\u6377\u8FC7\u6EE4\u811A\u672C \u5931\u8D25 ${c}`,new Error(`\u811A\u672C\u8FC7\u6EE4 ${i}${u}`)}}return t.filter((n,i)=>r[i])}async function VN(e,t){let r=zN(t);try{let n=await e.func(r);n&&(r=n)}catch(n){let i="",a=`${n.message??n}`;a.includes("$server is not defined")||a.includes("$content is not defined")||a.includes("$files is not defined")||r?.$files||r?.$content?i="":(R.error(`Cannot apply operator ${e.name}(function operator)! Reason: ${n}`),i=`\u6267\u884C function operator \u5931\u8D25 ${a}; `);try{let s=await e.nodeFunc(r);s&&(r=s)}catch(s){R.error(`Cannot apply operator ${e.name}(shortcut script)! Reason: ${s}`);let u="",c=`${s.message??s}`;throw i&&c===a?(u="",i=`\u6267\u884C\u5931\u8D25 ${a}`):u=`\u6267\u884C\u5FEB\u6377\u811A\u672C \u5931\u8D25 ${c}`,new Error(`\u811A\u672C\u64CD\u4F5C ${i}${u}`)}}return r}async function cC(e,t){if(e.name.indexOf("Filter")!==-1)return qN(e,t);if(e.name.indexOf("Operator")!==-1)return VN(e,t)}function KN(e){let t=e.length,r,n;for(;t!==0;)n=Math.floor(Math.random()*t),t-=1,r=e[t],e[t]=e[n],e[n]=r;return e}function zN(e){return JSON.parse(JSON.stringify(e))}function M0(name,script,$arguments,$options){let flowUtils={getFlowField:Zc,getFlowHeaders:zn,parseFlowHeaders:Ko,flowTransfer:Rf,validCheck:s0,getRmainingDays:a0,normalizeFlowHeader:Yu};return R.env.isLoon?new Function("$arguments","$options","$substore","lodash","$persistentStore","$httpClient","$notification","ProxyUtils","yaml","Buffer","b64d","b64e","scriptResourceCache","flowUtils","produceArtifact","require",`${script}
 return ${name}`)($arguments,$options,R,Om.default,$persistentStore,$httpClient,$notification,Ot,Ot.yaml,Ot.Buffer,Ot.Base64.decode,Ot.Base64.encode,zf,flowUtils,vn,eval('typeof require !== "undefined"')?ko:void 0):new Function("$arguments","$options","$substore","lodash","ProxyUtils","yaml","Buffer","b64d","b64e","scriptResourceCache","flowUtils","produceArtifact","require",`${script}
 return ${name}`)($arguments,$options,R,Om.default,Ot,Ot.yaml,Ot.Buffer,Ot.Base64.decode,Ot.Base64.encode,zf,flowUtils,vn,eval('typeof require !== "undefined"')?ko:void 0)}function GN(){return{name:"HTML",test:n=>/^<!DOCTYPE html>/.test(n),parse:()=>""}}function YN(){let e="Base64 Pre-processor",t=["dm1lc3M","c3NyOi8v","c29ja3M6Ly","dHJvamFu","c3M6Ly","c3NkOi8v","c2hhZG93","aHR0c","dmxlc3M=","aHlzdGVyaWEy","aHkyOi8v","d2lyZWd1YXJkOi8v","d2c6Ly8=","dHVpYzovLw=="];return{name:e,test:function(i){return!/^\w+:\/\/\w+/im.test(i)&&t.some(a=>i.indexOf(a)!==-1)},parse:function(i){let a=ft.decode(i);return/^\w+(:\/\/|\s*?=\s*?)\w+/m.test(a)?a:(R.error("Base64 Pre-processor error: decoded line does not start with protocol"),i)}}}function WN(){return{name:"Fallback Base64 Pre-processor",test:function(n){return!0},parse:function(n){let i=ft.decode(n);return/^\w+(:\/\/|\s*?=\s*?)\w+/m.test(i)?i:(R.error("Fallback Base64 Pre-processor error: decoded line does not start with protocol"),n)}}}function XN(){return{name:"Clash Pre-processor",test:function(n){if(!/proxies/.test(n))return!1;let i=Vf(n);return i.proxies&&Array.isArray(i.proxies)},parse:function(n,i){let a=n.replace(/short-id:([ \t]*[^#\n,}]*)/g,(c,f)=>{let h=f.trim();return!h||h===""?'short-id: ""':/^(['"]).*\1$/.test(h)?`short-id: ${h}`:["null"].includes(h)?`short-id: ${h}`:`short-id: "${h}"`}),{proxies:s,"global-client-fingerprint":u}=Vf(a);return(i?`proxies:
`:"")+s.map(c=>(u&&!c["client-fingerprint"]&&(c["client-fingerprint"]=u),`${i?"  - ":""}${JSON.stringify(c)}
`)).join("")}}}function JN(){return{name:"SSD Pre-processor",test:function(n){return n.indexOf("ssd://")===0},parse:function(n){let i=[],a=JSON.parse(ft.decode(n.split("ssd://")[1])),s=a.port,u=a.encryption,c=a.password,f=a.servers;for(let h=0;h<f.length;h++){let g=f[h];u=g.encryption?g.encryption:u,c=g.password?g.password:c;let p=ft.encode(u+":"+c),d=g.server;s=g.port?g.port:s;let w=g.remarks?g.remarks:h,v=g.plugin_options?"/?plugin="+encodeURIComponent(g.plugin+";"+g.plugin_options):"";i[h]="ss://"+p+"@"+d+":"+s+v+"#"+w}return i.join(`
`)}}}function ZN(){return{name:"Full Config Preprocessor",test:function(n){return/^(\[server_local\]|\[Proxy\])/gm.test(n)},parse:function(n){return n.match(/^\[server_local|Proxy\]([\s\S]+?)^\[.+?\](\r?\n|$)/im)?.[1]||n}}}var V0=[GN(),XN(),YN(),JN(),ZN(),WN()];var lC=Yr(Sf()),mt=class{constructor(t){this.proxy=t,this.output=[]}append(t){if(typeof t>"u")throw new Error("required field is missing");this.output.push(t)}appendIfPresent(t,r){ue(this.proxy,r)&&this.append(t)}toString(){return this.output.join("")}};function ue(e,t){let r=lC.default.get(e,t);return typeof r<"u"&&r!==null}var QN="Surge",As={dual:"dual",ipv4:"v4-only",ipv6:"v6-only","ipv4-prefer":"prefer-v4","ipv6-prefer":"prefer-v6"};function bl(){return{produce:(t,r,n={})=>{switch(t.name=t.name.replace(/=|,/g,""),t.ports&&(t.ports=String(t.ports)),t.type){case"ss":return ek(t,n["include-unsupported-proxy"]);case"trojan":return tk(t);case"vmess":return rk(t,n["include-unsupported-proxy"]);case"http":return ik(t);case"direct":return sk(t);case"socks5":return ak(t);case"snell":return uk(t);case"tuic":return ok(t);case"wireguard-surge":return lk(t);case"hysteria2":return fk(t);case"ssh":return nk(t)}if(n["include-unsupported-proxy"]&&t.type==="wireguard")return ck(t);throw new Error(`Platform ${QN} does not support proxy type: ${t.type}`)}}}function ek(e){let t=new mt(e);if(t.append(`${e.name}=${e.type},${e.server},${e.port}`),e.cipher||(e.cipher="none"),!["aes-128-gcm","aes-192-gcm","aes-256-gcm","chacha20-ietf-poly1305","xchacha20-ietf-poly1305","rc4","rc4-md5","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-ctr","aes-192-ctr","aes-256-ctr","bf-cfb","camellia-128-cfb","camellia-192-cfb","camellia-256-cfb","cast5-cfb","des-cfb","idea-cfb","rc2-cfb","seed-cfb","salsa20","chacha20","chacha20-ietf","none","2022-blake3-aes-128-gcm","2022-blake3-aes-256-gcm"].includes(e.cipher))throw new Error(`cipher ${e.cipher} is not supported`);t.append(`,encrypt-method=${e.cipher}`),t.appendIfPresent(`,password="${e.password}"`,"password");let r=As[e["ip-version"]]||e["ip-version"];if(t.appendIfPresent(`,ip-version=${r}`,"ip-version"),t.appendIfPresent(`,no-error-alert=${e["no-error-alert"]}`,"no-error-alert"),ue(e,"plugin")){if(e.plugin==="obfs")t.append(`,obfs=${e["plugin-opts"].mode}`),t.appendIfPresent(`,obfs-host=${e["plugin-opts"].host}`,"plugin-opts.host"),t.appendIfPresent(`,obfs-uri=${e["plugin-opts"].path}`,"plugin-opts.path");else if(!["shadow-tls"].includes(e.plugin))throw new Error(`plugin ${e.plugin} is not supported`)}if(t.appendIfPresent(`,tfo=${e.tfo}`,"tfo"),t.appendIfPresent(`,udp-relay=${e.udp}`,"udp"),t.appendIfPresent(`,test-url=${e["test-url"]}`,"test-url"),t.appendIfPresent(`,test-timeout=${e["test-timeout"]}`,"test-timeout"),t.appendIfPresent(`,test-udp=${e["test-udp"]}`,"test-udp"),t.appendIfPresent(`,hybrid=${e.hybrid}`,"hybrid"),t.appendIfPresent(`,tos=${e.tos}`,"tos"),t.appendIfPresent(`,allow-other-interface=${e["allow-other-interface"]}`,"allow-other-interface"),t.appendIfPresent(`,interface=${e["interface-name"]}`,"interface-name"),ue(e,"shadow-tls-password"))t.append(`,shadow-tls-password=${e["shadow-tls-password"]}`),t.appendIfPresent(`,shadow-tls-version=${e["shadow-tls-version"]}`,"shadow-tls-version"),t.appendIfPresent(`,shadow-tls-sni=${e["shadow-tls-sni"]}`,"shadow-tls-sni"),t.appendIfPresent(`,udp-port=${e["udp-port"]}`,"udp-port");else if(["shadow-tls"].includes(e.plugin)&&e["plugin-opts"]){let n=e["plugin-opts"].password,i=e["plugin-opts"].host,a=e["plugin-opts"].version;if(n){if(t.append(`,shadow-tls-password=${n}`),i&&t.append(`,shadow-tls-sni=${i}`),a){if(a<2)throw new Error(`shadow-tls version ${a} is not supported`);t.append(`,shadow-tls-version=${a}`)}t.appendIfPresent(`,udp-port=${e["udp-port"]}`,"udp-port")}}return t.appendIfPresent(`,block-quic=${e["block-quic"]}`,"block-quic"),t.appendIfPresent(`,underlying-proxy=${e["underlying-proxy"]}`,"underlying-proxy"),t.toString()}function tk(e){let t=new mt(e);t.append(`${e.name}=${e.type},${e.server},${e.port}`),t.appendIfPresent(`,password="${e.password}"`,"password");let r=As[e["ip-version"]]||e["ip-version"];return t.appendIfPresent(`,ip-version=${r}`,"ip-version"),t.appendIfPresent(`,no-error-alert=${e["no-error-alert"]}`,"no-error-alert"),fC(t,e),t.appendIfPresent(`,tls=${e.tls}`,"tls"),t.appendIfPresent(`,server-cert-fingerprint-sha256=${e["tls-fingerprint"]}`,"tls-fingerprint"),t.appendIfPresent(`,sni=${e.sni}`,"sni"),t.appendIfPresent(`,skip-cert-verify=${e["skip-cert-verify"]}`,"skip-cert-verify"),t.appendIfPresent(`,tfo=${e.tfo}`,"tfo"),t.appendIfPresent(`,udp-relay=${e.udp}`,"udp"),t.appendIfPresent(`,test-url=${e["test-url"]}`,"test-url"),t.appendIfPresent(`,test-timeout=${e["test-timeout"]}`,"test-timeout"),t.appendIfPresent(`,test-udp=${e["test-udp"]}`,"test-udp"),t.appendIfPresent(`,hybrid=${e.hybrid}`,"hybrid"),t.appendIfPresent(`,tos=${e.tos}`,"tos"),t.appendIfPresent(`,allow-other-interface=${e["allow-other-interface"]}`,"allow-other-interface"),t.appendIfPresent(`,interface=${e["interface-name"]}`,"interface-name"),ue(e,"shadow-tls-password")&&(t.append(`,shadow-tls-password=${e["shadow-tls-password"]}`),t.appendIfPresent(`,shadow-tls-version=${e["shadow-tls-version"]}`,"shadow-tls-version"),t.appendIfPresent(`,shadow-tls-sni=${e["shadow-tls-sni"]}`,"shadow-tls-sni")),t.appendIfPresent(`,block-quic=${e["block-quic"]}`,"block-quic"),t.appendIfPresent(`,underlying-proxy=${e["underlying-proxy"]}`,"underlying-proxy"),t.toString()}function rk(e,t){let r=new mt(e);r.append(`${e.name}=${e.type},${e.server},${e.port}`),r.appendIfPresent(`,username=${e.uuid}`,"uuid");let n=As[e["ip-version"]]||e["ip-version"];return r.appendIfPresent(`,ip-version=${n}`,"ip-version"),r.appendIfPresent(`,no-error-alert=${e["no-error-alert"]}`,"no-error-alert"),fC(r,e,t),ue(e,"aead")?r.append(`,vmess-aead=${e.aead}`):r.append(`,vmess-aead=${e.alterId===0}`),r.appendIfPresent(`,server-cert-fingerprint-sha256=${e["tls-fingerprint"]}`,"tls-fingerprint"),r.appendIfPresent(`,tls=${e.tls}`,"tls"),r.appendIfPresent(`,sni=${e.sni}`,"sni"),r.appendIfPresent(`,skip-cert-verify=${e["skip-cert-verify"]}`,"skip-cert-verify"),r.appendIfPresent(`,tfo=${e.tfo}`,"tfo"),r.appendIfPresent(`,udp-relay=${e.udp}`,"udp"),r.appendIfPresent(`,test-url=${e["test-url"]}`,"test-url"),r.appendIfPresent(`,test-timeout=${e["test-timeout"]}`,"test-timeout"),r.appendIfPresent(`,test-udp=${e["test-udp"]}`,"test-udp"),r.appendIfPresent(`,hybrid=${e.hybrid}`,"hybrid"),r.appendIfPresent(`,tos=${e.tos}`,"tos"),r.appendIfPresent(`,allow-other-interface=${e["allow-other-interface"]}`,"allow-other-interface"),r.appendIfPresent(`,interface=${e["interface-name"]}`,"interface-name"),ue(e,"shadow-tls-password")&&(r.append(`,shadow-tls-password=${e["shadow-tls-password"]}`),r.appendIfPresent(`,shadow-tls-version=${e["shadow-tls-version"]}`,"shadow-tls-version"),r.appendIfPresent(`,shadow-tls-sni=${e["shadow-tls-sni"]}`,"shadow-tls-sni")),r.appendIfPresent(`,block-quic=${e["block-quic"]}`,"block-quic"),r.appendIfPresent(`,underlying-proxy=${e["underlying-proxy"]}`,"underlying-proxy"),r.toString()}function nk(e){let t=new mt(e);t.append(`${e.name}=ssh,${e.server},${e.port}`),t.appendIfPresent(`,username="${e.username}"`,"username"),t.appendIfPresent(`,password="${e.password}"`,"password"),t.appendIfPresent(`,private-key=${e["keystore-private-key"]}`,"keystore-private-key"),t.appendIfPresent(`,idle-timeout=${e["idle-timeout"]}`,"idle-timeout"),t.appendIfPresent(`,server-fingerprint="${e["server-fingerprint"]}"`,"server-fingerprint");let r=As[e["ip-version"]]||e["ip-version"];return t.appendIfPresent(`,ip-version=${r}`,"ip-version"),t.appendIfPresent(`,no-error-alert=${e["no-error-alert"]}`,"no-error-alert"),t.appendIfPresent(`,tfo=${e.tfo}`,"tfo"),t.appendIfPresent(`,udp-relay=${e.udp}`,"udp"),t.appendIfPresent(`,test-url=${e["test-url"]}`,"test-url"),t.appendIfPresent(`,test-timeout=${e["test-timeout"]}`,"test-timeout"),t.appendIfPresent(`,test-udp=${e["test-udp"]}`,"test-udp"),t.appendIfPresent(`,hybrid=${e.hybrid}`,"hybrid"),t.appendIfPresent(`,tos=${e.tos}`,"tos"),t.appendIfPresent(`,allow-other-interface=${e["allow-other-interface"]}`,"allow-other-interface"),t.appendIfPresent(`,interface=${e["interface-name"]}`,"interface-name"),t.appendIfPresent(`,block-quic=${e["block-quic"]}`,"block-quic"),t.appendIfPresent(`,underlying-proxy=${e["underlying-proxy"]}`,"underlying-proxy"),t.toString()}function ik(e){if(e.headers&&Object.keys(e.headers).length>0)throw new Error("headers is unsupported");let t=new mt(e),r=e.tls?"https":"http";t.append(`${e.name}=${r},${e.server},${e.port}`),t.appendIfPresent(`,username="${e.username}"`,"username"),t.appendIfPresent(`,password="${e.password}"`,"password");let n=As[e["ip-version"]]||e["ip-version"];return t.appendIfPresent(`,ip-version=${n}`,"ip-version"),t.appendIfPresent(`,no-error-alert=${e["no-error-alert"]}`,"no-error-alert"),t.appendIfPresent(`,server-cert-fingerprint-sha256=${e["tls-fingerprint"]}`,"tls-fingerprint"),t.appendIfPresent(`,sni=${e.sni}`,"sni"),t.appendIfPresent(`,skip-cert-verify=${e["skip-cert-verify"]}`,"skip-cert-verify"),t.appendIfPresent(`,tfo=${e.tfo}`,"tfo"),t.appendIfPresent(`,udp-relay=${e.udp}`,"udp"),t.appendIfPresent(`,test-url=${e["test-url"]}`,"test-url"),t.appendIfPresent(`,test-timeout=${e["test-timeout"]}`,"test-timeout"),t.appendIfPresent(`,test-udp=${e["test-udp"]}`,"test-udp"),t.appendIfPresent(`,hybrid=${e.hybrid}`,"hybrid"),t.appendIfPresent(`,tos=${e.tos}`,"tos"),t.appendIfPresent(`,allow-other-interface=${e["allow-other-interface"]}`,"allow-other-interface"),t.appendIfPresent(`,interface=${e["interface-name"]}`,"interface-name"),ue(e,"shadow-tls-password")&&(t.append(`,shadow-tls-password=${e["shadow-tls-password"]}`),t.appendIfPresent(`,shadow-tls-version=${e["shadow-tls-version"]}`,"shadow-tls-version"),t.appendIfPresent(`,shadow-tls-sni=${e["shadow-tls-sni"]}`,"shadow-tls-sni")),t.appendIfPresent(`,block-quic=${e["block-quic"]}`,"block-quic"),t.appendIfPresent(`,underlying-proxy=${e["underlying-proxy"]}`,"underlying-proxy"),t.toString()}function sk(e){let t=new mt(e);t.append(`${e.name}=direct`);let n=As[e["ip-version"]]||e["ip-version"];return t.appendIfPresent(`,ip-version=${n}`,"ip-version"),t.appendIfPresent(`,no-error-alert=${e["no-error-alert"]}`,"no-error-alert"),t.appendIfPresent(`,tfo=${e.tfo}`,"tfo"),t.appendIfPresent(`,udp-relay=${e.udp}`,"udp"),t.appendIfPresent(`,test-url=${e["test-url"]}`,"test-url"),t.appendIfPresent(`,test-timeout=${e["test-timeout"]}`,"test-timeout"),t.appendIfPresent(`,test-udp=${e["test-udp"]}`,"test-udp"),t.appendIfPresent(`,hybrid=${e.hybrid}`,"hybrid"),t.appendIfPresent(`,tos=${e.tos}`,"tos"),t.appendIfPresent(`,allow-other-interface=${e["allow-other-interface"]}`,"allow-other-interface"),t.appendIfPresent(`,interface=${e["interface-name"]}`,"interface-name"),t.appendIfPresent(`,block-quic=${e["block-quic"]}`,"block-quic"),t.appendIfPresent(`,underlying-proxy=${e["underlying-proxy"]}`,"underlying-proxy"),t.toString()}function ak(e){let t=new mt(e),r=e.tls?"socks5-tls":"socks5";t.append(`${e.name}=${r},${e.server},${e.port}`),t.appendIfPresent(`,username="${e.username}"`,"username"),t.appendIfPresent(`,password="${e.password}"`,"password");let n=As[e["ip-version"]]||e["ip-version"];return t.appendIfPresent(`,ip-version=${n}`,"ip-version"),t.appendIfPresent(`,no-error-alert=${e["no-error-alert"]}`,"no-error-alert"),t.appendIfPresent(`,server-cert-fingerprint-sha256=${e["tls-fingerprint"]}`,"tls-fingerprint"),t.appendIfPresent(`,sni=${e.sni}`,"sni"),t.appendIfPresent(`,skip-cert-verify=${e["skip-cert-verify"]}`,"skip-cert-verify"),e.tfo&&R.info("Option tfo is not supported by Surge, thus omitted"),t.appendIfPresent(`,udp-relay=${e.udp}`,"udp"),t.appendIfPresent(`,test-url=${e["test-url"]}`,"test-url"),t.appendIfPresent(`,test-timeout=${e["test-timeout"]}`,"test-timeout"),t.appendIfPresent(`,test-udp=${e["test-udp"]}`,"test-udp"),t.appendIfPresent(`,hybrid=${e.hybrid}`,"hybrid"),t.appendIfPresent(`,tos=${e.tos}`,"tos"),t.appendIfPresent(`,allow-other-interface=${e["allow-other-interface"]}`,"allow-other-interface"),t.appendIfPresent(`,interface=${e["interface-name"]}`,"interface-name"),ue(e,"shadow-tls-password")&&(t.append(`,shadow-tls-password=${e["shadow-tls-password"]}`),t.appendIfPresent(`,shadow-tls-version=${e["shadow-tls-version"]}`,"shadow-tls-version"),t.appendIfPresent(`,shadow-tls-sni=${e["shadow-tls-sni"]}`,"shadow-tls-sni")),t.appendIfPresent(`,block-quic=${e["block-quic"]}`,"block-quic"),t.appendIfPresent(`,underlying-proxy=${e["underlying-proxy"]}`,"underlying-proxy"),t.toString()}function uk(e){let t=new mt(e);t.append(`${e.name}=${e.type},${e.server},${e.port}`),t.appendIfPresent(`,version=${e.version}`,"version"),t.appendIfPresent(`,psk=${e.psk}`,"psk");let r=As[e["ip-version"]]||e["ip-version"];return t.appendIfPresent(`,ip-version=${r}`,"ip-version"),t.appendIfPresent(`,no-error-alert=${e["no-error-alert"]}`,"no-error-alert"),t.appendIfPresent(`,obfs=${e["obfs-opts"]?.mode}`,"obfs-opts.mode"),t.appendIfPresent(`,obfs-host=${e["obfs-opts"]?.host}`,"obfs-opts.host"),t.appendIfPresent(`,obfs-uri=${e["obfs-opts"]?.path}`,"obfs-opts.path"),t.appendIfPresent(`,tfo=${e.tfo}`,"tfo"),t.appendIfPresent(`,udp-relay=${e.udp}`,"udp"),t.appendIfPresent(`,test-url=${e["test-url"]}`,"test-url"),t.appendIfPresent(`,test-timeout=${e["test-timeout"]}`,"test-timeout"),t.appendIfPresent(`,test-udp=${e["test-udp"]}`,"test-udp"),t.appendIfPresent(`,hybrid=${e.hybrid}`,"hybrid"),t.appendIfPresent(`,tos=${e.tos}`,"tos"),t.appendIfPresent(`,allow-other-interface=${e["allow-other-interface"]}`,"allow-other-interface"),t.appendIfPresent(`,interface=${e["interface-name"]}`,"interface-name"),ue(e,"shadow-tls-password")&&(t.append(`,shadow-tls-password=${e["shadow-tls-password"]}`),t.appendIfPresent(`,shadow-tls-version=${e["shadow-tls-version"]}`,"shadow-tls-version"),t.appendIfPresent(`,shadow-tls-sni=${e["shadow-tls-sni"]}`,"shadow-tls-sni")),t.appendIfPresent(`,block-quic=${e["block-quic"]}`,"block-quic"),t.appendIfPresent(`,underlying-proxy=${e["underlying-proxy"]}`,"underlying-proxy"),t.appendIfPresent(`,reuse=${e.reuse}`,"reuse"),t.toString()}function ok(e){let t=new mt(e),r=e.type;(!e.token||e.token.length===0)&&(r="tuic-v5"),t.append(`${e.name}=${r},${e.server},${e.port}`),t.appendIfPresent(`,uuid=${e.uuid}`,"uuid"),t.appendIfPresent(`,password="${e.password}"`,"password"),t.appendIfPresent(`,token=${e.token}`,"token"),t.appendIfPresent(`,alpn=${Array.isArray(e.alpn)?e.alpn[0]:e.alpn}`,"alpn"),ue(e,"ports")&&t.append(`,port-hopping="${e.ports.replace(/,/g,";")}"`),t.appendIfPresent(`,port-hopping-interval=${e["hop-interval"]}`,"hop-interval");let n=As[e["ip-version"]]||e["ip-version"];return t.appendIfPresent(`,ip-version=${n}`,"ip-version"),t.appendIfPresent(`,no-error-alert=${e["no-error-alert"]}`,"no-error-alert"),t.appendIfPresent(`,sni=${e.sni}`,"sni"),t.appendIfPresent(`,skip-cert-verify=${e["skip-cert-verify"]}`,"skip-cert-verify"),t.appendIfPresent(`,server-cert-fingerprint-sha256=${e["tls-fingerprint"]}`,"tls-fingerprint"),ue(e,"tfo")?t.append(`,tfo=${e.tfo}`):ue(e,"fast-open")&&t.append(`,tfo=${e["fast-open"]}`),t.appendIfPresent(`,test-url=${e["test-url"]}`,"test-url"),t.appendIfPresent(`,test-timeout=${e["test-timeout"]}`,"test-timeout"),t.appendIfPresent(`,test-udp=${e["test-udp"]}`,"test-udp"),t.appendIfPresent(`,hybrid=${e.hybrid}`,"hybrid"),t.appendIfPresent(`,tos=${e.tos}`,"tos"),t.appendIfPresent(`,allow-other-interface=${e["allow-other-interface"]}`,"allow-other-interface"),t.appendIfPresent(`,interface=${e["interface-name"]}`,"interface-name"),ue(e,"shadow-tls-password")&&(t.append(`,shadow-tls-password=${e["shadow-tls-password"]}`),t.appendIfPresent(`,shadow-tls-version=${e["shadow-tls-version"]}`,"shadow-tls-version"),t.appendIfPresent(`,shadow-tls-sni=${e["shadow-tls-sni"]}`,"shadow-tls-sni")),t.appendIfPresent(`,block-quic=${e["block-quic"]}`,"block-quic"),t.appendIfPresent(`,underlying-proxy=${e["underlying-proxy"]}`,"underlying-proxy"),t.appendIfPresent(`,ecn=${e.ecn}`,"ecn"),t.toString()}function ck(e){Array.isArray(e.peers)&&e.peers.length>0&&(e.server=e.peers[0].server,e.port=e.peers[0].port,e.ip=e.peers[0].ip,e.ipv6=e.peers[0].ipv6,e["public-key"]=e.peers[0]["public-key"],e["preshared-key"]=e.peers[0]["pre-shared-key"],e["allowed-ips"]=e.peers[0]["allowed-ips"],e.reserved=e.peers[0].reserved);let t=new mt(e);t.append(`# > WireGuard Proxy ${e.name}
# ${e.name}=wireguard`),e["section-name"]=fr(e["section-name"],e.name),t.appendIfPresent(`,section-name=${e["section-name"]}`,"section-name"),t.appendIfPresent(`,no-error-alert=${e["no-error-alert"]}`,"no-error-alert");let r=As[e["ip-version"]]||e["ip-version"];t.appendIfPresent(`,ip-version=${r}`,"ip-version"),t.appendIfPresent(`,test-url=${e["test-url"]}`,"test-url"),t.appendIfPresent(`,test-timeout=${e["test-timeout"]}`,"test-timeout"),t.appendIfPresent(`,test-udp=${e["test-udp"]}`,"test-udp"),t.appendIfPresent(`,hybrid=${e.hybrid}`,"hybrid"),t.appendIfPresent(`,tos=${e.tos}`,"tos"),t.appendIfPresent(`,allow-other-interface=${e["allow-other-interface"]}`,"allow-other-interface"),t.appendIfPresent(`,interface=${e["interface-name"]}`,"interface-name"),ue(e,"shadow-tls-password")&&(t.append(`,shadow-tls-password=${e["shadow-tls-password"]}`),t.appendIfPresent(`,shadow-tls-version=${e["shadow-tls-version"]}`,"shadow-tls-version"),t.appendIfPresent(`,shadow-tls-sni=${e["shadow-tls-sni"]}`,"shadow-tls-sni")),t.appendIfPresent(`,block-quic=${e["block-quic"]}`,"block-quic"),t.appendIfPresent(`,underlying-proxy=${e["underlying-proxy"]}`,"underlying-proxy"),t.append(`
# > WireGuard Section ${e.name}
[WireGuard ${e["section-name"]}]
private-key = ${e["private-key"]}`),t.appendIfPresent(`
self-ip = ${e.ip}`,"ip"),t.appendIfPresent(`
self-ip-v6 = ${e.ipv6}`,"ipv6"),e.dns&&(Array.isArray(e.dns)&&(e.dns=e.dns.join(", ")),t.append(`
dns-server = ${e.dns}`)),t.appendIfPresent(`
mtu = ${e.mtu}`,"mtu"),r==="prefer-v6"&&t.append(`
prefer-ipv6 = true`);let n=Array.isArray(e["allowed-ips"])?e["allowed-ips"].join(","):e["allowed-ips"],i=Array.isArray(e.reserved)?e.reserved.join("/"):e.reserved,a=e["preshared-key"]??e["pre-shared-key"];a&&(a=`,preshared-key="${a}"`);let s={"public-key":e["public-key"],"allowed-ips":n?`"${n}"`:void 0,endpoint:`${e.server}:${e.port}`,keepalive:e["persistent-keepalive"]||e.keepalive,"client-id":i,"preshared-key":a};return t.append(`
peer = (${Object.keys(s).filter(u=>s[u]!=null).map(u=>`${u} = ${s[u]}`).join(", ")})`),t.toString()}function lk(e){let t=new mt(e);t.append(`${e.name}=wireguard`),t.appendIfPresent(`,section-name=${e["section-name"]}`,"section-name"),t.appendIfPresent(`,no-error-alert=${e["no-error-alert"]}`,"no-error-alert");let r=As[e["ip-version"]]||e["ip-version"];return t.appendIfPresent(`,ip-version=${r}`,"ip-version"),t.appendIfPresent(`,test-url=${e["test-url"]}`,"test-url"),t.appendIfPresent(`,test-timeout=${e["test-timeout"]}`,"test-timeout"),t.appendIfPresent(`,test-udp=${e["test-udp"]}`,"test-udp"),t.appendIfPresent(`,hybrid=${e.hybrid}`,"hybrid"),t.appendIfPresent(`,tos=${e.tos}`,"tos"),t.appendIfPresent(`,allow-other-interface=${e["allow-other-interface"]}`,"allow-other-interface"),t.appendIfPresent(`,interface=${e["interface-name"]}`,"interface-name"),ue(e,"shadow-tls-password")&&(t.append(`,shadow-tls-password=${e["shadow-tls-password"]}`),t.appendIfPresent(`,shadow-tls-version=${e["shadow-tls-version"]}`,"shadow-tls-version"),t.appendIfPresent(`,shadow-tls-sni=${e["shadow-tls-sni"]}`,"shadow-tls-sni")),t.appendIfPresent(`,block-quic=${e["block-quic"]}`,"block-quic"),t.appendIfPresent(`,underlying-proxy=${e["underlying-proxy"]}`,"underlying-proxy"),t.toString()}function fk(e){if(e.obfs||e["obfs-password"])throw new Error("obfs is unsupported");let t=new mt(e);t.append(`${e.name}=hysteria2,${e.server},${e.port}`),t.appendIfPresent(`,password="${e.password}"`,"password"),ue(e,"ports")&&t.append(`,port-hopping="${e.ports.replace(/,/g,";")}"`),t.appendIfPresent(`,port-hopping-interval=${e["hop-interval"]}`,"hop-interval");let r=As[e["ip-version"]]||e["ip-version"];return t.appendIfPresent(`,ip-version=${r}`,"ip-version"),t.appendIfPresent(`,no-error-alert=${e["no-error-alert"]}`,"no-error-alert"),t.appendIfPresent(`,sni=${e.sni}`,"sni"),t.appendIfPresent(`,skip-cert-verify=${e["skip-cert-verify"]}`,"skip-cert-verify"),t.appendIfPresent(`,server-cert-fingerprint-sha256=${e["tls-fingerprint"]}`,"tls-fingerprint"),ue(e,"tfo")?t.append(`,tfo=${e.tfo}`):ue(e,"fast-open")&&t.append(`,tfo=${e["fast-open"]}`),t.appendIfPresent(`,test-url=${e["test-url"]}`,"test-url"),t.appendIfPresent(`,test-timeout=${e["test-timeout"]}`,"test-timeout"),t.appendIfPresent(`,test-udp=${e["test-udp"]}`,"test-udp"),t.appendIfPresent(`,hybrid=${e.hybrid}`,"hybrid"),t.appendIfPresent(`,tos=${e.tos}`,"tos"),t.appendIfPresent(`,allow-other-interface=${e["allow-other-interface"]}`,"allow-other-interface"),t.appendIfPresent(`,interface=${e["interface-name"]}`,"interface-name"),ue(e,"shadow-tls-password")&&(t.append(`,shadow-tls-password=${e["shadow-tls-password"]}`),t.appendIfPresent(`,shadow-tls-version=${e["shadow-tls-version"]}`,"shadow-tls-version"),t.appendIfPresent(`,shadow-tls-sni=${e["shadow-tls-sni"]}`,"shadow-tls-sni")),t.appendIfPresent(`,block-quic=${e["block-quic"]}`,"block-quic"),t.appendIfPresent(`,underlying-proxy=${e["underlying-proxy"]}`,"underlying-proxy"),t.appendIfPresent(`,download-bandwidth=${`${e.down}`.match(/\d+/)?.[0]||0}`,"down"),t.appendIfPresent(`,ecn=${e.ecn}`,"ecn"),t.toString()}function fC(e,t,r){if(ue(t,"network"))if(t.network==="ws"){if(e.append(",ws=true"),ue(t,"ws-opts")&&(e.appendIfPresent(`,ws-path=${t["ws-opts"].path}`,"ws-opts.path"),ue(t,"ws-opts.headers"))){let n=t["ws-opts"].headers,i=Object.keys(n).map(a=>{let s=n[a];return s=`"${s}"`,`${a}:${s}`}).join("|");oa(i)&&e.append(`,ws-headers=${i}`)}}else if(r&&["http"].includes(t.network))R.info(`Include Unsupported Proxy: nework ${t.network} -> tcp`);else throw new Error(`network ${t.network} is unsupported`)}var hk={dual:"dual","v4-only":"ipv4","v6-only":"ipv6","prefer-v4":"ipv4-prefer","prefer-v6":"ipv6-prefer"};function Zi(){return{type:"ALL",produce:(r,n,i={})=>{let a=r.filter(s=>i["include-unsupported-proxy"]?!0:s.type==="snell"&&s.version>=4||["juicity"].includes(s.type)||["ss"].includes(s.type)&&!["aes-128-ctr","aes-192-ctr","aes-256-ctr","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-gcm","aes-192-gcm","aes-256-gcm","aes-128-ccm","aes-192-ccm","aes-256-ccm","aes-128-gcm-siv","aes-256-gcm-siv","chacha20-ietf","chacha20","xchacha20","chacha20-ietf-poly1305","xchacha20-ietf-poly1305","chacha8-ietf-poly1305","xchacha8-ietf-poly1305","2022-blake3-aes-128-gcm","2022-blake3-aes-256-gcm","2022-blake3-chacha20-poly1305","lea-128-gcm","lea-192-gcm","lea-256-gcm","rabbit128-poly1305","aegis-128l","aegis-256","aez-384","deoxys-ii-256-128","rc4-md5","none"].includes(s.cipher)?!1:!(["anytls"].includes(s.type)&&s.network&&(!["tcp"].includes(s.network)||["tcp"].includes(s.network)&&s["reality-opts"]))).map(s=>{if(s.type==="vmess"?(ue(s,"aead")&&(s.aead&&(s.alterId=0),delete s.aead),ue(s,"sni")&&(s.servername=s.sni,delete s.sni),ue(s,"cipher")&&!["auto","none","zero","aes-128-gcm","chacha20-poly1305"].includes(s.cipher)&&(s.cipher="auto")):s.type==="tuic"?(ue(s,"alpn")?s.alpn=Array.isArray(s.alpn)?s.alpn:[s.alpn]:s.alpn=["h3"],ue(s,"tfo")&&!ue(s,"fast-open")&&(s["fast-open"]=s.tfo),(!s.token||s.token.length===0)&&!ue(s,"version")&&(s.version=5)):s.type==="hysteria"?(ue(s,"auth_str")&&!ue(s,"auth-str")&&(s["auth-str"]=s.auth_str),ue(s,"alpn")&&(s.alpn=Array.isArray(s.alpn)?s.alpn:[s.alpn]),ue(s,"tfo")&&!ue(s,"fast-open")&&(s["fast-open"]=s.tfo)):s.type==="wireguard"?(s.keepalive=s.keepalive??s["persistent-keepalive"],s["persistent-keepalive"]=s.keepalive,s["preshared-key"]=s["preshared-key"]??s["pre-shared-key"],s["pre-shared-key"]=s["preshared-key"]):s.type==="snell"&&s.version<3?delete s.udp:s.type==="vless"?ue(s,"sni")&&(s.servername=s.sni,delete s.sni):s.type==="ss"&&ue(s,"shadow-tls-password")&&!ue(s,"plugin")&&(s.plugin="shadow-tls",s["plugin-opts"]={host:s["shadow-tls-sni"],password:s["shadow-tls-password"],version:s["shadow-tls-version"]},delete s["shadow-tls-password"],delete s["shadow-tls-sni"],delete s["shadow-tls-version"]),["vmess","vless"].includes(s.type)&&s.network==="http"){let u=s["http-opts"]?.path;ue(s,"http-opts.path")&&!Array.isArray(u)&&(s["http-opts"].path=[u]);let c=s["http-opts"]?.headers?.Host;ue(s,"http-opts.headers.Host")&&!Array.isArray(c)&&(s["http-opts"].headers.Host=[c])}if(["vmess","vless"].includes(s.type)&&s.network==="h2"){let u=s["h2-opts"]?.path;ue(s,"h2-opts.path")&&Array.isArray(u)&&(s["h2-opts"].path=u[0]);let c=s["h2-opts"]?.headers?.host;ue(s,"h2-opts.headers.Host")&&!Array.isArray(c)&&(s["h2-opts"].headers.host=[c])}if(["ws"].includes(s.network)){let u=s[`${s.network}-opts`]?.path;if(u){let c=/^(.*?)(?:\?ed=(\d+))?$/,[f,h="",g=""]=c.exec(u);s[`${s.network}-opts`].path=h,g!==""&&(s["ws-opts"]["early-data-header-name"]="Sec-WebSocket-Protocol",s["ws-opts"]["max-early-data"]=parseInt(g,10))}else s[`${s.network}-opts`]=s[`${s.network}-opts`]||{},s[`${s.network}-opts`].path="/"}if(s["plugin-opts"]?.tls&&ue(s,"skip-cert-verify")&&(s["plugin-opts"]["skip-cert-verify"]=s["skip-cert-verify"]),["trojan","tuic","hysteria","hysteria2","juicity","anytls"].includes(s.type)&&delete s.tls,s["tls-fingerprint"]&&(s.fingerprint=s["tls-fingerprint"]),delete s["tls-fingerprint"],s["underlying-proxy"]&&(s["dialer-proxy"]=s["underlying-proxy"]),delete s["underlying-proxy"],ue(s,"tls")&&typeof s.tls!="boolean"&&delete s.tls,delete s.subName,delete s.collectionName,delete s.id,delete s.resolved,delete s["no-resolve"],n!=="internal"||i["delete-underscore-fields"])for(let u in s)(s[u]==null||/^_/i.test(u))&&delete s[u];return["grpc"].includes(s.network)&&s[`${s.network}-opts`]&&(delete s[`${s.network}-opts`]["_grpc-type"],delete s[`${s.network}-opts`]["_grpc-authority"]),s["ip-version"]&&(s["ip-version"]=hk[s["ip-version"]]||s["ip-version"]),s});return n==="internal"?a:`proxies:
`+a.map(s=>"  - "+JSON.stringify(s)+`
`).join("")}}}var hC="SurgeMac",dk=bl();function Nm(){return{produce:(t,r,n={})=>{switch(t.type){case"external":return dC(t);default:try{return dk.produce(t,r,n)}catch{if(n.useMihomoExternal)return R.log(`${t.name} is not supported on ${hC}, try to use Mihomo(SurgeMac - External Proxy Program) instead`),pk(t,r,n);throw new Error("Surge for macOS \u53EF\u624B\u52A8\u6307\u5B9A\u94FE\u63A5\u53C2\u6570 target=SurgeMac \u6216\u5728 \u540C\u6B65\u914D\u7F6E \u4E2D\u6307\u5B9A SurgeMac \u6765\u542F\u7528 mihomo \u652F\u63F4 Surge \u672C\u8EAB\u4E0D\u652F\u6301\u7684\u534F\u8BAE")}}}}}function dC(e){let t=new mt(e);if(!e.exec||!e["local-port"])throw new Error(`${e.type}: exec and local-port are required`);return t.append(`${e.name}=external,exec="${e.exec}",local-port=${e["local-port"]}`),Array.isArray(e.args)&&e.args.map(r=>{t.append(`,args="${r}"`)}),Array.isArray(e.addresses)&&e.addresses.map(r=>{t.append(`,addresses=${r}`)}),t.appendIfPresent(`,no-error-alert=${e["no-error-alert"]}`,"no-error-alert"),ue(e,"tfo")?t.append(`,tfo=${e.tfo}`):ue(e,"fast-open")&&t.append(`,tfo=${e["fast-open"]}`),t.appendIfPresent(`,test-url=${e["test-url"]}`,"test-url"),t.appendIfPresent(`,block-quic=${e["block-quic"]}`,"block-quic"),t.toString()}function pk(e,t,r){let n=Zi().produce([e],"internal")?.[0];if(n){let i=r?.localPort||e._localPort||65535,a=!["ipv4","v4-only"].includes(e["ip-version"]),s={name:e.name,type:"external",exec:e._exec||"/usr/local/bin/mihomo","local-port":i,args:["-config",ft.encode(JSON.stringify({"mixed-port":i,ipv6:a,mode:"global",dns:{enable:!0,ipv6:a,"default-nameserver":r?.defaultNameserver||e._defaultNameserver||["180.76.76.76","52.80.52.52","119.28.28.28","223.6.6.6"],nameserver:r?.nameserver||e._nameserver||["https://doh.pub/dns-query","https://dns.alidns.com/dns-query","https://doh-pure.onedns.net/dns-query"]},proxies:[{...n,name:"proxy"}],"proxy-groups":[{name:"GLOBAL",type:"select",proxies:["proxy"]}]}))],addresses:[]};return gk(e.server)?s.addresses.push(e.server):R.log(`Platform ${hC}, proxy type ${e.type}: addresses should be an IP address, but got ${e.server}`),r.localPort=i-1,dC(s)}}function gk(e){return Wr(e)||Mr(e)}function km(){return{type:"ALL",produce:(r,n,i={})=>{let a=r.filter(s=>i["include-unsupported-proxy"]?!0:!["ss","ssr","vmess","vless","socks5","http","snell","trojan","wireguard"].includes(s.type)||s.type==="ss"&&!["aes-128-gcm","aes-192-gcm","aes-256-gcm","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-ctr","aes-192-ctr","aes-256-ctr","rc4-md5","chacha20-ietf","xchacha20","chacha20-ietf-poly1305","xchacha20-ietf-poly1305"].includes(s.cipher)||s.type==="snell"&&s.version>=4||s.type==="vless"&&(typeof s.flow<"u"||s["reality-opts"])?!1:s["underlying-proxy"]||s["dialer-proxy"]?(R.error(`Clash \u4E0D\u652F\u6301\u524D\u7F6E\u4EE3\u7406\u5B57\u6BB5. \u5DF2\u8FC7\u6EE4\u8282\u70B9 ${s.name}`),!1):!0).map(s=>{if(s.type==="vmess"?(ue(s,"aead")&&(s.aead&&(s.alterId=0),delete s.aead),ue(s,"sni")&&(s.servername=s.sni,delete s.sni),ue(s,"cipher")&&!["auto","aes-128-gcm","chacha20-poly1305","none"].includes(s.cipher)&&(s.cipher="auto")):s.type==="wireguard"?(s.keepalive=s.keepalive??s["persistent-keepalive"],s["persistent-keepalive"]=s.keepalive,s["preshared-key"]=s["preshared-key"]??s["pre-shared-key"],s["pre-shared-key"]=s["preshared-key"]):s.type==="snell"&&s.version<3?delete s.udp:s.type==="vless"&&ue(s,"sni")&&(s.servername=s.sni,delete s.sni),["vmess","vless"].includes(s.type)&&s.network==="http"){let u=s["http-opts"]?.path;ue(s,"http-opts.path")&&!Array.isArray(u)&&(s["http-opts"].path=[u]);let c=s["http-opts"]?.headers?.Host;ue(s,"http-opts.headers.Host")&&!Array.isArray(c)&&(s["http-opts"].headers.Host=[c])}if(["vmess","vless"].includes(s.type)&&s.network==="h2"){let u=s["h2-opts"]?.path;ue(s,"h2-opts.path")&&Array.isArray(u)&&(s["h2-opts"].path=u[0]);let c=s["h2-opts"]?.headers?.host;ue(s,"h2-opts.headers.Host")&&!Array.isArray(c)&&(s["h2-opts"].headers.host=[c])}if(["ws"].includes(s.network)){let u=s[`${s.network}-opts`]?.path;if(u){let c=/^(.*?)(?:\?ed=(\d+))?$/,[f,h="",g=""]=c.exec(u);s[`${s.network}-opts`].path=h,g!==""&&(s["ws-opts"]["early-data-header-name"]="Sec-WebSocket-Protocol",s["ws-opts"]["max-early-data"]=parseInt(g,10))}else s[`${s.network}-opts`]=s[`${s.network}-opts`]||{},s[`${s.network}-opts`].path="/"}if(s["plugin-opts"]?.tls&&ue(s,"skip-cert-verify")&&(s["plugin-opts"]["skip-cert-verify"]=s["skip-cert-verify"]),["trojan","tuic","hysteria","hysteria2","juicity","anytls"].includes(s.type)&&delete s.tls,s["tls-fingerprint"]&&(s.fingerprint=s["tls-fingerprint"]),delete s["tls-fingerprint"],ue(s,"tls")&&typeof s.tls!="boolean"&&delete s.tls,delete s.subName,delete s.collectionName,delete s.id,delete s.resolved,delete s["no-resolve"],n!=="internal")for(let u in s)(s[u]==null||/^_/i.test(u))&&delete s[u];return["grpc"].includes(s.network)&&s[`${s.network}-opts`]&&(delete s[`${s.network}-opts`]["_grpc-type"],delete s[`${s.network}-opts`]["_grpc-authority"]),s});return n==="internal"?a:`proxies:
`+a.map(s=>"  - "+JSON.stringify(s)+`
`).join("")}}}function K0(){return{type:"ALL",produce:(r,n,i={})=>{let a=r.filter(s=>!["ss","ssr","vmess","socks5","http","snell","trojan","tuic","vless","wireguard","hysteria","hysteria2","ssh","juicity"].includes(s.type)||s.type==="ss"&&!["aes-128-gcm","aes-192-gcm","aes-256-gcm","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-ctr","aes-192-ctr","aes-256-ctr","rc4-md5","chacha20-ietf","xchacha20","chacha20-ietf-poly1305","xchacha20-ietf-poly1305","2022-blake3-aes-128-gcm","2022-blake3-aes-256-gcm"].includes(s.cipher)||s.type==="snell"&&s.version>=4||s.type==="vless"&&s["reality-opts"]&&!["xtls-rprx-vision"].includes(s.flow)?!1:s["underlying-proxy"]||s["dialer-proxy"]?(R.error(`Stash \u6682\u4E0D\u652F\u6301\u524D\u7F6E\u4EE3\u7406\u5B57\u6BB5. \u5DF2\u8FC7\u6EE4\u8282\u70B9 ${s.name}. \u8BF7\u4F7F\u7528 \u4EE3\u7406\u7684\u8F6C\u53D1\u94FE https://stash.wiki/proxy-protocols/proxy-groups#relay`),!1):!0).map(s=>{if(s.type==="vmess"?(ue(s,"aead")&&(s.aead&&(s.alterId=0),delete s.aead),ue(s,"sni")&&(s.servername=s.sni,delete s.sni),ue(s,"cipher")&&!["auto","aes-128-gcm","chacha20-poly1305","none"].includes(s.cipher)&&(s.cipher="auto")):s.type==="tuic"?(ue(s,"alpn")?s.alpn=Array.isArray(s.alpn)?s.alpn:[s.alpn]:s.alpn=["h3"],ue(s,"tfo")&&!ue(s,"fast-open")&&(s["fast-open"]=s.tfo,delete s.tfo),(!s.token||s.token.length===0)&&!ue(s,"version")&&(s.version=5)):s.type==="hysteria"?(ue(s,"auth_str")&&!ue(s,"auth-str")&&(s["auth-str"]=s.auth_str),ue(s,"alpn")&&(s.alpn=Array.isArray(s.alpn)?s.alpn:[s.alpn]),ue(s,"tfo")&&!ue(s,"fast-open")&&(s["fast-open"]=s.tfo,delete s.tfo),ue(s,"down")&&!ue(s,"down-speed")&&(s["down-speed"]=s.down,delete s.down),ue(s,"up")&&!ue(s,"up-speed")&&(s["up-speed"]=s.up,delete s.up),ue(s,"down-speed")&&(s["down-speed"]=`${s["down-speed"]}`.match(/\d+/)?.[0]||0),ue(s,"up-speed")&&(s["up-speed"]=`${s["up-speed"]}`.match(/\d+/)?.[0]||0)):s.type==="hysteria2"?(ue(s,"password")&&!ue(s,"auth")&&(s.auth=s.password,delete s.password),ue(s,"tfo")&&!ue(s,"fast-open")&&(s["fast-open"]=s.tfo,delete s.tfo),ue(s,"down")&&!ue(s,"down-speed")&&(s["down-speed"]=s.down,delete s.down),ue(s,"up")&&!ue(s,"up-speed")&&(s["up-speed"]=s.up,delete s.up),ue(s,"down-speed")&&(s["down-speed"]=`${s["down-speed"]}`.match(/\d+/)?.[0]||0),ue(s,"up-speed")&&(s["up-speed"]=`${s["up-speed"]}`.match(/\d+/)?.[0]||0)):s.type==="wireguard"?(s.keepalive=s.keepalive??s["persistent-keepalive"],s["persistent-keepalive"]=s.keepalive,s["preshared-key"]=s["preshared-key"]??s["pre-shared-key"],s["pre-shared-key"]=s["preshared-key"]):s.type==="snell"&&s.version<3?delete s.udp:s.type==="vless"&&ue(s,"sni")&&(s.servername=s.sni,delete s.sni),["vmess","vless"].includes(s.type)&&s.network==="http"){let u=s["http-opts"]?.path;ue(s,"http-opts.path")&&!Array.isArray(u)&&(s["http-opts"].path=[u]);let c=s["http-opts"]?.headers?.Host;ue(s,"http-opts.headers.Host")&&!Array.isArray(c)&&(s["http-opts"].headers.Host=[c])}if(["vmess","vless"].includes(s.type)&&s.network==="h2"){let u=s["h2-opts"]?.path;ue(s,"h2-opts.path")&&Array.isArray(u)&&(s["h2-opts"].path=u[0]);let c=s["h2-opts"]?.headers?.host;ue(s,"h2-opts.headers.Host")&&!Array.isArray(c)&&(s["h2-opts"].headers.host=[c])}if(["ws"].includes(s.network)){let u=s[`${s.network}-opts`]?.path;if(u){let c=/^(.*?)(?:\?ed=(\d+))?$/,[f,h="",g=""]=c.exec(u);s[`${s.network}-opts`].path=h,g!==""&&(s["ws-opts"]["early-data-header-name"]="Sec-WebSocket-Protocol",s["ws-opts"]["max-early-data"]=parseInt(g,10))}else s[`${s.network}-opts`]=s[`${s.network}-opts`]||{},s[`${s.network}-opts`].path="/"}if(s["plugin-opts"]?.tls&&ue(s,"skip-cert-verify")&&(s["plugin-opts"]["skip-cert-verify"]=s["skip-cert-verify"]),["trojan","tuic","hysteria","hysteria2","juicity","anytls"].includes(s.type)&&delete s.tls,s["tls-fingerprint"]&&(s["server-cert-fingerprint"]=s["tls-fingerprint"]),delete s["tls-fingerprint"],ue(s,"tls")&&typeof s.tls!="boolean"&&delete s.tls,s["test-url"]&&(s["benchmark-url"]=s["test-url"],delete s["test-url"]),s["test-timeout"]&&(s["benchmark-timeout"]=s["test-timeout"],delete s["test-timeout"]),delete s.subName,delete s.collectionName,delete s.id,delete s.resolved,delete s["no-resolve"],n!=="internal")for(let u in s)(s[u]==null||/^_/i.test(u))&&delete s[u];return["grpc"].includes(s.network)&&s[`${s.network}-opts`]&&(delete s[`${s.network}-opts`]["_grpc-type"],delete s[`${s.network}-opts`]["_grpc-authority"]),s});return n==="internal"?a:`proxies:
`+a.map(s=>"  - "+JSON.stringify(s)+`
`).join("")}}}var mk="Loon",wu={dual:"dual",ipv4:"v4-only",ipv6:"v6-only","ipv4-prefer":"prefer-v4","ipv6-prefer":"prefer-v6"};function Lm(){return{produce:(t,r,n={})=>{switch(t.type){case"ss":return vk(t);case"ssr":return wk(t);case"trojan":return Ek(t);case"vmess":return Ak(t,n["include-unsupported-proxy"]);case"vless":return yk(t,n["include-unsupported-proxy"]);case"http":return bk(t);case"socks5":return _k(t);case"wireguard":return Ck(t);case"hysteria2":return Dk(t)}throw new Error(`Platform ${mk} does not support proxy type: ${t.type}`)}}}function vk(e){let t=new mt(e);if(!["rc4","rc4-md5","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-ctr","aes-192-ctr","aes-256-ctr","bf-cfb","camellia-128-cfb","camellia-192-cfb","camellia-256-cfb","salsa20","chacha20","chacha20-ietf","aes-128-gcm","aes-192-gcm","aes-256-gcm","chacha20-ietf-poly1305","xchacha20-ietf-poly1305","2022-blake3-aes-128-gcm","2022-blake3-aes-256-gcm"].includes(e.cipher))throw new Error(`cipher ${e.cipher} is not supported`);if(t.append(`${e.name}=shadowsocks,${e.server},${e.port},${e.cipher},"${e.password}"`),ue(e,"plugin")){if(e.plugin==="obfs")t.append(`,obfs-name=${e["plugin-opts"].mode}`),t.appendIfPresent(`,obfs-host=${e["plugin-opts"].host}`,"plugin-opts.host"),t.appendIfPresent(`,obfs-uri=${e["plugin-opts"].path}`,"plugin-opts.path");else if(!["shadow-tls"].includes(e.plugin))throw new Error(`plugin ${e.plugin} is not supported`)}if(ue(e,"shadow-tls-password"))t.append(`,shadow-tls-password=${e["shadow-tls-password"]}`),t.appendIfPresent(`,shadow-tls-version=${e["shadow-tls-version"]}`,"shadow-tls-version"),t.appendIfPresent(`,shadow-tls-sni=${e["shadow-tls-sni"]}`,"shadow-tls-sni"),t.appendIfPresent(`,udp-port=${e["udp-port"]}`,"udp-port");else if(["shadow-tls"].includes(e.plugin)&&e["plugin-opts"]){let n=e["plugin-opts"].password,i=e["plugin-opts"].host,a=e["plugin-opts"].version;if(n){if(t.append(`,shadow-tls-password=${n}`),i&&t.append(`,shadow-tls-sni=${i}`),a){if(a<2)throw new Error(`shadow-tls version ${a} is not supported`);t.append(`,shadow-tls-version=${a}`)}t.appendIfPresent(`,udp-port=${e["udp-port"]}`,"udp-port")}}t.appendIfPresent(`,fast-open=${e.tfo}`,"tfo"),e["block-quic"]==="on"?t.append(",block-quic=true"):e["block-quic"]==="off"&&t.append(",block-quic=false"),e.udp&&t.append(",udp=true");let r=wu[e["ip-version"]]||e["ip-version"];return t.appendIfPresent(`,ip-mode=${r}`,"ip-version"),t.toString()}function wk(e){let t=new mt(e);if(t.append(`${e.name}=shadowsocksr,${e.server},${e.port},${e.cipher},"${e.password}"`),t.append(`,protocol=${e.protocol}`),t.appendIfPresent(`,protocol-param=${e["protocol-param"]}`,"protocol-param"),t.appendIfPresent(`,obfs=${e.obfs}`,"obfs"),t.appendIfPresent(`,obfs-param=${e["obfs-param"]}`,"obfs-param"),ue(e,"shadow-tls-password"))t.append(`,shadow-tls-password=${e["shadow-tls-password"]}`),t.appendIfPresent(`,shadow-tls-version=${e["shadow-tls-version"]}`,"shadow-tls-version"),t.appendIfPresent(`,shadow-tls-sni=${e["shadow-tls-sni"]}`,"shadow-tls-sni"),t.appendIfPresent(`,udp-port=${e["udp-port"]}`,"udp-port");else if(["shadow-tls"].includes(e.plugin)&&e["plugin-opts"]){let n=e["plugin-opts"].password,i=e["plugin-opts"].host,a=e["plugin-opts"].version;if(n){if(t.append(`,shadow-tls-password=${n}`),i&&t.append(`,shadow-tls-sni=${i}`),a){if(a<2)throw new Error(`shadow-tls version ${a} is not supported`);t.append(`,shadow-tls-version=${a}`)}t.appendIfPresent(`,udp-port=${e["udp-port"]}`,"udp-port")}}t.appendIfPresent(`,fast-open=${e.tfo}`,"tfo"),e["block-quic"]==="on"?t.append(",block-quic=true"):e["block-quic"]==="off"&&t.append(",block-quic=false"),e.udp&&t.append(",udp=true");let r=wu[e["ip-version"]]||e["ip-version"];return t.appendIfPresent(`,ip-mode=${r}`,"ip-version"),t.toString()}function Ek(e){let t=new mt(e);if(t.append(`${e.name}=trojan,${e.server},${e.port},"${e.password}"`),e.network==="tcp"&&delete e.network,ue(e,"network"))if(e.network==="ws")t.append(",transport=ws"),t.appendIfPresent(`,path=${e["ws-opts"]?.path}`,"ws-opts.path"),t.appendIfPresent(`,host=${e["ws-opts"]?.headers?.Host}`,"ws-opts.headers.Host");else throw new Error(`network ${e.network} is unsupported`);t.appendIfPresent(`,skip-cert-verify=${e["skip-cert-verify"]}`,"skip-cert-verify"),t.appendIfPresent(`,tls-name=${e.sni}`,"sni"),t.appendIfPresent(`,tls-cert-sha256=${e["tls-fingerprint"]}`,"tls-fingerprint"),t.appendIfPresent(`,tls-pubkey-sha256=${e["tls-pubkey-sha256"]}`,"tls-pubkey-sha256"),t.appendIfPresent(`,fast-open=${e.tfo}`,"tfo"),e["block-quic"]==="on"?t.append(",block-quic=true"):e["block-quic"]==="off"&&t.append(",block-quic=false"),e.udp&&t.append(",udp=true");let r=wu[e["ip-version"]]||e["ip-version"];return t.appendIfPresent(`,ip-mode=${r}`,"ip-version"),t.toString()}function Ak(e){let t=!!e["reality-opts"],r=new mt(e);if(r.append(`${e.name}=vmess,${e.server},${e.port},${e.cipher},"${e.uuid}"`),e.network==="tcp"&&delete e.network,ue(e,"network"))if(e.network==="ws")r.append(",transport=ws"),r.appendIfPresent(`,path=${e["ws-opts"]?.path}`,"ws-opts.path"),r.appendIfPresent(`,host=${e["ws-opts"]?.headers?.Host}`,"ws-opts.headers.Host");else if(e.network==="http"){r.append(",transport=http");let i=e["http-opts"]?.path,a=e["http-opts"]?.headers?.Host;r.appendIfPresent(`,path=${Array.isArray(i)?i[0]:i}`,"http-opts.path"),r.appendIfPresent(`,host=${Array.isArray(a)?a[0]:a}`,"http-opts.headers.Host")}else throw new Error(`network ${e.network} is unsupported`);else r.append(",transport=tcp");r.appendIfPresent(`,over-tls=${e.tls}`,"tls"),r.appendIfPresent(`,skip-cert-verify=${e["skip-cert-verify"]}`,"skip-cert-verify"),t?(r.appendIfPresent(`,sni=${e.sni}`,"sni"),r.appendIfPresent(`,public-key="${e["reality-opts"]["public-key"]}"`,"reality-opts.public-key"),r.appendIfPresent(`,short-id=${e["reality-opts"]["short-id"]}`,"reality-opts.short-id")):(r.appendIfPresent(`,tls-name=${e.sni}`,"sni"),r.appendIfPresent(`,tls-cert-sha256=${e["tls-fingerprint"]}`,"tls-fingerprint"),r.appendIfPresent(`,tls-pubkey-sha256=${e["tls-pubkey-sha256"]}`,"tls-pubkey-sha256")),ue(e,"aead")?r.append(`,alterId=${e.aead?0:1}`):r.append(`,alterId=${e.alterId}`),r.appendIfPresent(`,fast-open=${e.tfo}`,"tfo"),e["block-quic"]==="on"?r.append(",block-quic=true"):e["block-quic"]==="off"&&r.append(",block-quic=false"),e.udp&&r.append(",udp=true");let n=wu[e["ip-version"]]||e["ip-version"];return r.appendIfPresent(`,ip-mode=${n}`,"ip-version"),r.toString()}function yk(e){let t=!1,r=!!e["reality-opts"];if(typeof e.flow<"u")if(["xtls-rprx-vision"].includes(e.flow))t=!0;else throw new Error(`VLESS flow(${e.flow}) is not supported`);let n=new mt(e);if(n.append(`${e.name}=vless,${e.server},${e.port},"${e.uuid}"`),e.network==="tcp"&&delete e.network,ue(e,"network"))if(e.network==="ws")n.append(",transport=ws"),n.appendIfPresent(`,path=${e["ws-opts"]?.path}`,"ws-opts.path"),n.appendIfPresent(`,host=${e["ws-opts"]?.headers?.Host}`,"ws-opts.headers.Host");else if(e.network==="http"){n.append(",transport=http");let a=e["http-opts"]?.path,s=e["http-opts"]?.headers?.Host;n.appendIfPresent(`,path=${Array.isArray(a)?a[0]:a}`,"http-opts.path"),n.appendIfPresent(`,host=${Array.isArray(s)?s[0]:s}`,"http-opts.headers.Host")}else throw new Error(`network ${e.network} is unsupported`);else n.append(",transport=tcp");n.appendIfPresent(`,over-tls=${e.tls}`,"tls"),n.appendIfPresent(`,skip-cert-verify=${e["skip-cert-verify"]}`,"skip-cert-verify"),t&&n.appendIfPresent(`,flow=${e.flow}`,"flow"),r?(n.appendIfPresent(`,sni=${e.sni}`,"sni"),n.appendIfPresent(`,public-key="${e["reality-opts"]["public-key"]}"`,"reality-opts.public-key"),n.appendIfPresent(`,short-id=${e["reality-opts"]["short-id"]}`,"reality-opts.short-id")):(n.appendIfPresent(`,tls-name=${e.sni}`,"sni"),n.appendIfPresent(`,tls-cert-sha256=${e["tls-fingerprint"]}`,"tls-fingerprint"),n.appendIfPresent(`,tls-pubkey-sha256=${e["tls-pubkey-sha256"]}`,"tls-pubkey-sha256")),n.appendIfPresent(`,fast-open=${e.tfo}`,"tfo"),e["block-quic"]==="on"?n.append(",block-quic=true"):e["block-quic"]==="off"&&n.append(",block-quic=false"),e.udp&&n.append(",udp=true");let i=wu[e["ip-version"]]||e["ip-version"];return n.appendIfPresent(`,ip-mode=${i}`,"ip-version"),n.toString()}function bk(e){let t=new mt(e),r=e.tls?"https":"http";t.append(`${e.name}=${r},${e.server},${e.port}`),t.appendIfPresent(`,${e.username}`,"username"),t.appendIfPresent(`,"${e.password}"`,"password"),t.appendIfPresent(`,sni=${e.sni}`,"sni"),t.appendIfPresent(`,skip-cert-verify=${e["skip-cert-verify"]}`,"skip-cert-verify"),t.appendIfPresent(`,tfo=${e.tfo}`,"tfo"),e["block-quic"]==="on"?t.append(",block-quic=true"):e["block-quic"]==="off"&&t.append(",block-quic=false");let n=wu[e["ip-version"]]||e["ip-version"];return t.appendIfPresent(`,ip-mode=${n}`,"ip-version"),t.toString()}function _k(e){let t=new mt(e);t.append(`${e.name}=socks5,${e.server},${e.port}`),t.appendIfPresent(`,${e.username}`,"username"),t.appendIfPresent(`,"${e.password}"`,"password"),t.appendIfPresent(`,over-tls=${e.tls}`,"tls"),t.appendIfPresent(`,sni=${e.sni}`,"sni"),t.appendIfPresent(`,skip-cert-verify=${e["skip-cert-verify"]}`,"skip-cert-verify"),t.appendIfPresent(`,tfo=${e.tfo}`,"tfo"),e["block-quic"]==="on"?t.append(",block-quic=true"):e["block-quic"]==="off"&&t.append(",block-quic=false"),e.udp&&t.append(",udp=true");let r=wu[e["ip-version"]]||e["ip-version"];return t.appendIfPresent(`,ip-mode=${r}`,"ip-version"),t.toString()}function Ck(e){Array.isArray(e.peers)&&e.peers.length>0&&(e.server=e.peers[0].server,e.port=e.peers[0].port,e.ip=e.peers[0].ip,e.ipv6=e.peers[0].ipv6,e["public-key"]=e.peers[0]["public-key"],e["preshared-key"]=e.peers[0]["pre-shared-key"],e["allowed-ips"]=e.peers[0]["allowed-ips"],e.reserved=e.peers[0].reserved);let t=new mt(e);if(t.append(`${e.name}=wireguard`),t.appendIfPresent(`,interface-ip=${e.ip}`,"ip"),t.appendIfPresent(`,interface-ipv6=${e.ipv6}`,"ipv6"),t.appendIfPresent(`,private-key="${e["private-key"]}"`,"private-key"),t.appendIfPresent(`,mtu=${e.mtu}`,"mtu"),e.dns&&Array.isArray(e.dns)){e.dnsv6=e.dns.find(u=>Mr(u));let s=e.dns.find(u=>Wr(u));s||(s=e.dns.find(u=>!Wr(u)&&!Mr(u))),e.dns=s}t.appendIfPresent(`,dns=${e.dns}`,"dns"),t.appendIfPresent(`,dnsv6=${e.dnsv6}`,"dnsv6"),t.appendIfPresent(`,keepalive=${e["persistent-keepalive"]}`,"persistent-keepalive"),t.appendIfPresent(`,keepalive=${e.keepalive}`,"keepalive");let r=Array.isArray(e["allowed-ips"])?e["allowed-ips"].join(","):e["allowed-ips"],n=Array.isArray(e.reserved)?e.reserved.join(","):e.reserved;n&&(n=`,reserved=[${n}]`);let i=e["preshared-key"]??e["pre-shared-key"];i&&(i=`,preshared-key="${i}"`),t.append(`,peers=[{public-key="${e["public-key"]}",allowed-ips="${r??"0.0.0.0/0,::/0"}",endpoint=${e.server}:${e.port}${n??""}${i??""}}]`);let a=wu[e["ip-version"]]||e["ip-version"];return t.appendIfPresent(`,ip-mode=${a}`,"ip-version"),e["block-quic"]==="on"?t.append(",block-quic=true"):e["block-quic"]==="off"&&t.append(",block-quic=false"),t.toString()}function Dk(e){if(e["obfs-password"]&&e.obfs!="salamander")throw new Error("only salamander obfs is supported");let t=new mt(e);t.append(`${e.name}=Hysteria2,${e.server},${e.port}`),t.appendIfPresent(`,"${e.password}"`,"password"),t.appendIfPresent(`,tls-name=${e.sni}`,"sni"),t.appendIfPresent(`,tls-cert-sha256=${e["tls-fingerprint"]}`,"tls-fingerprint"),t.appendIfPresent(`,tls-pubkey-sha256=${e["tls-pubkey-sha256"]}`,"tls-pubkey-sha256"),t.appendIfPresent(`,skip-cert-verify=${e["skip-cert-verify"]}`,"skip-cert-verify"),e["obfs-password"]&&e.obfs=="salamander"&&t.append(`,salamander-password=${e["obfs-password"]}`),t.appendIfPresent(`,fast-open=${e.tfo}`,"tfo"),e["block-quic"]==="on"?t.append(",block-quic=true"):e["block-quic"]==="off"&&t.append(",block-quic=false"),e.udp&&t.append(",udp=true"),t.appendIfPresent(`,download-bandwidth=${`${e.down}`.match(/\d+/)?.[0]||0}`,"down"),t.appendIfPresent(`,ecn=${e.ecn}`,"ecn");let r=wu[e["ip-version"]]||e["ip-version"];return t.appendIfPresent(`,ip-mode=${r}`,"ip-version"),t.toString()}var BX=Yr(eF());function tF(e){let t="none",r=e["reality-opts"],n="",i="",a="";if(r){t="reality";let C=e["reality-opts"]?.["public-key"];C&&(i=`&pbk=${encodeURIComponent(C)}`);let F=e["reality-opts"]?.["short-id"];F&&(n=`&sid=${encodeURIComponent(F)}`);let U=e["reality-opts"]?.["_spider-x"];U&&(a=`&spx=${encodeURIComponent(U)}`)}else e.tls&&(t="tls");let s="";e.alpn&&(s=`&alpn=${encodeURIComponent(Array.isArray(e.alpn)?e.alpn:e.alpn.join(","))}`);let u="";e["skip-cert-verify"]&&(u="&allowInsecure=1");let c="";e.sni&&(c=`&sni=${encodeURIComponent(e.sni)}`);let f="";e["client-fingerprint"]&&(f=`&fp=${encodeURIComponent(e["client-fingerprint"])}`);let h="";e.flow&&(h=`&flow=${encodeURIComponent(e.flow)}`);let g="";e._extra&&(g=`&extra=${encodeURIComponent(e._extra)}`);let p="";e._mode&&(p=`&mode=${encodeURIComponent(e._mode)}`);let d="";e._pqv&&(d=`&pqv=${encodeURIComponent(e._pqv)}`);let w="";e._encryption&&(w=`&encryption=${encodeURIComponent(e._encryption)}`);let v=e.network;e.network==="ws"&&e["ws-opts"]?.["v2ray-http-upgrade"]&&(v="httpupgrade");let b=`&type=${encodeURIComponent(v)}`;if(["grpc"].includes(e.network)){b+=`&mode=${encodeURIComponent(e[`${e.network}-opts`]?.["_grpc-type"]||"gun")}`;let C=e[`${e.network}-opts`]?.["_grpc-authority"];C&&(b+=`&authority=${encodeURIComponent(C)}`)}let m=e[`${e.network}-opts`]?.[`${e.network}-service-name`],y=e[`${e.network}-opts`]?.path,D=e[`${e.network}-opts`]?.headers?.Host;return y&&(b+=`&path=${encodeURIComponent(Array.isArray(y)?y[0]:y)}`),D&&(b+=`&host=${encodeURIComponent(Array.isArray(D)?D[0]:D)}`),m&&(b+=`&serviceName=${encodeURIComponent(m)}`),e.network==="kcp"&&(e.seed&&(b+=`&seed=${encodeURIComponent(e.seed)}`),e.headerType&&(b+=`&headerType=${encodeURIComponent(e.headerType)}`)),`vless://${e.uuid}@${e.server}:${e.port}?security=${encodeURIComponent(t)}${b}${s}${u}${c}${f}${h}${n}${a}${i}${p}${g}${d}${w}#${encodeURIComponent(e.name)}`}function Yl(){return{type:"SINGLE",produce:r=>{let n="";delete r.subName,delete r.collectionName,delete r.id,delete r.resolved,delete r["no-resolve"];for(let i in r)r[i]==null&&delete r[i];switch(["trojan","tuic","hysteria","hysteria2","juicity"].includes(r.type)&&delete r.tls,!["vmess"].includes(r.type)&&r.server&&Mr(r.server)&&(r.server=`[${r.server}]`),r.type){case"socks5":n=`socks://${encodeURIComponent(ft.encode(`${r.username??""}:${r.password??""}`))}@${r.server}:${r.port}#${r.name}`;break;case"ss":let i=`${r.cipher}:${r.password}`;if(n=`ss://${r.cipher?.startsWith("2022-blake3-")?`${encodeURIComponent(r.cipher)}:${encodeURIComponent(r.password)}`:ft.encode(i)}@${r.server}:${r.port}${r.plugin?"/":""}`,r.plugin){n+="?plugin=";let P=r["plugin-opts"];switch(r.plugin){case"obfs":n+=encodeURIComponent(`simple-obfs;obfs=${P.mode}${P.host?";obfs-host="+P.host:""}`);break;case"v2ray-plugin":n+=encodeURIComponent(`v2ray-plugin;obfs=${P.mode}${P.host?";obfs-host"+P.host:""}${P.tls?";tls":""}`);break;case"shadow-tls":n+=encodeURIComponent(`shadow-tls;host=${P.host};password=${P.password};version=${P.version}`);break;default:throw new Error(`Unsupported plugin option: ${r.plugin}`)}}r["udp-over-tcp"]&&(n=`${n}${r.plugin?"&":"?"}uot=1`),r.tfo&&(n=`${n}${r.plugin||r["udp-over-tcp"]?"&":"?"}tfo=1`),n+=`#${encodeURIComponent(r.name)}`;break;case"ssr":n=`${r.server}:${r.port}:${r.protocol}:${r.cipher}:${r.obfs}:${ft.encode(r.password)}/`,n+=`?remarks=${ft.encode(r.name)}${r["obfs-param"]?"&obfsparam="+ft.encode(r["obfs-param"]):""}${r["protocol-param"]?"&protocolparam="+ft.encode(r["protocol-param"]):""}`,n="ssr://"+ft.encode(n);break;case"vmess":let a="",s=r.network||"tcp";if(r.network==="http"?(s="tcp",a="http"):r.network==="ws"&&r["ws-opts"]?.["v2ray-http-upgrade"]&&(s="httpupgrade"),n={v:"2",ps:r.name,add:r.server,port:`${r.port}`,id:r.uuid,aid:`${r.alterId||0}`,scy:r.cipher,net:s,type:a,tls:r.tls?"tls":"",alpn:Array.isArray(r.alpn)?r.alpn.join(","):r.alpn,fp:r["client-fingerprint"]},r.tls&&r.sni&&(n.sni=r.sni),r.network){let P=r[`${r.network}-opts`]?.path,j=r[`${r.network}-opts`]?.headers?.Host;["grpc"].includes(r.network)?(n.path=r[`${r.network}-opts`]?.["grpc-service-name"],n.type=r[`${r.network}-opts`]?.["_grpc-type"]||"gun",n.host=r[`${r.network}-opts`]?.["_grpc-authority"]):["kcp","quic"].includes(r.network)?(n.type=r[`${r.network}-opts`]?.[`_${r.network}-type`]||"none",n.host=r[`${r.network}-opts`]?.[`_${r.network}-host`],n.path=r[`${r.network}-opts`]?.[`_${r.network}-path`]):(P&&(n.path=Array.isArray(P)?P[0]:P),j&&(n.host=Array.isArray(j)?j[0]:j))}n="vmess://"+ft.encode(JSON.stringify(n));break;case"vless":n=tF(r);break;case"trojan":let u="";if(r.network){let P=r.network;if(r.network==="ws"&&r["ws-opts"]?.["v2ray-http-upgrade"]&&(P="httpupgrade"),u=`&type=${encodeURIComponent(P)}`,["grpc"].includes(r.network)){let M=r[`${r.network}-opts`]?.[`${r.network}-service-name`],z=r[`${r.network}-opts`]?.["_grpc-authority"];M&&(u+=`&serviceName=${encodeURIComponent(M)}`),z&&(u+=`&authority=${encodeURIComponent(z)}`),u+=`&mode=${encodeURIComponent(r[`${r.network}-opts`]?.["_grpc-type"]||"gun")}`}let j=r[`${r.network}-opts`]?.path,Y=r[`${r.network}-opts`]?.headers?.Host;j&&(u+=`&path=${encodeURIComponent(Array.isArray(j)?j[0]:j)}`),Y&&(u+=`&host=${encodeURIComponent(Array.isArray(Y)?Y[0]:Y)}`)}let c="";r["client-fingerprint"]&&(c=`&fp=${encodeURIComponent(r["client-fingerprint"])}`);let f="";r.alpn&&(f=`&alpn=${encodeURIComponent(Array.isArray(r.alpn)?r.alpn:r.alpn.join(","))}`);let h=r["reality-opts"],g="",p="",d="",w="",v="",b="";if(h){w="&security=reality";let P=r["reality-opts"]?.["public-key"];P&&(p=`&pbk=${encodeURIComponent(P)}`);let j=r["reality-opts"]?.["short-id"];j&&(g=`&sid=${encodeURIComponent(j)}`);let Y=r["reality-opts"]?.["_spider-x"];Y&&(d=`&spx=${encodeURIComponent(Y)}`),r._extra&&(b=`&extra=${encodeURIComponent(r._extra)}`),r._mode&&(v=`&mode=${encodeURIComponent(r._mode)}`)}n=`trojan://${r.password}@${r.server}:${r.port}?sni=${encodeURIComponent(r.sni||r.server)}${r["skip-cert-verify"]?"&allowInsecure=1":""}${u}${f}${c}${w}${g}${p}${d}${v}${b}#${encodeURIComponent(r.name)}`;break;case"hysteria2":let m=[];r["hop-interval"]&&m.push(`hop-interval=${r["hop-interval"]}`),r.keepalive&&m.push(`keepalive=${r.keepalive}`),r["skip-cert-verify"]&&m.push("insecure=1"),r.obfs&&(m.push(`obfs=${encodeURIComponent(r.obfs)}`),r["obfs-password"]&&m.push(`obfs-password=${encodeURIComponent(r["obfs-password"])}`)),r.sni&&m.push(`sni=${encodeURIComponent(r.sni)}`),r.ports&&m.push(`mport=${r.ports}`),r["tls-fingerprint"]&&m.push(`pinSHA256=${encodeURIComponent(r["tls-fingerprint"])}`),r.tfo&&m.push("fastopen=1"),n=`hysteria2://${encodeURIComponent(r.password)}@${r.server}:${r.port}?${m.join("&")}#${encodeURIComponent(r.name)}`;break;case"hysteria":let y=[];Object.keys(r).forEach(P=>{if(!["name","type","server","port"].includes(P)){let j=P.replace(/-/,"_");["alpn"].includes(P)?r[P]&&y.push(`${j}=${encodeURIComponent(Array.isArray(r[P])?r[P][0]:r[P])}`):["skip-cert-verify"].includes(P)?r[P]&&y.push("insecure=1"):["tfo","fast-open"].includes(P)?r[P]&&!y.includes("fastopen=1")&&y.push("fastopen=1"):["ports"].includes(P)?y.push(`mport=${r[P]}`):["auth-str"].includes(P)?y.push(`auth=${r[P]}`):["up"].includes(P)?y.push(`upmbps=${r[P]}`):["down"].includes(P)?y.push(`downmbps=${r[P]}`):["_obfs"].includes(P)?y.push(`obfs=${r[P]}`):["obfs"].includes(P)?y.push(`obfsParam=${r[P]}`):["sni"].includes(P)?y.push(`peer=${r[P]}`):r[P]&&!/^_/i.test(P)&&y.push(`${j}=${encodeURIComponent(r[P])}`)}}),n=`hysteria://${r.server}:${r.port}?${y.join("&")}#${encodeURIComponent(r.name)}`;break;case"tuic":if(!r.token||r.token.length===0){let P=[];Object.keys(r).forEach(j=>{if(!["name","type","uuid","password","server","port","tls"].includes(j)){let Y=j.replace(/-/,"_");["alpn"].includes(j)?r[j]&&P.push(`${Y}=${encodeURIComponent(Array.isArray(r[j])?r[j][0]:r[j])}`):["skip-cert-verify"].includes(j)?r[j]&&P.push("allow_insecure=1"):["tfo","fast-open"].includes(j)?r[j]&&!P.includes("fast_open=1")&&P.push("fast_open=1"):["disable-sni","reduce-rtt"].includes(j)&&r[j]?P.push(`${Y.replace(/-/g,"_")}=1`):["congestion-controller"].includes(j)?P.push(`congestion_control=${r[j]}`):r[j]&&!/^_/i.test(j)&&P.push(`${Y.replace(/-/g,"_")}=${encodeURIComponent(r[j])}`)}}),n=`tuic://${encodeURIComponent(r.uuid)}:${encodeURIComponent(r.password)}@${r.server}:${r.port}?${P.join("&")}#${encodeURIComponent(r.name)}`}break;case"anytls":n=tF({...r,uuid:r.password,network:r.network||"tcp"}).replace("vless","anytls");let D=[];Object.keys(r).forEach(P=>{if(!["name","type","password","server","port","tls"].includes(P)){let j=P.replace(/-/,"_");["alpn"].includes(P)?r[P]&&D.push(`${j}=${encodeURIComponent(Array.isArray(r[P])?r[P][0]:r[P])}`):["skip-cert-verify"].includes(P)?r[P]&&D.push("insecure=1"):["udp"].includes(P)?r[P]&&D.push("udp=1"):r[P]&&!/^_|client-fingerprint/i.test(P)&&["number","string","boolean"].includes(typeof r[P])&&D.push(`${j.replace(/-/g,"_")}=${encodeURIComponent(r[P])}`)}});let C=n.split("?"),F=C[0],U={};C.length>1&&C[1].split("#")[0].split("&").forEach(Y=>{let[M,z]=Y.split("=");M&&(U[M]=z)}),D.forEach(P=>{let[j,Y]=P.split("=");j&&(U[j]=Y)});let k=Object.keys(U).map(P=>`${P}=${U[P]}`).join("&"),S=n.match(/#(.*)$/),B=S?`#${S[1]}`:"";n=`${F}?${k}${B}`;break;case"wireguard":let T=[];Object.keys(r).forEach(P=>{["name","type","server","port","ip","ipv6","private-key"].includes(P)||(["public-key"].includes(P)?T.push(`publickey=${r[P]}`):["udp"].includes(P)?r[P]&&T.push(`${P}=1`):r[P]&&!/^_/i.test(P)&&T.push(`${P}=${encodeURIComponent(r[P])}`))}),r.ip&&r.ipv6?T.push(`address=${r.ip}/32,${r.ipv6}/128`):r.ip?T.push(`address=${r.ip}/32`):r.ipv6&&T.push(`address=${r.ipv6}/128`),n=`wireguard://${encodeURIComponent(r["private-key"])}@${r.server}:${r.port}/?${T.join("&")}#${encodeURIComponent(r.name)}`;break}return n}}}var MM=Yl();function Th(){return{type:"ALL",produce:r=>{let n=[];return r.map(i=>{try{n.push(MM.produce(i))}catch(a){R.error(`Cannot produce proxy: ${JSON.stringify(i,null,2)}
Reason: ${a}`)}}),ft.encode(n.join(`
`))}}}var qM="QX";function Nh(){return{produce:(t,r,n={})=>{switch(t.type){case"ss":return VM(t);case"ssr":return KM(t);case"trojan":return zM(t);case"vmess":return GM(t);case"http":return WM(t);case"socks5":return XM(t);case"vless":return YM(t)}throw new Error(`Platform ${qM} does not support proxy type: ${t.type}`)}}}function VM(e){let t=new mt(e),r=t.append.bind(t),n=t.appendIfPresent.bind(t);if(e.cipher||(e.cipher="none"),!["none","rc4-md5","rc4-md5-6","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-ctr","aes-192-ctr","aes-256-ctr","bf-cfb","cast5-cfb","des-cfb","rc2-cfb","salsa20","chacha20","chacha20-ietf","aes-128-gcm","aes-192-gcm","aes-256-gcm","chacha20-ietf-poly1305","xchacha20-ietf-poly1305","2022-blake3-aes-128-gcm","2022-blake3-aes-256-gcm"].includes(e.cipher))throw new Error(`cipher ${e.cipher} is not supported`);if(r(`shadowsocks=${e.server}:${e.port}`),r(`,method=${e.cipher}`),r(`,password=${e.password}`),ts(e)&&(e.tls=!0),ue(e,"plugin")){if(e.plugin==="obfs"){let i=e["plugin-opts"];r(`,obfs=${i.mode}`)}else if(e.plugin==="v2ray-plugin"&&e["plugin-opts"].mode==="websocket")e["plugin-opts"].tls?r(",obfs=wss"):r(",obfs=ws");else throw new Error("plugin is not supported");n(`,obfs-host=${e["plugin-opts"].host}`,"plugin-opts.host"),n(`,obfs-uri=${e["plugin-opts"].path}`,"plugin-opts.path")}return ts(e)&&(n(`,tls-pubkey-sha256=${e["tls-pubkey-sha256"]}`,"tls-pubkey-sha256"),n(`,tls-alpn=${e["tls-alpn"]}`,"tls-alpn"),n(`,tls-no-session-ticket=${e["tls-no-session-ticket"]}`,"tls-no-session-ticket"),n(`,tls-no-session-reuse=${e["tls-no-session-reuse"]}`,"tls-no-session-reuse"),n(`,tls-cert-sha256=${e["tls-fingerprint"]}`,"tls-fingerprint"),n(`,tls-verification=${!e["skip-cert-verify"]}`,"skip-cert-verify"),n(`,tls-host=${e.sni}`,"sni")),n(`,fast-open=${e.tfo}`,"tfo"),n(`,udp-relay=${e.udp}`,"udp"),e._ssr_python_uot?r(",udp-over-tcp=true"):e["udp-over-tcp"]&&(!e["udp-over-tcp-version"]||e["udp-over-tcp-version"]===1?r(",udp-over-tcp=sp.v1"):e["udp-over-tcp-version"]===2&&r(",udp-over-tcp=sp.v2")),t.appendIfPresent(`,server_check_url=${e["test-url"]}`,"test-url"),r(`,tag=${e.name}`),t.toString()}function KM(e){let t=new mt(e),r=t.append.bind(t),n=t.appendIfPresent.bind(t);return r(`shadowsocks=${e.server}:${e.port}`),r(`,method=${e.cipher}`),r(`,password=${e.password}`),r(`,ssr-protocol=${e.protocol}`),n(`,ssr-protocol-param=${e["protocol-param"]}`,"protocol-param"),n(`,obfs=${e.obfs}`,"obfs"),n(`,obfs-host=${e["obfs-param"]}`,"obfs-param"),n(`,fast-open=${e.tfo}`,"tfo"),n(`,udp-relay=${e.udp}`,"udp"),t.appendIfPresent(`,server_check_url=${e["test-url"]}`,"test-url"),r(`,tag=${e.name}`),t.toString()}function zM(e){let t=new mt(e),r=t.append.bind(t),n=t.appendIfPresent.bind(t);if(r(`trojan=${e.server}:${e.port}`),r(`,password=${e.password}`),ue(e,"network"))if(e.network==="ws")ts(e)?r(",obfs=wss"):r(",obfs=ws"),n(`,obfs-uri=${e["ws-opts"]?.path}`,"ws-opts.path"),n(`,obfs-host=${e["ws-opts"]?.headers?.Host}`,"ws-opts.headers.Host");else throw new Error(`network ${e.network} is unsupported`);return e.network!=="ws"&&ts(e)&&r(",over-tls=true"),ts(e)&&(n(`,tls-pubkey-sha256=${e["tls-pubkey-sha256"]}`,"tls-pubkey-sha256"),n(`,tls-alpn=${e["tls-alpn"]}`,"tls-alpn"),n(`,tls-no-session-ticket=${e["tls-no-session-ticket"]}`,"tls-no-session-ticket"),n(`,tls-no-session-reuse=${e["tls-no-session-reuse"]}`,"tls-no-session-reuse"),n(`,tls-cert-sha256=${e["tls-fingerprint"]}`,"tls-fingerprint"),n(`,tls-verification=${!e["skip-cert-verify"]}`,"skip-cert-verify"),n(`,tls-host=${e.sni}`,"sni")),n(`,fast-open=${e.tfo}`,"tfo"),n(`,udp-relay=${e.udp}`,"udp"),t.appendIfPresent(`,server_check_url=${e["test-url"]}`,"test-url"),r(`,tag=${e.name}`),t.toString()}function GM(e){let t=new mt(e),r=t.append.bind(t),n=t.appendIfPresent.bind(t);r(`vmess=${e.server}:${e.port}`);let i;if(e.cipher==="auto"?i="chacha20-ietf-poly1305":i=e.cipher,r(`,method=${i}`),r(`,password=${e.uuid}`),ts(e)&&(e.tls=!0),ue(e,"network")){if(e.network==="ws")e.tls?r(",obfs=wss"):r(",obfs=ws");else if(e.network==="http")r(",obfs=http");else throw new Error(`network ${e.network} is unsupported`);let a=e[`${e.network}-opts`]?.path,s=e[`${e.network}-opts`]?.headers?.Host;n(`,obfs-uri=${Array.isArray(a)?a[0]:a}`,`${e.network}-opts.path`),n(`,obfs-host=${Array.isArray(s)?s[0]:s}`,`${e.network}-opts.headers.Host`)}else e.tls&&r(",obfs=over-tls");return ts(e)&&(n(`,tls-pubkey-sha256=${e["tls-pubkey-sha256"]}`,"tls-pubkey-sha256"),n(`,tls-alpn=${e["tls-alpn"]}`,"tls-alpn"),n(`,tls-no-session-ticket=${e["tls-no-session-ticket"]}`,"tls-no-session-ticket"),n(`,tls-no-session-reuse=${e["tls-no-session-reuse"]}`,"tls-no-session-reuse"),n(`,tls-cert-sha256=${e["tls-fingerprint"]}`,"tls-fingerprint"),n(`,tls-verification=${!e["skip-cert-verify"]}`,"skip-cert-verify"),n(`,tls-host=${e.sni}`,"sni")),ue(e,"aead")?r(`,aead=${e.aead}`):r(`,aead=${e.alterId===0}`),n(`,fast-open=${e.tfo}`,"tfo"),n(`,udp-relay=${e.udp}`,"udp"),t.appendIfPresent(`,server_check_url=${e["test-url"]}`,"test-url"),r(`,tag=${e.name}`),t.toString()}function YM(e){if(typeof e.flow<"u"||e["reality-opts"])throw new Error("VLESS XTLS/REALITY is not supported");let t=new mt(e),r=t.append.bind(t),n=t.appendIfPresent.bind(t);if(r(`vless=${e.server}:${e.port}`),r(",method=none"),r(`,password=${e.uuid}`),ts(e)&&(e.tls=!0),ue(e,"network")){if(e.network==="ws")e.tls?r(",obfs=wss"):r(",obfs=ws");else if(e.network==="http")r(",obfs=http");else if(["tcp"].includes(e.network))e.tls&&r(",obfs=over-tls");else if(!["tcp"].includes(e.network))throw new Error(`network ${e.network} is unsupported`);let a=e[`${e.network}-opts`]?.path,s=e[`${e.network}-opts`]?.headers?.Host;n(`,obfs-uri=${Array.isArray(a)?a[0]:a}`,`${e.network}-opts.path`),n(`,obfs-host=${Array.isArray(s)?s[0]:s}`,`${e.network}-opts.headers.Host`)}else e.tls&&r(",obfs=over-tls");return ts(e)&&(n(`,tls-pubkey-sha256=${e["tls-pubkey-sha256"]}`,"tls-pubkey-sha256"),n(`,tls-alpn=${e["tls-alpn"]}`,"tls-alpn"),n(`,tls-no-session-ticket=${e["tls-no-session-ticket"]}`,"tls-no-session-ticket"),n(`,tls-no-session-reuse=${e["tls-no-session-reuse"]}`,"tls-no-session-reuse"),n(`,tls-cert-sha256=${e["tls-fingerprint"]}`,"tls-fingerprint"),n(`,tls-verification=${!e["skip-cert-verify"]}`,"skip-cert-verify"),n(`,tls-host=${e.sni}`,"sni")),n(`,fast-open=${e.tfo}`,"tfo"),n(`,udp-relay=${e.udp}`,"udp"),t.appendIfPresent(`,server_check_url=${e["test-url"]}`,"test-url"),r(`,tag=${e.name}`),t.toString()}function WM(e){let t=new mt(e),r=t.append.bind(t),n=t.appendIfPresent.bind(t);return r(`http=${e.server}:${e.port}`),n(`,username=${e.username}`,"username"),n(`,password=${e.password}`,"password"),ts(e)&&(e.tls=!0),n(`,over-tls=${e.tls}`,"tls"),ts(e)&&(n(`,tls-pubkey-sha256=${e["tls-pubkey-sha256"]}`,"tls-pubkey-sha256"),n(`,tls-alpn=${e["tls-alpn"]}`,"tls-alpn"),n(`,tls-no-session-ticket=${e["tls-no-session-ticket"]}`,"tls-no-session-ticket"),n(`,tls-no-session-reuse=${e["tls-no-session-reuse"]}`,"tls-no-session-reuse"),n(`,tls-cert-sha256=${e["tls-fingerprint"]}`,"tls-fingerprint"),n(`,tls-verification=${!e["skip-cert-verify"]}`,"skip-cert-verify"),n(`,tls-host=${e.sni}`,"sni")),n(`,fast-open=${e.tfo}`,"tfo"),n(`,udp-relay=${e.udp}`,"udp"),t.appendIfPresent(`,server_check_url=${e["test-url"]}`,"test-url"),r(`,tag=${e.name}`),t.toString()}function XM(e){let t=new mt(e),r=t.append.bind(t),n=t.appendIfPresent.bind(t);return r(`socks5=${e.server}:${e.port}`),n(`,username=${e.username}`,"username"),n(`,password=${e.password}`,"password"),ts(e)&&(e.tls=!0),n(`,over-tls=${e.tls}`,"tls"),ts(e)&&(n(`,tls-pubkey-sha256=${e["tls-pubkey-sha256"]}`,"tls-pubkey-sha256"),n(`,tls-alpn=${e["tls-alpn"]}`,"tls-alpn"),n(`,tls-no-session-ticket=${e["tls-no-session-ticket"]}`,"tls-no-session-ticket"),n(`,tls-no-session-reuse=${e["tls-no-session-reuse"]}`,"tls-no-session-reuse"),n(`,tls-cert-sha256=${e["tls-fingerprint"]}`,"tls-fingerprint"),n(`,tls-verification=${!e["skip-cert-verify"]}`,"skip-cert-verify"),n(`,tls-host=${e.sni}`,"sni")),n(`,fast-open=${e.tfo}`,"tfo"),n(`,udp-relay=${e.udp}`,"udp"),t.appendIfPresent(`,server_check_url=${e["test-url"]}`,"test-url"),r(`,tag=${e.name}`),t.toString()}function ts(e){return e.tls}function kh(){return{type:"ALL",produce:(r,n,i={})=>{let a=r.filter(s=>i["include-unsupported-proxy"]?!0:s.type==="snell"&&s.version>=4?!1:!["mieru"].includes(s.type)).map(s=>{if(s.type==="vmess")ue(s,"aead")&&(s.aead&&(s.alterId=0),delete s.aead),ue(s,"sni")&&(s.servername=s.sni,delete s.sni),ue(s,"cipher")&&!["auto","none","zero","aes-128-gcm","chacha20-poly1305"].includes(s.cipher)&&(s.cipher="auto");else if(s.type==="tuic")ue(s,"alpn")?s.alpn=Array.isArray(s.alpn)?s.alpn:[s.alpn]:s.alpn=["h3"],ue(s,"tfo")&&!ue(s,"fast-open")&&(s["fast-open"]=s.tfo),(!s.token||s.token.length===0)&&!ue(s,"version")&&(s.version=5);else if(s.type==="hysteria")ue(s,"auth_str")&&!ue(s,"auth-str")&&(s["auth-str"]=s.auth_str),ue(s,"alpn")&&(s.alpn=Array.isArray(s.alpn)?s.alpn:[s.alpn]),ue(s,"tfo")&&!ue(s,"fast-open")&&(s["fast-open"]=s.tfo);else if(s.type==="hysteria2")ue(s,"alpn")&&(s.alpn=Array.isArray(s.alpn)?s.alpn:[s.alpn]),ue(s,"tfo")&&!ue(s,"fast-open")&&(s["fast-open"]=s.tfo);else if(s.type==="wireguard")s.keepalive=s.keepalive??s["persistent-keepalive"],s["persistent-keepalive"]=s.keepalive,s["preshared-key"]=s["preshared-key"]??s["pre-shared-key"],s["pre-shared-key"]=s["preshared-key"];else if(s.type==="snell"&&s.version<3)delete s.udp;else if(s.type==="vless")ue(s,"sni")&&(s.servername=s.sni,delete s.sni);else if(s.type==="ss")ue(s,"shadow-tls-password")&&!ue(s,"plugin")&&(s.plugin="shadow-tls",s["plugin-opts"]={host:s["shadow-tls-sni"],password:s["shadow-tls-password"],version:s["shadow-tls-version"]},delete s["shadow-tls-password"],delete s["shadow-tls-sni"],delete s["shadow-tls-version"]);else if(["anytls"].includes(s.type)&&s.network&&(!["tcp"].includes(s.network)||["tcp"].includes(s.network)&&s["reality-opts"]))return!1;if(["vmess","vless"].includes(s.type)&&s.network==="http"){let u=s["http-opts"]?.path;ue(s,"http-opts.path")&&!Array.isArray(u)&&(s["http-opts"].path=[u]);let c=s["http-opts"]?.headers?.Host;ue(s,"http-opts.headers.Host")&&!Array.isArray(c)&&(s["http-opts"].headers.Host=[c])}if(["vmess","vless"].includes(s.type)&&s.network==="h2"){let u=s["h2-opts"]?.path;ue(s,"h2-opts.path")&&Array.isArray(u)&&(s["h2-opts"].path=u[0]);let c=s["h2-opts"]?.headers?.host;ue(s,"h2-opts.headers.Host")&&!Array.isArray(c)&&(s["h2-opts"].headers.host=[c])}if(["ws"].includes(s.network)){let u=s[`${s.network}-opts`]?.path;if(u){let c=/^(.*?)(?:\?ed=(\d+))?$/,[f,h="",g=""]=c.exec(u);s[`${s.network}-opts`].path=h,g!==""&&(s["ws-opts"]["early-data-header-name"]="Sec-WebSocket-Protocol",s["ws-opts"]["max-early-data"]=parseInt(g,10))}else s[`${s.network}-opts`]=s[`${s.network}-opts`]||{},s[`${s.network}-opts`].path="/"}if(s["plugin-opts"]?.tls&&ue(s,"skip-cert-verify")&&(s["plugin-opts"]["skip-cert-verify"]=s["skip-cert-verify"]),["trojan","tuic","hysteria","hysteria2","juicity","anytls"].includes(s.type)&&delete s.tls,s["tls-fingerprint"]&&(s.fingerprint=s["tls-fingerprint"]),delete s["tls-fingerprint"],s["underlying-proxy"]&&(s["dialer-proxy"]=s["underlying-proxy"]),delete s["underlying-proxy"],ue(s,"tls")&&typeof s.tls!="boolean"&&delete s.tls,delete s.subName,delete s.collectionName,delete s.id,delete s.resolved,delete s["no-resolve"],n!=="internal")for(let u in s)(s[u]==null||/^_/i.test(u))&&delete s[u];return["grpc"].includes(s.network)&&s[`${s.network}-opts`]&&(delete s[`${s.network}-opts`]["_grpc-type"],delete s[`${s.network}-opts`]["_grpc-authority"]),s});return n==="internal"?a:`proxies:
`+a.map(s=>"  - "+JSON.stringify(s)+`
`).join("")}}}var JM="Surfboard";function $p(){return{produce:t=>{switch(t.name=t.name.replace(/=|,/g,""),t.type){case"ss":return ZM(t);case"trojan":return QM(t);case"vmess":return eq(t);case"http":return tq(t);case"socks5":return rq(t);case"wireguard-surge":return nq(t)}throw new Error(`Platform ${JM} does not support proxy type: ${t.type}`)}}}function ZM(e){let t=new mt(e);if(t.append(`${e.name}=${e.type},${e.server},${e.port}`),!["aes-128-gcm","aes-192-gcm","aes-256-gcm","chacha20-ietf-poly1305","xchacha20-ietf-poly1305","rc4","rc4-md5","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-ctr","aes-192-ctr","aes-256-ctr","bf-cfb","camellia-128-cfb","camellia-192-cfb","camellia-256-cfb","salsa20","chacha20","chacha20-ietf"].includes(e.cipher))throw new Error(`cipher ${e.cipher} is not supported`);if(t.append(`,encrypt-method=${e.cipher}`),t.appendIfPresent(`,password=${e.password}`,"password"),ue(e,"plugin"))if(e.plugin==="obfs")t.append(`,obfs=${e["plugin-opts"].mode}`),t.appendIfPresent(`,obfs-host=${e["plugin-opts"].host}`,"plugin-opts.host"),t.appendIfPresent(`,obfs-uri=${e["plugin-opts"].path}`,"plugin-opts.path");else throw new Error(`plugin ${e.plugin} is not supported`);return t.appendIfPresent(`,udp-relay=${e.udp}`,"udp"),t.toString()}function QM(e){let t=new mt(e);return t.append(`${e.name}=${e.type},${e.server},${e.port}`),t.appendIfPresent(`,password=${e.password}`,"password"),rF(t,e),t.appendIfPresent(`,tls=${e.tls}`,"tls"),t.appendIfPresent(`,sni=${e.sni}`,"sni"),t.appendIfPresent(`,skip-cert-verify=${e["skip-cert-verify"]}`,"skip-cert-verify"),t.appendIfPresent(`,tfo=${e.tfo}`,"tfo"),t.appendIfPresent(`,udp-relay=${e.udp}`,"udp"),t.toString()}function eq(e){let t=new mt(e);return t.append(`${e.name}=${e.type},${e.server},${e.port}`),t.appendIfPresent(`,username=${e.uuid}`,"uuid"),rF(t,e),ue(e,"aead")?t.append(`,vmess-aead=${e.aead}`):t.append(`,vmess-aead=${e.alterId===0}`),t.appendIfPresent(`,tls=${e.tls}`,"tls"),t.appendIfPresent(`,sni=${e.sni}`,"sni"),t.appendIfPresent(`,skip-cert-verify=${e["skip-cert-verify"]}`,"skip-cert-verify"),t.appendIfPresent(`,udp-relay=${e.udp}`,"udp"),t.toString()}function tq(e){let t=new mt(e),r=e.tls?"https":"http";return t.append(`${e.name}=${r},${e.server},${e.port}`),t.appendIfPresent(`,${e.username}`,"username"),t.appendIfPresent(`,${e.password}`,"password"),t.appendIfPresent(`,sni=${e.sni}`,"sni"),t.appendIfPresent(`,skip-cert-verify=${e["skip-cert-verify"]}`,"skip-cert-verify"),t.appendIfPresent(`,udp-relay=${e.udp}`,"udp"),t.toString()}function rq(e){let t=new mt(e),r=e.tls?"socks5-tls":"socks5";return t.append(`${e.name}=${r},${e.server},${e.port}`),t.appendIfPresent(`,${e.username}`,"username"),t.appendIfPresent(`,${e.password}`,"password"),t.appendIfPresent(`,sni=${e.sni}`,"sni"),t.appendIfPresent(`,skip-cert-verify=${e["skip-cert-verify"]}`,"skip-cert-verify"),t.appendIfPresent(`,udp-relay=${e.udp}`,"udp"),t.toString()}function nq(e){let t=new mt(e);return t.append(`${e.name}=wireguard`),t.appendIfPresent(`,section-name=${e["section-name"]}`,"section-name"),t.toString()}function rF(e,t){if(ue(t,"network"))if(t.network==="ws"){if(e.append(",ws=true"),ue(t,"ws-opts")&&(e.appendIfPresent(`,ws-path=${t["ws-opts"].path}`,"ws-opts.path"),ue(t,"ws-opts.headers"))){let r=t["ws-opts"].headers,n=Object.keys(r).map(i=>{let a=r[i];return["Host"].includes(i)&&(a=`"${a}"`),`${i}:${a}`}).join("|");oa(n)&&e.append(`,ws-headers=${n}`)}}else throw new Error(`network ${t.network} is unsupported`)}var iq={ipv4:"ipv4_only",ipv6:"ipv6_only","v4-only":"ipv4_only","v6-only":"ipv6_only","ipv4-prefer":"prefer_ipv4","ipv6-prefer":"prefer_ipv6","prefer-v4":"prefer_ipv4","prefer-v6":"prefer_ipv6"},Ti=(e,t)=>{let r=iq[e["ip-version"]];e._dns_server&&r&&(t.domain_resolver={server:e._dns_server,strategy:r})},Ni=(e,t)=>{t.detour=e["dialer-proxy"]||e.detour},Pa=(e,t)=>{["tcp","udp"].includes(e._network)&&(t.network=e._network)},rs=(e,t)=>{t.tcp_fast_open=!1,e.tfo&&(t.tcp_fast_open=!0),e.tcp_fast_open&&(t.tcp_fast_open=!0),e["tcp-fast-open"]&&(t.tcp_fast_open=!0),t.tcp_fast_open||delete t.tcp_fast_open},Oa=(e,t)=>{!e||!e.enabled||(t.multiplex={enabled:!0},t.multiplex.protocol=e.protocol,e["max-connections"]&&(t.multiplex.max_connections=parseInt(`${e["max-connections"]}`,10)),e["max-streams"]&&(t.multiplex.max_streams=parseInt(`${e["max-streams"]}`,10)),e["min-streams"]&&(t.multiplex.min_streams=parseInt(`${e["min-streams"]}`,10)),e.padding&&(t.multiplex.padding=!0),(e["brutal-opts"]?.up||e["brutal-opts"]?.down)&&(t.multiplex.brutal={enabled:!0},e["brutal-opts"]?.up&&(t.multiplex.brutal.up_mbps=parseInt(`${e["brutal-opts"]?.up}`,10)),e["brutal-opts"]?.down&&(t.multiplex.brutal.down_mbps=parseInt(`${e["brutal-opts"]?.down}`,10))))},$2=(e,t)=>{let r={type:"ws",headers:{}};if(e["ws-opts"]){let{path:n="",headers:i={},"max-early-data":a,"early-data-header-name":s}=e["ws-opts"];if(r.early_data_header_name=s,r.max_early_data=a?parseInt(a,10):void 0,n!==""&&(r.path=`${n}`),Object.keys(i).length>0){let u={};for(let f of Object.keys(i)){let h=i[f];h!==""&&(Array.isArray(h)||(h=[`${h}`]),h.length>0&&(u[f]=h))}let{Host:c}=u;if(c.length===1)for(let f of`Host:${c[0]}`.split(`
`)){let[h,g]=f.split(":");g.trim()!==""&&(u[h.trim()]=g.trim().split(","))}r.headers=u}}if(e["ws-headers"]){let n={};for(let a of Object.keys(e["ws-headers"])){let s=e["ws-headers"][a];s!==""&&(Array.isArray(s)||(s=[`${s}`]),s.length>0&&(n[a]=s))}let{Host:i}=n;if(i.length===1)for(let a of`Host:${i[0]}`.split(`
`)){let[s,u]=a.split(":");u.trim()!==""&&(n[s.trim()]=u.trim().split(","))}for(let a of Object.keys(n))r.headers[a]=n[a]}if(e["ws-path"]&&e["ws-path"]!==""&&(r.path=`${e["ws-path"]}`),r.path){let n=/^(.*?)(?:\?ed=(\d+))?$/,[i,a="",s=""]=n.exec(r.path);r.path=a,s!==""&&(r.early_data_header_name="Sec-WebSocket-Protocol",r.max_early_data=parseInt(s,10))}t.tls.insecure&&(t.tls.server_name=r.headers.Host[0]),e["ws-opts"]&&e["ws-opts"]["v2ray-http-upgrade"]&&(r.type="httpupgrade",r.headers.Host&&(r.host=r.headers.Host[0],delete r.headers.Host),r.max_early_data&&delete r.max_early_data,r.early_data_header_name&&delete r.early_data_header_name);for(let n of Object.keys(r.headers)){let i=r.headers[n];i.length===1&&(r.headers[n]=i[0])}t.transport=r},nF=(e,t)=>{let r={type:"http",headers:{}};if(e["http-opts"]){let{method:n="",path:i="",headers:a={}}=e["http-opts"];n!==""&&(r.method=n),Array.isArray(i)?r.path=`${i[0]}`:i!==""&&(r.path=`${i}`);for(let s of Object.keys(a)){let u=a[s];if(u!==""){if(s.toLowerCase()==="host"){let c=u;Array.isArray(c)||(c=`${c}`.split(",").map(f=>f.trim())),c.length>0&&(r.host=c);continue}Array.isArray(u)||(u=`${u}`.split(",").map(c=>c.trim())),u.length>0&&(r.headers[s]=u)}}}if(e["http-host"]&&e["http-host"]!==""){let n=e["http-host"];Array.isArray(n)||(n=`${n}`.split(",").map(i=>i.trim())),n.length>0&&(r.host=n)}if(e["http-path"]&&e["http-path"]!==""){let n=e["http-path"];Array.isArray(n)?r.path=`${n[0]}`:n!==""&&(r.path=`${n}`)}t.tls.insecure&&(t.tls.server_name=r.host[0]),r.host?.length===1&&(r.host=r.host[0]);for(let n of Object.keys(r.headers)){let i=r.headers[n];i.length===1&&(r.headers[n]=i[0])}t.transport=r},iF=(e,t)=>{let r={type:"http"};if(e["h2-opts"]){let{host:n="",path:i=""}=e["h2-opts"];i!==""&&(r.path=`${i}`),n!==""&&(Array.isArray(n)||(n=`${n}`.split(",").map(a=>a.trim())),n.length>0&&(r.host=n))}if(e["h2-host"]&&e["h2-host"]!==""){let n=e["h2-host"];Array.isArray(n)||(n=`${n}`.split(",").map(i=>i.trim())),n.length>0&&(r.host=n)}e["h2-path"]&&e["h2-path"]!==""&&(r.path=`${e["h2-path"]}`),t.tls.enabled=!0,t.tls.insecure&&(t.tls.server_name=r.host[0]),r.host.length===1&&(r.host=r.host[0]),t.transport=r},R2=(e,t)=>{let r={type:"grpc"};if(e["grpc-opts"]){let n=e["grpc-opts"]["grpc-service-name"];n!=null&&n!==""&&(r.service_name=`${n}`)}t.transport=r},fo=(e,t)=>{e.tls&&(t.tls.enabled=!0),e.servername&&e.servername!==""&&(t.tls.server_name=e.servername),e.peer&&e.peer!==""&&(t.tls.server_name=e.peer),e.sni&&e.sni!==""&&(t.tls.server_name=e.sni),e["skip-cert-verify"]&&(t.tls.insecure=!0),e.insecure&&(t.tls.insecure=!0),e["disable-sni"]&&(t.tls.disable_sni=!0),typeof e.alpn=="string"?t.tls.alpn=[e.alpn]:Array.isArray(e.alpn)&&(t.tls.alpn=e.alpn),e.ca&&(t.tls.certificate_path=`${e.ca}`),e.ca_str&&(t.tls.certificate=[e.ca_str]),e["ca-str"]&&(t.tls.certificate=[e["ca-str"]]),e["reality-opts"]&&(t.tls.reality={enabled:!0},e["reality-opts"]["public-key"]&&(t.tls.reality.public_key=e["reality-opts"]["public-key"]),e["reality-opts"]["short-id"]&&(t.tls.reality.short_id=e["reality-opts"]["short-id"]),t.tls.utls={enabled:!0}),!["hysteria","hysteria2","tuic"].includes(e.type)&&e["client-fingerprint"]&&e["client-fingerprint"]!==""&&(t.tls.utls={enabled:!0,fingerprint:e["client-fingerprint"]}),t.tls.enabled||delete t.tls},sq=(e={})=>{let t={tag:e.name,type:"ssh",server:e.server,server_port:parseInt(`${e.port}`,10)};if(t.server_port<0||t.server_port>65535)throw"invalid port";return e.username&&(t.user=e.username),e.password&&(t.password=e.password),e.privateKey&&(t.private_key_path=e.privateKey),e["private-key"]&&(t.private_key_path=e["private-key"]),e["private-key-passphrase"]&&(t.private_key_passphrase=e["private-key-passphrase"]),e["server-fingerprint"]&&(t.host_key=[e["server-fingerprint"]],t.host_key_algorithms=[e["server-fingerprint"].split(" ")[0]]),e["host-key"]&&(t.host_key=e["host-key"]),e["host-key-algorithms"]&&(t.host_key_algorithms=e["host-key-algorithms"]),e["fast-open"]&&(t.udp_fragment=!0),rs(e,t),Ni(e,t),Ti(e,t),t},aq=(e={})=>{let t={tag:e.name,type:"http",server:e.server,server_port:parseInt(`${e.port}`,10),tls:{enabled:!1,server_name:e.server,insecure:!1}};if(t.server_port<0||t.server_port>65535)throw"invalid port";if(e.username&&(t.username=e.username),e.password&&(t.password=e.password),e.headers){t.headers={};for(let r of Object.keys(e.headers))t.headers[r]=`${e.headers[r]}`;Object.keys(t.headers).length===0&&delete t.headers}return e["fast-open"]&&(t.udp_fragment=!0),rs(e,t),Ni(e,t),fo(e,t),Ti(e,t),t},uq=(e={})=>{let t={tag:e.name,type:"socks",server:e.server,server_port:parseInt(`${e.port}`,10),password:e.password,version:"5"};if(t.server_port<0||t.server_port>65535)throw"invalid port";return e.username&&(t.username=e.username),e.password&&(t.password=e.password),e.uot&&(t.udp_over_tcp=!0),e["udp-over-tcp"]&&(t.udp_over_tcp=!0),e["fast-open"]&&(t.udp_fragment=!0),Pa(e,t),rs(e,t),Ni(e,t),Ti(e,t),t},oq=(e={})=>{let t={tag:e.name,type:"shadowsocks",method:e.cipher,password:e.password,detour:`${e.name}_shadowtls`};e.uot&&(t.udp_over_tcp=!0),e["udp-over-tcp"]&&(t.udp_over_tcp={enabled:!0,version:!e["udp-over-tcp-version"]||e["udp-over-tcp-version"]===1?1:2});let r={tag:`${e.name}_shadowtls`,type:"shadowtls",server:e.server,server_port:parseInt(`${e.port}`,10),version:e["plugin-opts"].version,password:e["plugin-opts"].password,tls:{enabled:!0,server_name:e["plugin-opts"].host,utls:{enabled:!0,fingerprint:e["client-fingerprint"]}}};if(r.server_port<0||r.server_port>65535)throw"\u7AEF\u53E3\u503C\u975E\u6CD5";return e["fast-open"]===!0&&(r.udp_fragment=!0),rs(e,r),Ni(e,r),Oa(e.smux,t),Ti(e,r),{type:"ss-with-st",ssPart:t,stPart:r}},cq=(e={})=>{let t={tag:e.name,type:"shadowsocks",server:e.server,server_port:parseInt(`${e.port}`,10),method:e.cipher,password:e.password};if(t.server_port<0||t.server_port>65535)throw"invalid port";if(e.uot&&(t.udp_over_tcp=!0),e["udp-over-tcp"]&&(t.udp_over_tcp={enabled:!0,version:!e["udp-over-tcp-version"]||e["udp-over-tcp-version"]===1?1:2}),e["fast-open"]&&(t.udp_fragment=!0),Pa(e,t),rs(e,t),Ni(e,t),Oa(e.smux,t),Ti(e,t),e.plugin){let r=[];e.plugin==="obfs"&&(t.plugin="obfs-local",t.plugin_opts="",e["obfs-host"]&&(e["plugin-opts"].host=e["obfs-host"]),Object.keys(e["plugin-opts"]).forEach(n=>{switch(n){case"mode":r.push(`obfs=${e["plugin-opts"].mode}`);break;case"host":r.push(`obfs-host=${e["plugin-opts"].host}`);break;default:r.push(`${n}=${e["plugin-opts"][n]}`);break}})),e.plugin==="v2ray-plugin"&&(t.plugin="v2ray-plugin",e["ws-host"]&&(e["plugin-opts"].host=e["ws-host"]),e["ws-path"]&&(e["plugin-opts"].path=e["ws-path"]),Object.keys(e["plugin-opts"]).forEach(n=>{switch(n){case"tls":e["plugin-opts"].tls&&r.push("tls");break;case"host":r.push(`host=${e["plugin-opts"].host}`);break;case"path":r.push(`path=${e["plugin-opts"].path}`);break;case"headers":r.push(`headers=${JSON.stringify(e["plugin-opts"].headers)}`);break;case"mux":e["plugin-opts"].mux&&(t.multiplex={enabled:!0});break;default:r.push(`${n}=${e["plugin-opts"][n]}`)}})),t.plugin_opts=r.join(";")}return t},lq=(e={})=>{let t={tag:e.name,type:"shadowsocksr",server:e.server,server_port:parseInt(`${e.port}`,10),method:e.cipher,password:e.password,obfs:e.obfs,protocol:e.protocol};if(t.server_port<0||t.server_port>65535)throw"invalid port";return e["obfs-param"]&&(t.obfs_param=e["obfs-param"]),e["protocol-param"]&&e["protocol-param"]!==""&&(t.protocol_param=e["protocol-param"]),e["fast-open"]&&(t.udp_fragment=!0),rs(e,t),Ni(e,t),Oa(e.smux,t),Ti(e,t),t},fq=(e={})=>{let t={tag:e.name,type:"vmess",server:e.server,server_port:parseInt(`${e.port}`,10),uuid:e.uuid,security:e.cipher,alter_id:parseInt(`${e.alterId}`,10),tls:{enabled:!1,server_name:e.server,insecure:!1}};if(["auto","none","zero","aes-128-gcm","chacha20-poly1305","aes-128-ctr"].indexOf(t.security)===-1&&(t.security="auto"),t.server_port<0||t.server_port>65535)throw"invalid port";return e.xudp&&(t.packet_encoding="xudp"),e["fast-open"]&&(t.udp_fragment=!0),e.network==="ws"&&$2(e,t),e.network==="h2"&&iF(e,t),e.network==="http"&&nF(e,t),e.network==="grpc"&&R2(e,t),Pa(e,t),rs(e,t),Ni(e,t),fo(e,t),Oa(e.smux,t),Ti(e,t),t},hq=(e={})=>{let t={tag:e.name,type:"vless",server:e.server,server_port:parseInt(`${e.port}`,10),uuid:e.uuid,tls:{enabled:!1,server_name:e.server,insecure:!1}};if(t.server_port<0||t.server_port>65535)throw"invalid port";return e.xudp&&(t.packet_encoding="xudp"),e["fast-open"]&&(t.udp_fragment=!0),e.flow!=null&&(t.flow=e.flow),e.network==="ws"&&$2(e,t),e.network==="h2"&&iF(e,t),e.network==="http"&&nF(e,t),e.network==="grpc"&&R2(e,t),Pa(e,t),rs(e,t),Ni(e,t),Oa(e.smux,t),fo(e,t),Ti(e,t),t},dq=(e={})=>{let t={tag:e.name,type:"trojan",server:e.server,server_port:parseInt(`${e.port}`,10),password:e.password,tls:{enabled:!0,server_name:e.server,insecure:!1}};if(t.server_port<0||t.server_port>65535)throw"invalid port";return e["fast-open"]&&(t.udp_fragment=!0),e.network==="grpc"&&R2(e,t),e.network==="ws"&&$2(e,t),Pa(e,t),rs(e,t),Ni(e,t),fo(e,t),Oa(e.smux,t),Ti(e,t),t},pq=(e={})=>{let t={tag:e.name,type:"hysteria",server:e.server,server_port:parseInt(`${e.port}`,10),disable_mtu_discovery:!1,tls:{enabled:!0,server_name:e.server,insecure:!1}};if(t.server_port<0||t.server_port>65535)throw"invalid port";e["hop-interval"]&&(t.hop_interval=/^\d+$/.test(e["hop-interval"])?`${e["hop-interval"]}s`:e["hop-interval"]),e.ports&&(t.server_ports=e.ports.split(/\s*,\s*/).map(n=>{let i=n.replace(/\s*-\s*/g,":");return i.includes(":")?i:`${i}:${i}`})),e.auth_str&&(t.auth_str=`${e.auth_str}`),e["auth-str"]&&(t.auth_str=`${e["auth-str"]}`),e["fast-open"]&&(t.udp_fragment=!0);let r=new RegExp("^[0-9]+[ 	]*[KMGT]*[Bb]ps$");return r.test(`${e.up}`)&&!`${e.up}`.endsWith("Mbps")?t.up=`${e.up}`:t.up_mbps=parseInt(`${e.up}`,10),r.test(`${e.down}`)&&!`${e.down}`.endsWith("Mbps")?t.down=`${e.down}`:t.down_mbps=parseInt(`${e.down}`,10),e.obfs&&(t.obfs=e.obfs),e.recv_window_conn&&(t.recv_window_conn=e.recv_window_conn),e["recv-window-conn"]&&(t.recv_window_conn=e["recv-window-conn"]),e.recv_window&&(t.recv_window=e.recv_window),e["recv-window"]&&(t.recv_window=e["recv-window"]),e.disable_mtu_discovery&&(typeof e.disable_mtu_discovery=="boolean"?t.disable_mtu_discovery=e.disable_mtu_discovery:e.disable_mtu_discovery===1&&(t.disable_mtu_discovery=!0)),Pa(e,t),fo(e,t),Ni(e,t),rs(e,t),Oa(e.smux,t),Ti(e,t),t},gq=(e={})=>{let t={tag:e.name,type:"hysteria2",server:e.server,server_port:parseInt(`${e.port}`,10),password:e.password,obfs:{},tls:{enabled:!0,server_name:e.server,insecure:!1}};if(t.server_port<0||t.server_port>65535)throw"invalid port";return e["hop-interval"]&&(t.hop_interval=/^\d+$/.test(e["hop-interval"])?`${e["hop-interval"]}s`:e["hop-interval"]),e.ports&&(t.server_ports=e.ports.split(/\s*,\s*/).map(r=>{let n=r.replace(/\s*-\s*/g,":");return n.includes(":")?n:`${n}:${n}`})),e.up&&(t.up_mbps=parseInt(`${e.up}`,10)),e.down&&(t.down_mbps=parseInt(`${e.down}`,10)),e.obfs==="salamander"&&(t.obfs.type="salamander"),e["obfs-password"]&&(t.obfs.password=e["obfs-password"]),t.obfs.type||delete t.obfs,Pa(e,t),fo(e,t),rs(e,t),Ni(e,t),Oa(e.smux,t),Ti(e,t),t},mq=(e={})=>{let t={tag:e.name,type:"tuic",server:e.server,server_port:parseInt(`${e.port}`,10),uuid:e.uuid,password:e.password,tls:{enabled:!0,server_name:e.server,insecure:!1}};if(t.server_port<0||t.server_port>65535)throw"invalid port";return e["fast-open"]&&(t.udp_fragment=!0),e["congestion-controller"]&&e["congestion-controller"]!=="cubic"&&(t.congestion_control=e["congestion-controller"]),e["udp-relay-mode"]&&e["udp-relay-mode"]!=="native"&&(t.udp_relay_mode=e["udp-relay-mode"]),e["reduce-rtt"]&&(t.zero_rtt_handshake=!0),e["udp-over-stream"]&&(t.udp_over_stream=!0),e["heartbeat-interval"]&&(t.heartbeat=`${e["heartbeat-interval"]}ms`),Pa(e,t),rs(e,t),Ni(e,t),fo(e,t),Oa(e.smux,t),Ti(e,t),t},vq=(e={})=>{let t={tag:e.name,type:"anytls",server:e.server,server_port:parseInt(`${e.port}`,10),password:e.password,tls:{enabled:!0,server_name:e.server,insecure:!1}};return/^\d+$/.test(e["idle-session-check-interval"])&&(t.idle_session_check_interval=`${e["idle-session-check-interval"]}s`),/^\d+$/.test(e["idle-session-timeout"])&&(t.idle_session_timeout=`${e["idle-session-timeout"]}s`),/^\d+$/.test(e["min-idle-session"])&&(t.min_idle_session=parseInt(`${e["min-idle-session"]}`,10)),Pa(e,t),Ni(e,t),fo(e,t),Ti(e,t),t},wq=(e={})=>{let t=["ip","ipv6"].map(n=>e[n]).map(n=>{if(Wr(n))return`${n}/32`;if(Mr(n))return`${n}/128`}).filter(n=>n),r={tag:e.name,type:"wireguard",server:e.server,server_port:parseInt(`${e.port}`,10),local_address:t,private_key:e["private-key"],peer_public_key:e["public-key"],pre_shared_key:e["pre-shared-key"],reserved:[]};if(r.server_port<0||r.server_port>65535)throw"invalid port";if(e["fast-open"]&&(r.udp_fragment=!0),typeof e.reserved=="string")r.reserved=e.reserved;else if(Array.isArray(e.reserved))for(let n of e.reserved)r.reserved.push(n);else delete r.reserved;if(e.peers&&e.peers.length>0){r.peers=[];for(let n of e.peers){let i={server:n.server,server_port:parseInt(`${n.port}`,10),public_key:n["public-key"],allowed_ips:n["allowed-ips"]||n.allowed_ips,reserved:[]};if(typeof n.reserved=="string")i.reserved.push(n.reserved);else if(Array.isArray(n.reserved))for(let a of n.reserved)i.reserved.push(a);else delete i.reserved;n["pre-shared-key"]&&(i.pre_shared_key=n["pre-shared-key"]),r.peers.push(i)}}return Pa(e,r),rs(e,r),Ni(e,r),Oa(e.smux,r),Ti(e,r),r};function Rp(){return{type:"ALL",produce:(r,n,i={})=>{let a=[];return Zi().produce(r,"internal",{"include-unsupported-proxy":!0}).map(s=>{try{switch(s.type){case"ssh":a.push(sq(s));break;case"http":a.push(aq(s));break;case"socks5":if(s.tls)throw new Error(`Platform sing-box does not support proxy type: ${s.type} with tls`);a.push(uq(s));break;case"ss":if(s.plugin==="shadow-tls"){let{ssPart:u,stPart:c}=oq(s);a.push(u),a.push(c)}else a.push(cq(s));break;case"ssr":if(i["include-unsupported-proxy"])a.push(lq(s));else throw new Error(`Platform sing-box does not support proxy type: ${s.type}`);break;case"vmess":if(!s.network||["ws","grpc","h2","http"].includes(s.network))a.push(fq(s));else throw new Error(`Platform sing-box does not support proxy type: ${s.type} with network ${s.network}`);break;case"vless":if(!s.flow||["xtls-rprx-vision"].includes(s.flow))a.push(hq(s));else throw new Error(`Platform sing-box does not support proxy type: ${s.type} with flow ${s.flow}`);break;case"trojan":if(!s.flow)a.push(dq(s));else throw new Error(`Platform sing-box does not support proxy type: ${s.type} with flow ${s.flow}`);break;case"hysteria":a.push(pq(s));break;case"hysteria2":a.push(gq(s,i["include-unsupported-proxy"]));break;case"tuic":if(!s.token||s.token.length===0)a.push(mq(s));else throw new Error("Platform sing-box does not support proxy type: TUIC v4");break;case"wireguard":a.push(wq(s));break;case"anytls":a.push(vq(s));break;default:throw new Error(`Platform sing-box does not support proxy type: ${s.type}`)}}catch(u){R.error(u.message??u)}}),n==="internal"?a:JSON.stringify({outbounds:a},null,2)}}}function xp(){return{type:"ALL",produce:(r,n,i={})=>{let a=r.filter(s=>!(!["http","socks5","ss","trojan","hysteria2","vless","vmess","tuic"].includes(s.type)||s.type==="ss"&&(s.plugin==="obfs"&&!["http","tls"].includes(s["plugin-opts"]?.mode)||!["chacha20-ietf-poly1305","chacha20-poly1305","aes-256-gcm","aes-128-gcm","none","tbale","rc4","rc4-md5","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-ctr","aes-192-ctr","aes-256-ctr","bf-cfb","camellia-128-cfb","camellia-192-cfb","camellia-256-cfb","cast5-cfb","des-cfb","idea-cfb","rc2-cfb","seed-cfb","salsa20","chacha20","chacha20-ietf","2022-blake3-aes-128-gcm","2022-blake3-aes-256-gcm"].includes(s.cipher))||s.type==="vmess"&&!["http","ws","tcp"].includes(s.network)&&s.network||s.type==="trojan"&&!["http","ws","tcp"].includes(s.network)&&s.network||s.type==="vless"&&(!i["include-unsupported-proxy"]&&(typeof s.flow<"u"||s["reality-opts"])||i["include-unsupported-proxy"]&&typeof s.flow<"u"&&s.flow!=="xtls-rprx-vision"||!["http","ws","tcp"].includes(s.network)&&s.network)||s.type==="tuic"&&s.token&&s.token.length!==0)).map(s=>{let u={...s},c;s.tls&&!s.sni&&(s.sni=s.server);let f=s.prev_hop||s["underlying-proxy"]||s["dialer-proxy"]||s.detour;if(s.type==="http")s={type:"http",name:s.name,server:s.server,port:s.port,username:s.username,password:s.password,tfo:s.tfo||s["fast-open"],next_hop:s.next_hop};else if(s.type==="socks5")s={type:"socks5",name:s.name,server:s.server,port:s.port,username:s.username,password:s.password,tfo:s.tfo||s["fast-open"],udp_relay:s.udp||s.udp_relay||s.udp_relay,next_hop:s.next_hop};else if(s.type==="ss")s={type:"shadowsocks",name:s.name,method:s.cipher==="chacha20-ietf-poly1305"?"chacha20-poly1305":s.cipher,server:s.server,port:s.port,password:s.password,tfo:s.tfo||s["fast-open"],udp_relay:s.udp||s.udp_relay||s.udp_relay,next_hop:s.next_hop},u.plugin==="obfs"&&(s.obfs=u["plugin-opts"].mode,s.obfs_host=u["plugin-opts"].host,s.obfs_uri=u["plugin-opts"].path);else if(s.type==="hysteria2")s={type:"hysteria2",name:s.name,server:s.server,port:s.port,auth:s.password,tfo:s.tfo||s["fast-open"],udp_relay:s.udp||s.udp_relay||s.udp_relay,next_hop:s.next_hop,sni:s.sni,skip_tls_verify:s["skip-cert-verify"],port_hopping:s.ports,port_hopping_interval:s["hop-interval"]},u["obfs-password"]&&u.obfs=="salamander"&&(s.obfs="salamander",s.obfs_password=u["obfs-password"]);else if(s.type==="tuic")s={type:"tuic",name:s.name,server:s.server,port:s.port,uuid:s.uuid,password:s.password,next_hop:s.next_hop,sni:s.sni,alpn:Array.isArray(s.alpn)?s.alpn:[s.alpn||"h3"],skip_tls_verify:s["skip-cert-verify"],port_hopping:s.ports,port_hopping_interval:s["hop-interval"]};else if(s.type==="trojan")s.network==="ws"&&(s.websocket={path:s["ws-opts"]?.path,host:s["ws-opts"]?.headers?.Host}),s={type:"trojan",name:s.name,server:s.server,port:s.port,password:s.password,tfo:s.tfo||s["fast-open"],udp_relay:s.udp||s.udp_relay||s.udp_relay,next_hop:s.next_hop,sni:s.sni,skip_tls_verify:s["skip-cert-verify"],websocket:s.websocket};else if(s.type==="vmess"){let h=s.cipher;h&&!["auto","none","zero","aes-128-gcm","chacha20-poly1305"].includes(h)&&(h="auto"),s.network==="ws"?s.transport={[s.tls?"wss":"ws"]:{path:s["ws-opts"]?.path,headers:{Host:s["ws-opts"]?.headers?.Host},sni:s.tls?s.sni:void 0,skip_tls_verify:s.tls?s["skip-cert-verify"]:void 0}}:s.network==="http"?s.transport={http1:{method:s["http-opts"]?.method,path:Array.isArray(s["http-opts"]?.path)?s["http-opts"]?.path[0]:s["http-opts"]?.path,headers:{Host:Array.isArray(s["http-opts"]?.headers?.Host)?s["http-opts"]?.headers?.Host[0]:s["http-opts"]?.headers?.Host},skip_tls_verify:s["skip-cert-verify"]}}:s.network==="h2"?s.transport={http2:{method:s["h2-opts"]?.method,path:Array.isArray(s["h2-opts"]?.path)?s["h2-opts"]?.path[0]:s["h2-opts"]?.path,headers:{Host:Array.isArray(s["h2-opts"]?.headers?.Host)?s["h2-opts"]?.headers?.Host[0]:s["h2-opts"]?.headers?.Host},skip_tls_verify:s["skip-cert-verify"]}}:(s.network==="tcp"||!s.network)&&s.tls&&(s.transport={tls:{sni:s.tls?s.sni:void 0,skip_tls_verify:s.tls?s["skip-cert-verify"]:void 0}});let g;(ue(s,"aead")&&!s.aead||s.alterId!==0)&&(g=!0),s={type:"vmess",name:s.name,server:s.server,port:s.port,user_id:s.uuid,security:h,tfo:s.tfo||s["fast-open"],legacy:g,udp_relay:s.udp||s.udp_relay||s.udp_relay,next_hop:s.next_hop,transport:s.transport}}else if(s.type==="vless"){if(s.network==="ws")s.transport={[s.tls?"wss":"ws"]:{path:s["ws-opts"]?.path,headers:{Host:s["ws-opts"]?.headers?.Host},sni:s.tls?s.sni:void 0,skip_tls_verify:s.tls?s["skip-cert-verify"]:void 0}};else if(s.network==="http")s.transport={http:{method:s["http-opts"]?.method,path:Array.isArray(s["http-opts"]?.path)?s["http-opts"]?.path[0]:s["http-opts"]?.path,headers:{Host:Array.isArray(s["http-opts"]?.headers?.Host)?s["http-opts"]?.headers?.Host[0]:s["http-opts"]?.headers?.Host},skip_tls_verify:s["skip-cert-verify"]}};else if(s.network==="tcp"||!s.network){let h;(s["reality-opts"]?.["short-id"]||s["reality-opts"]?.["public-key"])&&(h={short_id:s["reality-opts"]["short-id"],public_key:s["reality-opts"]["public-key"]}),s.transport={[s.tls?"tls":"tcp"]:{sni:s.tls?s.sni:void 0,skip_tls_verify:s.tls?s["skip-cert-verify"]:void 0,reality:h}},c=s.flow}s={type:"vless",name:s.name,server:s.server,port:s.port,user_id:s.uuid,security:s.cipher,tfo:s.tfo||s["fast-open"],udp_relay:s.udp||s.udp_relay||s.udp_relay,next_hop:s.next_hop,transport:s.transport,flow:c}}if(["http","socks5","ss","trojan","vless","vmess"].includes(u.type)){if(ue(u,"shadow-tls-password")){if(u["shadow-tls-version"]!=3)throw new Error(`shadow-tls version ${u["shadow-tls-version"]} is not supported`);s.shadow_tls={password:u["shadow-tls-password"],sni:u["shadow-tls-sni"]}}else if(["shadow-tls"].includes(u.plugin)&&u["plugin-opts"]){if(u["plugin-opts"].version!=3)throw new Error(`shadow-tls version ${u["plugin-opts"].version} is not supported`);s.shadow_tls={password:u["plugin-opts"].password,sni:u["plugin-opts"].host}}}if(["ss"].includes(u.type)&&s.shadow_tls&&u["udp-port"]>0&&u["udp-port"]<=65535&&(s.udp_port=u["udp-port"]),delete s.subName,delete s.collectionName,delete s.id,delete s.resolved,delete s["no-resolve"],s.transport){for(let h in s.transport)(Object.keys(s.transport[h]).length===0||Object.values(s.transport[h]).every(g=>g==null))&&delete s.transport[h];Object.keys(s.transport).length===0&&delete s.transport}if(n!=="internal")for(let h in s)(s[h]==null||/^_/i.test(h))&&delete s[h];return{[s.type]:{...s,type:void 0,prev_hop:f}}});return n==="internal"?a:`proxies:
`+a.map(s=>"  - "+JSON.stringify(s)+`
`).join("")}}}function sF(){return{type:"ALL",produce:(r,n)=>n==="internal"?r:JSON.stringify(r,null,2)}}var Pp={qx:Nh(),QX:Nh(),QuantumultX:Nh(),surge:bl(),Surge:bl(),SurgeMac:Nm(),Loon:Lm(),Clash:km(),meta:Zi(),clashmeta:Zi(),"clash.meta":Zi(),"Clash.Meta":Zi(),ClashMeta:Zi(),mihomo:Zi(),Mihomo:Zi(),uri:Yl(),URI:Yl(),v2:Th(),v2ray:Th(),V2Ray:Th(),json:sF(),JSON:sF(),stash:K0(),Stash:K0(),shadowrocket:kh(),Shadowrocket:kh(),ShadowRocket:kh(),surfboard:$p(),Surfboard:$p(),singbox:Rp(),"sing-box":Rp(),egern:xp(),Egern:xp()};var f3=Yr(Vh()),SV=String.raw`
// global initializer
{{
    function $set(obj, path, value) {
      if (Object(obj) !== obj) return obj;
      if (!Array.isArray(path)) path = path.toString().match(/[^.[\]]+/g) || [];
      path
        .slice(0, -1)
        .reduce((a, c, i) => (Object(a[c]) === a[c] ? a[c] : (a[c] = Math.abs(path[i + 1]) >> 0 === +path[i + 1] ? [] : {})), obj)[
        path[path.length - 1]
      ] = value;
      return obj;
    }
}}

// per-parser initializer
{
    const proxy = {};
    const obfs = {};
    const $ = {};

    function handleWebsocket() {
        if (obfs.type === "ws") {
            proxy.network = "ws";
            $set(proxy, "ws-opts.path", obfs.path);
            $set(proxy, "ws-opts.headers", obfs['ws-headers']);
            if (proxy['ws-opts'] && proxy['ws-opts']['headers'] && proxy['ws-opts']['headers'].Host) {
                proxy['ws-opts']['headers'].Host = proxy['ws-opts']['headers'].Host.replace(/^"(.*)"$/, '$1')
            }
        }
    }
    function handleShadowTLS() {
        if (proxy['shadow-tls-password'] && !proxy['shadow-tls-version']) {
            proxy['shadow-tls-version'] = 2;
        }
    }
}

start = (shadowsocks/vmess/trojan/https/http/snell/socks5/socks5_tls/tuic/tuic_v5/wireguard/hysteria2/ssh/direct) {
    return proxy;
}

shadowsocks = tag equals "ss" address (method/passwordk/obfs/obfs_host/obfs_uri/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/tfo/udp_relay/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/udp_port/others)* {
    proxy.type = "ss";
    // handle obfs
    if (obfs.type == "http" || obfs.type === "tls") {
        proxy.plugin = "obfs";
        $set(proxy, "plugin-opts.mode", obfs.type);
        $set(proxy, "plugin-opts.host", obfs.host);
        $set(proxy, "plugin-opts.path", obfs.path);
    }
    handleShadowTLS();
}
vmess = tag equals "vmess" address (vmess_uuid/vmess_aead/ws/ws_path/ws_headers/method/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/tls/sni/tls_fingerprint/tls_verification/fast_open/tfo/udp_relay/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {
    proxy.type = "vmess";
    proxy.cipher = proxy.cipher || "none";
    // Surfboard 与 Surge 默认不一致, 不管 Surfboard https://getsurfboard.com/docs/profile-format/proxy/external-proxy/vmess
    if (proxy.aead) {
        proxy.alterId = 0;
    } else {
        proxy.alterId = 1;
    }
    handleWebsocket();
    handleShadowTLS();
}
trojan = tag equals "trojan" address (passwordk/ws/ws_path/ws_headers/tls/sni/tls_fingerprint/tls_verification/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/tfo/udp_relay/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {
    proxy.type = "trojan";
    handleWebsocket();
    handleShadowTLS();
}
https = tag equals "https" address (username password)? (usernamek passwordk)? (sni/tls_fingerprint/tls_verification/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/tfo/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {
    proxy.type = "http";
    proxy.tls = true;
    handleShadowTLS();
}
http = tag equals "http" address (username password)? (usernamek passwordk)? (ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/tfo/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {
    proxy.type = "http";
    handleShadowTLS();
}
ssh = tag equals "ssh" address (username password)? (usernamek passwordk)? (server_fingerprint/idle_timeout/private_key/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/tfo/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {
    proxy.type = "ssh";
    handleShadowTLS();
}
snell = tag equals "snell" address (snell_version/snell_psk/obfs/obfs_host/obfs_uri/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/tfo/udp_relay/reuse/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {
    proxy.type = "snell";
    // handle obfs
    if (obfs.type == "http" || obfs.type === "tls") {
        $set(proxy, "obfs-opts.mode", obfs.type);
        $set(proxy, "obfs-opts.host", obfs.host);
        $set(proxy, "obfs-opts.path", obfs.path);
    }
    handleShadowTLS();
}
tuic = tag equals "tuic" address (alpn/token/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/tls_fingerprint/tls_verification/sni/fast_open/tfo/ecn/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/port_hopping_interval/others)* {
    proxy.type = "tuic";
    handleShadowTLS();
}
tuic_v5 = tag equals "tuic-v5" address (alpn/passwordk/uuidk/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/tls_fingerprint/tls_verification/sni/fast_open/tfo/ecn/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/port_hopping_interval/others)* {
    proxy.type = "tuic";
    proxy.version = 5;
    handleShadowTLS();
}
wireguard = tag equals "wireguard" (section_name/no_error_alert/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {
    proxy.type = "wireguard-surge";
    handleShadowTLS();
}
hysteria2 = tag equals "hysteria2" address (no_error_alert/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/sni/tls_verification/passwordk/tls_fingerprint/download_bandwidth/ecn/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/port_hopping_interval/others)* {
    proxy.type = "hysteria2";
    handleShadowTLS();
}
socks5 = tag equals "socks5" address (username password)? (usernamek passwordk)? (udp_relay/no_error_alert/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/fast_open/tfo/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {
    proxy.type = "socks5";
    handleShadowTLS();
}
socks5_tls = tag equals "socks5-tls" address (username password)? (usernamek passwordk)? (udp_relay/no_error_alert/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/sni/tls_fingerprint/tls_verification/fast_open/tfo/shadow_tls_version/shadow_tls_sni/shadow_tls_password/block_quic/others)* {
    proxy.type = "socks5";
    proxy.tls = true;
    handleShadowTLS();
}
direct = tag equals "direct" (udp_relay/ip_version/underlying_proxy/tos/allow_other_interface/interface/test_url/test_udp/test_timeout/hybrid/no_error_alert/fast_open/tfo/block_quic/others)* {
    proxy.type = "direct";
}
address = comma server:server comma port:port {
    proxy.server = server;
    proxy.port = port;
}

server = ip/domain

ip = & {
    const start = peg$currPos;
    let j = start;
    while (j < input.length) {
        if (input[j] === ",") break;
        j++;
    }
    peg$currPos = j;
    $.ip = input.substring(start, j).trim();
    return true;
} { return $.ip; }

domain = match:[0-9a-zA-z-_.]+ { 
    const domain = match.join(""); 
    if (/(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\.)+[a-z0-9][a-z0-9-]{0,61}[a-z0-9]/.test(domain)) {
        return domain;
    }
}

port = digits:[0-9]+ { 
    const port = parseInt(digits.join(""), 10); 
    if (port >= 0 && port <= 65535) {
    	return port;
    }
}

port_hopping_interval = comma "port-hopping-interval" equals match:$[0-9]+ { proxy["hop-interval"] = parseInt(match.trim()); }

username = & {
    let j = peg$currPos; 
    let start, end;
    let first = true;
    while (j < input.length) {
        if (input[j] === ',') {
            if (first) {
                start = j + 1;
                first = false;
            } else {
                end = j;
                break;
            }
        }
        j++;
    }
    const match = input.substring(start, end);
    if (match.indexOf("=") === -1) {
        $.username = match;
        peg$currPos = end;
        return true;
    }
} { proxy.username = $.username.trim().replace(/^"(.*?)"$/, '$1').replace(/^'(.*?)'$/, '$1'); }
password = comma match:[^,]+ { proxy.password = match.join("").replace(/^"(.*)"$/, '$1').replace(/^'(.*?)'$/, '$1'); }

tls = comma "tls" equals flag:bool { proxy.tls = flag; }
sni = comma "sni" equals sni:("off"/domain) { 
    if (sni === "off") {
        proxy["disable-sni"] = true;
    } else {
        proxy.sni = sni;
    }
}
tls_verification = comma "skip-cert-verify" equals flag:bool { proxy["skip-cert-verify"] = flag; }
tls_fingerprint = comma "server-cert-fingerprint-sha256" equals tls_fingerprint:$[^,]+ { proxy["tls-fingerprint"] = tls_fingerprint.trim(); }

snell_psk = comma "psk" equals match:[^,]+ { proxy.psk = match.join(""); }
snell_version = comma "version" equals match:$[0-9]+ { proxy.version = parseInt(match.trim()); }

usernamek = comma "username" equals match:[^,]+ { proxy.username = match.join("").replace(/^"(.*?)"$/, '$1').replace(/^'(.*?)'$/, '$1'); }
passwordk = comma "password" equals match:[^,]+ { proxy.password = match.join("").replace(/^"(.*?)"$/, '$1').replace(/^'(.*?)'$/, '$1'); }
vmess_uuid = comma "username" equals match:[^,]+ { proxy.uuid = match.join(""); }
vmess_aead = comma "vmess-aead" equals flag:bool { proxy.aead = flag; }

method = comma "encrypt-method" equals cipher:cipher {
    proxy.cipher = cipher;
}
cipher = ("aes-128-cfb"/"aes-128-ctr"/"aes-128-gcm"/"aes-192-cfb"/"aes-192-ctr"/"aes-192-gcm"/"aes-256-cfb"/"aes-256-ctr"/"aes-256-gcm"/"bf-cfb"/"camellia-128-cfb"/"camellia-192-cfb"/"camellia-256-cfb"/"cast5-cfb"/"chacha20-ietf-poly1305"/"chacha20-ietf"/"chacha20-poly1305"/"chacha20"/"des-cfb"/"idea-cfb"/"none"/"rc2-cfb"/"rc4-md5"/"rc4"/"salsa20"/"seed-cfb"/"xchacha20-ietf-poly1305"/"2022-blake3-aes-128-gcm"/"2022-blake3-aes-256-gcm");

ws = comma "ws" equals flag:bool { obfs.type = "ws"; }
ws_headers = comma "ws-headers" equals headers:$[^,]+ {
    const pairs = headers.split("|");
    const result = {};
    pairs.forEach(pair => {
        const [key, value] = pair.trim().split(":");
        result[key.trim()] = value.trim().replace(/^"(.*?)"$/, '$1').replace(/^'(.*?)'$/, '$1');
    })
    obfs["ws-headers"] = result;
}
ws_path = comma "ws-path" equals path:uri { obfs.path = path.trim().replace(/^"(.*?)"$/, '$1').replace(/^'(.*?)'$/, '$1'); }

obfs = comma "obfs" equals type:("http"/"tls") { obfs.type = type; }
obfs_host = comma "obfs-host" equals host:domain { obfs.host = host; };
obfs_uri = comma "obfs-uri" equals path:uri { obfs.path = path }
uri = $[^,]+

udp_relay = comma "udp-relay" equals flag:bool { proxy.udp = flag; }
fast_open = comma "fast-open" equals flag:bool { proxy.tfo = flag; }
reuse = comma "reuse" equals flag:bool { proxy.reuse = flag; }
ecn = comma "ecn" equals flag:bool { proxy.ecn = flag; }
tfo = comma "tfo" equals flag:bool { proxy.tfo = flag; }
ip_version = comma "ip-version" equals match:[^,]+ { proxy["ip-version"] = match.join(""); }
section_name = comma "section-name" equals match:[^,]+ { proxy["section-name"] = match.join(""); }
no_error_alert = comma "no-error-alert" equals match:[^,]+ { proxy["no-error-alert"] = match.join(""); }
underlying_proxy = comma "underlying-proxy" equals match:[^,]+ { proxy["underlying-proxy"] = match.join(""); }
download_bandwidth = comma "download-bandwidth" equals match:[^,]+ { proxy.down = match.join(""); }
test_url = comma "test-url" equals match:[^,]+ { proxy["test-url"] = match.join(""); }
test_udp = comma "test-udp" equals match:[^,]+ { proxy["test-udp"] = match.join(""); }
test_timeout = comma "test-timeout" equals match:$[0-9]+ { proxy["test-timeout"] = parseInt(match.trim()); }
tos = comma "tos" equals match:$[0-9]+ { proxy.tos = parseInt(match.trim()); }
interface = comma "interface" equals match:[^,]+ { proxy.interface = match.join(""); }
allow_other_interface = comma "allow-other-interface" equals flag:bool { proxy["allow-other-interface"] = flag; }
hybrid = comma "hybrid" equals flag:bool { proxy.hybrid = flag; }
idle_timeout = comma "idle-timeout" equals match:$[0-9]+ { proxy["idle-timeout"] = parseInt(match.trim()); }
private_key = comma "private-key" equals match:[^,]+ { proxy["keystore-private-key"] = match.join("").replace(/^"(.*)"$/, '$1'); }
server_fingerprint = comma "server-fingerprint" equals match:[^,]+ { proxy["server-fingerprint"] = match.join("").replace(/^"(.*)"$/, '$1'); }
block_quic = comma "block-quic" equals match:[^,]+ { proxy["block-quic"] = match.join(""); }
udp_port = comma "udp-port" equals match:$[0-9]+ { proxy["udp-port"] = parseInt(match.trim()); }
shadow_tls_version = comma "shadow-tls-version" equals match:$[0-9]+ { proxy["shadow-tls-version"] = parseInt(match.trim()); }
shadow_tls_sni = comma "shadow-tls-sni" equals match:[^,]+ { proxy["shadow-tls-sni"] = match.join(""); }
shadow_tls_password = comma "shadow-tls-password" equals match:[^,]+ { proxy["shadow-tls-password"] = match.join("").replace(/^"(.*?)"$/, '$1').replace(/^'(.*?)'$/, '$1'); }
token = comma "token" equals match:[^,]+ { proxy.token = match.join(""); }
alpn = comma "alpn" equals match:[^,]+ { proxy.alpn = match.join(""); }
uuidk = comma "uuid" equals match:[^,]+ { proxy.uuid = match.join(""); }

tag = match:[^=,]* { proxy.name = match.join("").trim(); }
comma = _ "," _
equals = _ "=" _
_ = [ \r\t]*
bool = b:("true"/"false") { return b === "true" }
others = comma [^=,]+ equals [^=,]+
`,J2;function is(){return J2||(J2=f3.generate(SV)),J2}var h3=Yr(Vh()),IV=String.raw`
// global initializer
{{
    function $set(obj, path, value) {
      if (Object(obj) !== obj) return obj;
      if (!Array.isArray(path)) path = path.toString().match(/[^.[\]]+/g) || [];
      path
        .slice(0, -1)
        .reduce((a, c, i) => (Object(a[c]) === a[c] ? a[c] : (a[c] = Math.abs(path[i + 1]) >> 0 === +path[i + 1] ? [] : {})), obj)[
        path[path.length - 1]
      ] = value;
      return obj;
    }
}}

// per-parser initializer
{
    const proxy = {};
    const obfs = {};
    const transport = {};
    const $ = {};

    function handleTransport() {
        if (transport.type === "tcp") { /* do nothing */ }
        else if (transport.type === "ws") {
            proxy.network = "ws";
            $set(proxy, "ws-opts.path", transport.path);
            $set(proxy, "ws-opts.headers.Host", transport.host);
        } else if (transport.type === "http") {
            proxy.network = "http";
            $set(proxy, "http-opts.path", transport.path);
            $set(proxy, "http-opts.headers.Host", transport.host);
        }
    }
}

start = (shadowsocksr/shadowsocks/vmess/vless/trojan/https/http/socks5/hysteria2) {
    return proxy;
}

shadowsocksr = tag equals "shadowsocksr"i address method password (ssr_protocol/ssr_protocol_param/obfs_ssr/obfs_ssr_param/obfs_host/obfs_uri/fast_open/udp_relay/udp_port/shadow_tls_version/shadow_tls_sni/shadow_tls_password/ip_mode/block_quic/others)*{
    proxy.type = "ssr";
    // handle ssr obfs
    proxy.obfs = obfs.type;
}
shadowsocks = tag equals "shadowsocks"i address method password (obfs_typev obfs_hostv)? (obfs_ss/obfs_host/obfs_uri/fast_open/udp_relay/udp_port/shadow_tls_version/shadow_tls_sni/shadow_tls_password/ip_mode/block_quic/others)* {
    proxy.type = "ss";
    // handle ss obfs
    if (obfs.type == "http" || obfs.type === "tls") {
        proxy.plugin = "obfs";
        $set(proxy, "plugin-opts.mode", obfs.type);
        $set(proxy, "plugin-opts.host", obfs.host);
        $set(proxy, "plugin-opts.path", obfs.path);
    }
}
vmess = tag equals "vmess"i address method uuid (transport/transport_host/transport_path/over_tls/tls_name/sni/tls_verification/tls_cert_sha256/tls_pubkey_sha256/vmess_alterId/fast_open/udp_relay/ip_mode/public_key/short_id/block_quic/others)* {
    proxy.type = "vmess";
    proxy.cipher = proxy.cipher || "none";
    proxy.alterId = proxy.alterId || 0;
    handleTransport();
}
vless = tag equals "vless"i address uuid (transport/transport_host/transport_path/over_tls/tls_name/sni/tls_verification/tls_cert_sha256/tls_pubkey_sha256/fast_open/udp_relay/ip_mode/flow/public_key/short_id/block_quic/others)* {
    proxy.type = "vless";
    handleTransport();
}
trojan = tag equals "trojan"i address password (transport/transport_host/transport_path/over_tls/tls_name/sni/tls_verification/tls_cert_sha256/tls_pubkey_sha256/fast_open/udp_relay/ip_mode/block_quic/others)* {
    proxy.type = "trojan";
    handleTransport();
}
hysteria2 = tag equals "hysteria2"i address password (tls_name/sni/tls_verification/tls_cert_sha256/tls_pubkey_sha256/udp_relay/fast_open/download_bandwidth/salamander_password/ecn/ip_mode/block_quic/others)* {
    proxy.type = "hysteria2";
}
https = tag equals "https"i address (username password)? (tls_name/sni/tls_verification/tls_cert_sha256/tls_pubkey_sha256/fast_open/udp_relay/ip_mode/block_quic/others)* {
    proxy.type = "http";
    proxy.tls = true;
}
http = tag equals "http"i address (username password)? (fast_open/udp_relay/ip_mode/block_quic/others)* {
    proxy.type = "http";
}
socks5 = tag equals "socks5"i address (username password)? (over_tls/tls_name/sni/tls_verification/tls_cert_sha256/tls_pubkey_sha256/fast_open/udp_relay/ip_mode/block_quic/others)* {
    proxy.type = "socks5";
}

address = comma server:server comma port:port {
    proxy.server = server;
    proxy.port = port;
}

server = ip/domain

ip = & {
    const start = peg$currPos;
    let j = start;
    while (j < input.length) {
        if (input[j] === ",") break;
        j++;
    }
    peg$currPos = j;
    $.ip = input.substring(start, j).trim();
    return true;
} { return $.ip; }

domain = match:[0-9a-zA-z-_.]+ { 
    const domain = match.join(""); 
    if (/(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\.)+[a-z0-9][a-z0-9-]{0,61}[a-z0-9]/.test(domain)) {
        return domain;
    }
    throw new Error("Invalid domain: " + domain);
}

port = digits:[0-9]+ { 
    const port = parseInt(digits.join(""), 10); 
    if (port >= 0 && port <= 65535) {
    	return port;
    }
    throw new Error("Invalid port number: " + port);
}

method = comma cipher:cipher { 
    proxy.cipher = cipher;
}
cipher = ("aes-128-cfb"/"aes-128-ctr"/"aes-128-gcm"/"aes-192-cfb"/"aes-192-ctr"/"aes-192-gcm"/"aes-256-cfb"/"aes-256-ctr"/"aes-256-gcm"/"auto"/"bf-cfb"/"camellia-128-cfb"/"camellia-192-cfb"/"camellia-256-cfb"/"chacha20-ietf-poly1305"/"chacha20-ietf"/"chacha20-poly1305"/"chacha20"/"none"/"rc4-md5"/"rc4"/"salsa20"/"xchacha20-ietf-poly1305"/"2022-blake3-aes-128-gcm"/"2022-blake3-aes-256-gcm");

username = & {
    let j = peg$currPos; 
    let start, end;
    let first = true;
    while (j < input.length) {
        if (input[j] === ',') {
            if (first) {
                start = j + 1;
                first = false;
            } else {
                end = j;
                break;
            }
        }
        j++;
    }
    const match = input.substring(start, end);
    if (match.indexOf("=") === -1) {
        $.username = match;
        peg$currPos = end;
        return true;
    }
} { proxy.username = $.username; }
password = comma '"' match:[^"]* '"' { proxy.password = match.join(""); }
uuid = comma '"' match:[^"]+ '"' { proxy.uuid = match.join(""); }

obfs_typev = comma type:("http"/"tls") { obfs.type = type; }
obfs_hostv = comma match:[^,]+ { obfs.host = match.join(""); }

obfs_ss = comma "obfs-name" equals type:("http"/"tls") { obfs.type = type; }

obfs_ssr = comma "obfs" equals type:("plain"/"http_simple"/"http_post"/"random_head"/"tls1.2_ticket_auth"/"tls1.2_ticket_fastauth") { obfs.type = type; }
obfs_ssr_param = comma "obfs-param" equals match:$[^,]+ { proxy["obfs-param"] = match; }

obfs_host = comma "obfs-host" equals host:domain { obfs.host = host; }
obfs_uri = comma "obfs-uri" equals uri:uri { obfs.path = uri; }
uri = $[^,]+

transport = comma "transport" equals type:("tcp"/"ws"/"http") { transport.type = type; }
transport_host = comma "host" equals host:domain { transport.host = host; }
transport_path = comma "path" equals path:uri { transport.path = path; }

ssr_protocol = comma "protocol" equals protocol:("origin"/"auth_sha1_v4"/"auth_aes128_md5"/"auth_aes128_sha1"/"auth_chain_a"/"auth_chain_b") { proxy.protocol = protocol; }
ssr_protocol_param = comma "protocol-param" equals param:$[^=,]+ { proxy["protocol-param"] = param; }

vmess_alterId = comma "alterId" equals alterId:$[0-9]+ { proxy.alterId = parseInt(alterId); } 

udp_port = comma "udp-port" equals match:$[0-9]+ { proxy["udp-port"] = parseInt(match.trim()); }
shadow_tls_version = comma "shadow-tls-version" equals match:$[0-9]+ { proxy["shadow-tls-version"] = parseInt(match.trim()); }
shadow_tls_sni = comma "shadow-tls-sni" equals match:[^,]+ { proxy["shadow-tls-sni"] = match.join(""); }
shadow_tls_password = comma "shadow-tls-password" equals match:[^,]+ { proxy["shadow-tls-password"] = match.join(""); }

over_tls = comma "over-tls" equals flag:bool { proxy.tls = flag; }
tls_name = comma sni:("tls-name") equals host:domain { proxy.sni = host; }
sni = comma sni:("sni") equals host:domain { proxy.sni = host; }
tls_verification = comma "skip-cert-verify" equals flag:bool { proxy["skip-cert-verify"] = flag; }
tls_cert_sha256 = comma "tls-cert-sha256" equals match:[^,]+ { proxy["tls-fingerprint"] = match.join("").replace(/^"(.*)"$/, '$1'); }
tls_pubkey_sha256 = comma "tls-pubkey-sha256" equals match:[^,]+ { proxy["tls-pubkey-sha256"] = match.join("").replace(/^"(.*)"$/, '$1'); }

flow = comma "flow" equals match:[^,]+ { proxy["flow"] = match.join("").replace(/^"(.*)"$/, '$1'); }
public_key = comma "public-key" equals match:[^,]+ { proxy["reality-opts"] = proxy["reality-opts"] || {}; proxy["reality-opts"]["public-key"] = match.join("").replace(/^"(.*)"$/, '$1'); }
short_id = comma "short-id" equals match:[^,]+ { proxy["reality-opts"] = proxy["reality-opts"] || {}; proxy["reality-opts"]["short-id"] = match.join("").replace(/^"(.*)"$/, '$1'); }

fast_open = comma "fast-open" equals flag:bool { proxy.tfo = flag; }
udp_relay = comma "udp" equals flag:bool { proxy.udp = flag; }
ip_mode = comma "ip-mode" equals match:[^,]+ { proxy["ip-version"] = match.join(""); }

ecn = comma "ecn" equals flag:bool { proxy.ecn = flag; }
download_bandwidth = comma "download-bandwidth" equals match:[^,]+ { proxy.down = match.join(""); }
salamander_password = comma "salamander-password" equals match:[^,]+ { proxy['obfs-password'] = match.join(""); proxy.obfs = 'salamander'; }

block_quic = comma "block-quic" equals flag:bool { if(flag) proxy["block-quic"] = "on"; else proxy["block-quic"] = "off"; }

tag = match:[^=,]* { proxy.name = match.join("").trim(); }
comma = _ "," _
equals = _ "=" _
_ = [ \r\t]*
bool = b:("true"/"false") { return b === "true" }
others = comma [^=,]+ equals [^=,]+
`,Z2;function Ta(){return Z2||(Z2=h3.generate(IV)),Z2}var d3=Yr(Vh()),BV=String.raw`
// global initializer
{{
    function $set(obj, path, value) {
      if (Object(obj) !== obj) return obj;
      if (!Array.isArray(path)) path = path.toString().match(/[^.[\]]+/g) || [];
      path
        .slice(0, -1)
        .reduce((a, c, i) => (Object(a[c]) === a[c] ? a[c] : (a[c] = Math.abs(path[i + 1]) >> 0 === +path[i + 1] ? [] : {})), obj)[
        path[path.length - 1]
      ] = value;
      return obj;
    }
}}

// per-parse initializer
{
	const proxy = {};
    const obfs = {};
    const $ = {};

    function handleObfs() {
        if (obfs.type === "ws" || obfs.type === "wss") {
            proxy.network = "ws";
            if (obfs.type === 'wss') {
                proxy.tls = true;
            }
            $set(proxy, "ws-opts.path", obfs.path);
            $set(proxy, "ws-opts.headers.Host", obfs.host);
        } else if (obfs.type === "over-tls") {
            proxy.tls = true;
        } else if (obfs.type === "http") {
            proxy.network = "http";
            $set(proxy, "http-opts.path", obfs.path);
            $set(proxy, "http-opts.headers.Host", obfs.host);
        }
    }
}

start = (trojan/shadowsocks/vmess/vless/http/socks5) {
    return proxy
}

trojan = "trojan" equals address
    (password/over_tls/tls_host/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/obfs/obfs_host/obfs_uri/tag/udp_relay/udp_over_tcp/fast_open/server_check_url/others)* {
    proxy.type = "trojan";
    handleObfs();
}

shadowsocks = "shadowsocks" equals address
    (password/method/obfs_ssr/obfs_ss/obfs_host/obfs_uri/ssr_protocol/ssr_protocol_param/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/udp_relay/udp_over_tcp_new/fast_open/tag/server_check_url/others)* {
    if (proxy.protocol || proxy.type === "ssr") {
        proxy.type = "ssr";
        if (!proxy.protocol) {
            proxy.protocol = "origin";
        }
        // handle ssr obfs
        if (obfs.host) proxy["obfs-param"] = obfs.host;
        if (obfs.type) proxy.obfs = obfs.type;
    } else {
        proxy.type = "ss";
        // handle ss obfs
        if (obfs.type == "http" || obfs.type === "tls") {
            proxy.plugin = "obfs";
            $set(proxy, "plugin-opts", {
                mode: obfs.type
            });
        } else if (obfs.type === "ws" || obfs.type === "wss") {
            proxy.plugin = "v2ray-plugin";
            $set(proxy, "plugin-opts.mode", "websocket");
            if (obfs.type === "wss") {
                $set(proxy, "plugin-opts.tls", true);
            }
        } else if (obfs.type === 'over-tls') {
            throw new Error('ss over-tls is not supported');
        }
        if (obfs.type) {
            $set(proxy, "plugin-opts.host", obfs.host);
            $set(proxy, "plugin-opts.path", obfs.path);
        }
    }
}

vmess = "vmess" equals address
    (uuid/method/over_tls/tls_host/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/tag/obfs/obfs_host/obfs_uri/udp_relay/udp_over_tcp/fast_open/aead/server_check_url/others)* {
    proxy.type = "vmess";
    proxy.cipher = proxy.cipher || "none";
    if (proxy.aead === false) {
        proxy.alterId = 1;
    } else {
        proxy.alterId = 0;
    }
    handleObfs();
}

vless = "vless" equals address
    (uuid/method/over_tls/tls_host/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/tag/obfs/obfs_host/obfs_uri/udp_relay/udp_over_tcp/fast_open/aead/server_check_url/others)* {
    proxy.type = "vless";
    proxy.cipher = proxy.cipher || "none";
    handleObfs();
}

http = "http" equals address 
    (username/password/over_tls/tls_host/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/tag/fast_open/udp_relay/udp_over_tcp/server_check_url/others)*{
    proxy.type = "http";
}

socks5 = "socks5" equals address
    (username/password/password/over_tls/tls_host/tls_pubkey_sha256/tls_alpn/tls_no_session_ticket/tls_no_session_reuse/tls_fingerprint/tls_verification/tag/fast_open/udp_relay/udp_over_tcp/server_check_url/others)* {
    proxy.type = "socks5";
}
    
address = server:server ":" port:port {
    proxy.server = server;
    proxy.port = port;
}
server = ip/domain

domain = match:[0-9a-zA-z-_.]+ { 
    const domain = match.join(""); 
    if (/(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\.)+[a-z0-9][a-z0-9-]{0,61}[a-z0-9]/.test(domain)) {
        return domain;
    }
}

ip = & {
    const start = peg$currPos;
    let end;
    let j = start;
    while (j < input.length) {
        if (input[j] === ",") break;
        if (input[j] === ":") end = j;
        j++;
    }
    peg$currPos = end || j;
    $.ip = input.substring(start, end).trim();
    return true;
} { return $.ip; }

port = digits:[0-9]+ { 
    const port = parseInt(digits.join(""), 10); 
    if (port >= 0 && port <= 65535) {
    	return port;
    }
}

username = comma "username" equals username:[^,]+ { proxy.username = username.join("").trim(); }
password = comma "password" equals password:[^,]+ { proxy.password = password.join("").trim(); }
uuid = comma "password" equals uuid:[^,]+ { proxy.uuid = uuid.join("").trim(); }

method = comma "method" equals cipher:cipher { 
    proxy.cipher = cipher;
};
cipher = ("aes-128-cfb"/"aes-128-ctr"/"aes-128-gcm"/"aes-192-cfb"/"aes-192-ctr"/"aes-192-gcm"/"aes-256-cfb"/"aes-256-ctr"/"aes-256-gcm"/"bf-cfb"/"cast5-cfb"/"chacha20-ietf-poly1305"/"chacha20-ietf"/"chacha20-poly1305"/"chacha20"/"des-cfb"/"none"/"rc2-cfb"/"rc4-md5-6"/"rc4-md5"/"salsa20"/"xchacha20-ietf-poly1305"/"2022-blake3-aes-128-gcm"/"2022-blake3-aes-256-gcm");
aead = comma "aead" equals flag:bool { proxy.aead = flag; }

udp_relay = comma "udp-relay" equals flag:bool { proxy.udp = flag; }
udp_over_tcp = comma "udp-over-tcp" equals flag:bool { throw new Error("UDP over TCP is not supported"); }
udp_over_tcp_new = comma "udp-over-tcp" equals param:$[^=,]+ { if (param === "sp.v1") { proxy["udp-over-tcp"] = true; proxy["udp-over-tcp-version"] = 1; } else if (param === "sp.v2") { proxy["udp-over-tcp"] = true; proxy["udp-over-tcp-version"] = 2; } else if (param === "true") { proxy["_ssr_python_uot"] = true; } else { throw new Error("Invalid value for udp-over-tcp"); } }

fast_open = comma "fast-open" equals flag:bool { proxy.tfo = flag; }

over_tls = comma "over-tls" equals flag:bool { proxy.tls = flag; }
tls_host = comma "tls-host" equals sni:domain { proxy.sni = sni; }
tls_verification = comma "tls-verification" equals flag:bool { 
    proxy["skip-cert-verify"] = !flag;
}
tls_fingerprint = comma "tls-cert-sha256" equals tls_fingerprint:$[^,]+ { proxy["tls-fingerprint"] = tls_fingerprint.trim(); }
tls_pubkey_sha256 = comma "tls-pubkey-sha256" equals param:$[^=,]+ { proxy["tls-pubkey-sha256"] = param; }
tls_alpn = comma "tls-alpn" equals param:$[^=,]+ { proxy["tls-alpn"] = param; }
tls_no_session_ticket = comma "tls-no-session-ticket" equals flag:bool { 
    proxy["tls-no-session-ticket"] = flag;
}
tls_no_session_reuse = comma "tls-no-session-reuse" equals flag:bool { 
    proxy["tls-no-session-reuse"] = flag;
}

obfs_ss = comma "obfs" equals type:("http"/"tls"/"wss"/"ws"/"over-tls") { obfs.type = type; return type; }
obfs_ssr = comma "obfs" equals type:("plain"/"http_simple"/"http_post"/"random_head"/"tls1.2_ticket_auth"/"tls1.2_ticket_fastauth") { proxy.type = "ssr"; obfs.type = type; return type; }
obfs = comma "obfs" equals type:("wss"/"ws"/"over-tls"/"http") { obfs.type = type; return type; };

obfs_host = comma "obfs-host" equals host:domain { obfs.host = host; }
obfs_uri = comma "obfs-uri" equals uri:uri { obfs.path = uri; }

ssr_protocol = comma "ssr-protocol" equals protocol:("origin"/"auth_sha1_v4"/"auth_aes128_md5"/"auth_aes128_sha1"/"auth_chain_a"/"auth_chain_b") { proxy.protocol = protocol; return protocol; }
ssr_protocol_param = comma "ssr-protocol-param" equals param:$[^=,]+ { proxy["protocol-param"] = param; }

server_check_url = comma "server_check_url" equals param:$[^=,]+ { proxy["test-url"] = param; }

uri = $[^,]+

tag = comma "tag" equals tag:[^=,]+ { proxy.name = tag.join(""); }
others = comma [^=,]+ equals [^=,]+
comma = _ "," _
equals = _ "=" _
_ = [ \r\t]*
bool = b:("true"/"false") { return b === "true" }
`,Q2;function Su(){return Q2||(Q2=d3.generate(BV)),Q2}var p3=Yr(Vh()),$V=String.raw`
// global initializer
{{
  function $set(obj, path, value) {
    if (Object(obj) !== obj) return obj;
    if (!Array.isArray(path)) path = path.toString().match(/[^.[\]]+/g) || [];
    path
      .slice(0, -1)
      .reduce((a, c, i) => (Object(a[c]) === a[c] ? a[c] : (a[c] = Math.abs(path[i + 1]) >> 0 === +path[i + 1] ? [] : {})), obj)[
      path[path.length - 1]
    ] = value;
    return obj;
  }

  function toBool(str) {
    if (typeof str === 'undefined' || str === null) return undefined;
    return /(TRUE)|1/i.test(str);
  }
}}

{
  const proxy = {};
  const obfs = {};
  const $ = {};
  const params = {};
}

start = (trojan) {
  return proxy
}

trojan = "trojan://" password:password "@" server:server ":" port:port "/"? params? name:name?{
  proxy.type = "trojan";
  proxy.password = password;
  proxy.server = server;
  proxy.port = port;
  proxy.name = name;

  // name may be empty
  if (!proxy.name) {
    proxy.name = server + ":" + port;
  }
};

password = match:$[^@]+ {
  return decodeURIComponent(match);
};

server = ip/domain;

domain = match:[0-9a-zA-z-_.]+ { 
  const domain = match.join(""); 
  if (/(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\.)+[a-z0-9][a-z0-9-]{0,61}[a-z0-9]/.test(domain)) {
    return domain;
  }
}

ip = & {
  const start = peg$currPos;
  let end;
  let j = start;
  while (j < input.length) {
    if (input[j] === ",") break;
    if (input[j] === ":") end = j;
    j++;
  }
  peg$currPos = end || j;
  $.ip = input.substring(start, end).trim();
  return true;
} { return $.ip; }

port = digits:[0-9]+ { 
  const port = parseInt(digits.join(""), 10); 
  if (port >= 0 && port <= 65535) {
    return port;
  } else {
    throw new Error("Invalid port: " + port);
  }
}

params = "?" head:param tail:("&"@param)* {
  for (const [key, value] of Object.entries(params)) {
    params[key] = decodeURIComponent(value);
  }
  proxy["skip-cert-verify"] = toBool(params["allowInsecure"]);
  proxy.sni = params["sni"] || params["peer"];
  proxy['client-fingerprint'] = params.fp;
  proxy.alpn = params.alpn ? decodeURIComponent(params.alpn).split(',') : undefined;

  if (toBool(params["ws"])) {
    proxy.network = "ws";
    $set(proxy, "ws-opts.path", params["wspath"]);
  }
  
  if (params["type"]) {
    let httpupgrade
    proxy.network = params["type"]
    if(proxy.network === 'httpupgrade') {
      proxy.network = 'ws'
      httpupgrade = true
    }
    if (['grpc'].includes(proxy.network)) {
        proxy[proxy.network + '-opts'] = {
            'grpc-service-name': params["serviceName"],
            '_grpc-type': params["mode"],
            '_grpc-authority': params["authority"],
        };
    } else {
      if (params["path"]) {
        $set(proxy, proxy.network+"-opts.path", decodeURIComponent(params["path"]));  
      }
      if (params["host"]) {
        $set(proxy, proxy.network+"-opts.headers.Host", decodeURIComponent(params["host"])); 
      }
      if (httpupgrade) {
        $set(proxy, proxy.network+"-opts.v2ray-http-upgrade", true); 
        $set(proxy, proxy.network+"-opts.v2ray-http-upgrade-fast-open", true); 
      }
    }
    if (['reality'].includes(params.security)) {
      const opts = {};
      if (params.pbk) {
        opts['public-key'] = params.pbk;
      }
      if (params.sid) {
        opts['short-id'] = params.sid;
      }
      if (params.spx) {
        opts['_spider-x'] = params.spx;
      }
      if (params.mode) {
        proxy._mode = params.mode;
      }
      if (params.extra) {
        proxy._extra = params.extra;
      }
      if (Object.keys(opts).length > 0) {
        $set(proxy, params.security+"-opts", opts); 
      }
    }
  }

  proxy.udp = toBool(params["udp"]);
  proxy.tfo = toBool(params["tfo"]);
}

param = kv/single;

kv = key:$[a-z]i+ "=" value:$[^&#]i* {
  params[key] = value;
}

single = key:$[a-z]i+ {
  params[key] = true;
};

name = "#" + match:$.* {
  return decodeURIComponent(match);
}
`,ew;function tw(){return ew||(ew=p3.generate($V)),ew}var sw=Yr(iw());function g3(e){let[t,r]=e.match(/,\s*?port-hopping\s*?=\s*?["']?\s*?((\d+(-\d+)?)([,;]\d+(-\d+)?)*)\s*?["']?\s*?/)||[];return{port_hopping:r?r.replace(/;/g,","):void 0,line:t?e.replace(t,""):e}}function RV(){return{name:"URI PROXY Parser",test:n=>/^(socks5\+tls|socks5|http|https):\/\//.test(n),parse:n=>{let[i,a,s,u,c,f,h,g,p]=n.match(/^(socks5|http|http)(\+tls|s)?:\/\/(?:(.*?):(.*?)@)?(.*?)(?::(\d+?))?\/?(\?.*?)?(?:#(.*?))?$/);if(h)h=parseInt(h,10);else{if(s)h=443;else if(a==="http")h=80;else throw R.error(`port is not present in line: ${n}`),new Error(`port is not present in line: ${n}`);R.info(`port is not present in line: ${n}, set to ${h}`)}return{name:p!=null?decodeURIComponent(p):`${a} ${f}:${h}`,type:a,tls:!!s,server:f,port:h,username:u!=null?decodeURIComponent(u):void 0,password:c!=null?decodeURIComponent(c):void 0}}}}function xV(){return{name:"URI SOCKS Parser",test:n=>/^socks:\/\//.test(n),parse:n=>{let[i,a,s,u,c,f,h]=n.match(/^(socks)?:\/\/(?:(.*)@)?(.*?)(?::(\d+?))?(\?.*?)?(?:#(.*?))?$/);if(c)c=parseInt(c,10);else throw R.error(`port is not present in line: ${n}`),new Error(`port is not present in line: ${n}`);let g,p;if(s){let w=ft.decode(decodeURIComponent(s)).split(":");g=w[0],p=w[1]}return{name:h!=null?decodeURIComponent(h):`${a} ${u}:${c}`,type:"socks5",server:u,port:c,username:g,password:p}}}}function PV(){return{name:"URI SS Parser",test:n=>/^ss:\/\//.test(n),parse:n=>{let i=n.split("ss://")[1],a=n.split("#")[1],s={type:"ss"};i=i.split("#")[0];let u=i.match(/@([^/?]*)(\/|\?|$)/),c=decodeURIComponent(i.split("@")[0]),f;c?.startsWith("2022-blake3-")?f=c:f=ft.decode(c);let h="";if(u)i.includes("?")&&(h=i.match(/(\?.*)$/)[1]);else{if(i.includes("?")){let b=i.match(/^(.*)(\?.*)$/);i=b[1],h=b[2]}if(i=ft.decode(i),h){if(/(&|\?)v2ray-plugin=/.test(h)){let m=h.match(/(&|\?)v2ray-plugin=(.*?)(&|$)/)[2];m&&(s.plugin="v2ray-plugin",s["plugin-opts"]=JSON.parse(ft.decode(m)))}i=`${i}${h}`}f=i.match(/(^.*)@/)?.[1],u=i.match(/@([^/@]*)(\/|$)/)}let g=u[1],p=g.lastIndexOf(":");s.server=g.substring(0,p),s.port=`${g.substring(p+1)}`.match(/\d+/)?.[0];let d=f.match(/(^.*?):(.*$)/);s.cipher=d?.[1],s.password=d?.[2];let w=i.match(/[?&]plugin=([^&]+)/),v=i.match(/[?&]shadow-tls=([^&]+)/);if(w){let b=("plugin="+decodeURIComponent(w[1])).split(";"),m={};for(let y of b){let[D,C]=y.split("=");D&&(m[D]=C||!0)}switch(m.plugin){case"obfs-local":case"simple-obfs":s.plugin="obfs",s["plugin-opts"]={mode:m.obfs,host:fr(m["obfs-host"])};break;case"v2ray-plugin":s.plugin="v2ray-plugin",s["plugin-opts"]={mode:"websocket",host:fr(m["obfs-host"]),path:fr(m.path),tls:Jc(m.tls)};break;case"shadow-tls":{s.plugin="shadow-tls";let y=fr(m.version);s["plugin-opts"]={host:fr(m.host),password:fr(m.password),version:y?parseInt(y,10):void 0};break}default:throw new Error(`Unsupported plugin option: ${m.plugin}`)}}if(v){let b=JSON.parse(ft.decode(v[1])),m=fr(b.version),y=fr(b.address),D=fr(b.port);s.plugin="shadow-tls",s["plugin-opts"]={host:fr(b.host),password:fr(b.password),version:m?parseInt(m,10):void 0},y&&(s.server=y),D&&(s.port=parseInt(D,10))}return/(&|\?)uot=(1|true)/i.test(h)&&(s["udp-over-tcp"]=!0),/(&|\?)tfo=(1|true)/i.test(h)&&(s.tfo=!0),a!=null&&(a=decodeURIComponent(a)),s.name=a??`SS ${s.server}:${s.port}`,s}}}function OV(){return{name:"URI SSR Parser",test:n=>/^ssr:\/\//.test(n),parse:n=>{n=ft.decode(n.split("ssr://")[1]);let i=n.indexOf(":origin");i===-1&&(i=n.indexOf(":auth_"));let a=n.substring(0,i),s=a.substring(0,a.lastIndexOf(":")),u=a.substring(a.lastIndexOf(":")+1),c=n.substring(i+1).split("/?")[0].split(":"),f={type:"ssr",server:s,port:u,protocol:c[0],cipher:c[1],obfs:c[2],password:ft.decode(c[3])},h={};if(n=n.split("/?")[1].split("&"),n.length>1)for(let g of n){let[p,d]=g.split("=");d=d.trim(),d.length>0&&d!=="(null)"&&(h[p]=d)}return f={...f,name:h.remarks?ft.decode(h.remarks):f.server,"protocol-param":fr(ft.decode(h.protoparam||"").replace(/\s/g,"")),"obfs-param":fr(ft.decode(h.obfsparam||"").replace(/\s/g,""))},f}}}function TV(){return{name:"URI VMess Parser",test:n=>/^vmess:\/\//.test(n),parse:n=>{n=n.split("vmess://")[1];let i=ft.decode(n.replace(/\?.*?$/,""));if(/=\s*vmess/.test(i)){let a=i.split(",").map(c=>c.trim()),s={};for(let c of a)if(c.indexOf("=")!==-1){let[f,h]=c.split("=");s[f.trim()]=h.trim()}let u={name:a[0].split("=")[0].trim(),type:"vmess",server:a[1],port:a[2],cipher:fr(a[3],"auto"),uuid:a[4].match(/^"(.*)"$/)[1],tls:s.obfs==="wss",udp:Jc(s["udp-relay"]),tfo:Jc(s["fast-open"]),"skip-cert-verify":Xc(s["tls-verification"])?!s["tls-verification"]:void 0};if(Xc(s.obfs))if(s.obfs==="ws"||s.obfs==="wss"){u.network="ws",u["ws-opts"].path=(fr(s["obfs-path"])||'"/"').match(/^"(.*)"$/)[1];let c=s["obfs-header"];c&&c.indexOf("Host")!==-1&&(c=c.match(/Host:\s*([a-zA-Z0-9-.]*)/)[1]),oa(c)&&(u["ws-opts"].headers={Host:c})}else throw new Error(`Unsupported obfs: ${s.obfs}`);return u}else{let a={};try{a=JSON.parse(i)}catch{let[g,p,d]=/(^[^?]+?)\/?\?(.*)$/.exec(n);i=ft.decode(p);for(let D of d.split("&")){let[C,F]=D.split("="),U=F;U=decodeURIComponent(F),U.indexOf(",")===-1?a[C]=U:a[C]=U.split(",")}let[w,v,b,m,y]=/(^[^:]+?):([^:]+?)@(.*):(\d+)$/.exec(i);a.scy=v,a.id=b,a.port=y,a.add=m}let s=a.add,u=parseInt(Jc(a.port),10),c={name:a.ps??a.remarks??a.remark??`VMess ${s}:${u}`,type:"vmess",server:s,port:u,cipher:["auto","aes-128-gcm","chacha20-poly1305","none"].includes(a.scy)?a.scy:"auto",uuid:a.id,alterId:parseInt(Jc(a.aid??a.alterId,0),10),tls:["tls",!0,1,"1"].includes(a.tls),"skip-cert-verify":Xc(a.verify_cert)?!a.verify_cert:void 0};!c["skip-cert-verify"]&&Xc(a.allowInsecure)&&(c["skip-cert-verify"]=/(TRUE)|1/i.test(a.allowInsecure)),c.tls&&(a.sni&&a.sni!==""?c.sni=a.sni:a.peer&&a.peer!==""&&(c.sni=a.peer));let f=!1;if(a.net==="ws"||a.obfs==="websocket"?c.network="ws":["http"].includes(a.net)||["http"].includes(a.obfs)||["http"].includes(a.type)?c.network="http":["grpc","kcp","quic"].includes(a.net)?c.network=a.net:a.net==="httpupgrade"||c.network==="httpupgrade"?(c.network="ws",f=!0):(a.net==="h2"||c.network==="h2")&&(c.network="h2"),c.network){let h=a.host??a.obfsParam;try{let d=JSON.parse(h)?.Host;d&&(h=d)}catch{}let g=a.path;if(["ws"].includes(c.network)&&(g=g||"/"),c.network==="http"&&(h&&(h=h.split(",").map(p=>p.trim()),h=Array.isArray(h)?h[0]:h),g?g=Array.isArray(g)?g[0]:g:g="/"),g||h||["kcp","quic"].includes(c.network))if(["grpc"].includes(c.network))c[`${c.network}-opts`]={"grpc-service-name":fr(g),"_grpc-type":fr(a.type),"_grpc-authority":fr(a.authority)};else if(["kcp","quic"].includes(c.network))c[`${c.network}-opts`]={[`_${c.network}-type`]:fr(a.type),[`_${c.network}-host`]:fr(fr(h)),[`_${c.network}-path`]:fr(g)};else{let p={path:fr(g),headers:{Host:fr(h)}};f&&(p["v2ray-http-upgrade"]=!0,p["v2ray-http-upgrade-fast-open"]=!0),c[`${c.network}-opts`]=p}else delete c.network}return c["client-fingerprint"]=a.fp,c.alpn=a.alpn?a.alpn.split(","):void 0,c}}}}function m3(){return{name:"URI VLESS Parser",test:n=>/^vless:\/\//.test(n),parse:n=>{n=n.split("vless://")[1];let i,a=/^(.*?)@(.*?):(\d+)\/?(\?(.*?))?(?:#(.*?))?$/.exec(n);if(!a){let[b,m,y]=/^(.*?)(\?.*?$)/.exec(n);n=`${ft.decode(m)}${y}`,a=/^(.*?)@(.*?):(\d+)\/?(\?(.*?))?(?:#(.*?))?$/.exec(n),i=!0}let[s,u,c,f,h,g="",p]=a;i&&(u=u.replace(/^.*?:/g,"")),f=parseInt(`${f}`,10),u=decodeURIComponent(u),p!=null&&(p=decodeURIComponent(p));let d={type:"vless",name:p,server:c,port:f,uuid:u},w={};for(let b of g.split("&"))if(b){let[m,y]=b.split("="),D=y;D=decodeURIComponent(y),w[m]=D}if(d.name=p??w.remarks??w.remark??`VLESS ${c}:${f}`,d.tls=w.security&&w.security!=="none",i&&/TRUE|1/i.test(w.tls)&&(d.tls=!0,w.security=w.security??"reality"),d.sni=w.sni||w.peer,d.flow=w.flow,!d.flow&&i&&w.xtls){let b=[void 0,"xtls-rprx-direct","xtls-rprx-vision"][w.xtls];b&&(d.flow=b)}if(d["client-fingerprint"]=w.fp,d.alpn=w.alpn?w.alpn.split(","):void 0,d["skip-cert-verify"]=/(TRUE)|1/i.test(w.allowInsecure),["reality"].includes(w.security)){let b={};w.pbk&&(b["public-key"]=w.pbk),w.sid&&(b["short-id"]=w.sid),w.spx&&(b["_spider-x"]=w.spx),Object.keys(b).length>0&&(d[`${w.security}-opts`]=b)}let v=!1;if(d.network=w.type,d.network==="tcp"&&w.headerType==="http"?d.network="http":d.network==="httpupgrade"&&(d.network="ws",v=!0),!d.network&&i&&w.obfs&&(d.network=w.obfs,["none"].includes(d.network)&&(d.network="tcp")),["websocket"].includes(d.network)&&(d.network="ws"),d.network&&!["tcp","none"].includes(d.network)){let b={},m=w.host??w.obfsParam;if(m)if(w.obfsParam)try{let y=JSON.parse(m);b.headers=y}catch{b.headers={Host:m}}else b.headers={Host:m};w.serviceName?(b[`${d.network}-service-name`]=w.serviceName,["grpc"].includes(d.network)&&w.authority&&(b["_grpc-authority"]=w.authority)):i&&w.path&&(["ws","http","h2"].includes(d.network)||(b[`${d.network}-service-name`]=w.path,delete w.path)),w.path&&(b.path=w.path),["grpc"].includes(d.network)&&(b["_grpc-type"]=w.mode||"gun"),v&&(b["v2ray-http-upgrade"]=!0,b["v2ray-http-upgrade-fast-open"]=!0),Object.keys(b).length>0&&(d[`${d.network}-opts`]=b),d.network==="kcp"&&(w.seed&&(d.seed=w.seed),d.headerType=w.headerType||"none"),w.mode&&(d._mode=w.mode),w.extra&&(d._extra=w.extra),w.encryption&&(d._encryption=w.encryption),w.pqv&&(d._pqv=w.pqv)}return d}}}function NV(){return{name:"URI AnyTLS Parser",test:n=>/^anytls:\/\//.test(n),parse:n=>{let i=m3().parse(n.replace("anytls","vless"));n=n.split(/anytls:\/\//)[1];let[a,s,u,c,f="",h]=/^(.*?)@(.*?)(?::(\d+))?\/?(?:\?(.*?))?(?:#(.*?))?$/.exec(n);s=decodeURIComponent(s),c=parseInt(`${c}`,10),isNaN(c)&&(c=443),s=decodeURIComponent(s),h!=null&&(h=decodeURIComponent(h)),h=h??`AnyTLS ${u}:${c}`;let g={...i,uuid:void 0,type:"anytls",name:h,server:u,port:c,password:s};for(let p of f.split("&"))if(p){let[d,w]=p.split("=");d=d.replace(/_/g,"-"),w=decodeURIComponent(w),["alpn"].includes(d)?g[d]=w?w.split(","):void 0:["insecure"].includes(d)?g["skip-cert-verify"]=/(TRUE)|1/i.test(w):["udp"].includes(d)?g[d]=/(TRUE)|1/i.test(w):Object.keys(g).includes(d)||(g[d]=w)}return["tcp"].includes(g.network)&&!g["reality-opts"]&&(delete g.network,delete g.security),g}}}function kV(){return{name:"URI Hysteria2 Parser",test:n=>/^(hysteria2|hy2):\/\//.test(n),parse:n=>{n=n.split(/(hysteria2|hy2):\/\//)[2];let i,[a,s,u,c,f,h,g,p,d,w,v="",b]=/^(.*?)@(.*?)(:((\d+(-\d+)?)([,;]\d+(-\d+)?)*))?\/?(\?(.*?))?(?:#(.*?))?$/.exec(n);/^\d+$/.test(f)?(f=parseInt(`${f}`,10),isNaN(f)&&(f=443)):f?(i=f,f=$f(i)):f=443,s=decodeURIComponent(s),b!=null&&(b=decodeURIComponent(b)),b=b??`Hysteria2 ${u}:${f}`;let m={type:"hysteria2",name:b,server:u,port:f,ports:i,password:s},y={};for(let F of v.split("&"))if(F){let[U,k]=F.split("="),S=k;S=decodeURIComponent(k),y[U]=S}m.sni=y.sni,!m.sni&&y.peer&&(m.sni=y.peer),y.obfs&&y.obfs!=="none"&&(m.obfs=y.obfs),y.mport&&(m.ports=y.mport),m["obfs-password"]=y["obfs-password"],m["skip-cert-verify"]=/(TRUE)|1/i.test(y.insecure),m.tfo=/(TRUE)|1/i.test(y.fastopen),m["tls-fingerprint"]=y.pinSHA256;let D=y["hop-interval"]||y.hop_interval;/^\d+$/.test(D)&&(m["hop-interval"]=parseInt(`${D}`,10));let C=y.keepalive;return/^\d+$/.test(C)&&(m.keepalive=parseInt(`${C}`,10)),m}}}function LV(){return{name:"URI Hysteria Parser",test:n=>/^(hysteria|hy):\/\//.test(n),parse:n=>{n=n.split(/(hysteria|hy):\/\//)[2];let[i,a,s,u,c,f="",h]=/^(.*?)(:(\d+))?\/?(\?(.*?))?(?:#(.*?))?$/.exec(n);u=parseInt(`${u}`,10),isNaN(u)&&(u=443),h!=null&&(h=decodeURIComponent(h)),h=h??`Hysteria ${a}:${u}`;let g={type:"hysteria",name:h,server:a,port:u},p={};for(let d of f.split("&"))if(d){let[w,v]=d.split("=");w=w.replace(/_/,"-"),v=decodeURIComponent(v),["alpn"].includes(w)?g[w]=v?v.split(","):void 0:["insecure"].includes(w)?g["skip-cert-verify"]=/(TRUE)|1/i.test(v):["auth"].includes(w)?g["auth-str"]=v:["mport"].includes(w)?g.ports=v:["obfsParam"].includes(w)?g.obfs=v:["upmbps"].includes(w)?g.up=v:["downmbps"].includes(w)?g.down=v:["obfs"].includes(w)?g._obfs=v||"":["fast-open","peer"].includes(w)?p[w]=v:Object.keys(g).includes(w)||(g[w]=v)}return!g.sni&&p.peer&&(g.sni=p.peer),!g["fast-open"]&&p.fastopen&&(g["fast-open"]=!0),g.protocol||(g.protocol="udp"),g}}}function UV(){return{name:"URI TUIC Parser",test:n=>/^tuic:\/\//.test(n),parse:n=>{n=n.split(/tuic:\/\//)[1];let[i,a,s,u,c="",f]=/^(.*?)@(.*?)(?::(\d+))?\/?(?:\?(.*?))?(?:#(.*?))?$/.exec(n);a=decodeURIComponent(a);let[h,...g]=a.split(":"),p=g.join(":");u=parseInt(`${u}`,10),isNaN(u)&&(u=443),p=decodeURIComponent(p),f!=null&&(f=decodeURIComponent(f)),f=f??`TUIC ${s}:${u}`;let d={type:"tuic",name:f,server:s,port:u,password:p,uuid:h};for(let w of c.split("&"))if(w){let[v,b]=w.split("=");v=v.replace(/_/g,"-"),b=decodeURIComponent(b),["alpn"].includes(v)?d[v]=b?b.split(","):void 0:["allow-insecure","insecure"].includes(v)?d["skip-cert-verify"]=/(TRUE)|1/i.test(b):["fast-open"].includes(v)?d.tfo=!0:["disable-sni","reduce-rtt"].includes(v)?d[v]=/(TRUE)|1/i.test(b):v==="congestion-control"?(d["congestion-controller"]=b,delete d[v]):Object.keys(d).includes(v)||(d[v]=b)}return d}}}function jV(){return{name:"URI WireGuard Parser",test:n=>/^(wireguard|wg):\/\//.test(n),parse:n=>{n=n.split(/(wireguard|wg):\/\//)[2];let[i,a,s,u,c,f,h,g="",p]=/^((.*?)@)?(.*?)(:(\d+))?\/?(\?(.*?))?(?:#(.*?))?$/.exec(n);f=parseInt(`${f}`,10),isNaN(f)&&(f=51820),s=decodeURIComponent(s),p!=null&&(p=decodeURIComponent(p)),p=p??`WireGuard ${u}:${f}`;let d={type:"wireguard",name:p,server:u,port:f,"private-key":s,udp:!0};for(let w of g.split("&"))if(w){let[v,b]=w.split("=");if(v=v.replace(/_/,"-"),b=decodeURIComponent(b),["reserved"].includes(v)){let m=b.split(",").map(y=>parseInt(y.trim(),10)).filter(y=>Number.isInteger(y));m.length===3&&(d[v]=m)}else if(["address","ip"].includes(v))b.split(",").map(m=>{let y=m.trim().replace(/\/\d+$/,"").replace(/^\[/,"").replace(/\]$/,"");Wr(y)?d.ip=y:Mr(y)&&(d.ipv6=y)});else if(["mtu"].includes(v)){let m=parseInt(b.trim(),10);Number.isInteger(m)&&(d[v]=m)}else/publickey/i.test(v)?d["public-key"]=b:/privatekey/i.test(v)?d["private-key"]=b:["udp"].includes(v)?d[v]=/(TRUE)|1/i.test(b):[...Object.keys(d),"flag"].includes(v)||(d[v]=b)}return d}}}function HV(){return{name:"URI Trojan Parser",test:n=>/^trojan:\/\//.test(n),parse:n=>{let i=/^(trojan:\/\/.*?@.*?)(:(\d+))?\/?(\?.*?)?$/.exec(n);i?.[2]||(n=n.replace(i[1],`${i[1]}:443`));let[s,u]=n.split(/#(.+)/,2),f=tw().parse(s);if(oa(u))try{f.name=decodeURIComponent(u)}catch(h){console.log(h)}return f}}}function MV(){return{name:"Clash Parser",test:n=>{let i;try{i=sw.default.parse(n)}catch{i=da.parse(n)}return!!i?.type},parse:n=>{let i;try{i=sw.default.parse(n)}catch{i=da.parse(n)}if(!["anytls","mieru","juicity","ss","ssr","vmess","socks5","http","snell","trojan","tuic","vless","hysteria","hysteria2","wireguard","ssh","direct"].includes(i.type))throw new Error(`Clash does not support proxy with type: ${i.type}`);return["vmess","vless"].includes(i.type)&&(i.sni=i.servername,delete i.servername),i["server-cert-fingerprint"]&&(i["tls-fingerprint"]=i["server-cert-fingerprint"]),i.fingerprint&&(i["tls-fingerprint"]=i.fingerprint),i["dialer-proxy"]&&(i["underlying-proxy"]=i["dialer-proxy"]),i["benchmark-url"]&&(i["test-url"]=i["benchmark-url"]),i["benchmark-timeout"]&&(i["test-timeout"]=i["benchmark-timeout"]),i}}}function qV(){return{name:"QX SS Parser",test:n=>/^shadowsocks\s*=/.test(n.split(",")[0].trim())&&n.indexOf("ssr-protocol")===-1,parse:n=>Su().parse(n)}}function VV(){return{name:"QX SSR Parser",test:n=>/^shadowsocks\s*=/.test(n.split(",")[0].trim())&&n.indexOf("ssr-protocol")!==-1,parse:n=>Su().parse(n)}}function KV(){return{name:"QX VMess Parser",test:n=>/^vmess\s*=/.test(n.split(",")[0].trim()),parse:n=>Su().parse(n)}}function zV(){return{name:"QX VLESS Parser",test:n=>/^vless\s*=/.test(n.split(",")[0].trim()),parse:n=>Su().parse(n)}}function GV(){return{name:"QX Trojan Parser",test:n=>/^trojan\s*=/.test(n.split(",")[0].trim()),parse:n=>Su().parse(n)}}function YV(){return{name:"QX HTTP Parser",test:n=>/^http\s*=/.test(n.split(",")[0].trim()),parse:n=>Su().parse(n)}}function WV(){return{name:"QX Socks5 Parser",test:n=>/^socks5\s*=/.test(n.split(",")[0].trim()),parse:n=>Su().parse(n)}}function XV(){return{name:"Loon SS Parser",test:n=>n.split(",")[0].split("=")[1].trim().toLowerCase()==="shadowsocks",parse:n=>Ta().parse(n)}}function JV(){return{name:"Loon SSR Parser",test:n=>n.split(",")[0].split("=")[1].trim().toLowerCase()==="shadowsocksr",parse:n=>Ta().parse(n)}}function ZV(){return{name:"Loon VMess Parser",test:n=>/^.*=\s*vmess/i.test(n.split(",")[0])&&n.indexOf("username")===-1,parse:n=>Ta().parse(n)}}function QV(){return{name:"Loon Vless Parser",test:n=>/^.*=\s*vless/i.test(n.split(",")[0]),parse:n=>Ta().parse(n)}}function eK(){return{name:"Loon Trojan Parser",test:n=>/^.*=\s*trojan/i.test(n.split(",")[0]),parse:n=>Ta().parse(n)}}function tK(){return{name:"Loon Hysteria2 Parser",test:n=>/^.*=\s*Hysteria2/i.test(n.split(",")[0]),parse:n=>Ta().parse(n)}}function rK(){return{name:"Loon HTTP Parser",test:n=>/^.*=\s*http/i.test(n.split(",")[0]),parse:n=>Ta().parse(n)}}function nK(){return{name:"Loon SOCKS5 Parser",test:n=>/^.*=\s*socks5/i.test(n.split(",")[0]),parse:n=>Ta().parse(n)}}function iK(){return{name:"Loon WireGuard Parser",test:n=>/^.*=\s*wireguard/i.test(n.split(",")[0]),parse:n=>{let i=n.match(/(^.*?)\s*?=\s*?wireguard\s*?,.+?\s*?=\s*?.+?/i)?.[1];n=n.replace(i,"").replace(/^\s*?=\s*?wireguard\s*/i,"");let a=n.match(/,\s*?peers\s*?=\s*?\[\s*?\{\s*?(.+?)\s*?\}\s*?\]/i)?.[1],s=a.match(/(,|^)\s*?endpoint\s*?=\s*?"?(.+?):(\d+)"?\s*?(,|$)/i),u=s?.[2],c=parseInt(s?.[3],10),f=n.match(/(,|^)\s*?mtu\s*?=\s*?"?(\d+?)"?\s*?(,|$)/i)?.[2];f&&(f=parseInt(f,10));let h=n.match(/(,|^)\s*?keepalive\s*?=\s*?"?(\d+?)"?\s*?(,|$)/i)?.[2];h&&(h=parseInt(h,10));let g=a.match(/(,|^)\s*?reserved\s*?=\s*?"?(\[\s*?.+?\s*?\])"?\s*?(,|$)/i)?.[2];g&&(g=JSON.parse(g));let p,d=n.match(/(,|^)\s*?dns\s*?=\s*?"?(.+?)"?\s*?(,|$)/i)?.[2],w=n.match(/(,|^)\s*?dnsv6\s*?=\s*?"?(.+?)"?\s*?(,|$)/i)?.[2];(d||w)&&(p=[],d&&p.push(d),w&&p.push(w));let v=a.match(/(,|^)\s*?allowed-ips\s*?=\s*?"(.+?)"\s*?(,|$)/i)?.[2]?.split(",").map(F=>F.trim()),b=a.match(/(,|^)\s*?preshared-key\s*?=\s*?"?(.+?)"?\s*?(,|$)/i)?.[2],m=n.match(/(,|^)\s*?interface-ip\s*?=\s*?"?(.+?)"?\s*?(,|$)/i)?.[2],y=n.match(/(,|^)\s*?interface-ipv6\s*?=\s*?"?(.+?)"?\s*?(,|$)/i)?.[2],D=a.match(/(,|^)\s*?public-key\s*?=\s*?"?(.+?)"?\s*?(,|$)/i)?.[2],C={type:"wireguard",name:i,server:u,port:c,ip:m,ipv6:y,"private-key":n.match(/(,|^)\s*?private-key\s*?=\s*?"?(.+?)"?\s*?(,|$)/i)?.[2],"public-key":D,mtu:f,keepalive:h,reserved:g,"allowed-ips":v,"preshared-key":b,dns:p,udp:!0,peers:[{server:u,port:c,ip:m,ipv6:y,"public-key":D,"pre-shared-key":b,"allowed-ips":v,reserved:g}]};return Array.isArray(C.dns)&&C.dns.length>0&&(C["remote-dns-resolve"]=!0),C}}}function sK(){return{name:"Surge Direct Parser",test:n=>/^.*=\s*direct/.test(n.split(",")[0]),parse:n=>is().parse(n)}}function aK(){return{name:"Surge SSH Parser",test:n=>/^.*=\s*ssh/.test(n.split(",")[0]),parse:n=>is().parse(n)}}function uK(){return{name:"Surge SS Parser",test:n=>/^.*=\s*ss/.test(n.split(",")[0]),parse:n=>is().parse(n)}}function oK(){return{name:"Surge VMess Parser",test:n=>/^.*=\s*vmess/.test(n.split(",")[0])&&n.indexOf("username")!==-1,parse:n=>is().parse(n)}}function cK(){return{name:"Surge Trojan Parser",test:n=>/^.*=\s*trojan/.test(n.split(",")[0]),parse:n=>is().parse(n)}}function lK(){return{name:"Surge HTTP Parser",test:n=>/^.*=\s*https?/.test(n.split(",")[0]),parse:n=>is().parse(n)}}function fK(){return{name:"Surge Socks5 Parser",test:n=>/^.*=\s*socks5(-tls)?/.test(n.split(",")[0]),parse:n=>is().parse(n)}}function hK(){return{name:"Surge External Parser",test:n=>/^.*=\s*external/.test(n.split(",")[0]),parse:n=>{let i=/^\s*(.*?)\s*?=\s*?external\s*?,\s*(.*?)\s*$/.exec(n),[a,s,u]=i;n=u;let c=/(,|^)\s*?exec\s*?=\s*"(.*?)"\s*?(,|$)/.exec(n)?.[2];c||(c=/(,|^)\s*?exec\s*?=\s*(.*?)\s*?(,|$)/.exec(n)?.[2]);let f=/(,|^)\s*?local-port\s*?=\s*"(.*?)"\s*?(,|$)/.exec(n)?.[2];f||(f=/(,|^)\s*?local-port\s*?=\s*(.*?)\s*?(,|$)/.exec(n)?.[2]);let h=/(,|^)\s*?args\s*?=\s*("(.*?)"|(.*?))(?=\s*?(,|$))/g,g,p=[];for(;(g=h.exec(n))!==null;)g[3]!=null?p.push(g[3]):g[4]!=null&&p.push(g[4]);let d=/(,|^)\s*?addresses\s*?=\s*("(.*?)"|(.*?))(?=\s*?(,|$))/g,w,v=[];for(;(w=d.exec(n))!==null;){let m;w[3]!=null?m=w[3]:w[4]!=null&&(m=w[4]),m!=null&&(m=`${m}`.trim().replace(/^\[/,"").replace(/\]$/,"")),vK(m)&&v.push(m)}return{type:"external",name:s,exec:c,"local-port":f,args:p,addresses:v}}}}function dK(){return{name:"Surge Snell Parser",test:n=>/^.*=\s*snell/.test(n.split(",")[0]),parse:n=>is().parse(n)}}function pK(){return{name:"Surge Tuic Parser",test:n=>/^.*=\s*tuic(-v5)?/.test(n.split(",")[0]),parse:n=>{let{port_hopping:i,line:a}=g3(n),s=is().parse(a);return s.ports=i,s}}}function gK(){return{name:"Surge WireGuard Parser",test:n=>/^.*=\s*wireguard/.test(n.split(",")[0]),parse:n=>is().parse(n)}}function mK(){return{name:"Surge Hysteria2 Parser",test:n=>/^.*=\s*hysteria2/.test(n.split(",")[0]),parse:n=>{let{port_hopping:i,line:a}=g3(n),s=is().parse(a);return s.ports=i,s}}}function vK(e){return Wr(e)||Mr(e)}var v3=[RV(),xV(),PV(),OV(),TV(),m3(),UV(),jV(),LV(),kV(),HV(),NV(),MV(),sK(),aK(),uK(),oK(),cK(),lK(),dK(),pK(),gK(),mK(),fK(),hK(),XV(),JV(),ZV(),QV(),tK(),eK(),rK(),nK(),iK(),qV(),VV(),KV(),zV(),GV(),YV(),WV()];var Ds=class{constructor({token,key,syncPlatform}){let{isStash,isLoon,isShadowRocket,isQX}=hn(),{defaultProxy,defaultTimeout:timeout,githubProxy}=R.read(Kt),proxy=defaultProxy;R.env.isNode&&(proxy=proxy||eval("process.env.SUB_STORE_BACKEND_DEFAULT_PROXY")),syncPlatform==="gitlab"?(this.headers={"PRIVATE-TOKEN":`${token}`,"User-Agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.141 Safari/537.36"},this.http=xs({baseURL:"https://gitlab.com/api/v4",headers:{...this.headers,...isStash&&proxy?{"X-Stash-Selected-Proxy":encodeURIComponent(proxy)}:{},...isShadowRocket&&proxy?{"X-Surge-Policy":proxy}:{}},...proxy?{proxy}:{},...isLoon&&proxy?{node:proxy}:{},...isQX&&proxy?{opts:{policy:proxy}}:{},...proxy?ru(proxy):{},timeout:timeout||8e3,events:{onResponse:e=>{if(/^[45]/.test(String(e.statusCode))){let t=JSON.parse(e.body);return Promise.reject(`ERROR: ${t.message?.error??t.message}`)}else return e}}})):(this.headers={Authorization:`token ${token}`,"User-Agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.141 Safari/537.36"},this.http=xs({baseURL:`${githubProxy?`${githubProxy}/`:""}https://api.github.com`,headers:{...this.headers,...isStash&&proxy?{"X-Stash-Selected-Proxy":encodeURIComponent(proxy)}:{},...isShadowRocket&&proxy?{"X-Surge-Policy":proxy}:{}},...proxy?{proxy}:{},...isLoon&&proxy?{node:proxy}:{},...isQX&&proxy?{opts:{policy:proxy}}:{},...proxy?ru(proxy):{},timeout:timeout||8e3,events:{onResponse:e=>/^[45]/.test(String(e.statusCode))?Promise.reject(`ERROR: ${JSON.parse(e.body).message}`):e}})),this.key=key,this.syncPlatform=syncPlatform}async locate(){return this.syncPlatform==="gitlab"?this.http.get("/snippets").then(e=>{let t=JSON.parse(e.body);for(let r of t)if(r.title===this.key)return r}):this.http.get("/gists?per_page=100&page=1").then(e=>{let t=JSON.parse(e.body);R.info(`\u83B7\u53D6\u5230\u5F53\u524D GitHub \u7528\u6237\u7684 gist: ${t.length} \u4E2A`);for(let r of t)if(r.description===this.key)return r})}async upload(e){if(Object.keys(e).length===0)return Promise.reject("\u672A\u63D0\u4F9B\u9700\u4E0A\u4F20\u7684\u6587\u4EF6");let t=await this.locate(),r=e;if(t?.id){this.syncPlatform==="gitlab"&&(t.files=t.files.reduce((a,s)=>(a[s.path]=s,a),{}));let n=[],i={...t.files};return Object.keys(r).map(a=>{i[a]?r[a].content==null||r[a].content===""?(delete i[a],n.push({action:"delete",file_path:a})):(i[a]=r[a],n.push({action:"update",file_path:a,content:r[a].content})):r[a].content==null||r[a].content===""?(delete i[a],delete r[a]):(i[a]=r[a],n.push({action:"create",file_path:a,content:r[a].content}))}),this.syncPlatform==="gitlab"?Object.keys(i).length===0?Promise.reject("\u672C\u6B21\u64CD\u4F5C\u5C06\u5BFC\u81F4\u6240\u6709\u6587\u4EF6\u7684\u5185\u5BB9\u90FD\u4E3A\u7A7A, \u65E0\u6CD5\u66F4\u65B0 snippet"):Object.keys(i).length>10?Promise.reject("\u672C\u6B21\u64CD\u4F5C\u5C06\u5BFC\u81F4 snippet \u7684\u6587\u4EF6\u6570\u8D85\u8FC7 10, \u65E0\u6CD5\u66F4\u65B0 snippet"):(r=n,this.http.put({headers:{...this.headers,"Content-Type":"application/json"},url:`/snippets/${t.id}`,body:JSON.stringify({files:r})})):Object.keys(i).length===0?Promise.reject("\u672C\u6B21\u64CD\u4F5C\u5C06\u5BFC\u81F4\u6240\u6709\u6587\u4EF6\u7684\u5185\u5BB9\u90FD\u4E3A\u7A7A, \u65E0\u6CD5\u66F4\u65B0 gist"):this.http.patch({url:`/gists/${t.id}`,body:JSON.stringify({files:r})})}else return r=Object.entries(r).reduce((n,[i,a])=>(a.content!==null&&a.content!==""&&(n[i]=a),n),{}),this.syncPlatform==="gitlab"?Object.keys(r).length===0?Promise.reject("\u6240\u6709\u6587\u4EF6\u7684\u5185\u5BB9\u90FD\u4E3A\u7A7A, \u65E0\u6CD5\u521B\u5EFA snippet"):(r=Object.keys(r).map(n=>({file_path:n,content:r[n].content})),this.http.post({headers:{...this.headers,"Content-Type":"application/json"},url:"/snippets",body:JSON.stringify({title:this.key,visibility:"private",files:r})})):Object.keys(r).length===0?Promise.reject("\u6240\u6709\u6587\u4EF6\u7684\u5185\u5BB9\u90FD\u4E3A\u7A7A, \u65E0\u6CD5\u521B\u5EFA gist"):this.http.post({url:"/gists",body:JSON.stringify({description:this.key,public:!1,files:r})})}async download(e){let t=await this.locate();if(t?.id)try{let{files:r}=await this.http.get(`/gists/${t.id}`).then(i=>JSON.parse(i.body)),n=r[e].raw_url;return await this.http.get(n).then(i=>i.body)}catch(r){return Promise.reject(r)}else return Promise.reject(`\u627E\u4E0D\u5230 Sub-Store Gist (${this.key})`)}};var y3=Yr(iw());function wK(e){for(let t of V0)try{if(t.test(e))return R.info(`Pre-processor [${t.name}] activated`),t.parse(e)}catch(r){R.error(`Parser [${t.name}] failed
 Reason: ${r}`)}return e}function EK(e){e=wK(e);let t=e.split(`
`),r=[],n;for(let i of t){if(i=i.trim(),i.length===0)continue;let a=!1;if(n){let[s,u]=w3(n,i);u||(r.push(A3(s)),a=!0)}if(!a)for(let s of v3){let[u,c]=w3(s,i);if(!c){r.push(A3(u)),n=s,a=!0,R.info(`${s.name} is activated`);break}}a||R.error(`Failed to parse line: ${i}`)}return r.filter(i=>(["vless","vmess"].includes(i.type)&&(i0(i.uuid)||R.error(`UUID may be invalid: ${i.name} ${i.uuid}`)),!0))}async function AK(proxies,operators=[],targetPlatform,source,$options){for(let item of operators){if(item.disabled){R.log(`Skipping disabled operator: "${item.type}" with arguments:
 >>> ${JSON.stringify(item.args,null,2)||"None"}`);continue}let script,$arguments={};if(item.type.indexOf("Script")!==-1){let{mode,content}=item.args;if(mode==="link"){let url=content||"",rawArgs=url.split("#");if(rawArgs.length>1)try{$arguments=JSON.parse(decodeURIComponent(rawArgs[1]))}catch{for(let t of rawArgs[1].split("&")){let r=t.split("=")[0],n=t.split("=")[1];$arguments[r]=n==null||n===""?!0:decodeURIComponent(n)}}url=`${url.split("#")[0]}${rawArgs[2]?`#${rawArgs[2]}`:$arguments?.noCache!=null||$arguments?.insecure!=null?`#${rawArgs[1]}`:""}`;let downloadUrlMatch=url.split("#")[0].match(/^\/api\/(file|module)\/(.+)/);if(downloadUrlMatch){let e="";try{e=downloadUrlMatch?.[1];let t=downloadUrlMatch?.[2];if(t==null)throw new Error(`\u672C\u5730 ${e} URL \u65E0\u6548: ${url}`);t=decodeURIComponent(t);let r=e==="module"?jn:Lt,n=ct(R.read(r),t);if(!n)throw new Error(`\u627E\u4E0D\u5230 ${e}: ${t}`);e==="module"?script=n.content:script=await vn({type:"file",name:t})}catch(t){throw R.error(`Error when loading ${e}: ${item.args.content}.
 Reason: ${t}`),new Error(`\u65E0\u6CD5\u52A0\u8F7D ${e}: ${url}`)}}else if(url?.startsWith("/"))try{let fs=require("fs");script=fs.readFileSync(url.split("#")[0],"utf8")}catch(e){throw R.error(`Error when reading local script: ${item.args.content}.
 Reason: ${e}`),new Error(`\u65E0\u6CD5\u4ECE\u8BE5\u8DEF\u5F84\u8BFB\u53D6\u811A\u672C\u6587\u4EF6: ${url}`)}else try{script=await un(url)}catch(e){throw R.error(`Error when downloading remote script: ${item.args.content}.
 Reason: ${e}`),new Error(`\u65E0\u6CD5\u4E0B\u8F7D\u811A\u672C: ${url}`)}}else script=content,$arguments=item.args.arguments||{}}if(!q0[item.type]){R.error(`Unknown operator: "${item.type}"`);continue}R.log(`Applying "${item.type}" with arguments:
 >>> ${JSON.stringify(item.args,null,2)||"None"}`);let processor;item.type.indexOf("Script")!==-1?processor=q0[item.type](script,targetPlatform,$arguments,source,$options):processor=q0[item.type](item.args||{}),proxies=await cC(processor,proxies)}return proxies}function yK(e,t,r,n={}){let i=Pp[t];if(!i)throw new Error(`Target platform: ${t} is not supported!`);let a=/Surge|SurgeMac|Shadowrocket/i.test(t);if(e=e.filter(s=>s.supported&&s.supported[t]===!1?!1:(["vless","vmess"].includes(s.type)&&(i0(s.uuid)||R.error(`UUID may be invalid: ${s.name} ${s.uuid}`)),!0)),e=e.map(s=>(s._resolved=s.resolved,oa(s.name)||(s.name=`${s.type} ${s.server}:${s.port}`),s["disable-sni"]&&(a?s.sni="off":["tuic"].includes(s.type)||(R.error(`Target platform ${t} does not support sni off. Proxy's fields (sni, tls-fingerprint and skip-cert-verify) will be modified.`),s.sni="",s["skip-cert-verify"]=!0,delete s["tls-fingerprint"])),s.ports&&(s.ports=String(s.ports),["ClashMeta"].includes(t)||(s.ports=s.ports.replace(/\//g,",")),s.port||(s.port=$f(s.ports))),s)),R.log(`Producing proxies for target: ${t}`),typeof i.type>"u"||i.type==="SINGLE"){let s=e.map(u=>{try{return i.produce(u,r,n)}catch(c){return R.error(`Cannot produce proxy: ${JSON.stringify(u,null,2)}
Reason: ${c}`),""}}).filter(u=>u.length>0);return s=r==="internal"?s:s.join(`
`),t.startsWith("Surge")&&e.length>0&&e.every(u=>u.type==="wireguard")&&(s=`#!name=${e[0]?._subName}
#!desc=${e[0]?._desc??""}
#!category=${e[0]?._category??""}
${s}`),s}else if(i.type==="ALL")return i.produce(e,r,n)}var Ot={parse:EK,process:AK,produce:yK,ipAddress:n0,getRandomPort:$f,isIPv4:Wr,isIPv6:Mr,isIP:aw,yaml:da,getFlag:El,removeFlag:Gf,getISO:k0,MMDB:N0,Gist:Ds,download:un,downloadFile:Kh,isValidUUID:i0,doh:yl,Buffer:Mp.Buffer,Base64:ft,JSON5:y3.default};function w3(e,t){if(!bK(e,t))return[null,new Error("Parser mismatch")];try{return[e.parse(t),null]}catch(r){return[null,r]}}function bK(e,t){try{return e.test(t)}catch{return!1}}function E3(e){if(typeof e=="string"||typeof e=="number"){if(e=String(e).trim(),e==="")return"/";if(!e.startsWith("/"))return"/"+e}return e}function A3(e){typeof e.cipher=="string"&&(e.cipher=e.cipher.toLowerCase()),typeof e.password=="number"&&(e.password=ny(e.password)),["ss"].includes(e.type)&&e.cipher==="none"&&!e.password&&(e.password=""),e.interface&&(e["interface-name"]=e.interface,delete e.interface),ry(e.port)&&(e.port=parseInt(e.port,10)),e.server&&(e.server=`${e.server}`.trim().replace(/^\[/,"").replace(/\]$/,"")),e.network==="ws"&&(!e["ws-opts"]&&(e["ws-path"]||e["ws-headers"])&&(e["ws-opts"]={},e["ws-path"]&&(e["ws-opts"].path=e["ws-path"]),e["ws-headers"]&&(e["ws-opts"].headers=e["ws-headers"])),delete e["ws-path"],delete e["ws-headers"]);let t=e[`${e.network}-opts`]?.path;if(Array.isArray(t)?e[`${e.network}-opts`].path=t.map(n=>E3(n)):t!=null&&(e[`${e.network}-opts`].path=E3(t)),e.type==="trojan"&&e.network==="tcp"&&delete e.network,["vless"].includes(e.type)&&(e.network||(e.network="tcp")),["trojan","tuic","hysteria","hysteria2","juicity","anytls"].includes(e.type)&&(e.tls=!0),e.network){let n=e[`${e.network}-opts`]?.headers?.Host,i=e[`${e.network}-opts`]?.headers?.host;e.network==="h2"?!i&&n&&(e[`${e.network}-opts`].headers.host=n,delete e[`${e.network}-opts`].headers.Host):i&&!n&&(e[`${e.network}-opts`].headers.Host=i,delete e[`${e.network}-opts`].headers.host)}if(e.network==="h2"){let n=e["h2-opts"]?.headers?.host,i=e["h2-opts"]?.path;n&&!Array.isArray(n)&&(e["h2-opts"].headers.host=[n]),Array.isArray(i)&&(e["h2-opts"].path=i[0])}if(!e.tls&&["ws","http"].includes(e.network)&&!e[`${e.network}-opts`]?.headers?.Host&&!aw(e.server)&&(e[`${e.network}-opts`]=e[`${e.network}-opts`]||{},e[`${e.network}-opts`].headers=e[`${e.network}-opts`].headers||{},e[`${e.network}-opts`].headers.Host=["vmess","vless"].includes(e.type)&&e.network==="http"?[e.server]:e.server),["vmess","vless"].includes(e.type)&&e.network==="http"){let n=e[`${e.network}-opts`]?.path,i=e[`${e.network}-opts`]?.headers?.Host;i&&!Array.isArray(i)&&(e[`${e.network}-opts`].headers.Host=[i]),n&&!Array.isArray(n)&&(e[`${e.network}-opts`].path=[n])}if(e.tls&&!e.sni&&(aw(e.server)||(e.sni=e.server),!e.sni&&e.network)){let n=e[`${e.network}-opts`]?.headers?.Host;n=Array.isArray(n)?n[0]:n,n&&(e.sni=n)}if(e.ports?e.ports=String(e.ports).replace(/\//g,","):delete e.ports,["hysteria2"].includes(e.type)&&e.obfs&&!["salamander"].includes(e.obfs)&&!e["obfs-password"]&&(e["obfs-password"]=e.obfs,e.obfs="salamander"),["hysteria2"].includes(e.type)&&!e["obfs-password"]&&e.obfs_password&&(e["obfs-password"]=e.obfs_password,delete e.obfs_password),["vless"].includes(e.type)&&(e["reality-opts"]&&Object.keys(e["reality-opts"]).length===0&&delete e["reality-opts"],e["grpc-opts"]&&Object.keys(e["grpc-opts"]).length===0&&delete e["grpc-opts"],!e["reality-opts"]&&!e.flow&&delete e.flow,["http"].includes(e.network)&&(e[`${e.network}-opts`]?.path||(e[`${e.network}-opts`]||(e[`${e.network}-opts`]={}),e[`${e.network}-opts`].path=["/"]))),typeof e.name!="string")if(/^\d+$/.test(e.name))e.name=`${e.name}`;else try{e.name?.data?e.name=Mp.Buffer.from(e.name.data).toString("utf8"):e.name=Mp.Buffer.from(e.name).toString("utf8")}catch(n){R.error(`proxy.name decode failed
Reason: ${n}`),e.name=`${e.type} ${e.server}:${e.port}`}["ws","http","h2"].includes(e.network)&&(["ws","h2"].includes(e.network)&&!e[`${e.network}-opts`]?.path?(e[`${e.network}-opts`]=e[`${e.network}-opts`]||{},e[`${e.network}-opts`].path="/"):e.network==="http"&&(!Array.isArray(e[`${e.network}-opts`]?.path)||e[`${e.network}-opts`]?.path.every(n=>!n))&&(e[`${e.network}-opts`]=e[`${e.network}-opts`]||{},e[`${e.network}-opts`].path=["/"])),["","off"].includes(e.sni)&&(e["disable-sni"]=!0);let r=e.ca_str;e["ca-str"]?r=e["ca-str"]:r&&(delete e.ca_str,e["ca-str"]=r);try{R.env.isNode&&!r&&e._ca&&(r=R.node.fs.readFileSync(e._ca,{encoding:"utf8"}))}catch(n){R.error(`Read ca file failed
Reason: ${n}`)}return!e["tls-fingerprint"]&&r&&(e["tls-fingerprint"]=Wy.generateFingerprint(r)),["ss"].includes(e.type)&&ue(e,"shadow-tls-password")&&(e.plugin="shadow-tls",e["plugin-opts"]={host:e["shadow-tls-sni"],password:e["shadow-tls-password"],version:e["shadow-tls-version"]},delete e["shadow-tls-sni"],delete e["shadow-tls-password"],delete e["shadow-tls-version"]),e}function aw(e){return Wr(e)||Mr(e)}function _K(){return{name:"HTML",test:n=>/^<!DOCTYPE html>/.test(n),parse:()=>""}}function CK(){return{name:"Clash Provider",test:n=>/^payload:/gm.exec(n).index>=0,parse:n=>n.replace("payload:","").replace(/^\s*-\s*/gm,"")}}var b3=[_K(),CK()];function DK(){return{type:"SINGLE",func:r=>["URL-REGEX","DEST-PORT","SRC-IP","IN-PORT","PROTOCOL","GEOSITE","GEOIP"].indexOf(r.type)!==-1?null:`${{"DOMAIN-KEYWORD":"HOST-KEYWORD","DOMAIN-SUFFIX":"HOST-SUFFIX",DOMAIN:"HOST","IP-CIDR6":"IP6-CIDR"}[r.type]||r.type},${r.content},SUB-STORE`}}function _3(){return{type:"SINGLE",func:r=>{if(["GEOSITE","GEOIP"].indexOf(r.type)!==-1)return null;let i=`${r.type},${r.content}`;return["IP-CIDR","IP-CIDR6"].includes(r.type)&&(i+=r.options?.length>0?`,${r.options.join(",")}`:""),i}}}function FK(){return{type:"SINGLE",func:r=>["SRC-IP","GEOSITE","GEOIP"].indexOf(r.type)!==-1?null:(["IP-CIDR","IP-CIDR6"].includes(r.type)&&r.options&&(r.options=r.options.filter(i=>["no-resolve"].includes(i))),_3().func(r))}}function SK(){return{type:"ALL",func:r=>{let n={"DEST-PORT":"DST-PORT","SRC-IP":"SRC-IP-CIDR","IN-PORT":"SRC-PORT"},i={payload:r.map(a=>{let s=`${n[a.type]||a.type},${a.content}`;return["IP-CIDR","IP-CIDR6","GEOIP"].includes(a.type)&&(a.options&&(a.options=a.options.filter(u=>["no-resolve"].includes(u))),s+=a.options?.length>0?`,${a.options.join(",")}`:""),s})};return da.dump(i)}}}var C3={QX:DK(),Surge:_3(),Loon:FK(),Clash:SK()};var IK=[[/^(DOMAIN|host|HOST)$/,"DOMAIN"],[/^(DOMAIN-KEYWORD|host-keyword|HOST-KEYWORD)$/,"DOMAIN-KEYWORD"],[/^(DOMAIN-SUFFIX|host-suffix|HOST-SUFFIX)$/,"DOMAIN-SUFFIX"],[/^USER-AGENT$/i,"USER-AGENT"],[/^PROCESS-NAME$/,"PROCESS-NAME"],[/^(DEST-PORT|DST-PORT)$/,"DST-PORT"],[/^SRC-IP(-CIDR)?$/,"SRC-IP"],[/^(IN|SRC)-PORT$/,"IN-PORT"],[/^PROTOCOL$/,"PROTOCOL"],[/^IP-CIDR$/i,"IP-CIDR"],[/^(IP-CIDR6|ip6-cidr|IP6-CIDR)$/,"IP-CIDR6"],[/^GEOIP$/i,"GEOIP"],[/^GEOSITE$/i,"GEOSITE"]];function BK(){return{name:"Universal Rule Parser",test:()=>!0,parse:n=>{let i=n.split(`
`),a=[];for(let s of i)if(s=s.trim(),s.length!==0&&!/\s*#/.test(s))try{let u=s.split(",").map(h=>h.trim()),c=u[0],f=!1;for(let h of IK)if(h[0].test(c)){f=!0;let p={type:h[1],content:u[1]};["IP-CIDR","IP-CIDR6","GEOIP"].includes(p.type)&&(p.options=u.slice(2)),a.push(p)}if(!f)throw new Error("Invalid rule type: "+c)}catch(u){console.log(`Failed to parse line: ${s}
 Reason: ${u}`)}return a}}}var D3=[BK()];var Ec=function(){function e(n){for(let i of b3)try{if(i.test(n))return R.info(`Pre-processor [${i.name}] activated`),i.parse(n)}catch(a){R.error(`Parser [${i.name}] failed
 Reason: ${a}`)}return n}function t(n){n=e(n);for(let i of D3){let a;try{a=i.test(n)}catch{a=!1}if(a)return R.info(`Rule parser [${i.name}] is activated!`),i.parse(n)}}function r(n,i){let a=C3[i];if(!a)throw new Error(`Target platform: ${i} is not supported!`);if(typeof a.type>"u"||a.type==="SINGLE")return n.map(s=>{try{return a.func(s)}catch(u){return console.log(`ERROR: cannot produce rule: ${JSON.stringify(s)}
Reason: ${u}`),""}}).filter(s=>s.length>0).join(`
`);if(a.type==="ALL")return a.func(n)}return{parse:t,produce:r}}();function uw(e){R.read(Bt)||R.write({},Bt),e.get("/api/artifacts/restore",$K),e.route("/api/artifacts").get(RK).post(OK).put(xK),e.route("/api/artifact/:name").get(PK).patch(TK).delete(NK)}async function $K(e,t){R.info("\u5F00\u59CB\u6062\u590D\u8FDC\u7A0B\u914D\u7F6E...");try{let{gistToken:r,syncPlatform:n}=R.read(Kt);if(!r)return Promise.reject("\u672A\u8BBE\u7F6E GitHub Token\uFF01");let i=new Ds({token:r,key:Lo,syncPlatform:n});try{let a=await i.locate();if(!a?.files)throw new Error("\u627E\u4E0D\u5230 Sub-Store Gist \u6587\u4EF6\u5217\u8868");let s=R.read(Bt),u=[];Object.keys(a.files).map(c=>{let f=a.files[c]?.filename;if(f)if(encodeURIComponent(f)!==f)R.error(`\u6587\u4EF6\u540D ${f} \u672A\u7F16\u7801 \u4E0D\u4FDD\u5B58`),u.push(f);else{let h=ct(s,f);h?Os(s,f,{...h,url:a.files[c]?.raw_url.replace(/\/raw\/[^/]*\/(.*)/,"/raw/$1")}):s.push({name:`${f}`,url:a.files[c]?.raw_url.replace(/\/raw\/[^/]*\/(.*)/,"/raw/$1")})}}),R.write(s,Bt)}catch(a){throw R.error(`\u67E5\u627E Sub-Store Gist \u65F6\u53D1\u751F\u9519\u8BEF: ${a.message??a}`),a}je(t)}catch(r){R.error(`\u6062\u590D\u8FDC\u7A0B\u914D\u7F6E\u5931\u8D25\uFF0C\u539F\u56E0\uFF1A${r.message??r}`),Te(t,new pr("FAILED_TO_RESTORE_ARTIFACTS","Failed to restore artifacts",`Reason: ${r.message??r}`))}}function RK(e,t){let r=R.read(Bt);je(t,r)}function xK(e,t){let r=e.body;R.write(r,Bt),je(t)}async function PK(e,t){let{name:r}=e.params,n=R.read(Bt),i=ct(n,r);i?je(t,i):Te(t,new br("RESOURCE_NOT_FOUND",`Artifact ${r} does not exist!`),404)}function OK(e,t){let r=e.body;if(!F3(r.name)){Te(t,new jt("INVALID_ARTIFACT_NAME",`Artifact name ${r.name} is invalid.`));return}R.info(`\u6B63\u5728\u521B\u5EFA\u8FDC\u7A0B\u914D\u7F6E\uFF1A${r.name}`);let n=R.read(Bt);ct(n,r.name)?Te(t,new jt("DUPLICATE_KEY",`Artifact ${r.name} already exists.`)):(n.push(r),R.write(n,Bt),je(t,r,201))}function TK(e,t){let r=R.read(Bt),n=e.params.name,i=ct(r,n);if(i){R.info(`\u6B63\u5728\u66F4\u65B0\u8FDC\u7A0B\u914D\u7F6E\uFF1A${i.name}`);let a={...i,...e.body};if(!F3(a.name)){Te(t,new jt("INVALID_ARTIFACT_NAME",`Artifact name ${a.name} is invalid.`));return}Os(r,n,a),R.write(r,Bt),je(t,a)}else Te(t,new jt("DUPLICATE_KEY",`Artifact ${n} already exists.`))}async function NK(e,t){let{name:r}=e.params;R.info(`\u6B63\u5728\u5220\u9664\u8FDC\u7A0B\u914D\u7F6E\uFF1A${r}`);let n=R.read(Bt);try{let i=ct(n,r);if(!i)throw new Error(`\u8FDC\u7A0B\u914D\u7F6E\uFF1A${r}\u4E0D\u5B58\u5728\uFF01`);if(i.updated){let a={};a[encodeURIComponent(i.name)]={content:""},encodeURIComponent(i.name)!==i.name&&(a[i.name]={content:""});try{await qp(a)}catch(s){R.error(`Function syncToGist: ${r} : ${s}`)}}gs(n,r),R.write(n,Bt),je(t)}catch(i){R.error(`\u65E0\u6CD5\u5220\u9664\u8FDC\u7A0B\u914D\u7F6E\uFF1A${r}\uFF0C\u539F\u56E0\uFF1A${i}`),Te(t,new pr("FAILED_TO_DELETE_ARTIFACT",`Failed to delete artifact ${r}`,`Reason: ${i}`))}}function F3(e){return/^[a-zA-Z0-9._-]*$/.test(e)}async function qp(e){let{gistToken:t,syncPlatform:r}=R.read(Kt);if(!t)return Promise.reject("\u672A\u8BBE\u7F6E GitHub Token\uFF01");let i=await new Ds({token:t,key:Lo,syncPlatform:r}).upload(e),a={};try{a=JSON.parse(i.body)}catch{}let s=a?.html_url??a?.web_url,u=R.read(Kt);return s?(R.log(`\u540C\u6B65 Gist \u540E, \u627E\u5230 Sub-Store Gist: ${s}`),u.artifactStore=s,u.artifactStoreStatus="VALID"):(R.error("\u540C\u6B65 Gist \u540E, \u627E\u4E0D\u5230 Sub-Store Gist"),u.artifactStoreStatus="NOT FOUND"),R.write(u,Kt),i}function ow(e){R.read(Bt)||R.write({},Bt),e.get("/api/sync/artifacts",kK),e.get("/api/sync/artifact/:name",LK)}async function vn({type:e,name:t,platform:r,url:n,ua:i,content:a,mergeSources:s,ignoreFailedRemoteSub:u,ignoreFailedRemoteFile:c,produceType:f,produceOpts:h={},subscription:g,awaitCustomCache:p,$options:d,proxy:w,noCache:v,all:b}){if(r=r||"JSON",["subscription","sub"].includes(e)){let m;if(t){let F=R.read(Jt);if(m=ct(F,t),!m)throw new Error(`\u627E\u4E0D\u5230\u8BA2\u9605 ${t}`)}else if(g)m=g;else throw new Error("\u672A\u63D0\u4F9B\u8BA2\u9605\u540D\u79F0\u6216\u8BA2\u9605\u6570\u636E");let y;if(a&&!["localFirst","remoteFirst"].includes(s))y=a;else if(n){let F={};y=await Promise.all(n.split(/[\r\n]+/).map(k=>k.trim()).filter(k=>k.length).map(async k=>{try{return await un(k,i||m.ua,void 0,w||m.proxy,void 0,p,v||m.noCache,!0)}catch(S){return F[k]=S,R.error(`\u8BA2\u9605 ${m.name} \u7684\u8FDC\u7A0B\u8BA2\u9605 ${k} \u53D1\u751F\u9519\u8BEF: ${S}`),""}}));let U=m.ignoreFailedRemoteSub;if(u!=null&&u!==""&&(U=u),Object.keys(F).length>0)if(U)U==="enabled"&&R.notify("\u{1F30D} Sub-Store \u5904\u7406\u8BA2\u9605\u5931\u8D25",`\u274C ${m.name}`,`\u8FDC\u7A0B\u8BA2\u9605 ${Object.keys(F).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);else throw new Error(`\u8BA2\u9605 ${m.name} \u7684\u8FDC\u7A0B\u8BA2\u9605 ${Object.keys(F).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);s==="localFirst"?y.unshift(a):s==="remoteFirst"&&y.push(a)}else if(m.source==="local"&&!["localFirst","remoteFirst"].includes(m.mergeSources))y=m.content;else{let F={};y=await Promise.all(m.url.split(/[\r\n]+/).map(k=>k.trim()).filter(k=>k.length).map(async k=>{try{return await un(k,i||m.ua,void 0,w||m.proxy,void 0,p,v||m.noCache,!0)}catch(S){return F[k]=S,R.error(`\u8BA2\u9605 ${m.name} \u7684\u8FDC\u7A0B\u8BA2\u9605 ${k} \u53D1\u751F\u9519\u8BEF: ${S}`),""}}));let U=m.ignoreFailedRemoteSub;if(u!=null&&u!==""&&(U=u),Object.keys(F).length>0)if(U)U==="enabled"&&R.notify("\u{1F30D} Sub-Store \u5904\u7406\u8BA2\u9605\u5931\u8D25",`\u274C ${m.name}`,`\u8FDC\u7A0B\u8BA2\u9605 ${Object.keys(F).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);else throw new Error(`\u8BA2\u9605 ${m.name} \u7684\u8FDC\u7A0B\u8BA2\u9605 ${Object.keys(F).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);m.mergeSources==="localFirst"?y.unshift(m.content):m.mergeSources==="remoteFirst"&&y.push(m.content)}if(f==="raw")return JSON.stringify((Array.isArray(y)?y:[y]).flat());let D=(Array.isArray(y)?y:[y]).map(F=>Ot.parse(F)).flat();if(D.forEach(F=>{F._subName=m.name,F._subDisplayName=m.displayName}),D=await Ot.process(D,m.process||[],r,{[m.name]:m},d),D.length===0)throw new Error(`\u8BA2\u9605 ${t} \u4E2D\u4E0D\u542B\u6709\u6548\u8282\u70B9`);let C={};for(let F of D){if(C[F.name]){R.notify("\u{1F30D} Sub-Store",`\u26A0\uFE0F \u8BA2\u9605 ${t} \u5305\u542B\u91CD\u590D\u8282\u70B9 ${F.name}\uFF01`,"\u8BF7\u4ED4\u7EC6\u68C0\u6D4B\u914D\u7F6E\uFF01",{"media-url":"https://cdn3.iconfinder.com/data/icons/seo-outline-1/512/25_code_program_programming_develop_bug_search_developer-512.png"});break}C[F.name]=!0}return Ot.produce(D,r,f,h)}else if(["collection","col"].includes(e)){let m=R.read(Jt),y=R.read(Zt),D=ct(y,t);if(!D)throw new Error(`\u627E\u4E0D\u5230\u7EC4\u5408\u8BA2\u9605 ${t}`);let C=[...D.subscriptions],F=D.subscriptionTags;Array.isArray(F)&&F.length>0&&m.forEach(j=>{Array.isArray(j.tag)&&j.tag.length>0&&!C.includes(j.name)&&j.tag.some(Y=>F.includes(Y))&&C.push(j.name)});let U={},k={},S=0;await Promise.all(C.map(async j=>{let Y=ct(m,j),M=Y.passThroughUA,z=Y.ua;M&&(R.info(`\u8BA2\u9605\u5F00\u542F\u4E86\u900F\u4F20 User-Agent, \u4F7F\u7528\u8BF7\u6C42\u7684 User-Agent: ${i}`),z=i);try{R.info(`\u6B63\u5728\u5904\u7406\u5B50\u8BA2\u9605\uFF1A${Y.name}...`);let W;if(Y.source==="local"&&!["localFirst","remoteFirst"].includes(Y.mergeSources))W=Y.content;else{let Ce={};if(W=await await Promise.all(Y.url.split(/[\r\n]+/).map(Fe=>Fe.trim()).filter(Fe=>Fe.length).map(async Fe=>{try{return await un(Fe,z,void 0,w||Y.proxy||D.proxy,void 0,void 0,v||Y.noCache,!0)}catch(xe){return Ce[Fe]=xe,R.error(`\u8BA2\u9605 ${Y.name} \u7684\u8FDC\u7A0B\u8BA2\u9605 ${Fe} \u53D1\u751F\u9519\u8BEF: ${xe}`),""}})),Object.keys(Ce).length>0)if(Y.ignoreFailedRemoteSub)Y.ignoreFailedRemoteSub==="enabled"&&R.notify("\u{1F30D} Sub-Store \u5904\u7406\u8BA2\u9605\u5931\u8D25",`\u274C ${Y.name}`,`\u8FDC\u7A0B\u8BA2\u9605 ${Object.keys(Ce).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);else throw new Error(`\u8BA2\u9605 ${Y.name} \u7684\u8FDC\u7A0B\u8BA2\u9605 ${Object.keys(Ce).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);Y.mergeSources==="localFirst"?W.unshift(Y.content):Y.mergeSources==="remoteFirst"&&W.push(Y.content)}let ie=(Array.isArray(W)?W:[W]).map(Ce=>Ot.parse(Ce)).flat();ie.forEach(Ce=>{Ce._subName=Y.name,Ce._subDisplayName=Y.displayName,Ce._collectionName=D.name,Ce._collectionDisplayName=D.displayName}),ie=await Ot.process(ie,Y.process||[],r,{[Y.name]:Y,_collection:D,$options:d}),U[j]=ie,S++,R.info(`\u2705 \u5B50\u8BA2\u9605\uFF1A${Y.name}\u52A0\u8F7D\u6210\u529F\uFF0C\u8FDB\u5EA6--${100*(S/C.length).toFixed(1)}% `)}catch(W){S++,k[j]=W,R.error(`\u274C \u5904\u7406\u7EC4\u5408\u8BA2\u9605\u4E2D\u7684\u5B50\u8BA2\u9605: ${Y.name}\u65F6\u51FA\u73B0\u9519\u8BEF\uFF1A${W}\uFF01\u8FDB\u5EA6--${100*(S/C.length).toFixed(1)}%`)}}));let B=D.ignoreFailedRemoteSub;if(u!=null&&u!==""&&(B=u),Object.keys(k).length>0)if(B)B==="enabled"&&R.notify("\u{1F30D} Sub-Store \u5904\u7406\u7EC4\u5408\u8BA2\u9605\u5931\u8D25",`\u274C ${D.name}`,`\u5B50\u8BA2\u9605 ${Object.keys(k).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);else throw new Error(`\u7EC4\u5408\u8BA2\u9605 ${D.name} \u7684\u5B50\u8BA2\u9605 ${Object.keys(k).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);let T=Array.prototype.concat.apply([],C.map(j=>U[j]||[]));if(T.forEach(j=>{j._collectionName=D.name,j._collectionDisplayName=D.displayName}),T=await Ot.process(T,D.process||[],r,{_collection:D},d),T.length===0)throw new Error(`\u7EC4\u5408\u8BA2\u9605 ${t} \u4E2D\u4E0D\u542B\u6709\u6548\u8282\u70B9`);let P={};for(let j of T){if(P[j.name]){R.notify("\u{1F30D} Sub-Store",`\u26A0\uFE0F \u7EC4\u5408\u8BA2\u9605 ${t} \u5305\u542B\u91CD\u590D\u8282\u70B9 ${j.name}\uFF01`,"\u8BF7\u4ED4\u7EC6\u68C0\u6D4B\u914D\u7F6E\uFF01",{"media-url":"https://cdn3.iconfinder.com/data/icons/seo-outline-1/512/25_code_program_programming_develop_bug_search_developer-512.png"});break}P[j.name]=!0}return Ot.produce(T,r,f,h)}else if(e==="rule"){let m=R.read(Df),y=ct(m,t);if(!y)throw new Error(`\u627E\u4E0D\u5230\u89C4\u5219 ${t}`);let D=[];for(let C=0;C<y.urls.length;C++){let F=y.urls[C];R.info(`\u6B63\u5728\u5904\u7406URL\uFF1A${F}\uFF0C\u8FDB\u5EA6--${100*((C+1)/y.urls.length).toFixed(1)}% `);try{let{body:U}=await un(F),k=Ec.parse(U);D=D.concat(k)}catch(U){R.error(`\u5904\u7406\u5206\u6D41\u8BA2\u9605\u4E2D\u7684URL: ${F}\u65F6\u51FA\u73B0\u9519\u8BEF\uFF1A${U}! \u8BE5\u8BA2\u9605\u5DF2\u88AB\u8DF3\u8FC7\u3002`)}}return D=await Ec.process(D,[{type:"Remove Duplicate Filter"}]),Ec.produce(D,r)}else if(e==="file"){let m=R.read(Lt),y=ct(m,t);if(!y)throw new Error(`\u627E\u4E0D\u5230\u6587\u4EF6 ${t}`);let D="";if(y.type!=="mihomoProfile")if(a&&!["localFirst","remoteFirst"].includes(s))D=a;else if(n){let k={};D=await Promise.all(n.split(/[\r\n]+/).map(B=>B.trim()).filter(B=>B.length).map(async B=>{try{return await un(B,i||y.ua,void 0,y.proxy||w,void 0,void 0,v)}catch(T){return k[B]=T,R.error(`\u6587\u4EF6 ${y.name} \u7684\u8FDC\u7A0B\u6587\u4EF6 ${B} \u53D1\u751F\u9519\u8BEF: ${T}`),""}}));let S=y.ignoreFailedRemoteFile;if(c!=null&&c!==""&&(S=c),!S&&Object.keys(k).length>0)throw new Error(`\u6587\u4EF6 ${y.name} \u7684\u8FDC\u7A0B\u6587\u4EF6 ${Object.keys(k).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);s==="localFirst"?D.unshift(a):s==="remoteFirst"&&D.push(a)}else if(y.source==="local"&&!["localFirst","remoteFirst"].includes(y.mergeSources))D=y.content;else{let k={};D=await Promise.all(y.url.split(/[\r\n]+/).map(B=>B.trim()).filter(B=>B.length).map(async B=>{try{return await un(B,i||y.ua,void 0,y.proxy||w,void 0,void 0,v)}catch(T){return k[B]=T,R.error(`\u6587\u4EF6 ${y.name} \u7684\u8FDC\u7A0B\u6587\u4EF6 ${B} \u53D1\u751F\u9519\u8BEF: ${T}`),""}}));let S=y.ignoreFailedRemoteFile;if(c!=null&&c!==""&&(S=c),Object.keys(k).length>0)if(S)S==="enabled"&&R.notify("\u{1F30D} Sub-Store \u5904\u7406\u6587\u4EF6\u5931\u8D25",`\u274C ${y.name}`,`\u8FDC\u7A0B\u6587\u4EF6 ${Object.keys(k).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);else throw new Error(`\u6587\u4EF6 ${y.name} \u7684\u8FDC\u7A0B\u6587\u4EF6 ${Object.keys(k).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);y.mergeSources==="localFirst"?D.unshift(y.content):y.mergeSources==="remoteFirst"&&D.push(y.content)}if(f==="raw")return JSON.stringify((Array.isArray(D)?D:[D]).flat());let C=(Array.isArray(D)?D:[D]).flat(),F=C.filter(k=>k!=null&&k!=="").join(`
`),U=Array.isArray(y.process)&&y.process.length>0?await Ot.process({$files:C,$content:F,$options:d,$file:y},y.process):{$content:F,$files:C,$options:d};return(b?U:U?.$content)??""}}async function cw(){R.info("\u5F00\u59CB\u540C\u6B65\u6240\u6709\u8FDC\u7A0B\u914D\u7F6E...");let e=R.read(Bt),t={};try{let r=[],n=[],i=R.read(Jt),a=R.read(Zt),s=[],u=0;if(e.map(h=>{if(h.sync&&h.source){if(u++,h.type==="subscription"){let g=h.source,p=ct(i,g);p&&p.url&&!s.includes(g)&&s.push(g)}else if(h.type==="collection"){let g=ct(a,h.source);g&&Array.isArray(g.subscriptions)&&g.subscriptions.map(p=>{let d=ct(i,p);d&&d.url&&!s.includes(p)&&s.push(p)})}}}),u===0){R.info(`\u9700\u540C\u6B65\u7684\u914D\u7F6E: ${u}, \u603B\u6570: ${e.length}`);return}if(s.length>0&&await Promise.all(s.map(async h=>{try{await vn({type:"subscription",name:h,awaitCustomCache:!0})}catch{}})),await Promise.all(e.map(async h=>{try{if(h.sync&&h.source){R.info(`\u6B63\u5728\u540C\u6B65\u4E91\u914D\u7F6E\uFF1A${h.name}...`);let g=h.platform==="SurgeMac";g&&R.info("\u624B\u52A8\u6307\u5B9A\u4E86 target \u4E3A SurgeMac, \u5C06\u4F7F\u7528 Mihomo External");let p=await vn({type:h.type,name:h.source,platform:h.platform,produceOpts:{"include-unsupported-proxy":h.includeUnsupportedProxy,useMihomoExternal:g}});t[encodeURIComponent(h.name)]={content:p},r.push(h.name)}}catch(g){R.error(`\u751F\u6210\u540C\u6B65\u914D\u7F6E ${h.name} \u53D1\u751F\u9519\u8BEF: ${g.message??g}`),n.push(h.name)}})),R.info(`${r.length} \u4E2A\u540C\u6B65\u914D\u7F6E\u751F\u6210\u6210\u529F: ${r.join(", ")}`),R.info(`${n.length} \u4E2A\u540C\u6B65\u914D\u7F6E\u751F\u6210\u5931\u8D25: ${n.join(", ")}`),r.length===0)throw new Error(`\u540C\u6B65\u914D\u7F6E ${n.join(", ")} \u751F\u6210\u5931\u8D25 \u8BE6\u60C5\u8BF7\u67E5\u770B\u65E5\u5FD7`);let c=await qp(t),f=JSON.parse(c.body);delete f.history,delete f.forks,delete f.owner,Object.values(f.files).forEach(h=>{delete h.content}),R.info("\u4E0A\u4F20\u914D\u7F6E\u54CD\u5E94:"),R.info(JSON.stringify(f,null,2));for(let h of e)if(h.sync&&h.source&&r.includes(h.name)){h.updated=new Date().getTime();let g=f.files,p;Array.isArray(g)&&(p=!0,g=Object.fromEntries(g.map(v=>[v.path,v])));let d=g[encodeURIComponent(h.name)]?.raw_url,w=p?d:d?.replace(/\/raw\/[^/]*\/(.*)/,"/raw/$1");R.info(`\u4E0A\u4F20\u914D\u7F6E\u5B8C\u6210
\u6587\u4EF6\u5217\u8868: ${Object.keys(g).join(", ")}
\u5F53\u524D\u6587\u4EF6: ${encodeURIComponent(h.name)}
\u54CD\u5E94\u8FD4\u56DE\u7684\u539F\u59CB\u94FE\u63A5: ${d}
\u5904\u7406\u5B8C\u7684\u65B0\u94FE\u63A5: ${w}`),h.url=w}if(R.write(e,Bt),R.info("\u4E0A\u4F20\u914D\u7F6E\u6210\u529F"),n.length>0)throw new Error(`\u540C\u6B65\u914D\u7F6E\u6210\u529F ${r.length} \u4E2A, \u5931\u8D25 ${n.length} \u4E2A, \u8BE6\u60C5\u8BF7\u67E5\u770B\u65E5\u5FD7`);R.info(`\u540C\u6B65\u914D\u7F6E\u6210\u529F ${r.length} \u4E2A`)}catch(r){throw R.error(`\u540C\u6B65\u914D\u7F6E\u5931\u8D25\uFF0C\u539F\u56E0\uFF1A${r.message??r}`),r}}async function kK(e,t){R.info("\u5F00\u59CB\u540C\u6B65\u6240\u6709\u8FDC\u7A0B\u914D\u7F6E...");try{await cw(),je(t)}catch(r){R.error(`\u540C\u6B65\u914D\u7F6E\u5931\u8D25\uFF0C\u539F\u56E0\uFF1A${r.message??r}`),Te(t,new pr("FAILED_TO_SYNC_ARTIFACTS","Failed to sync all artifacts",`Reason: ${r.message??r}`))}}async function LK(e,t){let{name:r}=e.params;R.info(`\u5F00\u59CB\u540C\u6B65\u8FDC\u7A0B\u914D\u7F6E ${r}...`);let n=R.read(Bt),i=ct(n,r);if(!i){R.error(`\u627E\u4E0D\u5230\u8FDC\u7A0B\u914D\u7F6E ${r}`),Te(t,new br("RESOURCE_NOT_FOUND",`\u627E\u4E0D\u5230\u8FDC\u7A0B\u914D\u7F6E ${r}`),404);return}if(!i.source){R.error(`\u8FDC\u7A0B\u914D\u7F6E ${r} \u672A\u8BBE\u7F6E\u6765\u6E90`),Te(t,new br("RESOURCE_HAS_NO_SOURCE",`\u8FDC\u7A0B\u914D\u7F6E ${r} \u672A\u8BBE\u7F6E\u6765\u6E90`),404);return}try{let a=i.platform==="SurgeMac";a&&R.info("\u624B\u52A8\u6307\u5B9A\u4E86 target \u4E3A SurgeMac, \u5C06\u4F7F\u7528 Mihomo External");let s=await vn({type:i.type,name:i.source,platform:i.platform,produceOpts:{"include-unsupported-proxy":i.includeUnsupportedProxy,useMihomoExternal:a}});R.info(`\u6B63\u5728\u4E0A\u4F20\u914D\u7F6E\uFF1A${i.name}
>>>${JSON.stringify(i,null,2)}`);let u=await qp({[encodeURIComponent(i.name)]:{content:s}});i.updated=new Date().getTime();let c=JSON.parse(u.body);delete c.history,delete c.forks,delete c.owner,Object.values(c.files).forEach(d=>{delete d.content}),R.info("\u4E0A\u4F20\u914D\u7F6E\u54CD\u5E94:"),R.info(JSON.stringify(c,null,2));let f=c.files,h;Array.isArray(f)&&(h=!0,f=Object.fromEntries(f.map(d=>[d.path,d])));let g=f[encodeURIComponent(i.name)]?.raw_url,p=h?g:g?.replace(/\/raw\/[^/]*\/(.*)/,"/raw/$1");R.info(`\u4E0A\u4F20\u914D\u7F6E\u5B8C\u6210
\u6587\u4EF6\u5217\u8868: ${Object.keys(f).join(", ")}
\u5F53\u524D\u6587\u4EF6: ${encodeURIComponent(i.name)}
\u54CD\u5E94\u8FD4\u56DE\u7684\u539F\u59CB\u94FE\u63A5: ${g}
\u5904\u7406\u5B8C\u7684\u65B0\u94FE\u63A5: ${p}`),i.url=p,R.write(n,Bt),je(t,i)}catch(a){R.error(`\u8FDC\u7A0B\u914D\u7F6E ${i.name} \u53D1\u751F\u9519\u8BEF: ${a.message??a}`),Te(t,new pr("FAILED_TO_SYNC_ARTIFACT",`Failed to sync artifact ${r}`,`Reason: ${a}`))}}var S3=V0.find(e=>e.name==="Clash Pre-processor"),lw=new Map;async function un(rawUrl="",ua,timeout,customProxy,skipCustomCache,awaitCustomCache,noCache,preprocess){let $arguments={},url=rawUrl.replace(/#noFlow$/,""),rawArgs=url.split("#");if(url=url.split("#")[0],rawArgs.length>1)try{$arguments=JSON.parse(decodeURIComponent(rawArgs[1]))}catch{for(let t of rawArgs[1].split("&")){let r=t.split("=")[0],n=t.split("=")[1];$arguments[r]=n==null||n===""?!0:decodeURIComponent(n)}}let{isNode,isStash,isLoon,isShadowRocket,isQX}=hn(),{defaultProxy,defaultUserAgent,defaultTimeout,cacheThreshold:defaultCacheThreshold}=R.read(Kt),cacheThreshold=defaultCacheThreshold||1024,proxy=customProxy||defaultProxy;R.env.isNode&&(proxy=proxy||eval("process.env.SUB_STORE_BACKEND_DEFAULT_PROXY"));let userAgent=ua||defaultUserAgent||"clash.meta",requestTimeout=timeout||defaultTimeout||8e3,id=Gi(userAgent+url);$arguments?.cacheKey===!0&&(R.error("\u4F7F\u7528\u81EA\u5B9A\u4E49\u7F13\u5B58\u65F6 cacheKey \u7684\u503C\u4E0D\u80FD\u4E3A\u7A7A"),$arguments.cacheKey=void 0);let customCacheKey=$arguments?.cacheKey?`#sub-store-cached-custom-${$arguments?.cacheKey}`:void 0;if(customCacheKey&&!skipCustomCache){let e=R.read(customCacheKey),t=Xr.get(id);if(!noCache&&!$arguments?.noCache&&t)return R.info(`\u4E50\u89C2\u7F13\u5B58: URL ${url}
\u5B58\u5728\u6709\u6548\u7684\u5E38\u89C4\u7F13\u5B58
\u4F7F\u7528\u5E38\u89C4\u7F13\u5B58\u4EE5\u907F\u514D\u91CD\u590D\u8BF7\u6C42`),t;if(e){if(awaitCustomCache){R.info(`\u4E50\u89C2\u7F13\u5B58: URL ${url}
\u672C\u6B21\u8FDB\u884C\u8BF7\u6C42 \u5C1D\u8BD5\u66F4\u65B0\u7F13\u5B58`);try{await un(rawUrl.replace(/(\?|&)cacheKey=.*?(&|$)/,""),ua,timeout,proxy,!0,void 0,void 0,preprocess)}catch(r){R.error(`\u4E50\u89C2\u7F13\u5B58: URL ${url} \u66F4\u65B0\u7F13\u5B58\u53D1\u751F\u9519\u8BEF ${r.message??r}`),R.info("\u4F7F\u7528\u4E50\u89C2\u7F13\u5B58\u7684\u6570\u636E\u5237\u65B0\u7F13\u5B58, \u9632\u6B62\u540E\u7EED\u8BF7\u6C42"),Xr.set(id,e)}}else R.info(`\u4E50\u89C2\u7F13\u5B58: URL ${url}
\u672C\u6B21\u8FD4\u56DE\u81EA\u5B9A\u4E49\u7F13\u5B58 ${$arguments?.cacheKey}
\u5E76\u8FDB\u884C\u8BF7\u6C42 \u5C1D\u8BD5\u5F02\u6B65\u66F4\u65B0\u7F13\u5B58`),un(rawUrl.replace(/(\?|&)cacheKey=.*?(&|$)/,""),ua,timeout,proxy,!0,void 0,void 0,preprocess).catch(r=>{R.error(`\u4E50\u89C2\u7F13\u5B58: URL ${url} \u5F02\u6B65\u66F4\u65B0\u7F13\u5B58\u53D1\u751F\u9519\u8BEF ${r.message??r}`)});return e}}let downloadUrlMatch=url.split("#")[0].match(/^\/api\/(file|module)\/(.+)/);if(downloadUrlMatch){let e="";try{e=downloadUrlMatch?.[1];let t=downloadUrlMatch?.[2];if(t==null)throw new Error(`\u672C\u5730 ${e} URL \u65E0\u6548: ${url}`);t=decodeURIComponent(t);let r=e==="module"?jn:Lt,n=ct(R.read(r),t);if(!n)throw new Error(`\u627E\u4E0D\u5230 ${e}: ${t}`);return e==="module"?n.content:await vn({type:"file",name:t})}catch(t){throw R.error(`Error when loading ${e}: ${url.split("#")[0]}.
 Reason: ${t}`),new Error(`\u65E0\u6CD5\u52A0\u8F7D ${e}: ${url}`)}}else if(url?.startsWith("/"))try{let fs=require("fs");return fs.readFileSync(url.split("#")[0],"utf8")}catch(e){throw R.error(`Error when reading local file: ${url.split("#")[0]}.
 Reason: ${e}`),new Error(`\u65E0\u6CD5\u4ECE\u8BE5\u8DEF\u5F84\u8BFB\u53D6\u6587\u672C\u5185\u5BB9: ${url}`)}if(!isNode&&lw.has(id))return lw.get(id);let http=xs({headers:{"User-Agent":userAgent,...isStash&&proxy?{"X-Stash-Selected-Proxy":encodeURIComponent(proxy)}:{},...isShadowRocket&&proxy?{"X-Surge-Policy":proxy}:{}},timeout:requestTimeout}),result,cached=Xr.get(id);if(!noCache&&!$arguments?.noCache&&cached)R.info(`\u4F7F\u7528\u7F13\u5B58: ${url}, ${userAgent}`),result=cached,customCacheKey&&(R.info(`URL ${url}
\u5199\u5165\u81EA\u5B9A\u4E49\u7F13\u5B58 ${$arguments?.cacheKey}`),R.write(cached,customCacheKey));else{let e=$arguments?.insecure?isNode?{strictSSL:!1}:{insecure:!0}:void 0;R.info(`Downloading...
User-Agent: ${userAgent}
Timeout: ${requestTimeout}
Proxy: ${proxy}
Insecure: ${!!e}
Preprocess: ${preprocess}
URL: ${url}`);try{let{body:t,headers:r,statusCode:n}=await http.get({url,...proxy?{proxy}:{},...isLoon&&proxy?{node:proxy}:{},...isQX&&proxy?{opts:{policy:proxy}}:{},...proxy?ru(proxy):{},...e||{}});if(R.info(`statusCode: ${n}`),n<200||n>=400)throw new Error(`statusCode: ${n}`);if(r){let a=Zc(r);a&&Vo.set(id,a)}if(t.replace(/\s/g,"").length===0)throw new Error(new Error("\u8FDC\u7A0B\u8D44\u6E90\u5185\u5BB9\u4E3A\u7A7A"));if(preprocess)try{S3.test(t)&&(t=S3.parse(t,!0))}catch(a){R.error(`Clash Pre-processor error: ${a}`)}let i=!0;if(cacheThreshold){let a=t.length/1024;a>cacheThreshold&&(R.info(`\u8D44\u6E90\u5927\u5C0F ${a.toFixed(2)} KB \u8D85\u8FC7\u4E86 ${cacheThreshold} KB, \u4E0D\u7F13\u5B58`),i=!1)}if(preprocess)try{let a=Ot.parse(t);(!Array.isArray(a)||a.length===0)&&(R.error(`URL ${url} \u4E0D\u5305\u542B\u6709\u6548\u8282\u70B9, \u4E0D\u7F13\u5B58`),i=!1)}catch(a){R.error(`URL ${url} \u5C1D\u8BD5\u89E3\u6790\u8282\u70B9\u5931\u8D25 ${a.message??a}, \u4E0D\u7F13\u5B58`),i=!1}i&&(Xr.set(id,t),customCacheKey&&(R.info(`URL ${url}
\u5199\u5165\u81EA\u5B9A\u4E49\u7F13\u5B58 ${$arguments?.cacheKey}`),R.write(t,customCacheKey))),result=t}catch(t){if(customCacheKey){let r=R.read(customCacheKey);if(r)return R.info(`\u65E0\u6CD5\u4E0B\u8F7D URL ${url}: ${t.message??t}
\u4F7F\u7528\u81EA\u5B9A\u4E49\u7F13\u5B58 ${$arguments?.cacheKey}`),r}throw new Error(`\u65E0\u6CD5\u4E0B\u8F7D URL ${url}: ${t.message??t}`)}}return $arguments?.validCheck&&await s0(Ko(await zn(url,$arguments.flowUserAgent,void 0,proxy,$arguments.flowUrl))),isNode||lw.set(id,result),result}async function Kh(url,file){let undici=require('undici'),fs=require('fs'),{pipeline}=require('stream/promises'),{Agent,interceptors,request}=undici;R.info(`Downloading file...
URL: ${url}
File: ${file}`);let{body,statusCode}=await request(url,{dispatcher:new Agent().compose(interceptors.redirect({maxRedirections:3,throwOnRedirect:!0}))});if(statusCode!==200)throw new Error(`Failed to download file from ${url}`);let fileStream=fs.createWriteStream(file);return await pipeline(body,fileStream),R.info(`File downloaded from ${url} to ${file}`),file}var hw=Yr(Sf());function fw(e){R.read(Kt)||R.write({},Kt),e.route("/api/settings").get(UK).patch(jK)}async function UK(e,t){try{let r=R.read(Kt);r||(r={},R.write(r,Kt)),r.avatarUrl||await Vp(),r.artifactStore||await Kp(),je(t,r)}catch(r){R.error(`Failed to get settings: ${r.message??r}`),Te(t,new pr("FAILED_TO_GET_SETTINGS","Failed to get settings",`Reason: ${r.message??r}`))}}async function jK(e,t){try{let n={...R.read(Kt),...e.body};R.write(n,Kt),(e.body.githubUser||e.body.gistToken||e.body.githubProxy||e.body.defaultProxy)&&(await Vp(),await Kp()),je(t,n)}catch(r){R.error(`Failed to update settings: ${r.message??r}`),Te(t,new pr("FAILED_TO_UPDATE_SETTINGS","Failed to update settings",`Reason: ${r.message??r}`))}}async function Vp(){let e=R.read(Kt),{githubUser:t,syncPlatform:r,githubProxy:n}=e;if(t)if(r==="gitlab")try{let i=await R.http.get({url:`https://gitlab.com/api/v4/users?username=${encodeURIComponent(t)}`,headers:{"User-Agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.141 Safari/537.36"}}).then(a=>JSON.parse(a.body));e.avatarUrl=i[0].avatar_url.replace(/(\?|&)s=\d+(&|$)/,"$1s=160$2"),R.write(e,Kt)}catch(i){R.error(`Failed to fetch GitLab avatar for User: ${t}. Reason: ${i.message??i}`)}else try{let i=await R.http.get({url:`${n?`${n}/`:""}https://api.github.com/users/${encodeURIComponent(t)}`,headers:{"User-Agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.141 Safari/537.36"}}).then(a=>JSON.parse(a.body));e.avatarUrl=i.avatar_url,R.write(e,Kt)}catch(i){R.error(`Failed to fetch GitHub avatar for User: ${t}. Reason: ${i.message??i}`)}}async function Kp(){R.log("Updating artifact store");let e=R.read(Kt),{gistToken:t,syncPlatform:r}=e;if(t){let n=new Ds({token:t,key:Lo,syncPlatform:r});try{let i=await n.locate(),a=i?.html_url??i?.web_url;a?(R.log(`\u627E\u5230 Sub-Store Gist: ${a}`),e.artifactStore=a,e.artifactStoreStatus="VALID"):(R.error(`\u627E\u4E0D\u5230 Sub-Store Gist (${Lo})`),e.artifactStoreStatus="NOT FOUND")}catch(i){R.error(`\u67E5\u627E Sub-Store Gist (${Lo}) \u65F6\u53D1\u751F\u9519\u8BEF: ${i.message??i}`),e.artifactStoreStatus="ERROR"}R.write(e,Kt)}}function dw(e){e.get("/api/utils/env",I3),e.get("/api/utils/backup",MK),e.get("/api/utils/refresh",HK),e.route("/api/storage").get((t,r)=>{r.set("content-type","application/json").set("content-disposition",`attachment; filename="${encodeURIComponent(`sub-store_data_${Gu(new Date)}.json`)}"`).send(R.env.isNode?JSON.stringify(R.cache):R.read("#sub-store"))}).post((t,r)=>{let{content:n}=t.body;try{if(n=JSON.parse(ft.decode(n)),Object.keys(n.settings).length===0)throw new Error("\u5907\u4EFD\u6587\u4EF6\u5E94\u8BE5\u81F3\u5C11\u5305\u542B settings \u5B57\u6BB5")}catch{try{if(n=JSON.parse(n),Object.keys(n.settings).length===0)throw new Error("\u5907\u4EFD\u6587\u4EF6\u5E94\u8BE5\u81F3\u5C11\u5305\u542B settings \u5B57\u6BB5")}catch(a){throw R.error(`\u5907\u4EFD\u6587\u4EF6\u6821\u9A8C\u5931\u8D25, \u65E0\u6CD5\u8FD8\u539F
Reason: ${a.message??a}`),new Error("\u5907\u4EFD\u6587\u4EF6\u6821\u9A8C\u5931\u8D25, \u65E0\u6CD5\u8FD8\u539F")}}R.write(JSON.stringify(n,null,"  "),"#sub-store"),R.env.isNode&&(R.cache=n,R.persistCache()),Ku(),je(r)}),hn().isNode?e.get("/",I3):e.get("/",async(t,r)=>{r.set("location","https://sub-store.vercel.app/").status(302).end()}),hn().isQX&&e.options("/",async(t,r)=>{r.status(200).end()}),e.all("/",(t,r)=>{r.send("Hello from sub-store, made with \u2764\uFE0F by Peng-YM")})}function I3(e,t){e.query.share&&(ba.feature.share=!0),t.set("Content-Type","application/json;charset=UTF-8").send(JSON.stringify({status:"success",data:{guide:"\u26A0\uFE0F\u26A0\uFE0F\u26A0\uFE0F \u60A8\u5F53\u524D\u770B\u5230\u7684\u662F\u540E\u7AEF\u7684\u54CD\u5E94. \u82E5\u60F3\u914D\u5408\u524D\u7AEF\u4F7F\u7528, \u53EF\u8BBF\u95EE\u5B98\u65B9\u524D\u7AEF https://sub-store.vercel.app \u540E\u81EA\u884C\u914D\u7F6E\u540E\u7AEF\u5730\u5740, \u6216\u4E00\u952E\u914D\u7F6E\u540E\u7AEF https://sub-store.vercel.app?api=https://a.com/xxx (\u5047\u8BBE https://a.com \u662F\u4F60\u540E\u7AEF\u7684\u57DF\u540D, /xxx \u662F\u81EA\u5B9A\u4E49\u8DEF\u5F84). \u9700\u6CE8\u610F HTTPS \u524D\u7AEF\u65E0\u6CD5\u8BF7\u6C42\u975E\u672C\u5730\u7684 HTTP \u540E\u7AEF(\u90E8\u5206\u6D4F\u89C8\u5668\u4E0A\u4E5F\u65E0\u6CD5\u8BBF\u95EE\u672C\u5730 HTTP \u540E\u7AEF). \u8BF7\u914D\u7F6E\u53CD\u4EE3\u6216\u5728\u5C40\u57DF\u7F51\u81EA\u5EFA HTTP \u524D\u7AEF. \u5982\u679C\u8FD8\u6709\u95EE\u9898, \u53EF\u67E5\u770B\u6B64\u6392\u67E5\u8BF4\u660E: https://t.me/zhetengsha/1068",...ba}},null,2))}async function HK(e,t){await Vp(),await Kp(),Xr.revokeAll(),zf.revokeAll(),Vo.revokeAll(),je(t)}async function zp(e,t,r){let{gistToken:n,syncPlatform:i}=R.read(Kt);if(!n)throw new Error("GitHub Token is required for backup!");let a=new Ds({token:n,key:HA,syncPlatform:i}),s=R.read("#sub-store");s=s?JSON.parse(s):{},R.env.isNode&&(s=JSON.parse(JSON.stringify(R.cache)));let u,c=R.read(Kt),f=c.syncTime,h=r||c.gistUpload||"base64";switch(R.info(`Gist backup action: ${e}, keep: ${t}, encode: ${r}, settings encode: ${c.gistUpload}, final encoding: ${h}`),e){case"upload":try{if(u=R.read("#sub-store"),u=u?JSON.parse(u):{},R.env.isNode&&(u=JSON.parse(JSON.stringify(R.cache))),h==="plaintext"?(u.settings.gistToken="\u6062\u590D\u540E\u8BF7\u91CD\u65B0\u8BBE\u7F6E GitHub Token",u=JSON.stringify(u,null,"  ")):u=ft.encode(JSON.stringify(u,null,"  ")),R.info("\u4E0B\u8F7D\u5907\u4EFD, \u4E0E\u672C\u5730\u5185\u5BB9\u5BF9\u6BD4..."),await a.download(Kd)===u){R.info("\u5185\u5BB9\u4E00\u81F4, \u65E0\u9700\u4E0A\u4F20\u5907\u4EFD");return}}catch(g){R.error(`${g.message??g}`)}c.syncTime=new Date().getTime(),R.write(c,Kt),u=R.read("#sub-store"),u=u?JSON.parse(u):{},R.env.isNode&&(u=JSON.parse(JSON.stringify(R.cache))),h==="plaintext"?(u.settings.gistToken="\u6062\u590D\u540E\u8BF7\u91CD\u65B0\u8BBE\u7F6E GitHub Token",u=JSON.stringify(u,null,"  ")):u=ft.encode(JSON.stringify(u,null,"  ")),R.info("\u4E0A\u4F20\u5907\u4EFD\u4E2D...");try{await a.upload({[Kd]:{content:u}}),R.info("\u4E0A\u4F20\u5907\u4EFD\u5B8C\u6210")}catch(g){throw c.syncTime=f,R.write(c,Kt),g}break;case"download":R.info("\u8FD8\u539F\u5907\u4EFD\u4E2D..."),u=await a.download(Kd);try{if(u=JSON.parse(ft.decode(u)),Object.keys(u.settings).length===0)throw new Error("\u5907\u4EFD\u6587\u4EF6\u5E94\u8BE5\u81F3\u5C11\u5305\u542B settings \u5B57\u6BB5")}catch{try{if(u=JSON.parse(u),Object.keys(u.settings).length===0)throw new Error("\u5907\u4EFD\u6587\u4EF6\u5E94\u8BE5\u81F3\u5C11\u5305\u542B settings \u5B57\u6BB5")}catch(p){throw R.error(`Gist \u5907\u4EFD\u6587\u4EF6\u6821\u9A8C\u5931\u8D25, \u65E0\u6CD5\u8FD8\u539F
Reason: ${p.message??p}`),new Error("Gist \u5907\u4EFD\u6587\u4EF6\u6821\u9A8C\u5931\u8D25, \u65E0\u6CD5\u8FD8\u539F")}}t&&(R.info(`\u4FDD\u7559\u539F\u6709\u8BBE\u7F6E ${t}`),t.split(",").forEach(g=>{hw.default.set(u,g,hw.default.get(s,g))})),R.write(JSON.stringify(u,null,"  "),"#sub-store"),R.env.isNode&&(R.cache=u,R.persistCache()),R.info("perform migration after restoring from gist..."),Ku(),R.info("migration completed"),R.info("\u8FD8\u539F\u5907\u4EFD\u5B8C\u6210");break}}async function MK(e,t){let{action:r,keep:n,encode:i}=e.query,{gistToken:a}=R.read(Kt);if(!a)Te(t,new jt("GIST_TOKEN_NOT_FOUND","GitHub Token is required for backup!"));else try{await zp(r,n,i),je(t)}catch(s){R.error(`Failed to ${r} gist data.
Reason: ${s.message??s}`),Te(t,new pr("BACKUP_FAILED",`Failed to ${r} gist data!`,`Reason: ${s.message??s}`))}}R.read(Jt)||R.write({},Jt);function pw(e){e.get("/api/sub/flow/:name",qK),e.route("/api/sub/:name").get(KK).patch(zK).delete(GK),e.route("/api/subs").get(YK).post(VK).put(WK)}async function qK(e,t){let{name:r}=e.params,{url:n}=e.query;n&&R.info(`\u6307\u5B9A\u8FDC\u7A0B\u8BA2\u9605 URL: ${n}`);let i=R.read(Jt),a=ct(i,r);if(!a){Te(t,new br("RESOURCE_NOT_FOUND",`Subscription ${r} does not exist!`),404);return}if(a.source==="local"&&!["localFirst","remoteFirst"].includes(a.mergeSources)){if(a.subUserinfo){let s;if(/^https?:\/\//.test(a.subUserinfo))try{s=await zn(void 0,void 0,void 0,a.proxy,a.subUserinfo)}catch(u){R.error(`\u8BA2\u9605 ${r} \u4F7F\u7528\u81EA\u5B9A\u4E49\u6D41\u91CF\u94FE\u63A5 ${a.subUserinfo} \u83B7\u53D6\u6D41\u91CF\u4FE1\u606F\u65F6\u53D1\u751F\u9519\u8BEF: ${JSON.stringify(u)}`)}else s=a.subUserinfo;try{je(t,{...Ko(s)})}catch(u){R.error(`Failed to parse flow info for local subscription ${r}: ${u.message??u}`),Te(t,new jt("NO_FLOW_INFO","N/A","Failed to parse flow info"))}}else Te(t,new jt("NO_FLOW_INFO","N/A",`Local subscription ${r} has no flow information!`));return}try{n=`${n||a.url}`.split(/[\r\n]+/).map(f=>f.trim()).filter(f=>f.length)?.[0]||"";let s={},u=n.split("#");if(n=n.split("#")[0],u.length>1)try{s=JSON.parse(decodeURIComponent(u[1]))}catch{for(let h of u[1].split("&")){let g=h.split("=")[0],p=h.split("=")[1];s[g]=p==null||p===""?!0:decodeURIComponent(p)}}if(s.noFlow||!/^https?/.test(n)){Te(t,new jt("NO_FLOW_INFO","N/A",`Subscription ${r}: noFlow`));return}let c=await zn(s?.insecure?`${n}#insecure`:n,s.flowUserAgent,void 0,a.proxy,s.flowUrl);if(!c&&!a.subUserinfo){Te(t,new pr("NO_FLOW_INFO","No flow info","Failed to fetch flow headers"));return}try{let f=a0({resetDay:s.resetDay,startDate:s.startDate,cycleDays:s.cycleDays}),h;if(/^https?:\/\//.test(a.subUserinfo))try{h=await zn(void 0,void 0,void 0,a.proxy,a.subUserinfo)}catch(p){R.error(`\u8BA2\u9605 ${r} \u4F7F\u7528\u81EA\u5B9A\u4E49\u6D41\u91CF\u94FE\u63A5 ${a.subUserinfo} \u83B7\u53D6\u6D41\u91CF\u4FE1\u606F\u65F6\u53D1\u751F\u9519\u8BEF: ${JSON.stringify(p)}`)}else h=a.subUserinfo;let g={...Ko([h,c].filter(p=>p).join("; "))};f!=null&&(g.remainingDays=f),je(t,g)}catch(f){R.error(`Failed to parse flow info for local subscription ${r}: ${f.message??f}`),Te(t,new jt("NO_FLOW_INFO","N/A","Failed to parse flow info"))}}catch{Te(t,new el("URL_NOT_ACCESSIBLE",`The URL for subscription ${r} is inaccessible.`))}}function VK(e,t){let r=e.body;if(delete r.subscriptions,R.info(`\u6B63\u5728\u521B\u5EFA\u8BA2\u9605\uFF1A ${r.name}`),/\//.test(r.name)){Te(t,new jt("INVALID_NAME",`Subscription ${r.name} is invalid`));return}let n=R.read(Jt);if(ct(n,r.name)){Te(t,new jt("DUPLICATE_KEY",`Subscription ${r.name} already exists.`));return}n.push(r),R.write(n,Jt),je(t,r,201)}function KK(e,t){let{name:r}=e.params,{raw:n}=e.query,i=R.read(Jt),a=ct(i,r);delete a.subscriptions,a?n?t.set("content-type","application/json").set("content-disposition",`attachment; filename="${encodeURIComponent(`sub-store_subscription_${r}_${Gu(new Date)}.json`)}"`).send(JSON.stringify(a)):je(t,a):Te(t,new br("SUBSCRIPTION_NOT_FOUND",`Subscription ${r} does not exist`,404))}function zK(e,t){let{name:r}=e.params,n=e.body;delete n.subscriptions;let i=R.read(Jt),a=ct(i,r);if(a){let s={...a,...n};if(R.info(`\u6B63\u5728\u66F4\u65B0\u8BA2\u9605\uFF1A ${r}`),r!==n.name){let u=R.read(Zt)||[];for(let h of u){let g=h.subscriptions.indexOf(r);g!==-1&&(h.subscriptions[g]=n.name)}let c=R.read(Bt)||[];for(let h of c)h.type==="subscription"&&h.source==r&&(h.source=n.name);let f=R.read(Lt)||[];for(let h of f)h.sourceType==="subscription"&&h.sourceName==r&&(h.sourceName=n.name);R.write(u,Zt),R.write(c,Bt),R.write(f,Lt)}Os(i,r,s),R.write(i,Jt),je(t,s)}else Te(t,new br("RESOURCE_NOT_FOUND",`Subscription ${r} does not exist!`),404)}function GK(e,t){let{name:r}=e.params;R.info(`\u5220\u9664\u8BA2\u9605\uFF1A${r}...`);let n=R.read(Jt);gs(n,r),R.write(n,Jt);let i=R.read(Zt);for(let a of i)a.subscriptions=a.subscriptions.filter(s=>s!==r);R.write(i,Zt),je(t)}function YK(e,t){let r=R.read(Jt);je(t,r)}function WK(e,t){let r=e.body;R.write(r,Jt),je(t)}function gw(e){R.read(Zt)||R.write({},Zt),e.route("/api/collection/:name").get(JK).patch(ZK).delete(QK),e.route("/api/collections").get(ez).post(XK).put(tz)}function XK(e,t){let r=e.body;if(R.info(`\u6B63\u5728\u521B\u5EFA\u7EC4\u5408\u8BA2\u9605\uFF1A${r.name}`),/\//.test(r.name)){Te(t,new jt("INVALID_NAME",`Collection ${r.name} is invalid`));return}let n=R.read(Zt);if(ct(n,r.name)){Te(t,new jt("DUPLICATE_KEY",`Collection ${r.name} already exists.`));return}n.push(r),R.write(n,Zt),je(t,r,201)}function JK(e,t){let{name:r}=e.params,{raw:n}=e.query,i=R.read(Zt),a=ct(i,r);a?n?t.set("content-type","application/json").set("content-disposition",`attachment; filename="${encodeURIComponent(`sub-store_collection_${r}_${Gu(new Date)}.json`)}"`).send(JSON.stringify(a)):je(t,a):Te(t,new br("SUBSCRIPTION_NOT_FOUND",`Collection ${r} does not exist`,404))}function ZK(e,t){let{name:r}=e.params,n=e.body,i=R.read(Zt),a=ct(i,r);if(a){let s={...a,...n};if(R.info(`\u6B63\u5728\u66F4\u65B0\u7EC4\u5408\u8BA2\u9605\uFF1A${r}...`),r!==s.name){let u=R.read(Bt)||[];for(let f of u)f.type==="collection"&&f.source===a.name&&(f.source=s.name);let c=R.read(Lt)||[];for(let f of c)f.sourceType==="collection"&&f.sourceName===a.name&&(f.sourceName=s.name);R.write(u,Bt),R.write(c,Lt)}Os(i,r,s),R.write(i,Zt),je(t,s)}else Te(t,new br("RESOURCE_NOT_FOUND",`Collection ${r} does not exist!`),404)}function QK(e,t){let{name:r}=e.params;R.info(`\u6B63\u5728\u5220\u9664\u7EC4\u5408\u8BA2\u9605\uFF1A${r}`);let n=R.read(Zt);gs(n,r),R.write(n,Zt),je(t)}function ez(e,t){let r=R.read(Zt);je(t,r)}function tz(e,t){let r=e.body;R.write(r,Zt),je(t)}function mw(e){R.read(Lt)||R.write([],Lt),e.get("/share/file/:name",B3),e.route("/api/file/:name").get(B3).patch(iz).delete(sz),e.route("/api/wholeFile/:name").get(nz),e.route("/api/files").get(az).post(rz).put(oz),e.route("/api/wholeFiles").get(uz)}function rz(e,t){let r=e.body;r.name=`${r.name??Date.now()}`,R.info(`\u6B63\u5728\u521B\u5EFA\u6587\u4EF6\uFF1A${r.name}`);let n=R.read(Lt);if(ct(n,r.name))return Te(t,new jt("DUPLICATE_KEY",e.body.name?`\u5DF2\u5B58\u5728 name \u4E3A ${r.name} \u7684\u6587\u4EF6`:"\u65E0\u6CD5\u540C\u65F6\u521B\u5EFA\u76F8\u540C\u7684\u6587\u4EF6 \u53EF\u7A0D\u540E\u91CD\u8BD5"));n.push(r),R.write(n,Lt),je(t,r,201)}async function B3(e,t){let{name:r}=e.params,n=e.headers["user-agent"]||e.headers["User-Agent"];R.info(`\u6B63\u5728\u4E0B\u8F7D\u6587\u4EF6\uFF1A${r}
\u8BF7\u6C42 User-Agent: ${n}`);let{url:i,subInfoUrl:a,subInfoUserAgent:s,ua:u,content:c,mergeSources:f,ignoreFailedRemoteFile:h,proxy:g,noCache:p,produceType:d}=e.query,w={_req:{method:e.method,url:e.url,path:e.path,query:e.query,params:e.params,headers:e.headers,body:e.body}};if(e.query.$options){try{w=JSON.parse(decodeURIComponent(e.query.$options))}catch{for(let y of e.query.$options.split("&")){let D=y.split("=")[0],C=y.split("=")[1];w[D]=C==null||C===""?!0:decodeURIComponent(C)}}R.info(`\u4F20\u5165 $options: ${JSON.stringify(w)}`)}i&&R.info(`\u6307\u5B9A\u8FDC\u7A0B\u6587\u4EF6 URL: ${i}`),g&&R.info(`\u6307\u5B9A\u8FDC\u7A0B\u8BA2\u9605\u4F7F\u7528\u4EE3\u7406/\u7B56\u7565 proxy: ${g}`),u&&R.info(`\u6307\u5B9A\u8FDC\u7A0B\u6587\u4EF6 User-Agent: ${u}`),a&&R.info(`\u6307\u5B9A\u83B7\u53D6\u6D41\u91CF\u7684 subInfoUrl: ${a}`),s&&R.info(`\u6307\u5B9A\u83B7\u53D6\u6D41\u91CF\u7684 subInfoUserAgent: ${s}`),c&&R.info(`\u6307\u5B9A\u672C\u5730\u6587\u4EF6: ${c}`),f&&R.info(`\u6307\u5B9A\u5408\u5E76\u6765\u6E90: ${f}`),h!=null&&h!==""&&R.info(`\u6307\u5B9A\u5FFD\u7565\u5931\u8D25\u7684\u8FDC\u7A0B\u6587\u4EF6: ${h}`),p&&R.info(`\u6307\u5B9A\u4E0D\u4F7F\u7528\u7F13\u5B58: ${p}`),d&&R.info(`\u6307\u5B9A\u751F\u4EA7\u7C7B\u578B: ${d}`);let v=R.read(Lt),b=ct(v,r);if(b)try{let m=await vn({type:"file",name:r,url:i,ua:u,content:c,mergeSources:f,ignoreFailedRemoteFile:h,$options:w,proxy:g,noCache:p,produceType:d,all:!0});try{if(a=a||b.subInfoUrl,a){let y=await zn(a,s||b.subInfoUserAgent,void 0,g||b.proxy);y&&t.set("subscription-userinfo",Yu(y))}}catch(y){R.error(`\u6587\u4EF6 ${r} \u83B7\u53D6\u6D41\u91CF\u4FE1\u606F\u65F6\u53D1\u751F\u9519\u8BEF: ${JSON.stringify(y)}`)}b.download&&t.set("Content-Disposition",`attachment; filename*=UTF-8''${encodeURIComponent(b.displayName||b.name)}`),t.set("Content-Type","text/plain; charset=utf-8"),m?.$options?._res?.headers&&Object.entries(m.$options._res.headers).forEach(([y,D])=>{t.set(y,D)}),m?.$options?._res?.status&&t.status(m.$options._res.status),t.send(m?.$content??"")}catch(m){R.notify("\u{1F30D} Sub-Store \u4E0B\u8F7D\u6587\u4EF6\u5931\u8D25",`\u274C \u65E0\u6CD5\u4E0B\u8F7D\u6587\u4EF6\uFF1A${r}\uFF01`,`\u{1F914} \u539F\u56E0\uFF1A${m.message??m}`),R.error(m.message??m),Te(t,new pr("INTERNAL_SERVER_ERROR",`Failed to download file: ${r}`,`Reason: ${m.message??m}`))}else R.error(`\u{1F30D} Sub-Store \u4E0B\u8F7D\u6587\u4EF6\u5931\u8D25
\u274C \u672A\u627E\u5230\u6587\u4EF6\uFF1A${r}\uFF01`),Te(t,new br("RESOURCE_NOT_FOUND",`File ${r} does not exist!`),404)}function nz(e,t){let{name:r}=e.params,{raw:n}=e.query,i=R.read(Lt),a=ct(i,r);a?n?t.set("content-type","application/json").set("content-disposition",`attachment; filename="${encodeURIComponent(`sub-store_file_${r}_${Gu(new Date)}.json`)}"`).send(JSON.stringify(a)):je(t,a):Te(t,new br("FILE_NOT_FOUND",`File ${r} does not exist`,404))}function iz(e,t){let{name:r}=e.params,n=e.body,i=R.read(Lt),a=ct(i,r);if(a){let s={...a,...n};if(R.info(`\u6B63\u5728\u66F4\u65B0\u6587\u4EF6\uFF1A${r}...`),r!==s.name){let u=R.read(Bt)||[];for(let c of u)c.type==="file"&&c.source===a.name&&(c.source=s.name);R.write(u,Bt)}Os(i,r,s),R.write(i,Lt),je(t,s)}else Te(t,new br("RESOURCE_NOT_FOUND",`File ${r} does not exist!`),404)}function sz(e,t){let{name:r}=e.params;R.info(`\u6B63\u5728\u5220\u9664\u6587\u4EF6\uFF1A${r}`);let n=R.read(Lt);gs(n,r),R.write(n,Lt),je(t)}function az(e,t){let r=R.read(Lt);je(t,r.map(({content:n,...i})=>i))}function uz(e,t){let r=R.read(Lt);je(t,r)}function oz(e,t){let r=e.body;R.write(r,Lt),je(t)}function vw(e){R.read(ui)||R.write([],ui),e.post("/api/token",fz),e.route("/api/token/:token").delete(cz),e.route("/api/tokens").get(lz)}function cz(e,t){let{token:r}=e.params;R.info(`\u6B63\u5728\u5220\u9664\uFF1A${r}`);let n=R.read(ui);gs(n,r,"token"),R.write(n,ui),je(t)}function lz(e,t){let{type:r,name:n}=e.query,i=R.read(ui)||[];je(t,r||n?i.filter(a=>(r?a.type===r:!0)&&(n?a.name===n:!0)):i)}async function fz(req,res){if(!hn().isNode)return Te(res,new jt("INVALID_ENV","This endpoint is only available in Node.js environment"));try{let{payload,options}=req.body,ms=require("ms"),type=payload?.type,name=payload?.name;if(!type||!name)return Te(res,new jt("INVALID_PAYLOAD","payload type and name are required"));let token=payload?.token;if(token!=null){if(typeof token!="string"||token.length<1)return Te(res,new jt("INVALID_CUSTOM_TOKEN",`Invalid custom token: ${token}`));if((R.read(ui)||[]).find(t=>t.token===token&&t.type===type&&t.name===name))return Te(res,new jt("DUPLICATE_TOKEN",`Token ${token} already exists`))}if(type==="col"){if(!(R.read(Zt)||[]).find(r=>r.name===name))return Te(res,new jt("INVALID_COLLECTION",`collection ${name} not found`))}else if(type==="file"){if(!(R.read(Lt)||[]).find(r=>r.name===name))return Te(res,new jt("INVALID_FILE",`file ${name} not found`))}else if(type==="sub"){if(!(R.read(Jt)||[]).find(r=>r.name===name))return Te(res,new jt("INVALID_SUB",`sub ${name} not found`))}else return Te(res,new jt("INVALID_TYPE",`type ${name} not supported`));let expiresIn=options?.expiresIn;if(options?.expiresIn!=null&&(expiresIn=ms(options.expiresIn),expiresIn==null||isNaN(expiresIn)||expiresIn<=0))return Te(res,new jt("INVALID_EXPIRES_IN",`Invalid expiresIn option: ${options.expiresIn}`));let nanoid=require("nanoid"),tokens=R.read(ui)||[];if(!token)do token=nanoid.customAlphabet(nanoid.urlAlphabet)();while(tokens.find(e=>e.token===token&&e.type===type&&e.name===name));return tokens.push({...payload,token,createdAt:Date.now(),expiresIn:expiresIn>0?options?.expiresIn:void 0,exp:expiresIn>0?Date.now()+expiresIn:void 0}),R.write(tokens,ui),je(res,{token})}catch(e){return Te(res,new pr("TOKEN_SIGN_FAILED","Failed to sign token",`Reason: ${e.message??e}`))}}function ww(e){R.read(jn)||R.write([],jn),e.route("/api/module/:name").get(dz).patch(pz).delete(gz),e.route("/api/modules").get(mz).post(hz).put(vz)}function hz(e,t){let r=e.body;r.name=`${r.name??Gi(JSON.stringify(r))}`,R.info(`\u6B63\u5728\u521B\u5EFA\u6A21\u5757\uFF1A${r.name}`);let n=R.read(jn);if(ct(n,r.name))return Te(t,new jt("DUPLICATE_KEY",e.body.name?`\u5DF2\u5B58\u5728 name \u4E3A ${r.name} \u7684\u6A21\u5757`:"\u5DF2\u5B58\u5728\u76F8\u540C\u7684\u6A21\u5757 \u8BF7\u52FF\u91CD\u590D\u6DFB\u52A0"));n.push(r),R.write(n,jn),je(t,r,201)}function dz(e,t){let{name:r}=e.params,n=R.read(jn),i=ct(n,r);i?t.set("Content-Type","text/plain; charset=utf-8").send(i.content):Te(t,new br("MODULE_NOT_FOUND",`Module ${r} does not exist`,404))}function pz(e,t){let{name:r}=e.params,n=e.body,i=R.read(jn),a=ct(i,r);if(a){let s={...a,...n};R.info(`\u6B63\u5728\u66F4\u65B0\u6A21\u5757\uFF1A${r}...`),Os(i,r,s),R.write(i,jn),je(t,s)}else Te(t,new br("RESOURCE_NOT_FOUND",`Module ${r} does not exist!`),404)}function gz(e,t){let{name:r}=e.params;R.info(`\u6B63\u5728\u5220\u9664\u6A21\u5757\uFF1A${r}`);let n=R.read(jn);gs(n,r),R.write(n,jn),je(t)}function mz(e,t){let r=R.read(jn);je(t,r.map(({content:n,...i})=>i))}function vz(e,t){let r=e.body;R.write(r,jn),je(t)}var Q3=Yr(G3()),eS=Yr(Z3());function Vz(e){let t=Object.keys(e),r="",n="",i="";for(let a of t){let s=a.toLowerCase();s==="user-agent"?(r=e[a],n=r.toLowerCase()):s==="accept"&&(i=e[a])}return{UA:r,ua:n,accept:i}}function tS({ua:e,UA:t,accept:r}){return t.indexOf("Quantumult%20X")!==-1?"QX":e.indexOf("egern")!==-1?"Egern":t.indexOf("Surfboard")!==-1?"Surfboard":t.indexOf("Surge Mac")!==-1?"SurgeMac":t.indexOf("Surge")!==-1?"Surge":t.indexOf("Decar")!==-1||t.indexOf("Loon")!==-1?"Loon":t.indexOf("Shadowrocket")!==-1?"Shadowrocket":t.indexOf("Stash")!==-1?"Stash":e==="meta"||e.indexOf("clash")!==-1&&e.indexOf("meta")!==-1||e.indexOf("clash-verge")!==-1||e.indexOf("flclash")!==-1?"ClashMeta":e.indexOf("clash")!==-1?"Clash":e.indexOf("v2ray")!==-1?"V2Ray":e.indexOf("sing-box")!==-1||e.indexOf("singbox")!==-1?"sing-box":r.indexOf("application/json")===0?"JSON":"V2Ray"}function Dw(e){let{UA:t,ua:r,accept:n}=Vz(e);return tS({ua:r,UA:t,accept:n})}function Fw(e,t){try{let r=tS({UA:t,ua:t.toLowerCase()});if(!["Egern"].includes(r))return!1;let n=(0,eS.default)(t);R.log(JSON.stringify(n,null,2));let{version:i}=n;if(e==="Egern"&&r==="Egern"&&(0,Q3.default)(i,"2.7.0"))return!0}catch(r){R.error(`\u83B7\u53D6\u7248\u672C\u53F7\u5931\u8D25: ${r}`)}return!1}function Sw(e){e.get("/share/col/:name/:target",async(t,r)=>{let{target:n}=t.params;n&&(t.query.target=n,R.info(`\u4F7F\u7528\u8DEF\u7531\u6307\u5B9A\u76EE\u6807: ${n}`)),await Ql(t,r)}),e.get("/share/col/:name",Ql),e.get("/share/sub/:name/:target",async(t,r)=>{let{target:n}=t.params;n&&(t.query.target=n,R.info(`\u4F7F\u7528\u8DEF\u7531\u6307\u5B9A\u76EE\u6807: ${n}`)),await Zl(t,r)}),e.get("/share/sub/:name",Zl),e.get("/download/collection/:name/:target",async(t,r)=>{let{target:n}=t.params;n&&(t.query.target=n,R.info(`\u4F7F\u7528\u8DEF\u7531\u6307\u5B9A\u76EE\u6807: ${n}`)),await Ql(t,r)}),e.get("/download/collection/:name",Ql),e.get("/download/:name/:target",async(t,r)=>{let{target:n}=t.params;n&&(t.query.target=n,R.info(`\u4F7F\u7528\u8DEF\u7531\u6307\u5B9A\u76EE\u6807: ${n}`)),await Zl(t,r)}),e.get("/download/:name",Zl),e.get("/download/collection/:name/api/v1/server/details",async(t,r)=>{t.query.platform="JSON",t.query.produceType="internal",t.query.resultFormat="nezha",await Ql(t,r)}),e.get("/download/:name/api/v1/server/details",async(t,r)=>{t.query.platform="JSON",t.query.produceType="internal",t.query.resultFormat="nezha",await Zl(t,r)}),e.get("/download/collection/:name/api/v1/monitor/:nezhaIndex",async(t,r)=>{t.query.platform="JSON",t.query.produceType="internal",t.query.resultFormat="nezha-monitor",await Ql(t,r)}),e.get("/download/:name/api/v1/monitor/:nezhaIndex",async(t,r)=>{t.query.platform="JSON",t.query.produceType="internal",t.query.resultFormat="nezha-monitor",await Zl(t,r)})}async function Zl(e,t){let{name:r,nezhaIndex:n}=e.params,i=e.query.target==="SurgeMac",a=e.query.target||Dw(e.headers)||"JSON",s=e.headers["user-agent"]||e.headers["User-Agent"];R.info(`\u6B63\u5728\u4E0B\u8F7D\u8BA2\u9605\uFF1A${r}
\u8BF7\u6C42 User-Agent: ${s}
\u8BF7\u6C42 target: ${e.query.target}
\u5B9E\u9645\u8F93\u51FA: ${a}`);let{url:u,ua:c,content:f,mergeSources:h,ignoreFailedRemoteSub:g,produceType:p,includeUnsupportedProxy:d,resultFormat:w,proxy:v,noCache:b}=e.query,m={_req:{method:e.method,url:e.url,path:e.path,query:e.query,params:e.params,headers:e.headers,body:e.body}};if(e.query.$options){try{m=JSON.parse(decodeURIComponent(e.query.$options))}catch{for(let F of e.query.$options.split("&")){let U=F.split("=")[0],k=F.split("=")[1];m[U]=k==null||k===""?!0:decodeURIComponent(k)}}R.info(`\u4F20\u5165 $options: ${JSON.stringify(m)}`)}u&&(R.info(`\u6307\u5B9A\u8FDC\u7A0B\u8BA2\u9605 URL: ${u}`),/^https?:\/\//.test(u)||(f=u,R.info("URL \u4E0D\u662F\u94FE\u63A5\uFF0C\u89C6\u4E3A\u672C\u5730\u8BA2\u9605"))),f&&R.info(`\u6307\u5B9A\u672C\u5730\u8BA2\u9605: ${f}`),v&&R.info(`\u6307\u5B9A\u8FDC\u7A0B\u8BA2\u9605\u4F7F\u7528\u4EE3\u7406/\u7B56\u7565 proxy: ${v}`),c&&R.info(`\u6307\u5B9A\u8FDC\u7A0B\u8BA2\u9605 User-Agent: ${c}`),h&&R.info(`\u6307\u5B9A\u5408\u5E76\u6765\u6E90: ${h}`),g!=null&&g!==""&&R.info(`\u6307\u5B9A\u5FFD\u7565\u5931\u8D25\u7684\u8FDC\u7A0B\u8BA2\u9605: ${g}`),p&&R.info(`\u6307\u5B9A\u751F\u4EA7\u7C7B\u578B: ${p}`),d&&R.info(`\u5305\u542B\u5B98\u65B9/\u5546\u5E97\u7248/\u672A\u7EED\u8D39\u8BA2\u9605\u4E0D\u652F\u6301\u7684\u534F\u8BAE: ${d}`),!d&&Fw(a,s)&&(d=!0,R.info(`\u5F53\u524D\u5BA2\u6237\u7AEF\u53EF\u5305\u542B\u5B98\u65B9/\u5546\u5E97\u7248/\u672A\u7EED\u8D39\u8BA2\u9605\u4E0D\u652F\u6301\u7684\u534F\u8BAE: ${d}`)),i&&R.info("\u624B\u52A8\u6307\u5B9A\u4E86 target \u4E3A SurgeMac, \u5C06\u4F7F\u7528 Mihomo External"),b&&R.info(`\u6307\u5B9A\u4E0D\u4F7F\u7528\u7F13\u5B58: ${b}`);let y=R.read(Jt),D=ct(y,r);if(D)try{D.passThroughUA&&(R.info(`\u8BA2\u9605\u5F00\u542F\u4E86\u900F\u4F20 User-Agent, \u4F7F\u7528\u8BF7\u6C42\u7684 User-Agent: ${s}`),c=s);let F=await vn({type:"subscription",name:r,platform:a,url:u,ua:c,content:f,mergeSources:h,ignoreFailedRemoteSub:g,produceType:p,produceOpts:{"include-unsupported-proxy":d,useMihomoExternal:i},$options:m,proxy:v,noCache:b}),U;if(D.source!=="local"||["localFirst","remoteFirst"].includes(D.mergeSources))try{u=`${u||D.url}`.split(/[\r\n]+/).map(B=>B.trim()).filter(B=>B.length)?.[0]||"";let k={},S=u.split("#");if(u=u.split("#")[0],S.length>1)try{k=JSON.parse(decodeURIComponent(S[1]))}catch{for(let T of S[1].split("&")){let P=T.split("=")[0],j=T.split("=")[1];k[P]=j==null||j===""?!0:decodeURIComponent(j)}}!k.noFlow&&/^https?/.test(u)&&(U=await zn(k?.insecure?`${u}#insecure`:u,k.flowUserAgent,void 0,v||D.proxy,k.flowUrl),U&&t.set("subscription-userinfo",Yu(U)))}catch(k){R.error(`\u8BA2\u9605 ${r} \u83B7\u53D6\u6D41\u91CF\u4FE1\u606F\u65F6\u53D1\u751F\u9519\u8BEF: ${JSON.stringify(k)}`)}if(D.subUserinfo){let k;if(/^https?:\/\//.test(D.subUserinfo))try{k=await zn(void 0,void 0,void 0,v||D.proxy,D.subUserinfo)}catch(S){R.error(`\u8BA2\u9605 ${r} \u4F7F\u7528\u81EA\u5B9A\u4E49\u6D41\u91CF\u94FE\u63A5 ${D.subUserinfo} \u83B7\u53D6\u6D41\u91CF\u4FE1\u606F\u65F6\u53D1\u751F\u9519\u8BEF: ${JSON.stringify(S)}`)}else k=D.subUserinfo;t.set("subscription-userinfo",Yu([k,U].filter(S=>S).join(";")))}a==="JSON"?(w==="nezha"?F=nS(F):w==="nezha-monitor"&&(n=/^\d+$/.test(n)?parseInt(n,10):F.findIndex(k=>k.name===n),F=await rS(F[n],n,e.query)),t.set("Content-Type","application/json;charset=utf-8").send(F)):t.send(F)}catch(C){R.notify("\u{1F30D} Sub-Store \u4E0B\u8F7D\u8BA2\u9605\u5931\u8D25",`\u274C \u65E0\u6CD5\u4E0B\u8F7D\u8BA2\u9605\uFF1A${r}\uFF01`,`\u{1F914} \u539F\u56E0\uFF1A${C.message??C}`),R.error(C.message??C),Te(t,new pr("INTERNAL_SERVER_ERROR",`Failed to download subscription: ${r}`,`Reason: ${C.message??C}`))}else R.error(`\u{1F30D} Sub-Store \u4E0B\u8F7D\u8BA2\u9605\u5931\u8D25
\u274C \u672A\u627E\u5230\u8BA2\u9605\uFF1A${r}\uFF01`),Te(t,new br("RESOURCE_NOT_FOUND",`Subscription ${r} does not exist!`),404)}async function Ql(e,t){let{name:r,nezhaIndex:n}=e.params,i=e.query.target==="SurgeMac",a=e.query.target||Dw(e.headers)||"JSON",s=R.read(Zt),u=ct(s,r),c=e.headers["user-agent"]||e.headers["User-Agent"];R.info(`\u6B63\u5728\u4E0B\u8F7D\u7EC4\u5408\u8BA2\u9605\uFF1A${r}
\u8BF7\u6C42 User-Agent: ${c}
\u8BF7\u6C42 target: ${e.query.target}
\u5B9E\u9645\u8F93\u51FA: ${a}`);let{ignoreFailedRemoteSub:f,produceType:h,includeUnsupportedProxy:g,resultFormat:p,proxy:d,noCache:w}=e.query,v={_req:{method:e.method,url:e.url,path:e.path,query:e.query,params:e.params,headers:e.headers,body:e.body}};if(e.query.$options){try{v=JSON.parse(decodeURIComponent(e.query.$options))}catch{for(let m of e.query.$options.split("&")){let y=m.split("=")[0],D=m.split("=")[1];v[y]=D==null||D===""?!0:decodeURIComponent(D)}}R.info(`\u4F20\u5165 $options: ${JSON.stringify(v)}`)}if(d&&R.info(`\u6307\u5B9A\u8FDC\u7A0B\u8BA2\u9605\u4F7F\u7528\u4EE3\u7406/\u7B56\u7565 proxy: ${d}`),f!=null&&f!==""&&R.info(`\u6307\u5B9A\u5FFD\u7565\u5931\u8D25\u7684\u8FDC\u7A0B\u8BA2\u9605: ${f}`),h&&R.info(`\u6307\u5B9A\u751F\u4EA7\u7C7B\u578B: ${h}`),g&&R.info(`\u5305\u542B\u5B98\u65B9/\u5546\u5E97\u7248/\u672A\u7EED\u8D39\u8BA2\u9605\u4E0D\u652F\u6301\u7684\u534F\u8BAE: ${g}`),!g&&Fw(a,c)&&(g=!0,R.info(`\u5F53\u524D\u5BA2\u6237\u7AEF\u53EF\u5305\u542B\u5B98\u65B9/\u5546\u5E97\u7248/\u672A\u7EED\u8D39\u8BA2\u9605\u4E0D\u652F\u6301\u7684\u534F\u8BAE: ${g}`)),i&&R.info("\u624B\u52A8\u6307\u5B9A\u4E86 target \u4E3A SurgeMac, \u5C06\u4F7F\u7528 Mihomo External"),w&&R.info(`\u6307\u5B9A\u4E0D\u4F7F\u7528\u7F13\u5B58: ${w}`),u)try{let b=await vn({type:"collection",name:r,platform:a,ignoreFailedRemoteSub:f,produceType:h,produceOpts:{"include-unsupported-proxy":g,useMihomoExternal:i},$options:v,proxy:d,noCache:w,ua:c}),m,y=R.read(Jt),D=u.subscriptions;if(D.length>0){let U=ct(y,D[0]);if(U.source!=="local"||["localFirst","remoteFirst"].includes(U.mergeSources))try{let k=`${U.url}`.split(/[\r\n]+/).map(T=>T.trim()).filter(T=>T.length)?.[0]||"",S={},B=k.split("#");if(k=k.split("#")[0],B.length>1)try{S=JSON.parse(decodeURIComponent(B[1]))}catch{for(let P of B[1].split("&")){let j=P.split("=")[0],Y=P.split("=")[1];S[j]=Y==null||Y===""?!0:decodeURIComponent(Y)}}!S.noFlow&&/^https?:/.test(k)&&(m=await zn(S?.insecure?`${k}#insecure`:k,S.flowUserAgent,void 0,d||U.proxy||u.proxy,S.flowUrl))}catch(k){R.error(`\u7EC4\u5408\u8BA2\u9605 ${r} \u4E2D\u7684\u5B50\u8BA2\u9605 ${U.name} \u83B7\u53D6\u6D41\u91CF\u4FE1\u606F\u65F6\u53D1\u751F\u9519\u8BEF: ${k.message??k}`)}if(U.subUserinfo){let k;if(/^https?:\/\//.test(U.subUserinfo))try{k=await zn(void 0,void 0,void 0,d||U.proxy,U.subUserinfo)}catch(S){R.error(`\u7EC4\u5408\u8BA2\u9605 ${r} \u4F7F\u7528\u81EA\u5B9A\u4E49\u6D41\u91CF\u94FE\u63A5 ${U.subUserinfo} \u83B7\u53D6\u6D41\u91CF\u4FE1\u606F\u65F6\u53D1\u751F\u9519\u8BEF: ${JSON.stringify(S)}`)}else k=U.subUserinfo;m=[k,m].filter(S=>S).join("; ")}}R.info(`\u7EC4\u5408\u8BA2\u9605 ${r} \u900F\u4F20\u7684\u7684\u6D41\u91CF\u4FE1\u606F: ${m}`);let C;if(/^https?:\/\//.test(u.subUserinfo))try{C=await zn(void 0,void 0,void 0,d||u.proxy,u.subUserinfo)}catch(U){R.error(`\u7EC4\u5408\u8BA2\u9605 ${r} \u4F7F\u7528\u81EA\u5B9A\u4E49\u6D41\u91CF\u94FE\u63A5 ${u.subUserinfo} \u83B7\u53D6\u6D41\u91CF\u4FE1\u606F\u65F6\u53D1\u751F\u9519\u8BEF: ${JSON.stringify(U)}`)}else C=u.subUserinfo;let F=[C,m].filter(U=>U).join("; ");F&&t.set("subscription-userinfo",Yu(F)),a==="JSON"?(p==="nezha"?b=nS(b):p==="nezha-monitor"&&(n=/^\d+$/.test(n)?parseInt(n,10):b.findIndex(U=>U.name===n),b=await rS(b[n],n,e.query)),t.set("Content-Type","application/json;charset=utf-8").send(b)):t.send(b)}catch(b){R.notify("\u{1F30D} Sub-Store \u4E0B\u8F7D\u7EC4\u5408\u8BA2\u9605\u5931\u8D25",`\u274C \u4E0B\u8F7D\u7EC4\u5408\u8BA2\u9605\u9519\u8BEF\uFF1A${r}\uFF01`,`\u{1F914} \u539F\u56E0\uFF1A${b}`),Te(t,new pr("INTERNAL_SERVER_ERROR",`Failed to download collection: ${r}`,`Reason: ${b.message??b}`))}else R.error("\u{1F30D} Sub-Store \u4E0B\u8F7D\u7EC4\u5408\u8BA2\u9605\u5931\u8D25",`\u274C \u672A\u627E\u5230\u7EC4\u5408\u8BA2\u9605\uFF1A${r}\uFF01`),Te(t,new br("RESOURCE_NOT_FOUND",`Collection ${r} does not exist!`),404)}async function rS(e,t,r){let n={code:0,message:"success",result:[]};try{let{isLoon:i,isSurge:a}=R.env;if(!i&&!a)throw new Error("\u4EC5\u652F\u6301 Loon \u548C Surge(ability=http-client-policy)");let s=Ot.produce([e],i?"Loon":"Surge");if(!s)throw new Error("\u5F53\u524D\u5BA2\u6237\u7AEF\u4E0D\u517C\u5BB9\u6B64\u8282\u70B9");let u=e._monitors||[{name:"Cloudflare",url:"http://cp.cloudflare.com/generate_204",method:"HEAD",number:3,timeout:2e3},{name:"Google",url:"http://www.google.com/generate_204",method:"HEAD",number:3,timeout:2e3}],c=r.number||Math.max(...u.map(f=>f.number))||3;for(let f of u){let g={monitor_id:u.indexOf(f),server_id:t,monitor_name:f.name,server_name:e.name,created_at:[],avg_delay:[]};for(let p=0;p<c;p++){let d=Date.now();try{await R.http[(f.method||"HEAD").toLowerCase()]({timeout:f.timeout||2e3,url:f.url,"policy-descriptor":s,node:s});let w=Date.now()-d;R.info(`${f.name} latency: ${w}`),g.avg_delay.push(w)}catch(w){R.error(w),g.avg_delay.push(0)}g.created_at.push(Date.now()-6e5*(f.number-p-1))}n.result.push(g)}}catch(i){R.error(i),n.result.push({monitor_id:0,server_id:0,monitor_name:`\u274C ${i.message??i}`,server_name:e.name,created_at:[Date.now()],avg_delay:[0]})}return JSON.stringify(n,null,2)}function nS(e){let t={code:0,message:"success",result:[]};return e.map((r,n)=>{let i=r._geo?.countryCode||r._geo?.country;if(/^[a-z]{2}$/i.test(i)||(i=k0(r.name)),/^[a-z]{2}$/i.test(i)){let a=Math.round(new Date().getTime()/1e3),s=r._unavailable?0:a,u=parseInt(r._uptime||0,10);t.result.push({id:n,name:r.name,tag:`${r._tag??""}`,last_active:s,valid_ip:r._IP||r.server,ipv4:r._IPv4||r.server,ipv6:r._IPv6||(Mr(r.server)?r.server:""),host:{Platform:"Sub-Store",PlatformVersion:ba.version,CPU:[],MemTotal:1024,DiskTotal:1024,SwapTotal:1024,Arch:"",Virtualization:"",BootTime:a-u,CountryCode:i,Version:"0.0.1"},status:{CPU:0,MemUsed:0,SwapUsed:0,DiskUsed:0,NetInTransfer:0,NetOutTransfer:0,NetInSpeed:0,NetOutSpeed:0,Uptime:u,Load1:0,Load5:0,Load15:0,TcpConnCount:0,UdpConnCount:0,ProcessCount:0}})}}),JSON.stringify(t,null,2)}function Iw(e){e.post("/api/preview/sub",zz),e.post("/api/preview/collection",Gz),e.post("/api/preview/file",Kz)}async function Kz(e,t){try{let r=e.body,n="";if(r.type!=="mihomoProfile")if(r.source==="local"&&!["localFirst","remoteFirst"].includes(r.mergeSources))n=r.content;else{let u={};if(n=await Promise.all(r.url.split(/[\r\n]+/).map(c=>c.trim()).filter(c=>c.length).map(async c=>{try{return await un(c,r.ua,void 0,r.proxy)}catch(f){return u[c]=f,R.error(`\u6587\u4EF6 ${r.name} \u7684\u8FDC\u7A0B\u6587\u4EF6 ${c} \u53D1\u751F\u9519\u8BEF: ${f}`),""}})),Object.keys(u).length>0)if(r.ignoreFailedRemoteFile)r.ignoreFailedRemoteFile==="enabled"&&R.notify("\u{1F30D} Sub-Store \u9884\u89C8\u6587\u4EF6\u5931\u8D25",`\u274C ${r.name}`,`\u8FDC\u7A0B\u6587\u4EF6 ${Object.keys(u).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);else throw new Error(`\u6587\u4EF6 ${r.name} \u7684\u8FDC\u7A0B\u6587\u4EF6 ${Object.keys(u).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);r.mergeSources==="localFirst"?n.unshift(r.content):r.mergeSources==="remoteFirst"&&n.push(r.content)}let i=(Array.isArray(n)?n:[n]).flat(),a=i.filter(u=>u!=null&&u!=="").join(`
`),s=Array.isArray(r.process)&&r.process.length>0?await Ot.process({$files:i,$content:a,$file:r},r.process):{$content:a,$files:i};je(t,{original:a,processed:s?.$content??""})}catch(r){R.error(r.message??r),Te(t,new pr("INTERNAL_SERVER_ERROR","Failed to preview file",`Reason: ${r.message??r}`))}}async function zz(e,t){try{let r=e.body,n=e.query.target||"JSON",i;if(r.source==="local"&&!["localFirst","remoteFirst"].includes(r.mergeSources))i=r.content;else{let u={};if(i=await Promise.all(r.url.split(/[\r\n]+/).map(c=>c.trim()).filter(c=>c.length).map(async c=>{try{return await un(c,r.ua,void 0,r.proxy,void 0,void 0,void 0,!0)}catch(f){return u[c]=f,R.error(`\u8BA2\u9605 ${r.name} \u7684\u8FDC\u7A0B\u8BA2\u9605 ${c} \u53D1\u751F\u9519\u8BEF: ${f}`),""}})),Object.keys(u).length>0)if(r.ignoreFailedRemoteSub)r.ignoreFailedRemoteSub==="enabled"&&R.notify("\u{1F30D} Sub-Store \u9884\u89C8\u8BA2\u9605\u5931\u8D25",`\u274C ${r.name}`,`\u8FDC\u7A0B\u8BA2\u9605 ${Object.keys(u).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);else throw new Error(`\u8BA2\u9605 ${r.name} \u7684\u8FDC\u7A0B\u8BA2\u9605 ${Object.keys(u).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);r.mergeSources==="localFirst"?i.unshift(r.content):r.mergeSources==="remoteFirst"&&i.push(r.content)}let a=(Array.isArray(i)?i:[i]).map(u=>Ot.parse(u)).flat();a.forEach((u,c)=>{u.id=c,u._subName=r.name,u._subDisplayName=r.displayName});let s=await Ot.process(a,r.process||[],n,{[r.name]:r});je(t,{original:a,processed:s})}catch(r){R.error(r.message??r),Te(t,new pr("INTERNAL_SERVER_ERROR","Failed to preview subscription",`Reason: ${r.message??r}`))}}async function Gz(e,t){try{let r=R.read(Jt),n=e.body,i=[...n.subscriptions],a=n.subscriptionTags;Array.isArray(a)&&a.length>0&&r.forEach(h=>{Array.isArray(h.tag)&&h.tag.length>0&&!i.includes(h.name)&&h.tag.some(g=>a.includes(g))&&i.push(h.name)});let s={},u={};if(await Promise.all(i.map(async h=>{let g=ct(r,h);try{let p;if(g.source==="local"&&!["localFirst","remoteFirst"].includes(g.mergeSources))p=g.content;else{let w={};if(p=await Promise.all(g.url.split(/[\r\n]+/).map(v=>v.trim()).filter(v=>v.length).map(async v=>{try{return await un(v,g.ua,void 0,g.proxy,void 0,void 0,void 0,!0)}catch(b){return w[v]=b,R.error(`\u8BA2\u9605 ${g.name} \u7684\u8FDC\u7A0B\u8BA2\u9605 ${v} \u53D1\u751F\u9519\u8BEF: ${b}`),""}})),Object.keys(w).length>0)if(g.ignoreFailedRemoteSub)g.ignoreFailedRemoteSub==="enabled"&&R.notify("\u{1F30D} Sub-Store \u9884\u89C8\u8BA2\u9605\u5931\u8D25",`\u274C ${g.name}`,`\u8FDC\u7A0B\u8BA2\u9605 ${Object.keys(w).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);else throw new Error(`\u8BA2\u9605 ${g.name} \u7684\u8FDC\u7A0B\u8BA2\u9605 ${Object.keys(w).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);g.mergeSources==="localFirst"?p.unshift(g.content):g.mergeSources==="remoteFirst"&&p.push(g.content)}let d=(Array.isArray(p)?p:[p]).map(w=>Ot.parse(w)).flat();d.forEach(w=>{w._subName=g.name,w._subDisplayName=g.displayName,w._collectionName=n.name,w._collectionDisplayName=n.displayName}),d=await Ot.process(d,g.process||[],"JSON",{[g.name]:g,_collection:n}),s[h]=d}catch(p){u[h]=p,R.error(`\u274C \u5904\u7406\u7EC4\u5408\u8BA2\u9605 ${n.name} \u4E2D\u7684\u5B50\u8BA2\u9605: ${g.name} \u65F6\u51FA\u73B0\u9519\u8BEF\uFF1A${p}\uFF01`)}})),Object.keys(u).length>0)if(n.ignoreFailedRemoteSub)n.ignoreFailedRemoteSub==="enabled"&&R.notify("\u{1F30D} Sub-Store \u9884\u89C8\u7EC4\u5408\u8BA2\u9605\u5931\u8D25",`\u274C ${n.name}`,`\u5B50\u8BA2\u9605 ${Object.keys(u).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);else throw new Error(`\u7EC4\u5408\u8BA2\u9605 ${n.name} \u7684\u5B50\u8BA2\u9605 ${Object.keys(u).join(", ")} \u53D1\u751F\u9519\u8BEF, \u8BF7\u67E5\u770B\u65E5\u5FD7`);let c=Array.prototype.concat.apply([],i.map(h=>s[h]||[]));c.forEach((h,g)=>{h.id=g,h._collectionName=n.name,h._collectionDisplayName=n.displayName});let f=await Ot.process(c,n.process||[],"JSON",{_collection:n});je(t,{original:c,processed:f})}catch(r){R.error(r.message??r),Te(t,new pr("INTERNAL_SERVER_ERROR","Failed to preview collection",`Reason: ${r.message??r}`))}}function Bw(e){e.post("/api/sort/subs",Yz),e.post("/api/sort/collections",Wz),e.post("/api/sort/artifacts",Xz),e.post("/api/sort/files",Jz)}function Yz(e,t){let r=e.body,n=R.read(Jt);n.sort((i,a)=>r.indexOf(i.name)-r.indexOf(a.name)),R.write(n,Jt),je(t,n)}function Wz(e,t){let r=e.body,n=R.read(Zt);n.sort((i,a)=>r.indexOf(i.name)-r.indexOf(a.name)),R.write(n,Zt),je(t,n)}function Xz(e,t){let r=e.body,n=R.read(Bt);n.sort((i,a)=>r.indexOf(i.name)-r.indexOf(a.name)),R.write(n,Bt),je(t,n)}function Jz(e,t){let r=e.body,n=R.read(Lt);n.sort((i,a)=>r.indexOf(i.name)-r.indexOf(a.name)),R.write(n,Lt),je(t,n)}function $w(e){e.post("/api/utils/node-info",Zz)}async function Zz(e,t){let r=e.body,n=e.query.lang||"zh-CN",i;try{i=Pp.URI.produce(r)}catch{}try{let s=await xs().get({url:`http://ip-api.com/json/${encodeURIComponent(`${r.server}`.trim().replace(/^\[/,"").replace(/\]$/,""))}?lang=${n}`,headers:{"User-Agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 12_4) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Safari/605.1.15"}}).then(u=>{let c=JSON.parse(u.body);if(c.status!=="success")throw new Error(c.message);return delete c.status,c});je(t,{shareUrl:i,info:s})}catch(a){Te(t,new el("FAILED_TO_GET_NODE_INFO","Failed to get node info",`Reason: ${a}`))}}function Rw(e){e.route("/api/proxy/parse").post(Qz),e.route("/api/rule/parse").post(eG)}function Qz(e,t){let{data:r,client:n,content:i,platform:a}=e.body;var s={};try{var u=Ot.parse(r??i),c=Ot.produce(u,n??a);s.par_res=c}catch(f){Te(t,f);return}je(t,s)}function eG(e,t){let{data:r,client:n,content:i,platform:a}=e.body;var s={};try{let c=Ec.parse(r??i);var u=Ec.produce(c,n??a);s.par_res=u}catch(c){Te(t,c);return}je(t,s)}function xw(){let port,host;R.env.isNode&&(port=eval("process.env.SUB_STORE_BACKEND_API_PORT")||3e3,host=eval("process.env.SUB_STORE_BACKEND_API_HOST")||"::");let $app=Ag({substore:R,port,host});if(R.env.isNode){let be_merge=eval("process.env.SUB_STORE_BACKEND_MERGE"),be_prefix=eval("process.env.SUB_STORE_BACKEND_PREFIX"),fe_be_path=eval("process.env.SUB_STORE_FRONTEND_BACKEND_PATH"),fe_path=eval("process.env.SUB_STORE_FRONTEND_PATH");if(be_prefix||be_merge){if(!fe_be_path.startsWith("/"))throw new Error("SUB_STORE_FRONTEND_BACKEND_PATH should start with /");be_merge&&(R.info("[BACKEND] MERGE mode is [ON]."),R.info(`[BACKEND && FRONTEND] ${host}:${port}`)),R.info(`[BACKEND PREFIX] ${host}:${port}${fe_be_path}`),$app.use((req,res,next)=>{if(req.path.startsWith(fe_be_path)){req.url=req.url.replace(fe_be_path,"")||"/",be_merge&&req.url.startsWith("/api/")&&(req.query.share="true"),next();return}let pathname=decodeURIComponent(req._parsedUrl.pathname)||"/";if(be_merge&&req.path.startsWith("/share/")&&req.query.token){if(req.method.toLowerCase()!=="get"){res.status(405).send("Method not allowed");return}if((R.read(ui)||[]).find(r=>r.token===req.query.token&&`/share/${r.type}/${r.name}`===pathname&&(r.exp==null||r.exp>Date.now()))){next();return}}if(be_merge&&fe_path&&req.path.indexOf("/",1)==-1){req.path.indexOf(".")==-1&&(req.url="/index.html");let express_=require("express"),mime_=require("mime-types"),path_=require("path"),staticFileMiddleware=express_.static(fe_path,{setHeaders:(e,t)=>{let r=mime_.contentType(path_.extname(t));r&&e.set("Content-Type",r)}});staticFileMiddleware(req,res,next);return}res.status(404).end()})}}if(gw($app),pw($app),Sw($app),Iw($app),Bw($app),fw($app),uw($app),mw($app),vw($app),ww($app),ow($app),$w($app),dw($app),Rw($app),$app.start(),R.env.isNode){let backend_sync_cron=eval("process.env.SUB_STORE_BACKEND_SYNC_CRON");if(backend_sync_cron){R.info(`[SYNC CRON] ${backend_sync_cron} enabled`);let{CronJob}=require("cron");new CronJob(backend_sync_cron,async function(){try{R.info(`[SYNC CRON] ${backend_sync_cron} started`),await cw(),R.info(`[SYNC CRON] ${backend_sync_cron} finished`)}catch(e){R.error(`[SYNC CRON] ${backend_sync_cron} error: ${e.message??e}`)}},null,!0)}else eval("process.env.SUB_STORE_BACKEND_CRON")&&R.error("[SYNC CRON] SUB_STORE_BACKEND_CRON \u5DF2\u5F03\u7528, \u8BF7\u4F7F\u7528 SUB_STORE_BACKEND_SYNC_CRON"),eval("process.env.SUB_STORE_CRON")&&R.error("[SYNC CRON] SUB_STORE_CRON \u5DF2\u5F03\u7528, \u8BF7\u4F7F\u7528 SUB_STORE_BACKEND_SYNC_CRON");let produce_cron=eval("process.env.SUB_STORE_PRODUCE_CRON");if(produce_cron){R.info(`[PRODUCE CRON] ${produce_cron} enabled`);let{CronJob}=require("cron");produce_cron.split(/\s*;\s*/).map(e=>{let[t,r,n]=e.split(/\s*,\s*/);new CronJob(t.trim(),async function(){try{R.info(`[PRODUCE CRON] ${r} ${n} ${t} started`),await vn({type:r,name:n}),R.info(`[PRODUCE CRON] ${r} ${n} ${t} finished`)}catch(i){R.error(`[PRODUCE CRON] ${r} ${n} ${t} error: ${i.message??i}`)}},null,!0)})}let backend_download_cron=eval("process.env.SUB_STORE_BACKEND_DOWNLOAD_CRON");if(backend_download_cron){R.info(`[DOWNLOAD CRON] ${backend_download_cron} enabled`);let{CronJob}=require("cron");new CronJob(backend_download_cron,async function(){try{R.info(`[DOWNLOAD CRON] ${backend_download_cron} started`),await zp("download"),R.info(`[DOWNLOAD CRON] ${backend_download_cron} finished`)}catch(e){R.error(`[DOWNLOAD CRON] ${backend_download_cron} error: ${e.message??e}`)}},null,!0)}let backend_upload_cron=eval("process.env.SUB_STORE_BACKEND_UPLOAD_CRON");if(backend_upload_cron){R.info(`[UPLOAD CRON] ${backend_upload_cron} enabled`);let{CronJob}=require("cron");new CronJob(backend_upload_cron,async function(){try{R.info(`[UPLOAD CRON] ${backend_upload_cron} started`),await zp("upload"),R.info(`[UPLOAD CRON] ${backend_upload_cron} finished`)}catch(e){R.error(`[UPLOAD CRON] ${backend_upload_cron} error: ${e.message??e}`)}},null,!0)}let mmdb_cron=eval("process.env.SUB_STORE_MMDB_CRON"),countryFile=eval("process.env.SUB_STORE_MMDB_COUNTRY_PATH"),countryUrl=eval("process.env.SUB_STORE_MMDB_COUNTRY_URL"),asnFile=eval("process.env.SUB_STORE_MMDB_ASN_PATH"),asnUrl=eval("process.env.SUB_STORE_MMDB_ASN_URL");if(mmdb_cron&&(countryFile&&countryUrl||asnFile&&asnUrl)){R.info(`[MMDB CRON] ${mmdb_cron} enabled`);let{CronJob}=require("cron");new CronJob(mmdb_cron,async function(){try{if(R.info(`[MMDB CRON] ${mmdb_cron} started`),countryFile&&countryUrl)try{R.info(`[MMDB CRON] downloading ${countryUrl} to ${countryFile}`),await Kh(countryUrl,countryFile)}catch(e){R.error(`[MMDB CRON] ${countryUrl} download failed: ${e.message??e}`)}if(asnFile&&asnUrl)try{R.info(`[MMDB CRON] downloading ${asnUrl} to ${asnFile}`),await Kh(asnUrl,asnFile)}catch(e){R.error(`[MMDB CRON] ${asnUrl} download failed: ${e.message??e}`)}R.info(`[MMDB CRON] ${mmdb_cron} finished`)}catch(e){R.error(`[MMDB CRON] ${mmdb_cron} error: ${e.message??e}`)}},null,!0)}let path=require("path"),fs=require("fs"),data_url=eval("process.env.SUB_STORE_DATA_URL"),data_url_post=eval("process.env.SUB_STORE_DATA_URL_POST"),fe_be_path=eval("process.env.SUB_STORE_FRONTEND_BACKEND_PATH"),fe_port=eval("process.env.SUB_STORE_FRONTEND_PORT")||3001,fe_host=eval("process.env.SUB_STORE_FRONTEND_HOST")||host||"::",fe_path=eval("process.env.SUB_STORE_FRONTEND_PATH"),fe_abs_path=path.resolve(fe_path||path.join(__dirname,"frontend")),be_merge=eval("process.env.SUB_STORE_BACKEND_MERGE");if(fe_path&&!be_merge){try{fs.accessSync(path.join(fe_abs_path,"index.html"))}catch(e){R.error(`[FRONTEND] index.html file not found in ${fe_abs_path}`)}let express_=require("express"),history=require("connect-history-api-fallback"),{createProxyMiddleware}=require("http-proxy-middleware"),app=express_(),staticFileMiddleware=express_.static(fe_path),be_api="/api/",be_download="/download/",be_share="/share/",be_download_rewrite="",be_api_rewrite="",be_share_rewrite=`${be_share}:type/:name`,prefix=eval("process.env.SUB_STORE_BACKEND_PREFIX")?fe_be_path:"";if(fe_be_path){if(!fe_be_path.startsWith("/"))throw new Error("SUB_STORE_FRONTEND_BACKEND_PATH should start with /");be_api_rewrite=`${fe_be_path==="/"?"":fe_be_path}${be_api}`,be_download_rewrite=`${fe_be_path==="/"?"":fe_be_path}${be_download}`,app.use(be_share_rewrite,createProxyMiddleware({target:`http://127.0.0.1:${port}${prefix}`,changeOrigin:!0,pathRewrite:async(e,t)=>{if(t.method.toLowerCase()!=="get")throw new Error("Method not allowed");if(!(R.read(ui)||[]).find(i=>i.token===t.query.token&&i.type===t.params.type&&i.name===t.params.name&&(i.exp==null||i.exp>Date.now())))throw new Error("Forbbiden");return t.originalUrl}})),app.use(be_api_rewrite,createProxyMiddleware({target:`http://127.0.0.1:${port}${prefix}${be_api}`,pathRewrite:async e=>e.includes("?")?`${e}&share=true`:`${e}?share=true`})),app.use(be_download_rewrite,createProxyMiddleware({target:`http://127.0.0.1:${port}${prefix}${be_download}`,changeOrigin:!0}))}app.use(staticFileMiddleware),app.use(history({disableDotRule:!0,verbose:!1})),app.use(staticFileMiddleware);let listener=app.listen(fe_port,fe_host,()=>{let{address:e,port:t}=listener.address();R.info(`[FRONTEND] ${e}:${t}`),fe_be_path&&(R.info(`[FRONTEND -> BACKEND] ${e}:${t}${be_api_rewrite} -> ${host}:${port}${prefix}${be_api}`),R.info(`[FRONTEND -> BACKEND] ${e}:${t}${be_download_rewrite} -> ${host}:${port}${prefix}${be_download}`),R.info(`[SHARE BACKEND] ${e}:${t}${be_share_rewrite}`))})}data_url&&(R.info(`[BACKEND] downloading data from ${data_url}`),un(data_url).then(async content=>{try{if(content=JSON.parse(ft.decode(content)),Object.keys(content.settings).length===0)throw new Error("\u5907\u4EFD\u6587\u4EF6\u5E94\u8BE5\u81F3\u5C11\u5305\u542B settings \u5B57\u6BB5")}catch(e){try{if(content=JSON.parse(content),Object.keys(content.settings).length===0)throw new Error("\u5907\u4EFD\u6587\u4EF6\u5E94\u8BE5\u81F3\u5C11\u5305\u542B settings \u5B57\u6BB5")}catch(t){throw R.error(`Gist \u5907\u4EFD\u6587\u4EF6\u6821\u9A8C\u5931\u8D25, \u65E0\u6CD5\u8FD8\u539F
Reason: ${t.message??t}`),new Error("Gist \u5907\u4EFD\u6587\u4EF6\u6821\u9A8C\u5931\u8D25, \u65E0\u6CD5\u8FD8\u539F")}}data_url_post&&(R.info("[BACKEND] executing post-processing script"),eval(data_url_post)),R.write(JSON.stringify(content,null,"  "),"#sub-store"),R.cache=content,R.persistCache(),Ku(),R.info(`[BACKEND] restored data from ${data_url}`)}).catch(e=>{throw R.error("[BACKEND] restore data failed"),console.error(e),e}))}}console.log(`
\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505
     Sub-Store -- v${jd}
\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505\u2505
`);Ku();xw();})();
/*! Bundled license information:

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

jsrsasign/lib/jsrsasign.js:
  (*! CryptoJS v3.1.2 core-fix.js
   * code.google.com/p/crypto-js
   * (c) 2009-2013 by Jeff Mott. All rights reserved.
   * code.google.com/p/crypto-js/wiki/License
   * THIS IS FIX of 'core.js' to fix Hmac issue.
   * https://code.google.com/p/crypto-js/issues/detail?id=84
   * https://crypto-js.googlecode.com/svn-history/r667/branches/3.x/src/core.js
   *)
  (*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
   *)
  (*! (c) Tom Wu, Kenji Urushima | http://www-cs-students.stanford.edu/~tjw/jsbn/
   *)
  (*! (c) Stefan Thomas | https://github.com/bitcoinjs/bitcoinjs-lib
   *)
  (*! Mike Samuel (c) 2009 | code.google.com/p/json-sans-eval
   *)
*/
